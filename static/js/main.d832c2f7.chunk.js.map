{"version":3,"sources":["../../src/index.ts","../../src/Footer.tsx","../../src/Topbar.tsx","../../src/xml.ts","../../src/api.ts","../../src/types.ts","../../src/schema.graphql.ts","../../../src/classes/Program.ts","../../../src/classes/Project.ts","../../../src/classes/errors.ts","../../src/Topbar.style.ts","../../src/WarehouseTags.tsx","../../src/ProgramChooser.tsx","../../src/constants.ts","components/NotAllowedModal.tsx","components/DownloadZipBtn.tsx","components/ProjectModal/RecurseTreeItem.tsx","components/ProjectModal/RecurseTreeItem.style.ts","components/ProjectModal/ProjectModal.tsx","components/ProjectModal/ProjectModal.style.ts","components/Search/SearchResult.tsx","components/Search/SearchResultLoading.tsx","components/Search/SearchResults.tsx","connectors/SearchResults.connect.tsx","config.ts","components/Search/SearchAdvancedRow.tsx","components/Search/SearchForm.tsx","connectors/SearchForm.connect.tsx","hooks/useProgram.ts","hooks/useProject.ts","connectors/App.connect.tsx","components/Admin/AdminRow.tsx","components/Admin/AdminList.tsx","components/Admin/AdminPanel.tsx","components/Admin/index.tsx","components/LoginScreen.tsx","themes.ts","components/AppWrapper.tsx","connectors/AppAuth.connect.tsx","serviceWorker.ts","index.tsx"],"names":["root","display","text","flexGrow","logo","a","input","exports","default","color","theme","palette","primary","contrastText","prog","role","react_1","createElement","_a","useStyles","makeStyles","marginLeft","spacing","titlebar","background","error","main","closeButton","name","paddingLeft","ProjectModal","onClose","program","classes","Dialog","open","maxWidth","fullWidth","className","DialogTitle","disableTypography","Typography","DialogContent","dividers","variant","component","DialogActions","Button","onClick","disabledButton","opacity","DownloadZipBtn","title","project","pendingSince","btnProps","downloadZipFile","btnRender","Tooltip","Fragment","paragraph","e","preventDefault","stopPropagation","startIcon","moment","fromNow","disableFocusRipple","disableRipple","disableTouchRipple","CircularProgress","size","thickness","treeItemRoot","backgroundColor","paper","treeItemContainer","treeItemText","padding","treeItemIcon","treeFile","treeFileContent","borderBottom","grey","treeFolder","treeFolderContent","treeFolderText","allowSelect","userSelect","cursor","RecurseTreeItem","item","fileDict","keyStr","fileClick","children","childNodes","map","c","idx","key","TreeItem","nodeId","content","label","lookup","path","filesize","parseInt","IconButton","endIcon","icon","margin","scrollPaper","alignItems","whiteSpace","overflow","textOverflow","marginBottom","position","right","top","normalIcon","documentIcon","red","photoIcon","purple","TerrainIcon","green","metaDisplay","flexFlow","marginTop","metaDisplayItem","flex","borderRadius","border","minWidth","prodChip","light","popOver","subHeader","width","downloadFile","pendingZips","useState","setPopover","id","iconMapping","pattern","classStr","files","reduce","acc","file","found","find","match","fileTree","treeIzeFilePaths","pType","products","p","projType","pTypeName","descriptionTag","Object","keys","meta","k","toLowerCase","clsx","aria-label","createdOn","format","updatedOn","tags","chipProps","totalSize","Divider","filter","indexOf","metaKey","idk","textComponent","Link","href","target","placement","TreeView","treeRoot","defaultExpanded","disableSelection","defaultCollapseIcon","defaultExpandIcon","ft","Popover","Boolean","anchorEl","anchorOrigin","vertical","horizontal","transformOrigin","itemText","spacer","itemLine","mm","odd","mmItem","height","marginRight","downloadText","textAlign","SearchResult","projObj","projObjMand","pathArr","pr","type","mandatoryMeta","po","val","ListItem","button","ListItemAvatar","Avatar","substr","Chip","mmFound","collections","style","SearchResultLoading","Skeleton","ListItemSecondaryAction","edge","disabled","SearchResults","data","loading","searchParams","setSearchParams","navigate","Paper","total","startIndex","nextToken","pageSize","limit","handlePaginationEvent","newIndex","List","Array","fill","x","projects","length","r","idr","Project","machineName","ResultsPaneConnect","getCurrentToken","url","isLoading","setIsLoading","results","setResults","errors","setErrors","log","useEffect","jwt","debug","search","then","searchData","catch","err","undefined","doEffect","domain","process","REACT_APP_DOMAIN","endpoints","graphql","appDefaults","mandatoryMetaColors","blue","orange","cyan","lime","brown","redirectUrl","URL","endsWith","window","location","origin","console","publicUrl","advancedLeft","advancedLeftCustom","advancedLeftOption","advancedText","advancedRight","advancedOp","advancedTextCustomName","advancedTextCustomValue","advancedOpName","advancedOpNamId","advancedInput","SearchAdvancedRow","row","options","changeHandler","mKey","mVal","setErr","option","o","hasSetVals","Allow","debouncedValidate","util","debounce","keyU","valU","String","allowRegex","AllowRegex","errs","forEach","regex","RegExp","push","handleKeyPress","keyCode","FormControl","Select","value","inputProps","onChange","event","MenuItem","oid","TextField","placeholder","defaultValue","onKeyDown","actionBar","advanced","iconButton","textField","projTypeLine","resultsNum","flexShrink","projTypeMenuItem","projTypeMenuItemSelected","projTypeMenuItemName","projTypeMenuItemNum","secondary","fontSize","SearchForm","projTotals","advancedVals","setAdvancedVals","searchParamsRef","useRef","searchMetaInputRef","submitSearch","params","advancedParams","newParams","current","newAdvanced","advFinal","v","submitParams","metaArr","JSON","stringify","metaStr","projectArr","values","allAdvancedOptions","sort","b","InputLabel","htmlFor","__all","prodName","prodId","autoFocus","inputRef","rid","ao","newRow","forceSubmit","slice","SearchFormConnect","setProjTotals","projTotalsRef","promiseChain","prod","Promise","resolve","useProgram","programs","onProgramChange","setProgram","currProgramRef","newProg","useProject","auth","projState","setProjState","currProjectStateRef","progMachineName","done","setTimeout","getProject","res","AppConnect","history","setPendingZips","pendingZipsRef","useCallback","isProjLoading","progName","projId","downloadFileFn","fkey","downloadUrl","checkZipFunc","apiDownloadZip","downloadZip","_","pickBy","Date","now","projectModal","useMemo","hasViewAccess","WarehouseRoleEnum","info","searchConnect","NotAllowedModal","logoSVG","status","containerProps","zIndex","left","google","typography","caption","dark","removeIcon","AdminRow","user","isSuperUser","onSwitchChange","swRole","swVal","Admin","username","Participant","Observer","superUser","SuperUser","divider","picture","alt","src","ListItemText","startsWith","email","FormControlLabel","control","Switch","checked","labelPlacement","flexDirection","description","list","formControl","AdminList","users","setSearch","dispUsers","searchArr","split","s","u","every","word","toLocaleLowerCase","Toolbar","Input","startAdornment","InputAdornment","rootContainer","paperContainer","instructions","sortUsers","ulist","localeCompare","AdminPanel","progUsers","nonUsers","isProgPublic","access","message","AdminConnect","userState","setUsersState","userStateRef","nextTokenRef","first","adminGetUsers","newToken","getUsers","myToken","accessToken","payload","incomingUsers","startFunc","userChange","userId","newRole","foundUser","Error","backupUser","assign","reset","myTimeout","adminUpdateUserPermissions","clearTimeout","updateUser","logoContainer","LoginScreen","signIn","home","indigo","homeDark","createMuiTheme","AppWrapper","signOut","noScroll","ThemeProvider","themes","topbar","signOutHandler","footer","version","AppAuthConnect","authInfo","setAuthInfo","programsState","setProgramsState","isAppPreLoading","setIsAppPreLoading","useHosted","useHistory","authCheck","authResp","authVals","region","userPoolId","userPool","userPoolWebClientId","clientId","mandatorySignIn","oauth","scope","redirectSignIn","toString","redirectSignOut","responseType","storageUrl","localStorage","getItem","localUrl","pathname","isAuthenticated","isAuthComplete","setItem","removeItem","getPrograms","allPrograms","appWrapProps","render","props","isLocalhost","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","devSetup","require","ReactDOM","basename","document","getElementById","addEventListener","fetch","headers","response","contentType","get","ready","unregister","reload","checkValidServiceWorker","pushState","storage","persist","granted","warn"],"mappings":"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","file":"static/js/main.d832c2f7.chunk.js","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./xml\"), exports);\n__exportStar(require(\"./api\"), exports);\n__exportStar(require(\"./types\"), exports);\nvar schema_graphql_1 = require(\"./schema.graphql\");\nObject.defineProperty(exports, \"typeDefs\", { enumerable: true, get: function () { return schema_graphql_1.default; } });\n__exportStar(require(\"./classes/Program\"), exports);\n__exportStar(require(\"./classes/Project\"), exports);\n__exportStar(require(\"./classes/errors\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar Container_1 = __importDefault(require(\"@material-ui/core/Container\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar useStyles = styles_1.makeStyles(function () { return ({\n    root: {\n        display: 'flex'\n    },\n    text: {\n        flexGrow: 1\n    },\n    logo: {}\n}); });\nvar Footer = function (_a) {\n    var version = _a.version;\n    var classes = useStyles();\n    return (react_1.default.createElement(Container_1.default, { className: classes.root, maxWidth: \"md\" },\n        version && (react_1.default.createElement(Typography_1.default, { component: \"div\", className: classes.text, color: \"textSecondary\", variant: \"overline\" },\n            \"v.\",\n            version)),\n        react_1.default.createElement(\"img\", { className: classes.logo, alt: \"footer\", src: process.env.PUBLIC_URL + \"/cc-watermarks-riverscapes_orig.png\" })));\n};\nexports.default = Footer;\n//# sourceMappingURL=Footer.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isDisabled = void 0;\nvar react_1 = __importStar(require(\"react\"));\nvar Toolbar_1 = __importDefault(require(\"@material-ui/core/Toolbar\"));\nvar AppBar_1 = __importDefault(require(\"@material-ui/core/AppBar\"));\nvar Divider_1 = __importDefault(require(\"@material-ui/core/Divider\"));\nvar MenuItem_1 = __importDefault(require(\"@material-ui/core/MenuItem\"));\nvar Menu_1 = __importDefault(require(\"@material-ui/core/Menu\"));\nvar SupervisorAccount_1 = __importDefault(require(\"@material-ui/icons/SupervisorAccount\"));\nvar ListAlt_1 = __importDefault(require(\"@material-ui/icons/ListAlt\"));\nvar IconButton_1 = __importDefault(require(\"@material-ui/core/IconButton\"));\nvar MoreVert_1 = __importDefault(require(\"@material-ui/icons/MoreVert\"));\nvar common_1 = require(\"@riverscapes/common\");\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar core_1 = require(\"@material-ui/core\");\nvar Topbar_style_1 = __importDefault(require(\"./Topbar.style\"));\nvar useStyles = styles_1.makeStyles(Topbar_style_1.default);\nfunction isDisabled(prog) {\n    if (prog.meta && prog.meta.access && prog.meta.access === 'PUBLIC')\n        return false;\n    return prog.role === null;\n}\nexports.isDisabled = isDisabled;\nvar TopBar = function (_a) {\n    var title = _a.title, program = _a.program, programs = _a.programs, signOutHandler = _a.signOutHandler, history = _a.history;\n    var classes = useStyles();\n    var _b = react_1.useState(null), mobileMoreAnchorEl = _b[0], setMobileMoreAnchorEl = _b[1];\n    var handleMobileMenuClose = function () { return setMobileMoreAnchorEl(null); };\n    var handleNavigate = function (nm) {\n        handleMobileMenuClose();\n        if (history)\n            history.push(\"/\" + nm.machineName);\n    };\n    var isAdmin = history && history.location.pathname.indexOf('/admin') > -1;\n    var handleAdmin = function () {\n        if (history) {\n            if (isAdmin)\n                history.push(\"/\" + program.machineName);\n            else\n                history.push(\"/\" + program.machineName + \"/admin\");\n        }\n    };\n    var handleMobileMenuOpen = function (event) { return setMobileMoreAnchorEl(event.currentTarget); };\n    var renderMobileMenu = (signOutHandler || programs) && (react_1.default.createElement(Menu_1.default, { anchorEl: mobileMoreAnchorEl, anchorOrigin: { vertical: 'top', horizontal: 'right' }, keepMounted: true, transformOrigin: { vertical: 'top', horizontal: 'right' }, open: !!mobileMoreAnchorEl, onClose: handleMobileMenuClose },\n        programs && (react_1.default.createElement(MenuItem_1.default, null,\n            react_1.default.createElement(core_1.Typography, { variant: \"overline\", onClick: function () { return history.push(\"/\"); } }, \"Programs\"))),\n        programs && react_1.default.createElement(Divider_1.default, null),\n        programs &&\n            programs.length > 0 &&\n            programs.map(function (prog, idx) { return (react_1.default.createElement(MenuItem_1.default, { disabled: (program && program.machineName === prog.machineName) || isDisabled(prog), key: \"prog-\" + idx, onClick: function () { return handleNavigate(prog); }, value: prog.machineName }, prog.name)); }),\n        signOutHandler && react_1.default.createElement(Divider_1.default, null),\n        signOutHandler && react_1.default.createElement(MenuItem_1.default, { onClick: signOutHandler }, \"Log Out\")));\n    var showAdmin = program && (program.role === common_1.WarehouseRoleEnum.Admin || program.role === common_1.WarehouseRoleEnum.SuperUser);\n    return (react_1.default.createElement(react_1.default.Fragment, null,\n        react_1.default.createElement(AppBar_1.default, { position: \"static\" },\n            react_1.default.createElement(Toolbar_1.default, { className: classes.root, disableGutters: true },\n                react_1.default.createElement(\"a\", { href: \"http://riverscapes.xyz/\" },\n                    react_1.default.createElement(\"img\", { className: classes.logo, src: 'https://riverscapes.xyz/assets/images/RiverscapesLogo.png', alt: \"logo\" })),\n                program ? (react_1.default.createElement(\"div\", null,\n                    react_1.default.createElement(core_1.Typography, { variant: \"subtitle1\" }, program.name),\n                    react_1.default.createElement(core_1.Typography, { variant: \"caption\" }, title))) : (react_1.default.createElement(core_1.Typography, { variant: \"subtitle1\" }, title)),\n                react_1.default.createElement(\"div\", { className: classes.spacer }),\n                showAdmin && (react_1.default.createElement(IconButton_1.default, { \"aria-haspopup\": \"true\", onClick: handleAdmin, color: \"inherit\" }, isAdmin ? react_1.default.createElement(ListAlt_1.default, null) : react_1.default.createElement(SupervisorAccount_1.default, null))),\n                (signOutHandler || programs) && (react_1.default.createElement(IconButton_1.default, { \"aria-haspopup\": \"true\", onClick: handleMobileMenuOpen, color: \"inherit\" },\n                    react_1.default.createElement(MoreVert_1.default, null))))),\n        renderMobileMenu));\n};\nexports.default = TopBar;\n//# sourceMappingURL=Topbar.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.verifyMeta = exports.augmentXML = exports.parseProjectXML = exports.parseProgramXML = exports.getXML = void 0;\nvar xml2js_1 = require(\"xml2js\");\nvar axios_1 = __importDefault(require(\"axios\"));\nvar common_1 = require(\"@northarrowresearch/common\");\nvar _1 = require(\"./\");\nvar xmldom_1 = __importDefault(require(\"xmldom\"));\nfunction getXML(url) {\n    return __awaiter(this, void 0, void 0, function () {\n        var result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, axios_1.default({\n                        url: url,\n                        method: 'get'\n                    })];\n                case 1:\n                    result = _a.sent();\n                    if (!result.data)\n                        throw new Error('Error retrieving XML file');\n                    return [2, result.data];\n            }\n        });\n    });\n}\nexports.getXML = getXML;\nfunction parseMeta(metaArr) {\n    return metaArr.reduce(function (acc, _a) {\n        var _b;\n        var val = _a.val, name = _a.attr.name;\n        return (__assign(__assign({}, acc), (_b = {}, _b[name] = val && val.trim(), _b)));\n    }, {});\n}\nfunction _recursePaths(xmlDom, products, groups, collections) {\n    var HierarchyNode = xmlDom.getElementsByTagName('Hierarchy')[0];\n    var productsInHierarchy = Array.from(HierarchyNode.getElementsByTagName('Product'));\n    var retVal = [];\n    productsInHierarchy.forEach(function (prodEl) {\n        var pathArr = [];\n        var ref = prodEl.getAttribute('ref');\n        var product = products.find(function (o) { return o.id === ref; });\n        if (!product)\n            throw new Error(\"Product not found for ref='\" + ref + \"'\");\n        var currEl = prodEl.parentNode;\n        var _loop_1 = function () {\n            var ref_1 = currEl.getAttribute('ref');\n            var tag = currEl.tagName;\n            var def = tag === 'Group' ? groups.find(function (g) { return g.id === ref_1; }) : collections.find(function (g) { return g.id === ref_1; });\n            var folder = def.folder, name_1 = def.name;\n            pathArr.push({\n                type: tag,\n                id: ref_1,\n                folder: folder,\n                name: name_1\n            });\n            currEl = currEl.parentNode;\n        };\n        while (currEl && currEl.parentNode && currEl.tagName !== 'Hierarchy') {\n            _loop_1();\n        }\n        retVal.push(__assign(__assign({}, product), { pathArr: pathArr.reverse() }));\n    });\n    return retVal;\n}\nfunction parseProgramXML(rawXML) {\n    return __awaiter(this, void 0, void 0, function () {\n        var parsedProgramJSON, converted, programRaw, _a, apiUrl, projectFile, projectXSDs, meta, collections, groups, productsRaw, xmlDom, products;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, xml2js_1.parseStringPromise(rawXML).catch(function (err) {\n                        throw new _1.ValidationError('Error parsing XML file. This likely means a broken or unclosed tag.', [err.message]);\n                    })];\n                case 1:\n                    parsedProgramJSON = _b.sent();\n                    converted = common_1.util.arrToObj(parsedProgramJSON);\n                    programRaw = converted.Program;\n                    _a = parseMeta(programRaw.MetaData), apiUrl = _a.apiUrl, projectFile = _a.projectFile, projectXSDs = _a.projectXSDs, meta = __rest(_a, [\"apiUrl\", \"projectFile\", \"projectXSDs\"]);\n                    collections = programRaw.Definitions[0].Collections.map(function (_a) {\n                        var attr = _a.attr, Allow = _a.Allow, AllowRegex = _a.AllowRegex;\n                        return (__assign(__assign({}, attr), { Allow: Allow ? (Array.isArray(Allow) ? Allow.map(function (a) { return a.attr; }) : [Allow]) : undefined, AllowRegex: AllowRegex\n                                ? Array.isArray(AllowRegex)\n                                    ? AllowRegex.map(function (a) { return a.attr.pattern; })\n                                    : [AllowRegex.pattern]\n                                : undefined }));\n                    });\n                    groups = programRaw.Definitions[0].Groups.map(function (a) { return a.attr; });\n                    productsRaw = programRaw.Definitions[0].Products.map(function (a) { return a.attr; });\n                    xmlDom = new xmldom_1.default.DOMParser().parseFromString(rawXML);\n                    products = _recursePaths(xmlDom, productsRaw, groups, collections);\n                    return [2, Promise.resolve(new _1.Program({\n                            name: programRaw.Name,\n                            machineName: programRaw.MachineName,\n                            apiUrl: apiUrl,\n                            projectXSDs: projectXSDs,\n                            projectFile: projectFile,\n                            meta: meta,\n                            products: products,\n                            collections: collections,\n                            groups: groups\n                        }))];\n            }\n        });\n    });\n}\nexports.parseProgramXML = parseProgramXML;\nfunction parseProjectXML(rawXML) {\n    return __awaiter(this, void 0, void 0, function () {\n        var parsedProjectJSON, converted, retVal, whMeta, meta;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, xml2js_1.parseStringPromise(rawXML).catch(function (err) {\n                        throw new _1.ValidationError('Error parsing XML file. This likely means a broken or unclosed tag.', [err.message]);\n                    })];\n                case 1:\n                    parsedProjectJSON = _a.sent();\n                    converted = common_1.util.arrToObj(parsedProjectJSON);\n                    retVal = converted.Project;\n                    whMeta = {};\n                    if (retVal.Warehouse) {\n                        whMeta = parseMeta(retVal.Warehouse);\n                    }\n                    meta = {};\n                    if (retVal.MetaData) {\n                        meta = parseMeta(retVal.MetaData);\n                    }\n                    return [2, Promise.resolve({\n                            id: whMeta.id,\n                            name: retVal.Name,\n                            projType: retVal.ProjectType,\n                            Warehouse: whMeta,\n                            program: whMeta.program,\n                            meta: meta,\n                            tags: _1.Project.parseTagString(whMeta.tags),\n                            rawXML: rawXML\n                        })];\n            }\n        });\n    });\n}\nexports.parseProjectXML = parseProjectXML;\nfunction augmentXML(newMeta, xmlfile) {\n    var parsed = new xmldom_1.default.DOMParser().parseFromString(xmlfile);\n    var metadata = parsed.getElementsByTagName('MetaData')[0];\n    if (parsed.getElementsByTagName('Warehouse').length > 0) {\n        parsed.removeChild(parsed.getElementsByTagName('Warehouse')[0]);\n    }\n    var warehouseNode = parsed.createElement('Warehouse');\n    Object.keys(newMeta).forEach(function (k) {\n        var mNode = parsed.createElement('Meta');\n        mNode.setAttribute('name', k);\n        mNode.appendChild(parsed.createTextNode(newMeta[k]));\n        warehouseNode.appendChild(mNode);\n    });\n    parsed.insertBefore(warehouseNode, metadata);\n    var formatted = new xmldom_1.default.XMLSerializer().serializeToString(parsed);\n    return formatted;\n}\nexports.augmentXML = augmentXML;\nfunction verifyMeta(projType, projectMeta, program) {\n    var projectDef = program.products.find(function (p) { return p.id === projType; });\n    if (!projectDef) {\n        throw new Error(\"No project type '\" + projType + \"' found in program '\" + program.name + \"'\");\n    }\n    var collectionathArrs = projectDef.pathArr.filter(function (f) { return f.type === 'Collection'; });\n    return collectionathArrs.map(function (arrEl) { return ({\n        name: arrEl.name,\n        value: projectMeta[arrEl.name]\n    }); });\n}\nexports.verifyMeta = verifyMeta;\n//# sourceMappingURL=xml.js.map","\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.adminGetUsers = exports.adminUpdateUserPermissions = exports.search = exports.deleteProject = exports.downloadZipFile = exports.downloadFile = exports.getUploadUrls = exports.getProject = exports.getProgram = exports.getPrograms = exports.validateProjectXML = exports.authCheck = exports.apiCall = void 0;\nvar axios_1 = __importDefault(require(\"axios\"));\nvar graphql_1 = require(\"graphql\");\nvar graphql_tag_1 = __importDefault(require(\"graphql-tag\"));\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nvar _1 = require(\"./\");\nexports.apiCall = function (url, jwt, query, variables) {\n    return axios_1.default({\n        url: url,\n        method: 'post',\n        headers: jwt\n            ? {\n                Authorization: \"Bearer \" + jwt\n            }\n            : null,\n        data: {\n            query: graphql_1.print(query),\n            variables: variables\n        }\n    })\n        .then(function (_a) {\n        var axiosData = _a.data;\n        return axiosData;\n    })\n        .catch(function (err) {\n        if (err.response && err.response.status === 404) {\n            throw new Error(\"API Url not found: \" + url);\n        }\n        else if (err.code && err.code === 'ECONNREFUSED') {\n            throw new Error(\"Connection refused. Could not contact: '\" + url + \"'\");\n        }\n        else {\n            loglevel_1.default.error('apiCall Error', { url: url, jwt: jwt, query: graphql_1.print(query), variables: variables, err: err });\n            throw err;\n        }\n    });\n};\nfunction authCheck(url, jwt) {\n    return exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n            query AuthCall {\\n                auth {\\n                    loggedIn\\n                    userPool\\n                    clientId\\n                    region\\n                    domain\\n                }\\n            }\\n        \"], [\"\\n            query AuthCall {\\n                auth {\\n                    loggedIn\\n                    userPool\\n                    clientId\\n                    region\\n                    domain\\n                }\\n            }\\n        \"]))), {});\n}\nexports.authCheck = authCheck;\nfunction validateProjectXML(url, jwt, xml, projType, program) {\n    return exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n            query validateProject($xml: String!, $projType: String!, $program: String!) {\\n                validate(xml: $xml, projType: $projType, program: $program) {\\n                    result\\n                    xmlErrors\\n                }\\n            }\\n        \"], [\"\\n            query validateProject($xml: String!, $projType: String!, $program: String!) {\\n                validate(xml: $xml, projType: $projType, program: $program) {\\n                    result\\n                    xmlErrors\\n                }\\n            }\\n        \"]))), { xml: xml, program: program, projType: projType });\n}\nexports.validateProjectXML = validateProjectXML;\nfunction getPrograms(url, jwt) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n            query programs {\\n                programs {\\n                    name\\n                    machineName\\n                    apiUrl\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"], [\"\\n            query programs {\\n                programs {\\n                    name\\n                    machineName\\n                    apiUrl\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"])))).then(function (gqlReturn) {\n                    return __assign(__assign({}, gqlReturn), { data: {\n                            programs: gqlReturn.data.programs.map(_1.Program.fromGraphQL)\n                        } });\n                })];\n        });\n    });\n}\nexports.getPrograms = getPrograms;\nfunction getProgram(url, jwt, programName) {\n    return __awaiter(this, void 0, void 0, function () {\n        var _a, program, errors;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n            query program($program: String!) {\\n                program(program: $program) {\\n                    name\\n                    machineName\\n                    apiUrl\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"], [\"\\n            query program($program: String!) {\\n                program(program: $program) {\\n                    name\\n                    machineName\\n                    apiUrl\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"]))), { program: programName })];\n                case 1:\n                    _a = _b.sent(), program = _a.data.program, errors = _a.errors;\n                    return [2, {\n                            data: {\n                                program: _1.Program.fromGraphQL(program)\n                            },\n                            errors: errors\n                        }];\n            }\n        });\n    });\n}\nexports.getProgram = getProgram;\nfunction getProject(url, jwt, id, program) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n            query getProject($id: ID!, $program: String!) {\\n                project(id: $id, program: $program) {\\n                    id\\n                    name\\n                    projType\\n                    totalSize\\n                    program\\n                    tags\\n                    createdBy\\n                    updatedBy\\n                    createdOn\\n                    updatedOn\\n                    meta\\n                    files {\\n                        key\\n                        md5\\n                        size\\n                        downloadUrl\\n                    }\\n                }\\n            }\\n        \"], [\"\\n            query getProject($id: ID!, $program: String!) {\\n                project(id: $id, program: $program) {\\n                    id\\n                    name\\n                    projType\\n                    totalSize\\n                    program\\n                    tags\\n                    createdBy\\n                    updatedBy\\n                    createdOn\\n                    updatedOn\\n                    meta\\n                    files {\\n                        key\\n                        md5\\n                        size\\n                        downloadUrl\\n                    }\\n                }\\n            }\\n        \"]))), { id: id, program: program }).then(function (gqlReturn) { return (__assign(__assign({}, gqlReturn), { data: {\n                        project: _1.Project.fromGraphQL(gqlReturn.data.project)\n                    } })); })];\n        });\n    });\n}\nexports.getProject = getProject;\nfunction getUploadUrls(url, jwt, id, fileList, projectType, program) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n            query requestUploadProject($id: ID, $files: [String!], $program: String!, $projectType: String!) {\\n                requestUpload(id: $id, files: $files, program: $program, projectType: $projectType) {\\n                    id\\n                    uploadUrls {\\n                        url\\n                        fields\\n                        origPath\\n                    }\\n                }\\n            }\\n        \"], [\"\\n            query requestUploadProject($id: ID, $files: [String!], $program: String!, $projectType: String!) {\\n                requestUpload(id: $id, files: $files, program: $program, projectType: $projectType) {\\n                    id\\n                    uploadUrls {\\n                        url\\n                        fields\\n                        origPath\\n                    }\\n                }\\n            }\\n        \"]))), { id: id, files: fileList, projectType: projectType, program: program })];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.getUploadUrls = getUploadUrls;\nfunction downloadFile(url, jwt, projType, program, id, filePath) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_7 || (templateObject_7 = __makeTemplateObject([\"\\n            query downloadFileQuery($program: String!, $id: ID!, $projType: String!, $filePath: String!) {\\n                downloadFile(program: $program, id: $id, projType: $projType, filePath: $filePath) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                }\\n            }\\n        \"], [\"\\n            query downloadFileQuery($program: String!, $id: ID!, $projType: String!, $filePath: String!) {\\n                downloadFile(program: $program, id: $id, projType: $projType, filePath: $filePath) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                }\\n            }\\n        \"]))), { projType: projType, program: program, id: id, filePath: filePath })];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.downloadFile = downloadFile;\nfunction downloadZipFile(url, jwt, projType, program, id) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_8 || (templateObject_8 = __makeTemplateObject([\"\\n            query downloadZipFileQuery($program: String!, $id: ID!, $projType: String!) {\\n                downloadZip(program: $program, id: $id, projType: $projType) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                    pendingSince\\n                }\\n            }\\n        \"], [\"\\n            query downloadZipFileQuery($program: String!, $id: ID!, $projType: String!) {\\n                downloadZip(program: $program, id: $id, projType: $projType) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                    pendingSince\\n                }\\n            }\\n        \"]))), { projType: projType, program: program, id: id })];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.downloadZipFile = downloadZipFile;\nfunction deleteProject(url, jwt, id, program) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_9 || (templateObject_9 = __makeTemplateObject([\"\\n            mutation deleteProject($id: ID!, $program: String!) {\\n                deleteProject(id: $id, program: $program)\\n            }\\n        \"], [\"\\n            mutation deleteProject($id: ID!, $program: String!) {\\n                deleteProject(id: $id, program: $program)\\n            }\\n        \"]))), { program: program, id: id })];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.deleteProject = deleteProject;\nfunction search(url, jwt, program, params) {\n    return __awaiter(this, void 0, void 0, function () {\n        var res, _a, nextToken, projects, total;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_10 || (templateObject_10 = __makeTemplateObject([\"\\n            query searchQuery(\\n                $program: String!\\n                $projType: String\\n                $nameStr: String\\n                $metaStr: String\\n                $metaArr: String\\n                $tags: String\\n                $limit: Int\\n                $nextToken: Int\\n            ) {\\n                search(\\n                    program: $program\\n                    projType: $projType\\n                    nameStr: $nameStr\\n                    metaStr: $metaStr\\n                    metaArr: $metaArr\\n                    tags: $tags\\n                    limit: $limit\\n                    nextToken: $nextToken\\n                ) {\\n                    projects {\\n                        id\\n                        name\\n                        projType\\n                        program\\n                        tags\\n                        totalSize\\n                        createdBy\\n                        updatedBy\\n                        createdOn\\n                        updatedOn\\n                        meta\\n                        score\\n                    }\\n                    nextToken\\n                    total\\n                }\\n            }\\n        \"], [\"\\n            query searchQuery(\\n                $program: String!\\n                $projType: String\\n                $nameStr: String\\n                $metaStr: String\\n                $metaArr: String\\n                $tags: String\\n                $limit: Int\\n                $nextToken: Int\\n            ) {\\n                search(\\n                    program: $program\\n                    projType: $projType\\n                    nameStr: $nameStr\\n                    metaStr: $metaStr\\n                    metaArr: $metaArr\\n                    tags: $tags\\n                    limit: $limit\\n                    nextToken: $nextToken\\n                ) {\\n                    projects {\\n                        id\\n                        name\\n                        projType\\n                        program\\n                        tags\\n                        totalSize\\n                        createdBy\\n                        updatedBy\\n                        createdOn\\n                        updatedOn\\n                        meta\\n                        score\\n                    }\\n                    nextToken\\n                    total\\n                }\\n            }\\n        \"]))), __assign(__assign({}, params), { program: program }))];\n                case 1:\n                    res = _b.sent();\n                    if (!res.data)\n                        return [2, { errors: res.errors }];\n                    else {\n                        _a = res.data.search || {}, nextToken = _a.nextToken, projects = _a.projects, total = _a.total;\n                        return [2, {\n                                errors: res.errors,\n                                data: {\n                                    search: {\n                                        projects: Array.isArray(projects) ? projects.map(_1.Project.fromGraphQL) : projects,\n                                        nextToken: nextToken,\n                                        total: total\n                                    }\n                                }\n                            }];\n                    }\n                    return [2];\n            }\n        });\n    });\n}\nexports.search = search;\nfunction adminUpdateUserPermissions(url, jwt, id, program, permission) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_11 || (templateObject_11 = __makeTemplateObject([\"\\n            mutation project($id: ID!, $program: String!, $permission: String) {\\n                updateUser(id: $id, program: $program, permission: $permission) {\\n                    email\\n                    name\\n                    picture\\n                    username\\n                    createdOn\\n                    updatedOn\\n                    role\\n                }\\n            }\\n        \"], [\"\\n            mutation project($id: ID!, $program: String!, $permission: String) {\\n                updateUser(id: $id, program: $program, permission: $permission) {\\n                    email\\n                    name\\n                    picture\\n                    username\\n                    createdOn\\n                    updatedOn\\n                    role\\n                }\\n            }\\n        \"]))), { program: program, id: id, permission: permission })];\n                case 1:\n                    response = _a.sent();\n                    if (!response.data)\n                        return [2, { errors: response.errors }];\n                    else {\n                        return [2, {\n                                errors: response.errors,\n                                data: {\n                                    updateUser: response.data.updateUser\n                                        ? __assign(__assign({}, response.data.updateUser), { createdOn: parseInt(response.data.updateUser.createdOn, 10), updatedOn: parseInt(response.data.updateUser.updatedOn, 10) }) : null\n                                }\n                            }];\n                    }\n                    return [2];\n            }\n        });\n    });\n}\nexports.adminUpdateUserPermissions = adminUpdateUserPermissions;\nfunction adminGetUsers(url, jwt, program, limit, nextToken) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response, _a, nextTokenNEW, users;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, exports.apiCall(url, jwt, graphql_tag_1.default(templateObject_12 || (templateObject_12 = __makeTemplateObject([\"\\n            query getUsers($program: String!, $limit: Int, $nextToken: String) {\\n                getUsers(program: $program, limit: $limit, nextToken: $nextToken) {\\n                    users {\\n                        email\\n                        name\\n                        picture\\n                        username\\n                        createdOn\\n                        updatedOn\\n                        role\\n                    }\\n                    nextToken\\n                }\\n            }\\n        \"], [\"\\n            query getUsers($program: String!, $limit: Int, $nextToken: String) {\\n                getUsers(program: $program, limit: $limit, nextToken: $nextToken) {\\n                    users {\\n                        email\\n                        name\\n                        picture\\n                        username\\n                        createdOn\\n                        updatedOn\\n                        role\\n                    }\\n                    nextToken\\n                }\\n            }\\n        \"]))), { program: program, limit: limit, nextToken: nextToken })];\n                case 1:\n                    response = _b.sent();\n                    if (!response.data)\n                        return [2, { errors: response.errors }];\n                    else {\n                        _a = response.data.getUsers || {}, nextTokenNEW = _a.nextToken, users = _a.users;\n                        return [2, {\n                                errors: response.errors,\n                                data: {\n                                    getUsers: {\n                                        users: Array.isArray(users)\n                                            ? users.map(function (u) { return (__assign(__assign({}, u), { createdOn: parseInt(u.createdOn, 10), updatedOn: parseInt(u.updatedOn, 10) })); })\n                                            : users,\n                                        nextToken: nextTokenNEW\n                                    }\n                                }\n                            }];\n                    }\n                    return [2];\n            }\n        });\n    });\n}\nexports.adminGetUsers = adminGetUsers;\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9, templateObject_10, templateObject_11, templateObject_12;\n//# sourceMappingURL=api.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WarehouseRoleEnum = exports.FieldTypeEnum = void 0;\nvar FieldTypeEnum;\n(function (FieldTypeEnum) {\n    FieldTypeEnum[\"string\"] = \"S\";\n    FieldTypeEnum[\"number\"] = \"N\";\n    FieldTypeEnum[\"boolean\"] = \"BOOL\";\n    FieldTypeEnum[\"stringArr\"] = \"SARR\";\n    FieldTypeEnum[\"numberArr\"] = \"NARR\";\n})(FieldTypeEnum = exports.FieldTypeEnum || (exports.FieldTypeEnum = {}));\nvar WarehouseRoleEnum;\n(function (WarehouseRoleEnum) {\n    WarehouseRoleEnum[\"SuperUser\"] = \"SUPER\";\n    WarehouseRoleEnum[\"Admin\"] = \"ADMIN\";\n    WarehouseRoleEnum[\"Observer\"] = \"OBSERVER\";\n    WarehouseRoleEnum[\"Participant\"] = \"PARTICIPANT\";\n})(WarehouseRoleEnum = exports.WarehouseRoleEnum || (exports.WarehouseRoleEnum = {}));\n//# sourceMappingURL=types.js.map","\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar graphql_tag_1 = __importDefault(require(\"graphql-tag\"));\nvar typeDefs = graphql_tag_1.default(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n    # Check out the cheat sheet:\\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\\n\\n    schema {\\n        query: Query\\n        mutation: Mutation\\n    }\\n\\n    type Query {\\n        # Get a project and associated metadata\\n        auth: AuthParams\\n\\n        project(id: ID!, program: String!): Project\\n        projects(program: String!, projType: String, limit: Int, nextToken: String): PaginatedProjects\\n\\n        program(program: String!): Program\\n        programs: [Program]\\n\\n        downloadFile(program: String!, id: ID!, projType: String!, filePath: String!): FileDownloadMeta\\n\\n        downloadZip(program: String!, id: ID!, projType: String!): FileDownloadMeta\\n\\n        # Request an upload start. Writes a manifest file on the upload bucket\\n        # and creates upload urls for everything\\n        requestUpload(id: ID, files: [String!], program: String!, projectType: String!): FileUpload\\n\\n        search(\\n            program: String!\\n            projType: String\\n            nameStr: String\\n            metaStr: String\\n            metaArr: String\\n            tags: String\\n            limit: Int\\n            nextToken: Int\\n        ): PaginatedSearchResults\\n\\n        validate(xml: String!, projType: String!, program: String!): Validation\\n\\n        getUsers(program: String!, limit: Int, nextToken: String): PaginatedUsers\\n    }\\n\\n    # this schema allows the following mutation:\\n    type Mutation {\\n        # signal a deletion of a project\\n        deleteProject(id: ID!, program: String!): ID!\\n        updateUser(id: ID!, program: String!, permission: String): User\\n    }\\n\\n    type User {\\n        email: String\\n        name: String\\n        picture: String\\n        username: String!\\n        createdOn: String\\n        updatedOn: String\\n        role: String\\n    }\\n\\n    type PaginatedUsers {\\n        users: [User]\\n        nextToken: String\\n    }\\n\\n    type Validation {\\n        result: Boolean\\n        xmlErrors: [String]\\n    }\\n\\n    type AuthParams {\\n        loggedIn: Boolean\\n        userPool: String\\n        clientId: String\\n        region: String\\n        domain: String\\n    }\\n\\n    interface ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n    }\\n\\n    type Project implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        files: [FileDownloadMeta]\\n    }\\n\\n    type ProjectSearchResult implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        score: Float\\n        files: [FileDownloadMeta]\\n    }\\n\\n    # This is mostly just JSON that's stringified\\n    type Product {\\n        id: ID!\\n        name: String!\\n        folder: String\\n        # Stringified JSON Array:\\n        pathArr: String\\n    }\\n    type Group {\\n        id: ID!\\n        name: String!\\n        folder: String\\n    }\\n    type NamedAllow {\\n        id: ID!\\n        name: String!\\n        aliases: String\\n        folder: String\\n    }\\n    type Collection {\\n        id: ID!\\n        name: String!\\n        AllowRegex: [String]\\n        Allow: [NamedAllow]\\n    }\\n    type Program {\\n        name: String\\n        machineName: String\\n        apiUrl: String\\n        projectXSDs: String\\n        projectFile: String\\n        meta: String\\n        groups: [Group]\\n        collections: [Collection]\\n        products: [Product]\\n        hierarchy: String\\n        role: String\\n    }\\n\\n    type FileDownloadMeta {\\n        key: String!\\n        md5: String!\\n        size: String\\n        contentType: String\\n        downloadUrl: String!\\n        pendingSince: String\\n    }\\n\\n    type FileUpload {\\n        id: ID!\\n        uploadUrls: [UploadUrl]\\n    }\\n\\n    type UploadUrl {\\n        url: String\\n        fields: String\\n        origPath: String\\n    }\\n\\n    type FileUploadMeta {\\n        key: String!\\n        downloadUrl: String!\\n    }\\n\\n    # Series Connection allows us to implement pagination easily\\n    type PaginatedProjects {\\n        projects: [Project]\\n        nextToken: String\\n    }\\n\\n    type PaginatedSearchResults {\\n        projects: [ProjectSearchResult]\\n        nextToken: Int\\n        total: Int\\n    }\\n\\n    type NewProject {\\n        id: ID!\\n    }\\n\"], [\"\\n    # Check out the cheat sheet:\\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\\n\\n    schema {\\n        query: Query\\n        mutation: Mutation\\n    }\\n\\n    type Query {\\n        # Get a project and associated metadata\\n        auth: AuthParams\\n\\n        project(id: ID!, program: String!): Project\\n        projects(program: String!, projType: String, limit: Int, nextToken: String): PaginatedProjects\\n\\n        program(program: String!): Program\\n        programs: [Program]\\n\\n        downloadFile(program: String!, id: ID!, projType: String!, filePath: String!): FileDownloadMeta\\n\\n        downloadZip(program: String!, id: ID!, projType: String!): FileDownloadMeta\\n\\n        # Request an upload start. Writes a manifest file on the upload bucket\\n        # and creates upload urls for everything\\n        requestUpload(id: ID, files: [String!], program: String!, projectType: String!): FileUpload\\n\\n        search(\\n            program: String!\\n            projType: String\\n            nameStr: String\\n            metaStr: String\\n            metaArr: String\\n            tags: String\\n            limit: Int\\n            nextToken: Int\\n        ): PaginatedSearchResults\\n\\n        validate(xml: String!, projType: String!, program: String!): Validation\\n\\n        getUsers(program: String!, limit: Int, nextToken: String): PaginatedUsers\\n    }\\n\\n    # this schema allows the following mutation:\\n    type Mutation {\\n        # signal a deletion of a project\\n        deleteProject(id: ID!, program: String!): ID!\\n        updateUser(id: ID!, program: String!, permission: String): User\\n    }\\n\\n    type User {\\n        email: String\\n        name: String\\n        picture: String\\n        username: String!\\n        createdOn: String\\n        updatedOn: String\\n        role: String\\n    }\\n\\n    type PaginatedUsers {\\n        users: [User]\\n        nextToken: String\\n    }\\n\\n    type Validation {\\n        result: Boolean\\n        xmlErrors: [String]\\n    }\\n\\n    type AuthParams {\\n        loggedIn: Boolean\\n        userPool: String\\n        clientId: String\\n        region: String\\n        domain: String\\n    }\\n\\n    interface ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n    }\\n\\n    type Project implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        files: [FileDownloadMeta]\\n    }\\n\\n    type ProjectSearchResult implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        score: Float\\n        files: [FileDownloadMeta]\\n    }\\n\\n    # This is mostly just JSON that's stringified\\n    type Product {\\n        id: ID!\\n        name: String!\\n        folder: String\\n        # Stringified JSON Array:\\n        pathArr: String\\n    }\\n    type Group {\\n        id: ID!\\n        name: String!\\n        folder: String\\n    }\\n    type NamedAllow {\\n        id: ID!\\n        name: String!\\n        aliases: String\\n        folder: String\\n    }\\n    type Collection {\\n        id: ID!\\n        name: String!\\n        AllowRegex: [String]\\n        Allow: [NamedAllow]\\n    }\\n    type Program {\\n        name: String\\n        machineName: String\\n        apiUrl: String\\n        projectXSDs: String\\n        projectFile: String\\n        meta: String\\n        groups: [Group]\\n        collections: [Collection]\\n        products: [Product]\\n        hierarchy: String\\n        role: String\\n    }\\n\\n    type FileDownloadMeta {\\n        key: String!\\n        md5: String!\\n        size: String\\n        contentType: String\\n        downloadUrl: String!\\n        pendingSince: String\\n    }\\n\\n    type FileUpload {\\n        id: ID!\\n        uploadUrls: [UploadUrl]\\n    }\\n\\n    type UploadUrl {\\n        url: String\\n        fields: String\\n        origPath: String\\n    }\\n\\n    type FileUploadMeta {\\n        key: String!\\n        downloadUrl: String!\\n    }\\n\\n    # Series Connection allows us to implement pagination easily\\n    type PaginatedProjects {\\n        projects: [Project]\\n        nextToken: String\\n    }\\n\\n    type PaginatedSearchResults {\\n        projects: [ProjectSearchResult]\\n        nextToken: Int\\n        total: Int\\n    }\\n\\n    type NewProject {\\n        id: ID!\\n    }\\n\"])));\nexports.default = typeDefs;\nvar templateObject_1;\n//# sourceMappingURL=schema.graphql.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Program = void 0;\nvar Program = (function () {\n    function Program(programObj) {\n        Object.assign(this, programObj);\n    }\n    Program.fromGraphQL = function (input) {\n        if (!input)\n            return null;\n        var meta = JSON.parse(input.meta);\n        return new Program(__assign(__assign({}, input), { meta: meta, role: input.role, products: input.products.map(function (p) { return (__assign(__assign({}, p), { pathArr: JSON.parse(p.pathArr) })); }) }));\n    };\n    return Program;\n}());\nexports.Program = Program;\n//# sourceMappingURL=Program.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Project = void 0;\nvar path_1 = __importDefault(require(\"path\"));\nfunction fileSort(currFolder) {\n    currFolder.sort(function (a, b) {\n        if (a.children && !b.children)\n            return -1;\n        if (!a.children && b.children)\n            return 1;\n        if (a.name.toLowerCase() < b.name.toLowerCase())\n            return -1;\n        if (a.name.toLowerCase() > b.name.toLowerCase())\n            return 1;\n        return 0;\n    });\n}\nvar Project = (function () {\n    function Project(projectObj) {\n        var _this = this;\n        this.treeIzeFilePaths = function () {\n            var root = [];\n            _this.files.forEach(function (_a) {\n                var key = _a.key;\n                var pathArr = key.split('/');\n                var currFolder = root;\n                var _loop_1 = function () {\n                    var folder = { name: pathArr.shift(), children: [] };\n                    var found = currFolder.find(function (f) { return f.name === folder.name; });\n                    if (found && found.children) {\n                        currFolder = found.children;\n                    }\n                    else {\n                        currFolder.push(folder);\n                        currFolder = folder.children;\n                    }\n                    fileSort(currFolder);\n                };\n                while (pathArr.length > 1) {\n                    _loop_1();\n                }\n                currFolder.push({ name: pathArr[0], path: key });\n            });\n            fileSort(root);\n            return root;\n        };\n        Object.assign(this, projectObj);\n    }\n    Project.fromGraphQL = function (input) {\n        if (!input)\n            return null;\n        return new Project(__assign(__assign({}, input), { meta: input.meta ? JSON.parse(input.meta) : {}, tags: input.tags ? input.tags.split(',') : [] }));\n    };\n    Project.diff = function (left, right) {\n        var different = [];\n        var same = [];\n        if (!right || right.length === 0) {\n            return {\n                leftOnly: left.map(function (f) { return f.key; }),\n                rightOnly: [],\n                different: [],\n                same: []\n            };\n        }\n        else if (!left || left.length === 0) {\n            return {\n                leftOnly: [],\n                rightOnly: right.map(function (f) { return f.key; }),\n                different: [],\n                same: []\n            };\n        }\n        var leftOnly = left\n            .filter(function (leftFile) {\n            var found = right.find(function (rightFile) { return leftFile.key === rightFile.key; });\n            if (found) {\n                if (found.md5 === leftFile.md5)\n                    same.push(leftFile.key);\n                else\n                    different.push(leftFile.key);\n            }\n            return !found;\n        })\n            .map(function (f) { return f.key; });\n        var rightOnly = right\n            .filter(function (rightFile) { return !left.find(function (leftFile) { return rightFile.key === leftFile.key; }); })\n            .map(function (f) { return f.key; });\n        return {\n            leftOnly: leftOnly,\n            rightOnly: rightOnly,\n            different: different,\n            same: same\n        };\n    };\n    Project.getProjectS3Keys = function (program, projectId, projType) {\n        var prefix = path_1.default.join(program.machineName, projType, projectId);\n        var zipKey = prefix + \".zip\";\n        var projFileKey = path_1.default.join(prefix, program.projectFile);\n        var zipKeyPending = path_1.default.join(program.machineName, projType, projectId + \".zip.pending\");\n        var downloadFolderName = \"\" + [program.machineName, projType, projectId].join('-');\n        var downloadZipFilename = downloadFolderName + \".zip\";\n        return {\n            prefix: prefix,\n            zipKey: zipKey,\n            projFileKey: projFileKey,\n            zipKeyPending: zipKeyPending,\n            downloadFolderName: downloadFolderName,\n            downloadZipFilename: downloadZipFilename\n        };\n    };\n    Project.parseDynamoMeta = function (dynObj) {\n        var metavals = Object.keys(dynObj)\n            .filter(function (k) { return k.indexOf('META_') === 0; })\n            .reduce(function (acc, k) {\n            var _a;\n            var newk = k.split('META_')[1];\n            return __assign(__assign({}, acc), (_a = {}, _a[newk] = dynObj[k], _a));\n        }, {});\n        return JSON.stringify(metavals);\n    };\n    Project.parseTagString = function (tagString) {\n        if (!tagString || tagString.trim().length === 0)\n            return [];\n        return tagString\n            .split(',')\n            .map(function (t) { return t.trim(); })\n            .filter(function (t) { return t.length > 0 && t !== 'null' && t !== 'undefined'; });\n    };\n    Project.parseS3Key = function (program, key) {\n        var keyArr = key.split('/');\n        if (keyArr.length < 3)\n            throw new Error('Not a valid project key');\n        var _a = key.split('/'), programMachineName = _a[0], projType = _a[1], id = _a[2];\n        if (program.machineName !== programMachineName) {\n            throw new Error(\"Program passed to parseS3 key \" + program.machineName + \" does not correspond to program in key: \" + programMachineName);\n        }\n        return Project.getProjectS3Keys(program, id, projType);\n    };\n    Project.parseS3KeyDUMB = function (key) {\n        var keyArr = key.split('/');\n        if (keyArr.length < 3)\n            throw new Error('Not a valid project key');\n        var programMachineName = keyArr[0], projType = keyArr[1], id = keyArr[2];\n        var prefix = path_1.default.join(programMachineName, projType, id);\n        var zipKey = prefix + \".zip\";\n        return {\n            programMachineName: programMachineName,\n            projType: projType,\n            id: id,\n            zipKey: zipKey,\n            prefix: prefix\n        };\n    };\n    return Project;\n}());\nexports.Project = Project;\n//# sourceMappingURL=Project.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValidationError = void 0;\nvar ValidationError = (function (_super) {\n    __extends(ValidationError, _super);\n    function ValidationError(message, reasons) {\n        var _this = _super.call(this, message) || this;\n        _this.name = _this.constructor.name;\n        _this.reasons = reasons;\n        Error.captureStackTrace(_this, _this.constructor);\n        return _this;\n    }\n    return ValidationError;\n}(Error));\nexports.ValidationError = ValidationError;\n//# sourceMappingURL=errors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar styles_1 = require(\"@material-ui/core/styles\");\nexports.default = (function (theme) {\n    var _a, _b, _c, _d;\n    return ({\n        root: {\n            display: 'flex',\n            alignItems: 'center',\n            width: '100%',\n            padding: theme.spacing(0, 1),\n            textShadow: '3px 3px 3px rgba(0,0,0,0.7)',\n            backgroundImage: \"url(\" + process.env.PUBLIC_URL + \"/HeaderBackground.png)\",\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: '0% 50%',\n            backgroundSize: 'cover',\n            backgroundColor: '#444444'\n        },\n        logo: {\n            height: 40,\n            width: 40,\n            marginRight: theme.spacing(2)\n        },\n        programChooser: {\n            margin: theme.spacing(0, 1),\n            color: theme.palette.primary.contrastText,\n            '& svg': {\n                color: theme.palette.primary.contrastText\n            },\n            '&:before': {\n                borderColor: theme.palette.primary.contrastText\n            },\n            '&:after': {\n                borderColor: theme.palette.primary.contrastText\n            }\n        },\n        transparent: {\n            backgroundColor: 'transparent',\n            background: 'none',\n            color: theme.palette.text.primary\n        },\n        search: (_a = {\n                position: 'relative',\n                borderRadius: theme.shape.borderRadius,\n                backgroundColor: styles_1.fade(theme.palette.common.white, 0.15),\n                '&:hover': {\n                    backgroundColor: styles_1.fade(theme.palette.common.white, 0.25)\n                },\n                marginRight: theme.spacing(2),\n                marginLeft: 0,\n                width: '100%',\n                flexGrow: 1\n            },\n            _a[theme.breakpoints.up('sm')] = {\n                marginLeft: theme.spacing(3),\n                width: 'auto'\n            },\n            _a),\n        searchIcon: {\n            width: theme.spacing(7),\n            height: '100%',\n            position: 'absolute',\n            pointerEvents: 'none',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center'\n        },\n        inputRoot: {\n            color: 'inherit'\n        },\n        spacer: {\n            flexGrow: 1\n        },\n        inputInput: (_b = {\n                padding: theme.spacing(1, 1, 1, 7),\n                transition: theme.transitions.create('width'),\n                width: '100%'\n            },\n            _b[theme.breakpoints.up('sm')] = {\n                width: 200\n            },\n            _b),\n        sectionDesktop: (_c = {\n                display: 'none'\n            },\n            _c[theme.breakpoints.up('sm')] = {\n                display: 'flex',\n                flexGrow: 1\n            },\n            _c),\n        sectionMobile: (_d = {\n                display: 'flex',\n                flexGrow: 1\n            },\n            _d[theme.breakpoints.up('sm')] = {\n                display: 'none'\n            },\n            _d)\n    });\n});\n//# sourceMappingURL=Topbar.style.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar core_1 = require(\"@material-ui/core\");\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar Tooltip_1 = __importDefault(require(\"@material-ui/core/Tooltip\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    root: {\n        marginLeft: theme.spacing(1) / 2\n    },\n    tooltip: {\n        maxWidth: 220\n    }\n}); });\nvar WarehouseTags = function (_a) {\n    var tags = _a.tags, chipProps = _a.chipProps;\n    var classes = useStyles();\n    return (react_1.default.createElement(react_1.default.Fragment, null, tags.map(function (ts, idx) { return (react_1.default.createElement(Tooltip_1.default, { key: \"whTag-\" + idx, title: react_1.default.createElement(react_1.default.Fragment, null,\n            react_1.default.createElement(Typography_1.default, { variant: \"body1\" },\n                \"Warehouse Tag: \",\n                ts),\n            react_1.default.createElement(Typography_1.default, { variant: \"caption\" }, \"Warehouse tags can be added to delineate two identical projects in the warehouse\")) },\n        react_1.default.createElement(core_1.Chip, __assign({ label: ts }, chipProps, { className: classes.root })))); })));\n};\nexports.default = WarehouseTags;\n//# sourceMappingURL=WarehouseTags.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isDisabled = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar Paper_1 = __importDefault(require(\"@material-ui/core/Paper\"));\nvar Avatar_1 = __importDefault(require(\"@material-ui/core/Avatar\"));\nvar Typography_1 = __importDefault(require(\"@material-ui/core/Typography\"));\nvar List_1 = __importDefault(require(\"@material-ui/core/List\"));\nvar Chip_1 = __importDefault(require(\"@material-ui/core/Chip\"));\nvar ListItem_1 = __importDefault(require(\"@material-ui/core/ListItem\"));\nvar ListItemText_1 = __importDefault(require(\"@material-ui/core/ListItemText\"));\nvar ListItemAvatar_1 = __importDefault(require(\"@material-ui/core/ListItemAvatar\"));\nvar Face_1 = __importDefault(require(\"@material-ui/icons/Face\"));\nvar styles_1 = require(\"@material-ui/core/styles\");\nvar clsx_1 = __importDefault(require(\"clsx\"));\nvar react_common_1 = require(\"@riverscapes/react-common\");\nvar useStyles = styles_1.makeStyles(function (theme) { return ({\n    rootContainer: {\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    spacer: {\n        flexGrow: 1\n    },\n    root: {\n        padding: theme.spacing(2, 4, 4, 4)\n    },\n    logoContainer: {\n        padding: theme.spacing(2),\n        textAlign: 'center'\n    },\n    logo: {},\n    accessChip: __assign({}, Object.keys(react_common_1.accessColors).reduce(function (acc, ack) {\n        var _a;\n        return (__assign(__assign({}, acc), (_a = {}, _a[\"&.access_\" + ack] = {\n            color: theme.palette.getContrastText(react_common_1.accessColors[ack][500]),\n            background: react_common_1.accessColors[ack][500]\n        }, _a)));\n    }, {}))\n}); });\nfunction isDisabled(prog) {\n    if (prog.meta && prog.meta.access && prog.meta.access === 'PUBLIC')\n        return false;\n    return prog.role === null;\n}\nexports.isDisabled = isDisabled;\nvar ProgramChooser = function (_a) {\n    var programs = _a.programs, history = _a.history, navigate = _a.navigate;\n    var classes = useStyles();\n    return (react_1.default.createElement(\"div\", { className: classes.rootContainer },\n        react_1.default.createElement(\"div\", { className: classes.spacer }),\n        react_1.default.createElement(Paper_1.default, { className: classes.root, elevation: 1 },\n            react_1.default.createElement(\"div\", { className: classes.logoContainer },\n                react_1.default.createElement(\"img\", { className: classes.logo, src: process.env.PUBLIC_URL + '/RiverscapesLogo.png', alt: \"logo\" })),\n            react_1.default.createElement(Typography_1.default, { variant: \"h5\" }, \"Choose a program:\"),\n            react_1.default.createElement(List_1.default, null, programs &&\n                programs.map(function (p, idx) {\n                    var chip = (react_1.default.createElement(Chip_1.default, { icon: react_1.default.createElement(Face_1.default, null), className: clsx_1.default(classes.accessChip, \"access_\" + p.role), label: p.role || 'Observer', color: \"primary\" }));\n                    var disabled = isDisabled(p);\n                    if (disabled)\n                        chip = react_1.default.createElement(Chip_1.default, { label: \"No Access\", color: \"default\" });\n                    return (react_1.default.createElement(ListItem_1.default, { key: \"progKey-\" + idx, disabled: disabled, button: true, divider: true, onClick: function () { return navigate(history, p); } },\n                        react_1.default.createElement(ListItemAvatar_1.default, null,\n                            react_1.default.createElement(Avatar_1.default, { alt: \"programname\" }, p.name.substr(0, 1))),\n                        react_1.default.createElement(ListItemText_1.default, { primary: p.name, secondary: p.meta.description }),\n                        chip));\n                })),\n            react_1.default.createElement(Typography_1.default, { paragraph: true, variant: \"caption\" },\n                \"If there are programs labeled\",\n                ' ',\n                react_1.default.createElement(Chip_1.default, { label: \"No Access\", component: \"span\", color: \"default\", size: \"small\" }),\n                \" and you think you should be able to see them please contact your program administrator.\")),\n        react_1.default.createElement(\"div\", { className: classes.spacer })));\n};\nexports.default = ProgramChooser;\n//# sourceMappingURL=ProgramChooser.js.map","\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.accessColors = void 0;\nvar common_1 = require(\"@riverscapes/common\");\nvar colors_1 = require(\"@material-ui/core/colors\");\nexports.accessColors = (_a = {},\n    _a[common_1.WarehouseRoleEnum.SuperUser] = colors_1.pink,\n    _a[common_1.WarehouseRoleEnum.Admin] = colors_1.red,\n    _a[common_1.WarehouseRoleEnum.Participant] = colors_1.lime,\n    _a[common_1.WarehouseRoleEnum.Observer] = colors_1.blue,\n    _a);\n//# sourceMappingURL=constants.js.map","import React from 'react'\n\nimport { makeStyles } from '@material-ui/core/styles'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport Button from '@material-ui/core/Button'\nimport ErrorIcon from '@material-ui/icons/Error'\nimport Typography from '@material-ui/core/Typography'\n\nimport { Program } from '@riverscapes/common'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        marginLeft: theme.spacing(1)\n    },\n    titlebar: {\n        display: 'flex',\n        background: theme.palette.error.main,\n        color: theme.palette.error.contrastText\n    },\n    closeButton: {},\n    name: {\n        paddingLeft: theme.spacing(1),\n        flexGrow: 1\n    }\n}))\n\ninterface Props {\n    onClose: () => void\n    program: Program\n}\n\nconst ProjectModal: React.FC<Props> = ({ onClose, program }: Props) => {\n    const classes = useStyles()\n    return (\n        <Dialog\n            onClose={onClose}\n            open\n            maxWidth=\"xs\"\n            fullWidth\n            className={classes.root}\n            classes={\n                {\n                    // scrollPaper: classes.scrollPaper\n                }\n            }\n        >\n            <DialogTitle disableTypography className={classes.titlebar}>\n                <ErrorIcon color=\"inherit\" />\n                <Typography className={classes.name}>Access Denied</Typography>\n            </DialogTitle>\n            <DialogContent dividers>\n                <Typography variant=\"body1\" component=\"div\" color=\"inherit\">\n                    You don't have access to the program <strong>{program.name}</strong>. If you arrived here via URL\n                    you will be able to use the URL again once you have access.\n                </Typography>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={onClose} color=\"primary\">\n                    Back to programs\n                </Button>\n            </DialogActions>\n        </Dialog>\n    )\n}\nexport default ProjectModal\n","import React from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport Button, { ButtonProps } from '@material-ui/core/Button'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload'\nimport moment from 'moment'\nimport { Project } from '@riverscapes/common'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        marginLeft: theme.spacing(1)\n    },\n    disabledButton: {\n        opacity: 0.5\n    }\n}))\n\ninterface Props {\n    title?: string\n    project: Project\n    pendingSince?: number\n    downloadZipFile: (proj: Project) => Promise<void>\n    btnProps?: ButtonProps\n}\n\nconst DownloadZipBtn: React.FC<Props> = ({ title, project, pendingSince, btnProps, downloadZipFile }: Props) => {\n    const classes = useStyles()\n\n    let btnRender = (\n        <Tooltip\n            title={\n                <React.Fragment>\n                    <Typography variant=\"body1\">Download Project Zip</Typography>\n                    <Typography variant=\"caption\" paragraph>\n                        Click to download this project as a single zip file\n                    </Typography>\n                    <Typography variant=\"caption\" paragraph>\n                        There may be a delay if the zip file needs to be built.\n                    </Typography>\n                </React.Fragment>\n            }\n        >\n            <Button\n                variant=\"outlined\"\n                color=\"primary\"\n                onClick={(e: React.MouseEvent<HTMLButtonElement, MouseEvent>): void => {\n                    e.preventDefault()\n                    e.stopPropagation()\n                    downloadZipFile(project)\n                }}\n                startIcon={<CloudDownloadIcon />}\n                {...btnProps}\n            >\n                {title || 'ZIP'}\n            </Button>\n        </Tooltip>\n    )\n    if (pendingSince) {\n        btnRender = (\n            <Tooltip\n                title={\n                    <React.Fragment>\n                        <Typography variant=\"body1\">Preparing Zip</Typography>\n                        <Typography variant=\"caption\" paragraph>\n                            The warehouse is building your zip file for you.\n                        </Typography>\n                        <Typography variant=\"caption\" paragraph>\n                            started {moment(pendingSince, 'x').fromNow()}\n                        </Typography>\n                    </React.Fragment>\n                }\n            >\n                <Button\n                    variant=\"outlined\"\n                    disableFocusRipple\n                    disableRipple\n                    disableTouchRipple\n                    color=\"primary\"\n                    onClick={(e: React.MouseEvent<HTMLButtonElement, MouseEvent>): void => {\n                        e.preventDefault()\n                        e.stopPropagation()\n                    }}\n                    className={classes.disabledButton}\n                    startIcon={<CircularProgress color=\"secondary\" size={24} thickness={3} />}\n                    {...btnProps}\n                >\n                    {title || 'ZIP'}\n                </Button>\n            </Tooltip>\n        )\n    }\n\n    return <div className={classes.root}>{btnRender}</div>\n}\n\nexport default DownloadZipBtn\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport IconButton from '@material-ui/core/IconButton'\nimport Typography from '@material-ui/core/Typography'\nimport Tooltip from '@material-ui/core/Tooltip'\n\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload'\nimport TreeItem from '@material-ui/lab/TreeItem'\n\nimport filesize from 'filesize'\n\nimport { Project, FileTreeObj } from '@riverscapes/common'\nimport style from './RecurseTreeItem.style'\n\nconst useStyles = makeStyles(style)\n\ninterface Props {\n    item: FileTreeObj\n    fileDict: {}\n    project: Project\n    fileClick: (project: Project, path: string) => void\n    keyStr: string\n}\n\nconst RecurseTreeItem: React.FC<Props> = ({ item, fileDict, keyStr, project, fileClick }: Props) => {\n    const classes = useStyles()\n    if (item.children) {\n        const childNodes = item.children.map((c, idx) => (\n            <RecurseTreeItem\n                keyStr={`${keyStr}-l${idx}`}\n                key={`${keyStr}-l${idx}`}\n                item={c}\n                fileDict={fileDict}\n                project={project}\n                fileClick={fileClick}\n            />\n        ))\n        return (\n            <TreeItem\n                nodeId={keyStr}\n                className={classes.treeFolder}\n                classes={{\n                    content: classes.treeFolderContent\n                }}\n                label={<div className={classes.treeFolderText}>{item.name}</div>}\n            >\n                {childNodes}\n            </TreeItem>\n        )\n    } else {\n        const lookup = item.path ? fileDict[item.path] : null\n        return (\n            <TreeItem\n                nodeId={keyStr}\n                className={classes.treeFile}\n                classes={{\n                    root: classes.treeItemRoot,\n                    content: classes.treeFileContent\n                }}\n                label={\n                    <div className={classes.treeItemContainer}>\n                        <div className={classes.treeItemText}>\n                            <Typography color=\"textPrimary\" component=\"div\" variant=\"body1\">\n                                {item.name}\n                            </Typography>\n                            <Typography color=\"textSecondary\" component=\"div\" variant=\"caption\">\n                                {filesize(parseInt(lookup.size, 10))} --{' '}\n                                <span className={classes.allowSelect}>{item.path}</span>\n                            </Typography>\n                        </div>\n                        <Tooltip\n                            title={\n                                <React.Fragment>\n                                    <Typography variant=\"body1\">Download: {item.path}</Typography>\n                                </React.Fragment>\n                            }\n                        >\n                            <IconButton\n                                disableRipple\n                                className={classes.treeItemIcon}\n                                color=\"primary\"\n                                onClick={(): void => fileClick(project, item.path)}\n                            >\n                                <CloudDownloadIcon />\n                            </IconButton>\n                        </Tooltip>\n                    </div>\n                }\n                endIcon={lookup.icon}\n            />\n        )\n    }\n}\n\nexport default RecurseTreeItem\n","import { Theme, StyleRules } from '@material-ui/core'\n\nexport default (theme: Theme): StyleRules => ({\n    treeItemRoot: {\n        backgroundColor: theme.palette.background.paper,\n        '&:nth-child(odd)': {\n            backgroundColor: theme.palette.background.default\n        }\n    },\n    treeItemContainer: {\n        display: 'flex'\n    },\n    treeItemText: {\n        marginLeft: theme.spacing(1),\n        padding: theme.spacing(1),\n        flexGrow: 1\n    },\n    treeItemIcon: {},\n    treeFile: {},\n    treeFileContent: {\n        borderBottom: `1px solid ${theme.palette.grey[100]}`\n    },\n    treeFolder: {},\n    treeFolderContent: {},\n    treeFolderText: {\n        padding: theme.spacing(1)\n    },\n    allowSelect: {\n        '&,& *': {\n            userSelect: 'text',\n            cursor: 'auto'\n        }\n    }\n})\n","import React, { useState } from 'react'\n\nimport { makeStyles } from '@material-ui/core/styles'\nimport Link from '@material-ui/core/Link'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport DialogContent from '@material-ui/core/DialogContent'\n// import Chip from '@material-ui/core/Chip'\nimport IconButton from '@material-ui/core/IconButton'\nimport Divider from '@material-ui/core/Divider'\nimport CloseIcon from '@material-ui/icons/Close'\nimport Typography from '@material-ui/core/Typography'\nimport Popover from '@material-ui/core/Popover'\n\nimport InsertDriveFileIcon from '@material-ui/icons/InsertDriveFile'\nimport PhotoIcon from '@material-ui/icons/Photo'\nimport Terrain from '@material-ui/icons/Terrain'\nimport Assignment from '@material-ui/icons/Assignment'\n\nimport TreeView from '@material-ui/lab/TreeView'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight'\n\nimport { WarehouseTags } from '@riverscapes/react-common'\nimport clsx from 'clsx'\nimport filesize from 'filesize'\nimport moment from 'moment'\n// import log from 'loglevel'\nimport style from './ProjectModal.style'\nimport DownloadZipBtn from '../DownloadZipBtn'\nimport { PendingZips } from '../../types'\nimport RecurseTreeItem from './RecurseTreeItem'\nimport { Project, Program } from '@riverscapes/common'\n\nconst useStyles = makeStyles(style)\n\ninterface Props {\n    onClose: () => void\n    project: Project\n    downloadFile: (proj: Project, fkey: string) => void\n    program: Program\n    pendingZips: PendingZips\n    downloadZipFile: (proj: Project) => Promise<void>\n}\n\nconst ProjectModal: React.FC<Props> = ({\n    onClose,\n    project,\n    downloadFile,\n    program,\n    pendingZips,\n    downloadZipFile\n}: Props) => {\n    const classes = useStyles()\n    const [popOver, setPopover] = useState<[any, any] | null>(null)\n    const pendingSince = pendingZips[project.id]\n\n    const iconMapping = [\n        { pattern: /.*\\.(png|gif|jpg|jpeg)$/i, icon: <PhotoIcon className={classes.photoIcon} />, classStr: 'photo' },\n        { pattern: /.*\\.(tif|img|shp)$/i, icon: <Terrain className={classes.TerrainIcon} />, classStr: 'terrain' },\n        {\n            pattern: /.*\\.(csv|pdf|doc)$/i,\n            icon: <Assignment className={classes.documentIcon} />,\n            classStr: 'assignment'\n        }\n    ]\n\n    const files = project.files.reduce((acc, file) => {\n        const found = iconMapping.find(({ pattern }) => file.key.match(pattern))\n        return {\n            ...acc,\n            [file.key]: {\n                ...file,\n                icon: found ? found.icon : <InsertDriveFileIcon className={classes.normalIcon} />,\n                classStr: found ? found.classStr : 'normalIcon'\n            }\n        }\n    }, {})\n    const fileTree = project.treeIzeFilePaths()\n    const pType = program.products.find((p) => p.id === project.projType)\n    const pTypeName = pType ? pType.name : 'Unknown'\n\n    const descriptionTag = Object.keys(project.meta).find((k) => k.toLowerCase() === 'description')\n\n    return (\n        <Dialog\n            onClose={onClose}\n            open\n            maxWidth=\"md\"\n            fullWidth\n            className={classes.root}\n            classes={{\n                scrollPaper: classes.scrollPaper\n            }}\n        >\n            <DialogTitle disableTypography className={classes.titlebar}>\n                <div>\n                    <Tooltip title={<Typography variant=\"body1\">{project.name}</Typography>}>\n                        <Typography variant=\"h5\" component=\"div\" className={clsx(classes.name, classes.allowSelect)}>\n                            {project.name}\n                        </Typography>\n                    </Tooltip>\n                    <div className={classes.subHeader}>\n                        <div className={classes.flexGrow}>\n                            <Typography variant=\"caption\" color=\"inherit\" component=\"div\">\n                                ID: <span className={classes.allowSelect}>{project.id}</span>\n                            </Typography>\n                        </div>\n                        <DownloadZipBtn\n                            title=\"Download Project\"\n                            {...{ project, pendingSince, downloadZipFile }}\n                            btnProps={{\n                                variant: 'contained',\n                                color: 'secondary',\n                                size: 'small'\n                            }}\n                        />\n                    </div>\n                </div>\n                {onClose ? (\n                    <IconButton aria-label=\"close\" className={classes.closeButton} onClick={onClose}>\n                        <CloseIcon />\n                    </IconButton>\n                ) : null}\n            </DialogTitle>\n            <DialogContent dividers>\n                <div className={classes.allowSelect}>\n                    <Typography variant=\"caption\" component=\"div\" color=\"inherit\">\n                        <strong>Project Type</strong>: <strong>{pTypeName}</strong> ({pType && pType.id})\n                    </Typography>\n                    <Typography variant=\"caption\" component=\"div\" color=\"inherit\">\n                        <strong>Created</strong>: {moment(project.createdOn, 'x').fromNow()} (\n                        {moment(project.createdOn, 'x').format('lll')})\n                    </Typography>\n                    <Typography variant=\"caption\" component=\"div\" color=\"inherit\">\n                        <strong>Updated</strong>: {moment(project.updatedOn, 'x').fromNow()} (\n                        {moment(project.updatedOn, 'x').format('lll')})\n                    </Typography>\n\n                    <Typography variant=\"caption\" component=\"div\" color=\"inherit\">\n                        <strong>Warehouse tags:</strong>\n                        <WarehouseTags tags={project.tags} chipProps={{ size: 'small', color: 'secondary' }} />\n                    </Typography>\n                    <Typography variant=\"caption\" component=\"div\" color=\"inherit\">\n                        <strong>Size (Unzipped)</strong>:{' '}\n                        {project.totalSize && project.totalSize > -1 ? filesize(project.totalSize) : 'Not available'}\n                    </Typography>\n                    {descriptionTag && (\n                        <div>\n                            <Typography className={classes.title} color=\"inherit\" component=\"div\" variant=\"subtitle1\">\n                                Description\n                            </Typography>\n                            <Typography color=\"textSecondary\" variant=\"body2\">\n                                {project.meta[descriptionTag]}\n                            </Typography>\n                        </div>\n                    )}\n                    <Typography className={classes.title} color=\"inherit\" variant=\"subtitle1\">\n                        Metadata\n                    </Typography>\n                    <Divider />\n                    <div className={classes.metaDisplay}>\n                        {Object.keys(project.meta)\n                            .filter((k) => ['description'].indexOf(k.toLowerCase()) === -1)\n                            .map((metaKey, idk) => {\n                                let textComponent: React.ReactNode = project.meta[metaKey]\n                                if (project.meta[metaKey].indexOf('http') === 0) {\n                                    textComponent = (\n                                        <Link href={project.meta[metaKey]} target=\"_blank\">\n                                            {project.meta[metaKey]}\n                                        </Link>\n                                    )\n                                }\n                                return (\n                                    <Tooltip\n                                        key={`result-${idk}`}\n                                        placement=\"bottom\"\n                                        title={\n                                            <React.Fragment>\n                                                <Typography variant=\"body1\" component=\"div\">\n                                                    <strong>{metaKey}</strong>\n                                                </Typography>\n                                                <Typography variant=\"body2\" component=\"div\">\n                                                    {textComponent}\n                                                </Typography>\n                                            </React.Fragment>\n                                        }\n                                    >\n                                        <div className={classes.metaDisplayItem}>\n                                            <Typography variant=\"caption\" component=\"div\" color=\"textPrimary\">\n                                                <strong>{metaKey}</strong>\n                                            </Typography>\n\n                                            <Typography variant=\"caption\" component=\"div\" color=\"textPrimary\">\n                                                {textComponent}\n                                            </Typography>\n                                        </div>\n                                    </Tooltip>\n                                )\n                            })}\n                    </div>\n                </div>\n                <Typography className={classes.title} color=\"inherit\" variant=\"subtitle1\">\n                    Files\n                </Typography>\n                <Divider />\n                <TreeView\n                    className={classes.treeRoot}\n                    defaultExpanded={['1']}\n                    disableSelection\n                    defaultCollapseIcon={<ExpandMoreIcon color=\"inherit\" />}\n                    defaultExpandIcon={<ChevronRightIcon color=\"inherit\" />}\n                >\n                    {fileTree.map((ft, idx) => (\n                        <RecurseTreeItem\n                            project={project}\n                            key={`treeNode-${idx}`}\n                            keyStr={`treeNode-${idx}`}\n                            item={ft}\n                            fileDict={files}\n                            fileClick={downloadFile}\n                        />\n                    ))}\n                </TreeView>\n            </DialogContent>\n            <Popover\n                open={Boolean(popOver)}\n                anchorEl={popOver ? popOver[0] : null}\n                onClose={(): void => setPopover(null)}\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'center'\n                }}\n                transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'center'\n                }}\n            >\n                <Typography className={classes.popOver}>{popOver ? popOver[1] : ''}</Typography>\n            </Popover>\n        </Dialog>\n    )\n}\nexport default ProjectModal\n","import { Theme, StyleRules } from '@material-ui/core'\nimport { red, purple, green } from '@material-ui/core/colors'\n\nexport default (theme: Theme): StyleRules => ({\n    root: {\n        margin: 0,\n        padding: theme.spacing(2)\n    },\n    allowSelect: {\n        '&,& *': {\n            userSelect: 'text',\n            cursor: 'auto'\n        }\n    },\n    scrollPaper: {\n        alignItems: 'baseline' // default to 'center' for vertical centering\n    },\n    name: {\n        maxWidth: '95%',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        marginBottom: theme.spacing(1)\n    },\n    titlebar: {\n        backgroundColor: '#444444',\n        color: theme.palette.primary.contrastText\n    },\n    flexGrow: {\n        flexGrow: 1\n    },\n    closeButton: {\n        position: 'absolute',\n        right: theme.spacing(1),\n        top: theme.spacing(1),\n        color: theme.palette.grey[500]\n    },\n    normalIcon: {},\n    documentIcon: {\n        color: red[500]\n    },\n    photoIcon: {\n        color: purple[500]\n    },\n    TerrainIcon: {\n        color: green[500]\n    },\n    metaDisplay: {\n        display: 'flex',\n        flexFlow: 'wrap'\n    },\n    title: {\n        marginTop: theme.spacing(2)\n    },\n    treeItemContainer: {\n        display: 'flex'\n    },\n    treeItemText: {\n        marginLeft: theme.spacing(1),\n        flexGrow: 1\n    },\n    treeItemIcon: {},\n    treeFileContent: {\n        // border: '1px solid blue'\n        borderBottom: `1px solid ${theme.palette.grey[100]}`,\n        padding: theme.spacing(1)\n    },\n    treeFolder: {},\n    treeFolderContent: {\n        // border: '1px solid green'\n        padding: theme.spacing(1)\n    },\n    metaDisplayItem: {\n        flex: '1 1',\n        borderRadius: theme.spacing(1),\n        backgroundColor: '#fafafa',\n        margin: theme.spacing(1, 0.5),\n        border: '#1px solid #e7e7e7',\n        padding: theme.spacing(1),\n        maxWidth: '25%',\n        minWidth: 150,\n        '&>*': {\n            whiteSpace: 'nowrap',\n            overflow: 'hidden',\n            textOverflow: 'ellipsis'\n        }\n    },\n    prodChip: {\n        marginLeft: theme.spacing(1),\n        backgroundColor: theme.palette.primary.light,\n        color: 'white'\n        // height: theme.spacing(2.3),\n        // borderRadius: theme.spacing(1) / 2,\n        // color: '#999',\n        // border: `1px solid #ddd`,\n        // background: '#eee',\n        // marginRight: theme.spacing(1)\n    },\n    popOver: {\n        padding: theme.spacing(2)\n    },\n    subHeader: {\n        width: '100%',\n\n        display: 'flex'\n    }\n})\n","import React from 'react'\nimport clsx from 'clsx'\nimport Typography from '@material-ui/core/Typography'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport Avatar from '@material-ui/core/Avatar'\n\nimport { WarehouseTags } from '@riverscapes/react-common'\nimport DownloadZipBtn from '../DownloadZipBtn'\n// import log from 'loglevel'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Chip } from '@material-ui/core'\nimport { Project, Program } from '@riverscapes/common'\nimport { PendingZips } from '../../types'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        padding: theme.spacing(2),\n        margin: theme.spacing(2)\n    },\n    itemText: {\n        flexGrow: 1\n    },\n    spacer: {\n        flexGrow: 1\n    },\n    itemLine: {\n        display: 'flex'\n    },\n    mm: {\n        display: 'flex',\n        width: '100%'\n    },\n    odd: {\n        background: theme.palette.background.default\n    },\n    mmItem: {},\n    prodChip: {\n        height: theme.spacing(2.3),\n        borderRadius: theme.spacing(1) / 2,\n        color: '#999',\n        border: `1px solid #ddd`,\n        background: '#eee',\n        marginRight: theme.spacing(1)\n    },\n    downloadText: {\n        // position: 'absolute',\n        textAlign: 'center',\n        width: '100%'\n        // bottom: -theme.spacing(2),\n        // right: 0\n    }\n}))\n\ninterface Props {\n    project: Project\n    odd?: boolean\n    onClick: () => void\n    program: Program\n    pendingZips: PendingZips\n    downloadZipFile: (proj: Project) => Promise<void>\n}\n\nconst SearchResult: React.FC<Props> = ({ project, onClick, program, pendingZips, odd, downloadZipFile }: Props) => {\n    const classes = useStyles()\n    const pendingSince = pendingZips[project.id]\n\n    // Figure out which fields are mandatory\n    const projObj = program.products.find((p) => p.id === project.projType)\n    const projObjMand = projObj ? projObj.pathArr.filter((pr) => pr.type === 'Collection') : []\n\n    const pTypeName = projObj ? projObj.name : '<UNKNOWN>'\n    const mandatoryMeta = projObjMand.map((po) => ({ key: po.name, val: project.meta[po.name] }), {})\n\n    return (\n        <ListItem button onClick={onClick} className={clsx({ [classes.odd]: odd as boolean })}>\n            <ListItemAvatar>\n                <Avatar> {project.projType && project.projType.substr(0, 1)} </Avatar>\n            </ListItemAvatar>\n            <div className={classes.itemText}>\n                <div className={classes.itemLine}>\n                    <Typography variant=\"body1\">{project.name}</Typography>\n                    <div className={classes.spacer} />\n                    <WarehouseTags tags={project.tags} chipProps={{ size: 'small', color: 'secondary' }} />\n                </div>\n                <div className={classes.mm}>\n                    <Chip className={classes.prodChip} label={pTypeName} size=\"small\" />\n                    {mandatoryMeta.map(({ key, val }, idx) => {\n                        const mmFound = program.collections.find((c) => c.name === key)\n                        const color = mmFound && mmFound.color ? mmFound.color[500] : 'inherit'\n                        return (\n                            <Typography\n                                key={`mmval-${idx}`}\n                                className={classes.mmItem}\n                                variant=\"caption\"\n                                color=\"textSecondary\"\n                            >\n                                {idx > 0 && ' • '}\n                                <span style={{ color }}> {val} </span>\n                            </Typography>\n                        )\n                    })}\n                </div>\n            </div>\n            <DownloadZipBtn {...{ project, pendingSince, downloadZipFile }} />\n        </ListItem>\n    )\n}\n\nexport default SearchResult\n","import React from 'react'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\n\nimport Skeleton from '@material-ui/lab/Skeleton'\nimport IconButton from '@material-ui/core/IconButton'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(() => ({\n    root: {},\n    itemText: {\n        flexGrow: 1\n    }\n}))\n\nconst SearchResultLoading: React.FC = () => {\n    const classes = useStyles()\n    return (\n        <ListItem>\n            <ListItemAvatar>\n                <Skeleton variant=\"circle\" height={40} width={40} />\n            </ListItemAvatar>\n            <div className={classes.itemText}>\n                <Skeleton style={{ height: 10, width: '60%', margin: '6px 0' }} />\n                <Skeleton style={{ height: 10, width: '40%', margin: '6px 0' }} />\n            </div>\n            <ListItemSecondaryAction>\n                <IconButton edge=\"end\" disabled>\n                    <Skeleton variant=\"circle\" height={40} width={40} />\n                </IconButton>\n            </ListItemSecondaryAction>\n        </ListItem>\n    )\n}\n\nexport default SearchResultLoading\n","import React from 'react'\nimport Paper from '@material-ui/core/Paper'\nimport Divider from '@material-ui/core/Divider'\n\nimport List from '@material-ui/core/List'\nimport SearchResult from './SearchResult'\nimport SearchResultLoading from './SearchResultLoading'\n\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport { PaginationWidget } from '@northarrowresearch/react-common'\nimport { Project, Program, SearchResultsInterface } from '@riverscapes/common'\nimport { SearchParams, PendingZips } from '../../types'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        padding: theme.spacing(2),\n        margin: theme.spacing(2)\n    }\n}))\n\ninterface Props {\n    data?: SearchResultsInterface\n    loading?: boolean\n    program: Program\n    searchParams: SearchParams\n    setSearchParams: (params: SearchParams) => void\n    pendingZips: PendingZips\n    navigate: (progName: string, projId?: string) => void\n    downloadZipFile: (proj: Project) => Promise<void>\n}\n\nconst SearchResults: React.FC<Props> = ({\n    data,\n    program,\n    loading,\n    searchParams,\n    setSearchParams,\n    pendingZips,\n    navigate,\n    downloadZipFile\n}: Props) => {\n    const classes = useStyles()\n\n    //  The loading state of this object is just a bunch of empty skeletons\n    if (loading) {\n        return (\n            <Paper className={classes.root}>\n                <PaginationWidget\n                    data={{\n                        total: 0,\n                        startIndex: searchParams.nextToken,\n                        pageSize: searchParams.limit\n                    }}\n                    loading={loading}\n                    handlePaginationEvent={(newIndex: number): void =>\n                        setSearchParams({\n                            ...searchParams,\n                            nextToken: newIndex\n                        })\n                    }\n                />\n                <Divider />\n                <List>\n                    {Array(searchParams.limit || 10)\n                        .fill(null)\n                        .map((x, idx) => (\n                            <SearchResultLoading key={`result-${idx}`} />\n                        ))}\n                </List>\n            </Paper>\n        )\n    }\n    //  Maybe search returned nothing\n    if (!data || !data.projects || data.projects.length === 0) {\n        return (\n            <Paper className={classes.root}>\n                <div>No Projects Found</div>\n            </Paper>\n        )\n    }\n\n    return (\n        <Paper className={classes.root}>\n            <PaginationWidget\n                data={{\n                    total: data.total,\n                    startIndex: searchParams.nextToken,\n                    pageSize: searchParams.limit\n                }}\n                handlePaginationEvent={(newIndex: number): void =>\n                    setSearchParams({\n                        ...searchParams,\n                        nextToken: newIndex\n                    })\n                }\n            />\n            <Divider />\n            <List>\n                {data &&\n                    data.projects.map((r, idr) => {\n                        const project = new Project(r)\n                        return (\n                            <SearchResult\n                                key={`result-${idr}`}\n                                odd={Boolean(idr % 2)}\n                                project={project}\n                                program={program}\n                                pendingZips={pendingZips}\n                                downloadZipFile={downloadZipFile}\n                                onClick={(): void => navigate(program.machineName, project.id)}\n                            />\n                        )\n                    })}\n            </List>\n        </Paper>\n    )\n}\n\nexport default SearchResults\n","import React, { useState, useEffect } from 'react'\n\nimport { search, SearchResultsInterface, Program, Project } from '@riverscapes/common'\nimport { SearchParams, PendingZips } from '../types'\n\nimport SearchResults from '../components/Search/SearchResults'\nimport log from 'loglevel'\n\ninterface Props {\n    program?: Program\n    getCurrentToken: () => Promise<string>\n    url: string\n    searchParams: SearchParams\n    setSearchParams: (params: SearchParams) => void\n    navigate: (progName: string, projId?: string) => void\n    pendingZips: PendingZips\n    downloadZipFile: (proj: Project) => Promise<void>\n}\n\nconst ResultsPaneConnect: React.FC<Props> = ({\n    getCurrentToken,\n    url,\n    navigate,\n    program,\n    searchParams,\n    setSearchParams,\n    pendingZips,\n    downloadZipFile\n}: Props) => {\n    const [isLoading, setIsLoading] = useState<boolean>(true)\n    const [results, setResults] = useState<SearchResultsInterface>()\n    const [errors, setErrors] = useState<any>()\n    if (errors) log.error(errors)\n\n    useEffect(() => {\n        setResults(undefined)\n        async function doEffect(): Promise<void> {\n            if (!program) return\n            setIsLoading(true)\n            const jwt = await getCurrentToken()\n            log.debug('Search API Hit', { url, jwt, program: program.machineName, searchParams })\n            await search(url, jwt, program.machineName, searchParams)\n                .then(({ data, errors }) => {\n                    try {\n                        if (errors && errors.length > 0) {\n                            setErrors(errors)\n                            setIsLoading(false)\n                        } else if (data) {\n                            const searchData = data.search\n                            setResults(searchData)\n                            setIsLoading(false)\n                        }\n                    } catch {\n                        setIsLoading(false)\n                    }\n                })\n                .catch((err) => {\n                    setIsLoading(false)\n                    setErrors([err])\n                })\n        }\n        doEffect()\n    }, [program, url, searchParams, getCurrentToken])\n\n    return (\n        <SearchResults\n            data={results}\n            loading={isLoading}\n            navigate={navigate}\n            program={program as Program}\n            searchParams={searchParams}\n            setSearchParams={setSearchParams}\n            pendingZips={pendingZips}\n            downloadZipFile={downloadZipFile}\n        />\n    )\n}\nResultsPaneConnect['whyDidYouRender'] = true\nexport default ResultsPaneConnect\n","import { red, green, blue, orange, purple, cyan, lime, brown } from '@material-ui/core/colors'\nimport log from 'loglevel'\nimport { SearchParams } from './types'\n\nlet domain = process.env.REACT_APP_DOMAIN\nif (process.env.NODE_ENV && process.env.NODE_ENV === 'development') {\n    domain = 'localhost'\n    // basename = ''\n}\nlog.debug('config: ', { domain })\nexport const isDev = process.env.NODE_ENV && process.env.NODE_ENV === 'development'\nexport const version = process.env.REACT_APP_VERSION\n\nexport const endpoints = {\n    graphql: `${process.env.REACT_APP_GRAPHQL}`\n}\n\nconst searchDefaultParams: SearchParams = {\n    limit: 10,\n    nextToken: 0\n}\n\nexport const warehouseIconUrl = process.env.PUBLIC_URL + '/RiverscapesLogo.png'\n\nexport const appDefaults = {\n    searchDefaultParams\n}\n\nexport const mandatoryMetaColors = [red, green, blue, orange, purple, cyan, lime, brown]\nexport const redirectUrl = new URL(\n    process.env.PUBLIC_URL.endsWith('/') ? process.env.PUBLIC_URL : process.env.PUBLIC_URL + '/',\n    window.location.origin\n)\n\nconsole.log('RedirectUrl', { redirectUrl, publicUrl: process.env.PUBLIC_URL })\n","import React, { useState } from 'react'\nimport TextField from '@material-ui/core/TextField'\nimport Typography from '@material-ui/core/Typography'\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport { makeStyles } from '@material-ui/core'\n\nimport { util } from '@northarrowresearch/common'\nimport { CollectionType } from '@riverscapes/common'\nimport log from 'loglevel'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: 'flex'\n    },\n    advancedLeft: {\n        flex: '1 1 30%',\n        height: theme.spacing(4),\n        marginRight: theme.spacing(1)\n    },\n    advancedLeftCustom: {\n        textAlign: 'center'\n    },\n    advancedLeftOption: {},\n    advancedText: {\n        flex: '1 1 70%'\n    },\n    advancedRight: {\n        flex: '1 1 70%'\n    },\n    advancedOp: {\n        display: 'flex'\n    },\n    advancedTextCustomName: {\n        flex: '1 1 30%',\n        marginRight: theme.spacing(1)\n    },\n    advancedTextCustomValue: {\n        flex: '1 1 40%'\n    },\n    advancedOpName: {\n        flexGrow: 1\n    },\n\n    advancedOpNamId: {},\n    advancedInput: {\n        height: theme.spacing(4)\n    }\n}))\n\ninterface Props {\n    row: string[]\n    options: CollectionType[]\n    changeHandler: (newRow: [string, string], forceSubmit?: boolean) => void\n}\n\nconst SearchAdvancedRow: React.FC<Props> = ({ row, options, changeHandler }: Props) => {\n    const classes = useStyles()\n    const [mKey, mVal] = row\n    const [err, setErr] = useState<string | null>(null)\n\n    const option = mKey && mKey.length > 0 && options.find((o) => o.name.toLowerCase() === mKey.toLowerCase())\n    const hasSetVals = option && option.Allow && !!option.Allow.find((o) => o.name.toLowerCase() && o.name.length > 0)\n\n    const validate = (keyU: unknown, valU: unknown): void => {\n        // regex validation\n        const key = String(keyU)\n        const val = String(valU)\n        if (val && val.length > 0 && option && !hasSetVals) {\n            const allowRegex = option.AllowRegex\n            if (allowRegex && allowRegex.length > 0) {\n                const errs: string[] = []\n                allowRegex.forEach((regex) => {\n                    // log.info(regex)\n                    const pattern = new RegExp(regex)\n                    const hasError = !val.match(pattern)\n                    if (hasError) {\n                        errs.push(regex)\n                    }\n                })\n                // Bail on the query if there are any errors. Display them in the error column\n                if (errs.length > 0) {\n                    if (errs.length === 1) setErr(`Value must match pattern: '${errs[0]}'`)\n                    else {\n                        setErr(\n                            errs.reduce(\n                                (acc, err, idx) => acc + (idx > 0 ? ' and ' : '') + err,\n                                'Value must match patterns: '\n                            )\n                        )\n                    }\n                    return\n                }\n            }\n        }\n        setErr(null)\n        log.debug('CHANGING VALUES', [key, val])\n        if (key.toLowerCase() !== mKey.toLowerCase() || val.toLowerCase() !== mVal.toLowerCase()) {\n            changeHandler([key, val])\n        }\n    }\n\n    const debouncedValidate = util.debounce(validate, 500)\n\n    const handleKeyPress = (keyCode): void => {\n        if (keyCode === 13 && mKey && mKey.length > 0) {\n            log.debug('Enter pressed')\n            changeHandler([mKey, mVal], true)\n        }\n    }\n\n    return (\n        <div className={classes.root}>\n            <FormControl className={classes.advancedLeft}>\n                <Select\n                    value={option ? option.name : '__custom'}\n                    inputProps={{\n                        className: classes.advancedInput\n                    }}\n                    onChange={(\n                        event: React.ChangeEvent<{\n                            name?: string\n                            value: unknown\n                        }>\n                    ): void => changeHandler([String(event.target.value), ''], true)}\n                >\n                    <MenuItem key={`aoss-custom`} value=\"__custom\">\n                        <Typography className={classes.advancedLeftCustom} color=\"textSecondary\">\n                            <em>Custom</em>\n                        </Typography>\n                    </MenuItem>\n                    {options.map(({ name }, oid) => (\n                        <MenuItem key={`aoss-${oid}`} value={name}>\n                            <Typography className={classes.advancedLeftOption}>{name}</Typography>\n                        </MenuItem>\n                    ))}\n                </Select>\n            </FormControl>\n            {hasSetVals ? (\n                <FormControl className={classes.advancedRight}>\n                    <Select\n                        value={mVal}\n                        inputProps={{\n                            className: classes.advancedInput\n                        }}\n                        onChange={(\n                            event: React.ChangeEvent<{\n                                name?: string\n                                value: unknown\n                            }>\n                        ): void => changeHandler([mKey, String(event.target.value)], true)}\n                    >\n                        {option &&\n                            option.Allow &&\n                            option.Allow.map(({ id, name }, oid) => {\n                                return (\n                                    <MenuItem className={classes.advancedOp} key={`aooptss-${oid}`} value={id}>\n                                        <Typography className={classes.advancedOpName}>{name}</Typography>\n                                        {name !== id && (\n                                            <Typography variant=\"caption\" className={classes.advancedOpNamId}>\n                                                {id}\n                                            </Typography>\n                                        )}\n                                    </MenuItem>\n                                )\n                            })}\n                    </Select>\n                </FormControl>\n            ) : option ? (\n                <TextField\n                    error={!!err}\n                    label={err}\n                    disabled={!mKey || mKey.length === 0}\n                    placeholder=\"...\"\n                    defaultValue={mVal}\n                    className={classes.advancedText}\n                    inputProps={{\n                        className: classes.advancedInput\n                    }}\n                    onKeyDown={(e: React.KeyboardEvent<HTMLDivElement>): void => handleKeyPress(e.keyCode)}\n                    onChange={(e: React.ChangeEvent<HTMLInputElement>): void => debouncedValidate(mKey, e.target.value)}\n                />\n            ) : (\n                <React.Fragment>\n                    <TextField\n                        placeholder=\"Meta Name\"\n                        defaultValue=\"\"\n                        className={classes.advancedTextCustomName}\n                        inputProps={{\n                            className: classes.advancedInput\n                        }}\n                        onKeyDown={(e: React.KeyboardEvent<HTMLDivElement>): void => handleKeyPress(e.keyCode)}\n                        onChange={(e: React.ChangeEvent<HTMLInputElement>): void =>\n                            debouncedValidate(e.target.value, mVal)\n                        }\n                    />\n                    <TextField\n                        placeholder=\"Meta Value\"\n                        defaultValue=\"\"\n                        className={classes.advancedTextCustomValue}\n                        inputProps={{\n                            className: classes.advancedInput\n                        }}\n                        onKeyDown={(e: React.KeyboardEvent<HTMLDivElement>): void => handleKeyPress(e.keyCode)}\n                        onChange={(e: React.ChangeEvent<HTMLInputElement>): void =>\n                            debouncedValidate(mKey, e.target.value)\n                        }\n                    />\n                </React.Fragment>\n            )}\n        </div>\n    )\n}\n\nexport default SearchAdvancedRow\n","import React, { useState, useRef, useEffect } from 'react'\nimport TextField from '@material-ui/core/TextField'\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport Button from '@material-ui/core/Button'\nimport SearchIcon from '@material-ui/icons/Search'\nimport { makeStyles, Paper } from '@material-ui/core'\n\nimport { appDefaults } from '../../config'\n\nimport SearchAdvancedRow from './SearchAdvancedRow'\nimport { ProjTotals, setSearchParamsType, SearchParams } from '../../types'\nimport { CollectionType, Program } from '@riverscapes/common'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        padding: theme.spacing(2),\n        margin: theme.spacing(2)\n    },\n    spacer: {\n        flexGrow: 1\n    },\n    actionBar: {\n        display: 'flex',\n        width: '100%',\n        '&>*': {\n            marginLeft: theme.spacing(1)\n        }\n    },\n    advanced: {},\n    iconButton: {},\n    textField: {},\n    projTypeLine: {\n        display: 'flex'\n    },\n    projType: {\n        marginRight: theme.spacing(1),\n        flexGrow: 1,\n        maxWidth: 300\n    },\n    resultsNum: {\n        flexShrink: 0\n    },\n    projTypeMenuItem: {\n        display: 'flex'\n    },\n    projTypeMenuItemSelected: {\n        display: 'flex'\n    },\n    projTypeMenuItemName: {\n        flexGrow: 1\n    },\n    projTypeMenuItemNum: {\n        color: theme.palette.text.secondary,\n        fontSize: '0.75rem'\n    }\n}))\n\ninterface Props {\n    program: Program\n    projTotals: ProjTotals\n    searchParams?: SearchParams\n    setSearchParams: setSearchParamsType\n}\n\n/**\n * This is the over-arching wrapper for the app. It combines all the\n * same place. Time will tell if that's a good strategy.\n */\nconst SearchForm: React.FC<Props> = ({ projTotals, program, searchParams, setSearchParams }: Props) => {\n    const classes = useStyles()\n    const [advancedVals, setAdvancedVals] = useState<string[][]>([])\n    const searchParamsRef = useRef<SearchParams | undefined>(searchParams)\n    const searchMetaInputRef = useRef<HTMLInputElement>()\n    searchParamsRef.current = searchParams\n\n    function submitSearch(params: SearchParams | null, advancedParams?: string[][]): void {\n        const newParams: SearchParams = { ...(params || (searchParamsRef.current as SearchParams) || searchParams) }\n        const newAdvanced = [...(advancedParams || advancedVals)]\n\n        if (newParams.projType === '__all') delete newParams.projType\n\n        const advFinal =\n            newAdvanced &&\n            newAdvanced.length > 0 &&\n            newAdvanced.filter(([k, v]) => k && v && k.length > 0 && v.length > 0)\n\n        const submitParams: SearchParams = { ...newParams }\n        if (advFinal && advFinal.length > 0) submitParams.metaArr = JSON.stringify(advFinal)\n\n        if (advancedParams) setAdvancedVals(advancedParams)\n        setSearchParams(submitParams)\n    }\n\n    useEffect(() => {\n        if (searchMetaInputRef.current) searchMetaInputRef.current.value = (searchParams as SearchParams).metaStr || ''\n    }, [searchParams])\n\n    const toggleAdvanced = (): void => {\n        if (!searchParamsRef.current) return\n        if (advancedVals.length > 0) {\n            submitSearch(searchParamsRef.current, [])\n        } else {\n            submitSearch(searchParamsRef.current, [['', '']])\n        }\n    }\n\n    const projectArr =\n        program && program.products ? Object.values(program.products).map(({ name, id }) => ({ name, id })) : []\n\n    const allAdvancedOptions: CollectionType[] = program ? program.collections : []\n\n    allAdvancedOptions.sort((a, b) => {\n        if (a.name.toLowerCase() < b.name.toLowerCase()) return -1\n        if (a.name.toLowerCase() > b.name.toLowerCase()) return 1\n        return 0\n    })\n    projectArr.sort((a, b) => {\n        if (a.name.toLowerCase() < b.name.toLowerCase()) return -1\n        if (a.name.toLowerCase() > b.name.toLowerCase()) return 1\n        return 0\n    })\n\n    const handleKeyPress = (e): void => {\n        if (e.keyCode === 13) {\n            setSearchParams(searchParamsRef.current as SearchParams)\n        }\n    }\n    return (\n        <Paper className={classes.root}>\n            {program && program.products && (\n                <div className={classes.projTypeLine}>\n                    <FormControl fullWidth className={classes.projType}>\n                        <InputLabel htmlFor=\"projectType\">Project Type</InputLabel>\n                        <Select\n                            id=\"projectType\"\n                            inputProps={{\n                                className: classes.projTypeMenuItemSelected\n                            }}\n                            value={searchParamsRef.current?.projType || '__all'}\n                            onChange={(event: React.ChangeEvent<{ name?: string; value: unknown }>): void => {\n                                const projType =\n                                    event.target.value !== '_all' ? (event.target.value as string) : undefined\n                                submitSearch({ ...(searchParamsRef.current as SearchParams), projType })\n                            }}\n                        >\n                            <MenuItem className={classes.projTypeMenuItem} value=\"__all\">\n                                <div className={classes.projTypeMenuItemName}>All Project Types</div>\n                                <div className={classes.projTypeMenuItemNum}>\n                                    {projTotals.__all > -1 ? `${projTotals.__all}` : '...'}\n                                </div>\n                            </MenuItem>\n                            {projectArr.map(({ name: prodName, id: prodId }, idx) => (\n                                <MenuItem className={classes.projTypeMenuItem} key={`prod-${idx}`} value={prodId}>\n                                    <div className={classes.projTypeMenuItemName}>{prodName}</div>\n                                    <div className={classes.projTypeMenuItemNum}>\n                                        {projTotals[prodId] > -1 ? `${projTotals[prodId]}` : '...'}\n                                    </div>\n                                </MenuItem>\n                            ))}\n                        </Select>\n                    </FormControl>\n                    <div className={classes.spacer} />\n                    <FormControl className={classes.resultsNum}>\n                        <InputLabel htmlFor=\"resultsNum\">Results</InputLabel>\n                        <Select\n                            id=\"resultsNum\"\n                            value={searchParamsRef.current?.limit}\n                            onChange={(event: React.ChangeEvent<{ name?: string; value: unknown }>): void => {\n                                submitSearch({\n                                    ...(searchParamsRef.current as SearchParams),\n                                    limit: event.target.value as number\n                                })\n                            }}\n                        >\n                            <MenuItem value={10}>10</MenuItem>\n                            <MenuItem value={20}>20</MenuItem>\n                            <MenuItem value={50}>50</MenuItem>\n                            <MenuItem value={100}>100</MenuItem>\n                        </Select>\n                    </FormControl>\n                </div>\n            )}\n\n            <TextField\n                id=\"outlined-helperText2\"\n                label=\"Metadata Search\"\n                fullWidth\n                autoFocus\n                placeholder=\"...\"\n                inputRef={searchMetaInputRef}\n                className={classes.textField}\n                margin=\"normal\"\n                variant=\"outlined\"\n                defaultValue={searchParamsRef.current?.metaStr || ''}\n                // value={}\n                onKeyDown={handleKeyPress}\n                onChange={(event): void => {\n                    searchParamsRef.current = {\n                        ...(searchParamsRef.current as SearchParams),\n                        metaStr: event.target.value as string\n                    }\n                }}\n            />\n            {advancedVals.length > 0 && (\n                <div className={classes.advanced}>\n                    {advancedVals.map((row, rid) => (\n                        <SearchAdvancedRow\n                            key={`advRow-${rid}`}\n                            row={row}\n                            options={allAdvancedOptions.filter((ao) => {\n                                return !advancedVals.find((row, idx) => idx !== rid && row[0] === ao.name)\n                            })}\n                            changeHandler={(newRow: [string, string], forceSubmit?: boolean): void => {\n                                const newAdvanced = [...advancedVals]\n                                newAdvanced[rid] = newRow\n                                setAdvancedVals(newAdvanced)\n                                if (forceSubmit) submitSearch(null, newAdvanced)\n                            }}\n                        />\n                    ))}\n                    <div>\n                        <Button onClick={(): void => submitSearch(null, [...advancedVals, ['', '']])}>+</Button>\n                        <Button onClick={(): void => submitSearch(null, advancedVals.slice(0, -1))}>-</Button>\n                    </div>\n                </div>\n            )}\n            <div className={classes.actionBar}>\n                <Button color=\"primary\" onClick={toggleAdvanced}>\n                    {advancedVals.length > 0 ? 'Hide' : 'Show'} Advanced\n                </Button>\n                <div className={classes.spacer} />\n                <Button\n                    className={classes.iconButton}\n                    color=\"primary\"\n                    variant=\"contained\"\n                    onClick={(): void => {\n                        submitSearch(searchParamsRef.current as SearchParams)\n                    }}\n                >\n                    <SearchIcon /> Search\n                </Button>\n                <Button\n                    className={classes.iconButton}\n                    color=\"secondary\"\n                    variant=\"contained\"\n                    onClick={(): void => {\n                        setAdvancedVals([])\n                        submitSearch(appDefaults.searchDefaultParams as SearchParams)\n                    }}\n                >\n                    Reset\n                </Button>\n            </div>\n        </Paper>\n    )\n}\n\nexport default SearchForm\n","import React, { useState, useEffect, useRef } from 'react'\nimport { search } from '@riverscapes/common'\nimport log from 'loglevel'\nimport { Program } from '@riverscapes/common'\nimport SearchForm from '../components/Search/SearchForm'\nimport { ProjTotals, setSearchParamsType, SearchParams } from '../types'\n\ninterface Props {\n    program?: Program\n    getCurrentToken: () => Promise<string>\n    url: string\n    searchParams: SearchParams\n    setSearchParams: (params: SearchParams) => void\n}\n\nconst SearchFormConnect: React.FC<Props> = ({\n    getCurrentToken,\n    url,\n    program,\n    searchParams,\n    setSearchParams\n}: Props) => {\n    const [projTotals, setProjTotals] = useState<ProjTotals>({})\n    const projTotalsRef = useRef<{}>()\n    projTotalsRef.current = projTotals\n\n    useEffect(() => {\n        if (program && url) {\n            getCurrentToken()\n                // The initial search is just to get at the total value\n                .then((jwt) => search(url, jwt, program.machineName, { limit: 0 }))\n                .then(\n                    ({ data }) =>\n                        data &&\n                        setProjTotals({\n                            ...projTotalsRef.current,\n                            __all: data.search ? data.search.total : 0\n                        })\n                )\n                .catch((err) => {\n                    log.error(err)\n                })\n            // HEre's where we get the product totals\n            program.products.reduce((promiseChain, prod) => {\n                const currTask = (): Promise<void> =>\n                    getCurrentToken()\n                        .then((jwt) => search(url, jwt, program.machineName, { projType: prod.id, limit: 0 }))\n                        .then(({ data }) => {\n                            data &&\n                                setProjTotals({\n                                    ...projTotalsRef.current,\n                                    [prod.id]: data.search ? data.search.total : 0\n                                })\n                        })\n                        .catch((err) => {\n                            setProjTotals({ ...projTotalsRef.current, [prod.id]: 0 })\n                            log.error(err)\n                        })\n                return promiseChain.then(currTask)\n            }, Promise.resolve())\n        }\n    }, [program, url, getCurrentToken])\n\n    return (\n        <SearchForm\n            projTotals={projTotals}\n            program={program as Program}\n            searchParams={searchParams}\n            setSearchParams={setSearchParams as setSearchParamsType}\n        />\n    )\n}\nSearchFormConnect['whyDidYouRender'] = true\nexport default SearchFormConnect\n","import { useEffect, useRef, useState } from 'react'\nimport { Match } from 'react-router-dom'\nimport { Program } from '@riverscapes/common'\nimport { mandatoryMetaColors } from '../config'\nimport log from 'loglevel'\n\nconst useProgram = (\n    match?: Match,\n    programs?: Program[],\n    onProgramChange?: (newProgram: Program) => void\n): Program | undefined => {\n    const [program, setProgram] = useState<Program>()\n    const currProgramRef = useRef<Program>()\n    currProgramRef.current = program\n\n    useEffect((): void => {\n        if (!match || !programs || !match.params || !match.params.program) return\n        try {\n            const newProg = programs?.find((p) => p.machineName === match.params.program)\n            if (newProg && (!currProgramRef.current || currProgramRef.current.machineName !== newProg.machineName)) {\n                // Add colours in for the mandatory metadata\n                newProg.collections = newProg.collections.map((c, idx) => ({\n                    ...c,\n                    color: mandatoryMetaColors[idx % mandatoryMetaColors.length]\n                }))\n                currProgramRef.current = newProg\n                log.debug('useProgram', { match, newProg, programs })\n                setProgram(newProg)\n                if (onProgramChange) onProgramChange(newProg)\n            }\n        } catch {\n            return\n        }\n    }, [match, programs, onProgramChange])\n\n    return program\n}\n\nexport default useProgram\n","import { useEffect, useRef, useState } from 'react'\nimport { Match } from 'react-router-dom'\nimport { Program, Project, getProject } from '@riverscapes/common'\nimport { endpoints } from '../config'\nimport { UseHostedReturn } from '@northarrowresearch/react-auth'\nimport log from 'loglevel'\n\ntype UseProjectState = {\n    project?: Project\n    loading: boolean\n}\n\nconst useProject = (auth: UseHostedReturn, match?: Match, program?: Program): UseProjectState => {\n    const [projState, setProjState] = useState<UseProjectState>({ loading: false })\n    const currProjectStateRef = useRef<UseProjectState>()\n    currProjectStateRef.current = projState\n\n    useEffect((): void => {\n        if (!match || !match.params) return\n        if (!match.params.project) {\n            setProjState({ loading: false })\n        }\n        try {\n            if (!program || !match || !match.params || !match.params.project || match.params.project.length < 10) return\n            const progMachineName = program.machineName\n            let done = false\n            // Set a timeout so that quick-loads don't give us a status bar\n            setTimeout(() => {\n                if (!done) setProjState({ ...currProjectStateRef.current, loading: true })\n            }, 500)\n            auth.getCurrentToken()\n                .then((jwt) => getProject(endpoints.graphql, jwt, match.params.project, progMachineName))\n                .then((res) => {\n                    done = true\n                    log.debug('getProjectById::Response', res)\n                    if (\n                        res.data &&\n                        currProjectStateRef.current &&\n                        currProjectStateRef.current.project &&\n                        currProjectStateRef.current?.project.id === res.data.project.id\n                    ) {\n                        return\n                    } else if (res.data) {\n                        setProjState({ project: res.data.project, loading: false })\n                    } else {\n                        setProjState({ project: undefined, loading: false })\n                    }\n                })\n                .catch((err) => {\n                    done = true\n                    setProjState({ project: undefined, loading: false })\n                    log.error('api.getProjectById error', err)\n                })\n        } catch {\n            return\n        }\n    }, [match, program, auth])\n\n    return projState\n}\n\nexport default useProject\n","/* eslint-disable @typescript-eslint/no-use-before-define */\nimport React, { useState, useRef, useCallback, useMemo } from 'react'\nimport { History, Match } from 'react-router-dom'\nimport _ from 'lodash'\nimport log from 'loglevel'\nimport NotAllowedModal from '../components/NotAllowedModal'\n// import { useHosted } from '@northarrowresearch/react-auth'\nimport { UseHostedReturn } from '@northarrowresearch/react-auth'\nimport ProjectModal from '../components/ProjectModal/ProjectModal'\nimport { Typography, CircularProgress } from '@material-ui/core'\n\nimport { Loading } from '@northarrowresearch/react-common'\nimport ResultsPaneConnect from './SearchResults.connect'\nimport SearchFormConnect from './SearchForm.connect'\nimport useProgram from '../hooks/useProgram'\nimport useProject from '../hooks/useProject'\nimport { endpoints, appDefaults } from '../config'\nimport {\n    downloadFile,\n    Project,\n    Program,\n    downloadZipFile as apiDownloadZip,\n    WarehouseRoleEnum\n} from '@riverscapes/common'\n\nimport { PendingZips, SearchParams } from '../types'\n\nconst url = endpoints.graphql\n/**\n * This is the over-arching wrapper for the app. It combines all the\n * same place. Time will tell if that's a good strategy.\n */\ninterface Props {\n    auth: UseHostedReturn\n    match: Match\n    history: History\n    programs: Program[]\n}\n\nconst AppConnect: React.FC<Props> = ({ match, history, auth, programs }: Props) => {\n    // This is the project popup.\n\n    const [pendingZips, setPendingZips] = useState<PendingZips>({})\n    const [searchParams, setSearchParams] = useState<SearchParams>(appDefaults.searchDefaultParams) // maybe context?\n\n    // give access to pendingZips asynchronously\n    const pendingZipsRef = useRef<PendingZips>()\n    pendingZipsRef.current = pendingZips\n\n    const onProgramChange = useCallback((newProg: Program) => {\n        setSearchParams(appDefaults.searchDefaultParams)\n    }, [])\n\n    const program = useProgram(match, programs, onProgramChange)\n    const { project, loading: isProjLoading } = useProject(auth, match, program)\n\n    const navigate: (progName: string, projId?: string) => void = useCallback(\n        (progName: string, projId?: string): void => {\n            if (projId && projId.length > 10) history.push('/' + progName + '/' + projId)\n            else history.push('/' + progName)\n        },\n        [history]\n    )\n\n    const downloadFileFn = useCallback(\n        async (project: Project, fkey: string): Promise<void> => {\n            if (!program) return Promise.resolve()\n            try {\n                const jwt = await auth.getCurrentToken()\n                const res = await downloadFile(\n                    endpoints.graphql,\n                    jwt,\n                    project.projType,\n                    program.machineName,\n                    project.id,\n                    fkey\n                )\n                try {\n                    if (res.data) window.open(res.data.downloadFile.downloadUrl, '_self')\n                } catch (err) {\n                    log.error('DOWNLOAD err', err)\n                }\n            } catch (error) {\n                log.error('DOWNLOAD err', error)\n            }\n        },\n        [program, auth]\n    )\n    const downloadZipFile = useCallback(\n        (project: Project): Promise<void> => {\n            if (!program) return Promise.resolve()\n            const checkZipFunc = (): Promise<void> =>\n                auth\n                    .getCurrentToken()\n                    .then((jwt) =>\n                        apiDownloadZip(endpoints.graphql, jwt, project.projType, program.machineName, project.id)\n                    )\n                    .then((res) => {\n                        try {\n                            if (res.data && !res.data.downloadZip.pendingSince) {\n                                setPendingZips(_.pickBy(pendingZipsRef.current, (val, key) => key !== project.id))\n                                window.open(res.data.downloadZip.downloadUrl, '_self')\n                            } else {\n                                setPendingZips({\n                                    ...pendingZipsRef.current,\n                                    [project.id]: res.data ? res.data.downloadZip.pendingSince : Date.now()\n                                })\n                                setTimeout(checkZipFunc, 5000)\n                            }\n                        } catch (err) {\n                            log.error('DOWNLOAD err', err)\n                        }\n                    })\n                    .catch((err) => {\n                        log.error('DOWNLOAD err', err)\n                    })\n            // try once\n            return checkZipFunc()\n        },\n        [program, auth]\n    )\n\n    // Modal should be pure and unaffected by anything other than project state\n    const projectModal = useMemo(\n        () =>\n            project && (\n                <ProjectModal\n                    program={program as Program}\n                    project={project}\n                    onClose={(): void => {\n                        if (program) navigate(program.machineName)\n                    }}\n                    downloadFile={downloadFileFn}\n                    pendingZips={pendingZips}\n                    downloadZipFile={downloadZipFile}\n                />\n            ),\n        [project, downloadFileFn, downloadZipFile, navigate, pendingZips, program]\n    )\n\n    const hasViewAccess = program && Object.values(WarehouseRoleEnum).indexOf(program.role) > -1\n    log.info('App.Connect', { hasViewAccess, program })\n    // The searchConenct should only be affected by search state\n    const searchConnect = useMemo(\n        () => (\n            <React.Fragment>\n                <SearchFormConnect\n                    {...{\n                        getCurrentToken: auth.getCurrentToken,\n                        url,\n                        program: program as Program,\n                        searchParams,\n                        setSearchParams\n                    }}\n                />\n                <ResultsPaneConnect\n                    {...{\n                        getCurrentToken: auth.getCurrentToken,\n                        url,\n                        navigate,\n                        program: program as Program,\n                        searchParams,\n                        setSearchParams,\n                        pendingZips,\n                        downloadZipFile\n                    }}\n                />\n            </React.Fragment>\n        ),\n        [searchParams, program, pendingZips, downloadZipFile, auth.getCurrentToken, navigate]\n    )\n\n    if (program && !hasViewAccess)\n        return <NotAllowedModal program={program as Program} onClose={(): void => history.push('/')} />\n\n    return (\n        <React.Fragment>\n            {isProjLoading && (\n                <Loading\n                    logoSVG={<CircularProgress size=\"7rem\" thickness={7} />}\n                    status={\n                        <Typography variant=\"h5\" component=\"div\">\n                            Loading Project...\n                        </Typography>\n                    }\n                    containerProps={{\n                        maxWidth: 'xl',\n                        style: {\n                            position: 'absolute',\n                            zIndex: 1000,\n                            top: 0,\n                            left: 0,\n                            width: '100%',\n                            height: '100%',\n                            background: '#FFFFFF77'\n                        }\n                    }}\n                />\n            )}\n            {searchConnect}\n            {projectModal}\n        </React.Fragment>\n    )\n}\nexport default AppConnect\n","import React from 'react'\nimport IconButton from '@material-ui/core/IconButton'\n\nimport PersonAddIcon from '@material-ui/icons/PersonAdd'\nimport FaceIcon from '@material-ui/icons/Face'\nimport CancelIcon from '@material-ui/icons/Cancel'\n\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport ListItem from '@material-ui/core/ListItem'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport Avatar from '@material-ui/core/Avatar'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\nimport Switch from '@material-ui/core/Switch'\n\n// import { FieldDef } from '../types'\n// import MenuIcon from '@material-ui/icons/Menu'\nimport { WarehouseRoleEnum, UserType } from '@riverscapes/common'\nimport { makeStyles, Theme, StyleRules } from '@material-ui/core/styles'\n// import log from 'loglevel'\n\nexport interface UserRowType extends UserType {\n    loading?: boolean\n}\n\ninterface Props {\n    user: UserRowType\n    isSuperUser?: boolean\n    onChange: (userId: string, newRole: WarehouseRoleEnum | null) => void\n}\n\nconst useStyles = makeStyles(\n    (theme: Theme): StyleRules => ({\n        root: {},\n        allowSelect: {\n            userSelect: 'text',\n            cursor: 'auto'\n        },\n        google: {\n            ...theme.typography.caption,\n            borderRadius: theme.spacing(1.5),\n            padding: theme.spacing(0.5, 1),\n            background: theme.palette.primary.main,\n            color: theme.palette.primary.contrastText,\n            marginLeft: theme.spacing(2),\n            border: `1px solid ${theme.palette.primary.dark}`\n        },\n        removeIcon: {\n            marginLeft: theme.spacing(2)\n        }\n    })\n)\n\nconst AdminRow: React.FC<Props> = ({ user, onChange, isSuperUser }: Props) => {\n    const classes = useStyles()\n    const loading = user.loading\n\n    const onSwitchChange = (swRole: WarehouseRoleEnum, swVal: boolean): void => {\n        if (swRole === WarehouseRoleEnum.Admin) {\n            if (swVal) onChange(user.username, WarehouseRoleEnum.Admin)\n            else onChange(user.username, WarehouseRoleEnum.Participant)\n        } else if (swRole === WarehouseRoleEnum.Participant) {\n            if (swVal) onChange(user.username, WarehouseRoleEnum.Participant)\n            else onChange(user.username, WarehouseRoleEnum.Observer)\n        }\n    }\n    const superUser = user.role === WarehouseRoleEnum.SuperUser\n\n    return (\n        <ListItem disabled={loading || superUser} className={classes.root} divider>\n            <ListItemAvatar>\n                {user.picture && user.picture.length > 0 ? (\n                    <Avatar alt={user.name} src={user.picture} />\n                ) : (\n                    <Avatar alt={user.name}>\n                        <FaceIcon color=\"inherit\" />\n                    </Avatar>\n                )}\n            </ListItemAvatar>\n            <ListItemText\n                id=\"switch-list-label-wifi\"\n                primary={\n                    <span>\n                        <span className={classes.allowSelect}>{user.name}</span>\n                        {user.username.startsWith('google') && <span className={classes.google}>Google</span>}\n                    </span>\n                }\n                secondary={<span className={classes.allowSelect}>{user.email}</span>}\n            />\n            {user.role && (\n                <ListItemSecondaryAction>\n                    {isSuperUser && !superUser && (\n                        <FormControlLabel\n                            control={\n                                <Switch\n                                    edge=\"end\"\n                                    onChange={(e): void => onSwitchChange(WarehouseRoleEnum.Admin, e.target.checked)}\n                                    checked={\n                                        [WarehouseRoleEnum.Admin, WarehouseRoleEnum.SuperUser].indexOf(\n                                            user.role as WarehouseRoleEnum\n                                        ) > -1\n                                    }\n                                    disabled={\n                                        loading ||\n                                        [WarehouseRoleEnum.Observer].indexOf(user.role as WarehouseRoleEnum) > -1\n                                    }\n                                    inputProps={{ 'aria-labelledby': 'switch-list-label-wifi' }}\n                                />\n                            }\n                            labelPlacement=\"start\"\n                            label=\"Program Admin\"\n                        />\n                    )}\n                    {!superUser && (\n                        <FormControlLabel\n                            control={\n                                <Switch\n                                    edge=\"end\"\n                                    onChange={(e): void =>\n                                        onSwitchChange(WarehouseRoleEnum.Participant, e.target.checked)\n                                    }\n                                    checked={\n                                        [\n                                            WarehouseRoleEnum.Participant,\n                                            WarehouseRoleEnum.Admin,\n                                            WarehouseRoleEnum.SuperUser\n                                        ].indexOf(user.role as WarehouseRoleEnum) > -1\n                                    }\n                                    disabled={\n                                        loading ||\n                                        [WarehouseRoleEnum.Admin, WarehouseRoleEnum.SuperUser].indexOf(\n                                            user.role as WarehouseRoleEnum\n                                        ) > -1\n                                    }\n                                    inputProps={{ 'aria-labelledby': 'switch-list-label-wifi' }}\n                                />\n                            }\n                            labelPlacement=\"start\"\n                            label=\"Participant\"\n                        />\n                    )}\n\n                    {!superUser && (\n                        <Tooltip title={'Remove this user from the program'}>\n                            <>\n                                {/* Tooltip cannot have a disabled child */}\n                                <IconButton\n                                    edge=\"end\"\n                                    className={classes.removeIcon}\n                                    aria-label=\"delete\"\n                                    color=\"secondary\"\n                                    disabled={loading}\n                                    onClick={(): void => onChange(user.username, null)}\n                                >\n                                    <CancelIcon />\n                                </IconButton>\n                            </>\n                        </Tooltip>\n                    )}\n                </ListItemSecondaryAction>\n            )}\n            {!user.role && (\n                <ListItemSecondaryAction>\n                    <Tooltip title={'Add this user to the program'}>\n                        <>\n                            {/* Tooltip cannot have a disabled child */}\n                            <IconButton\n                                edge=\"end\"\n                                aria-label=\"delete\"\n                                color=\"secondary\"\n                                disabled={loading}\n                                onClick={(): void => onChange(user.username, WarehouseRoleEnum.Observer)}\n                            >\n                                <PersonAddIcon />\n                            </IconButton>\n                        </>\n                    </Tooltip>\n                </ListItemSecondaryAction>\n            )}\n        </ListItem>\n    )\n}\n\nexport default AdminRow\n","import React, { useState, useMemo } from 'react'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport { WarehouseRoleEnum, UserType } from '@riverscapes/common'\nimport AdminRow from './AdminRow'\nimport List from '@material-ui/core/List'\nimport FormControl from '@material-ui/core/FormControl'\nimport Paper from '@material-ui/core/Paper'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport Input from '@material-ui/core/Input'\nimport { makeStyles } from '@material-ui/core/styles'\nimport SearchOutlinedIcon from '@material-ui/icons/SearchOutlined'\nimport { Typography } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: 'flex',\n        overflow: 'hidden',\n        flexDirection: 'column',\n        margin: theme.spacing(2)\n    },\n    description: {\n        margin: theme.spacing(0, 2)\n    },\n    list: {\n        flexGrow: 1,\n        overflow: 'scroll',\n        margin: theme.spacing(1, 2)\n    },\n    formControl: {\n        margin: theme.spacing(1, 2)\n    }\n}))\n\ninterface Props {\n    users: UserType[]\n    isSuperUser?: boolean\n    title: string\n    description?: string\n    onChange: (userId: string, newRole: WarehouseRoleEnum | null) => void\n}\n\nconst AdminList: React.FC<Props> = ({ users, onChange, title, description, isSuperUser }: Props) => {\n    const classes = useStyles()\n    const [search, setSearch] = useState<string>()\n    const dispUsers = useMemo(() => {\n        if (search && search.length >= 3) {\n            const searchArr = (search as string).split(' ').filter((s) => s.length >= 3)\n            return users.filter((u) => {\n                // Make sure every work is represented in the name or email\n                return searchArr.every((word) => {\n                    return (\n                        u.name.toLocaleLowerCase().indexOf(word.toLocaleLowerCase()) > -1 ||\n                        u.email.toLocaleLowerCase().indexOf(word.toLocaleLowerCase()) > -1\n                    )\n                })\n            })\n        } else return users\n    }, [users, search])\n\n    return (\n        <Paper className={classes.root}>\n            <Toolbar>\n                <Typography variant=\"subtitle1\">{title}</Typography>\n            </Toolbar>\n            <Typography className={classes.description} variant=\"caption\">\n                {description || ' '}\n            </Typography>\n            <FormControl className={classes.formControl}>\n                <Input\n                    fullWidth\n                    onChange={(e): void => setSearch(e.target.value)}\n                    startAdornment={\n                        <InputAdornment position=\"start\">\n                            <SearchOutlinedIcon />\n                        </InputAdornment>\n                    }\n                />\n            </FormControl>\n            <List className={classes.list}>\n                {dispUsers.map((u, idx) => (\n                    <AdminRow key={`userRow-${idx}`} user={u} onChange={onChange} isSuperUser={isSuperUser} />\n                ))}\n            </List>\n        </Paper>\n    )\n}\nexport default AdminList\n","import React from 'react'\nimport { WarehouseRoleEnum, UserType, Program } from '@riverscapes/common'\nimport { Loading } from '@northarrowresearch/react-common'\nimport Paper from '@material-ui/core/Paper'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Typography } from '@material-ui/core'\nimport { warehouseIconUrl } from '../../config'\nimport AdminList from './AdminList'\n\nconst useStyles = makeStyles((theme) => ({\n    rootContainer: {\n        height: '100%',\n        width: '100%',\n        overflow: 'hidden',\n        position: 'relative'\n    },\n    root: {\n        height: '100%',\n        width: '100%',\n        display: 'flex',\n        overflow: 'hidden',\n        flexDirection: 'column'\n    },\n    paperContainer: {\n        display: 'flex',\n        width: '100%',\n        height: '100%',\n        overflow: 'hidden',\n        '&>:first-child': {\n            flex: '1 1 60%'\n        },\n        '&>:last-child': {\n            flex: '1 1 40%'\n        }\n    },\n    instructions: {\n        color: theme.palette.primary.contrastText,\n        background: theme.palette.primary.main,\n        margin: theme.spacing(2),\n        padding: theme.spacing(2)\n    },\n    list: {\n        flexGrow: 1,\n        overflow: 'scroll',\n        margin: theme.spacing(1, 2)\n    },\n    loading: {\n        // border: '10px solid red',\n        background: '#FFFFFFCC',\n        position: 'absolute',\n        zIndex: 1000\n    }\n}))\n\ninterface Props {\n    users: UserType[]\n    program: Program\n    isSuperUser?: boolean\n    loading?: boolean\n    onChange: (userId: string, newRole: WarehouseRoleEnum | null) => void\n}\n\nfunction sortUsers(ulist: UserType[]): void {\n    ulist.sort((a: UserType, b: UserType): number => {\n        return a.name.toLowerCase().localeCompare(b.name.toLowerCase())\n    })\n}\n\nconst AdminPanel: React.FC<Props> = ({ users, program, loading, isSuperUser, onChange }: Props) => {\n    const classes = useStyles()\n    const progUsers = users.filter((u) => u.role)\n    sortUsers(progUsers)\n    const nonUsers = users.filter((u) => !u.role)\n    sortUsers(nonUsers)\n\n    const isProgPublic = program && program.meta && program.meta.access && program.meta.access === 'PUBLIC'\n    const logoSVG = <img src={warehouseIconUrl} alt=\"logo\" />\n    return (\n        <div className={classes.rootContainer}>\n            {loading && (\n                <Loading\n                    logoSVG={logoSVG}\n                    title={'Riverscapes Warehouse'}\n                    message={`Loading Users: ${users.length}`}\n                    containerProps={{ maxWidth: 'xl', className: classes.loading }}\n                />\n            )}\n            <div className={classes.root}>\n                <Paper className={classes.instructions}>\n                    <Typography variant=\"h4\" color=\"inherit\">\n                        User admin: {program && program.name}\n                    </Typography>\n                    {isProgPublic ? (\n                        <Typography variant=\"body2\" color=\"inherit\">\n                            This program is <strong>public</strong>. All authenticated users in the Riverscapes user\n                            pool will be able to see and download projects.\n                            <strong>Participants</strong> can add or remove projects.\n                        </Typography>\n                    ) : (\n                        <Typography variant=\"body2\" color=\"inherit\">\n                            This program is <strong>private</strong> so you have to explicitly add users to view it.{' '}\n                            <strong>Participants</strong> can add or remove projects.\n                        </Typography>\n                    )}\n                </Paper>\n                <div className={classes.paperContainer}>\n                    <AdminList\n                        users={progUsers}\n                        onChange={onChange}\n                        isSuperUser={isSuperUser}\n                        title=\"Current program users:\"\n                        description=\"Everyone in this list is an Observer and can view and download all projects.\"\n                    />\n                    <AdminList\n                        users={nonUsers}\n                        onChange={onChange}\n                        isSuperUser={isSuperUser}\n                        title=\"Add users:\"\n                        description={\n                            isProgPublic\n                                ? 'Users in this list CAN see everything in the program because the program is PUBLIC'\n                                : 'Users in this list cannot see or donwload projects in this program'\n                        }\n                    />\n                </div>\n            </div>\n        </div>\n    )\n}\nexport default AdminPanel\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\nimport { Program, WarehouseRoleEnum, adminGetUsers, adminUpdateUserPermissions } from '@riverscapes/common'\nimport AdminPanel from './AdminPanel'\nimport { UserRowType } from './AdminRow'\nimport { Match, History } from 'react-router-dom'\nimport { endpoints } from '../../config'\nimport useProgram from '../../hooks/useProgram'\nimport { UseHostedReturn } from '@northarrowresearch/react-auth'\nimport log from 'loglevel'\n\ninterface Props {\n    programs?: Program[]\n    match?: Match\n    history?: History\n    auth: UseHostedReturn\n}\ntype UserState = {\n    users: UserRowType[]\n    loading: boolean\n}\n\nconst AdminConnect: React.FC<Props> = ({ match, programs, auth, history }: Props) => {\n    const [userState, setUsersState] = useState<UserState>({\n        users: [],\n        loading: true\n    })\n    const userStateRef = useRef<UserState>()\n    const nextTokenRef = useRef<string>()\n    userStateRef.current = userState\n\n    const program = useProgram(match, programs)\n\n    // Safety check and redirect if not allowed\n    useEffect(() => {\n        if (\n            history &&\n            program &&\n            program.role !== WarehouseRoleEnum.SuperUser &&\n            program.role !== WarehouseRoleEnum.Admin\n        ) {\n            history.push(`/${program.machineName}`)\n        }\n    }, [program, history])\n\n    useEffect(() => {\n        if (!program || !auth) return\n        async function startFunc(): Promise<void> {\n            let first = true\n            while (first || nextTokenRef.current) {\n                first = false\n                nextTokenRef.current = await auth\n                    .getCurrentToken()\n                    .then((jwt) =>\n                        adminGetUsers(endpoints.graphql, jwt, program?.machineName as string, 50, nextTokenRef.current)\n                    )\n                    .then((res) => {\n                        const newToken = res.data?.getUsers.nextToken\n                        // filter out the self. You're not allowed to change your own permissions\n                        const myToken = auth.user ? auth.user.accessToken.payload.username : 'NOBODY'\n                        const incomingUsers = (res.data?.getUsers.users || []).filter((u) => u.username !== myToken)\n\n                        setUsersState({\n                            users: [...(userStateRef.current?.users || []), ...incomingUsers],\n                            loading: Boolean(newToken)\n                        })\n                        return newToken\n                    })\n                    .catch((err) => {\n                        log.error(err)\n                        return undefined\n                    })\n            }\n        }\n        startFunc()\n    }, [program, auth])\n\n    const userChange = useCallback(\n        (userId: string, newRole: WarehouseRoleEnum | null): Promise<void> => {\n            // Store the user so we can return it if the query fails\n            const foundUser = (userStateRef.current as UserState).users.find((u) => u.username === userId)\n            if (!foundUser) throw new Error('Could not find user to change permissions of')\n            const backupUser = Object.assign({}, foundUser)\n\n            // Optimistically set the change we want to see with loading greyed out\n            setUsersState({\n                ...(userStateRef.current as UserState),\n                users: (userStateRef.current as UserState).users.map((u) => {\n                    if (u.username !== userId) return u\n                    else {\n                        return {\n                            ...u,\n                            role: newRole,\n                            loading: true\n                        }\n                    }\n                })\n            })\n            const reset = (): void => {\n                log.error('ADMIN:::Operation failed. Putting the record back')\n                setUsersState({\n                    ...(userStateRef.current as UserState),\n                    users: (userStateRef.current as UserState).users.map((u) => {\n                        if (u.username !== userId) return u\n                        else return backupUser\n                    })\n                })\n            }\n            const myTimeout = setTimeout(reset, 3000)\n            return auth\n                .getCurrentToken()\n                .then((jwt) =>\n                    adminUpdateUserPermissions(endpoints.graphql, jwt, userId, program?.machineName as string, newRole)\n                )\n                .then((data) => {\n                    clearTimeout(myTimeout)\n                    // Set the optimistic loading state first\n                    setUsersState({\n                        ...(userStateRef.current as UserState),\n                        users: (userStateRef.current as UserState).users.map((u) => {\n                            if (u.username !== userId) return u\n                            else\n                                return {\n                                    ...u,\n                                    ...data.data?.updateUser,\n                                    loading: false\n                                }\n                        })\n                    })\n                    log.debug('Admin UPDATE', data)\n                })\n                .catch((err) => {\n                    log.error('User update query failure', err)\n                    reset()\n                })\n        },\n        [auth, program]\n    )\n\n    return (\n        <AdminPanel\n            users={userState.users}\n            isSuperUser={Boolean(program && program.role === WarehouseRoleEnum.SuperUser)}\n            onChange={userChange}\n            loading={Boolean(userState.loading)}\n            program={program as Program}\n        />\n    )\n}\nexport default AdminConnect\n","import React from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport Button from '@material-ui/core/Button'\nimport Paper from '@material-ui/core/Paper'\nimport LockOpenIcon from '@material-ui/icons/LockOpen'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles((theme) => ({\n    rootContainer: {\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    spacer: {\n        flexGrow: 1\n    },\n    root: {\n        padding: theme.spacing(2, 4, 4, 4)\n    },\n    logoContainer: {\n        padding: theme.spacing(2),\n        textAlign: 'center'\n    },\n    logo: {}\n}))\n\ninterface Props {\n    signIn: () => Promise<void>\n}\n\nconst LoginScreen: React.FC<Props> = ({ signIn }: Props) => {\n    const classes = useStyles()\n\n    return (\n        <div className={classes.rootContainer}>\n            <div className={classes.spacer} />\n            <Paper className={classes.root}>\n                <div className={classes.logoContainer}>\n                    <img className={classes.logo} src={process.env.PUBLIC_URL + '/RiverscapesLogo.png'} alt=\"logo\" />\n                </div>\n                <Typography paragraph variant=\"body1\">\n                    Welcome to the Riverscapes Warehouse. Please click the button below to log in.\n                </Typography>\n                <Typography paragraph variant=\"body1\">\n                    If you don't have an account you will be prompted to use your Google account or create a new account\n                    using another email address.\n                </Typography>\n                <Button\n                    variant=\"contained\"\n                    onClick={signIn}\n                    color=\"primary\"\n                    fullWidth\n                    size=\"large\"\n                    startIcon={<LockOpenIcon />}\n                >\n                    Sign In\n                </Button>\n            </Paper>\n            <div className={classes.spacer} />\n        </div>\n    )\n}\nexport default LoginScreen\n","import { createMuiTheme, ThemeOptions } from '@material-ui/core/styles'\nimport { indigo, orange } from '@material-ui/core/colors'\n// import { ThemeOptions } from '@material-ui/core/styles/createTypography'\n// import { fade } from '@material-ui/core/styles/colorManipulator'\n\n// We need this so that it doesn't freak out abotu old variants\n// const typography = {\n//     useNextVariants: true\n// }\n\nconst home: ThemeOptions = {\n    palette: {\n        primary: {\n            main: indigo[500]\n        },\n        secondary: {\n            main: orange[600],\n            contrastText: '#FFFFFF'\n        },\n        text: {\n            // primary: colors.jet,\n            // secondary: fade(colors.jet, 0.7)\n        }\n    }\n    // typography\n    // overrides\n}\n\nconst homeDark: ThemeOptions = {\n    ...home,\n    palette: {\n        ...home.palette,\n        type: 'dark'\n    }\n}\n\nexport default {\n    home: createMuiTheme(home as ThemeOptions),\n    homeDark: createMuiTheme(homeDark as ThemeOptions)\n}\n","import React, { useMemo } from 'react'\nimport { ThemeProvider } from '@material-ui/styles'\nimport { Program } from '@riverscapes/common'\nimport { Footer, Topbar } from '@riverscapes/react-common'\nimport { AppFrame } from '@northarrowresearch/react-common'\nimport { History, Match, useHistory } from 'react-router-dom'\nimport { ContainerProps } from '@material-ui/core/Container'\nimport { version } from '../config'\nimport useProgram from '../hooks/useProgram'\nimport themes from '../themes'\nimport log from 'loglevel'\n\ninterface Props {\n    children: React.ReactNode | React.ReactNode[]\n    programs?: Program[]\n    history?: History\n    match?: Match\n    noScroll?: boolean\n    containerProps?: Partial<ContainerProps>\n    signOut?: () => Promise<void>\n}\n\nconst AppWrapper: React.FC<Props> = ({\n    children,\n    match,\n    history,\n    programs,\n    signOut,\n    containerProps,\n    noScroll\n}: Props) => {\n    const program = useProgram(match, programs)\n    return (\n        <ThemeProvider theme={themes.home}>\n            <AppFrame\n                containerProps={{ maxWidth: !program ? 'sm' : 'md', ...containerProps }}\n                noScroll={noScroll}\n                topbar={\n                    <Topbar\n                        history={history}\n                        programs={programs as Program[]}\n                        title=\"Riverscapes Warehouse\"\n                        signOutHandler={signOut}\n                        program={program as Program}\n                    />\n                }\n                footer={<Footer version={version as string} />}\n            >\n                {children}\n            </AppFrame>\n        </ThemeProvider>\n    )\n}\nexport default AppWrapper\n\nexport const CosmosAppWrapper: React.FC<Props> = ({ children, programs, containerProps, noScroll }: Props) => {\n    const signOut = (): Promise<void> => Promise.resolve(log.info('logging out'))\n    const history = useHistory()\n    const program = useMemo(() => {\n        try {\n            return programs ? programs[0] : null\n        } catch {\n            return null\n        }\n    }, [programs])\n    return (\n        <ThemeProvider theme={themes.home}>\n            <AppFrame\n                containerProps={{ maxWidth: !program ? 'sm' : 'md', ...containerProps }}\n                noScroll={noScroll}\n                topbar={\n                    <Topbar\n                        history={history}\n                        programs={programs as Program[]}\n                        title=\"Riverscapes Warehouse\"\n                        signOutHandler={signOut}\n                        program={program as Program}\n                    />\n                }\n                footer={<Footer version={version as string} />}\n            >\n                {children}\n            </AppFrame>\n        </ThemeProvider>\n    )\n}\n","import React, { useState, useEffect, useCallback } from 'react'\nimport AppConnect from './App.connect'\nimport { ProgramChooser } from '@riverscapes/react-common'\nimport { Route, Switch, History, useHistory } from 'react-router-dom'\nimport { Loading } from '@northarrowresearch/react-common'\nimport { useHosted, UseHostedReturn } from '@northarrowresearch/react-auth'\nimport { endpoints, redirectUrl, isDev, version, warehouseIconUrl } from '../config'\nimport { authCheck } from '@riverscapes/common'\nimport AdminComponent from '../components/Admin'\nimport LoginScreen from '../components/LoginScreen'\nimport AppWrapper from '../components/AppWrapper'\nimport { Program, Project, getPrograms } from '@riverscapes/common'\nimport log from 'loglevel'\n\nconst AppAuthConnect: React.FC = () => {\n    const [authInfo, setAuthInfo] = useState<any>()\n    const [programsState, setProgramsState] = useState<{ programs: Program[]; loading: boolean }>()\n    const [isAppPreLoading, setIsAppPreLoading] = useState(true)\n    const auth: UseHostedReturn = useHosted(authInfo, false, isDev)\n    const history = useHistory()\n\n    // Go get all the startup info we need to start logging in\n    // Initial fetch gets us all the program objects\n    useEffect(() => {\n        authCheck(endpoints.graphql, '')\n            .then((authResp) => {\n                log.debug('authResp', authResp)\n                const authVals = authResp.data?.auth\n                if (authVals && authVals.region) {\n                    setAuthInfo({\n                        region: authVals.region,\n                        userPoolId: authVals.userPool,\n                        userPoolWebClientId: authVals.clientId,\n                        mandatorySignIn: true,\n                        oauth: {\n                            domain: authVals.domain,\n                            scope: ['email', 'profile', 'openid'],\n                            redirectSignIn: redirectUrl.toString(),\n                            redirectSignOut: redirectUrl.toString(),\n                            responseType: 'code'\n                        }\n                    })\n                    setIsAppPreLoading(false)\n                }\n            })\n            .catch((err) => {\n                log.error('api.getPrograms error', err)\n            })\n    }, [])\n\n    // This lets us do a redirect after login using localstorage\n    useEffect(() => {\n        if (!history) return\n        const storageUrl = localStorage.getItem('RSUrl')\n        const localUrl = history.location.pathname\n        log.debug('LOCALSTORAGE:::REDIRECT checking', storageUrl, localUrl, auth)\n\n        if (!auth.isAuthenticated && !auth.error && auth.isAuthComplete) {\n            log.debug('LOCALSTORAGE:::SET', localUrl)\n            localStorage.setItem('RSUrl', localUrl)\n        }\n        if (storageUrl && auth.isAuthenticated && auth.isAuthComplete && !auth.error) {\n            if (localUrl !== storageUrl) {\n                log.debug('LOCALSTORAGE:::REDIRECT', localUrl, storageUrl)\n                history.push(storageUrl)\n            }\n            localStorage.removeItem('RSUrl')\n        }\n    }, [history, auth])\n\n    const navigate = useCallback((history: History, program: Program, project?: Project): void => {\n        if (project) history.push('/' + program.machineName + '/' + project.id)\n        else history.push('/' + program.machineName)\n    }, [])\n\n    // Initial fetch gets us all the program objects\n    useEffect(() => {\n        if (!auth.isAuthenticated || programsState?.programs) return\n        setProgramsState({ programs: [], loading: true })\n        auth.getCurrentToken()\n            .then((jwt) => getPrograms(endpoints.graphql, jwt))\n            .then((allPrograms) => {\n                log.debug('API GetPrograms', allPrograms)\n                if (allPrograms.data && allPrograms.data.programs) {\n                    setProgramsState({ programs: allPrograms.data.programs, loading: false })\n                }\n            })\n            .catch((err) => {\n                log.error('api.getPrograms error', err)\n                // setIsAppPreLoading(false)\n            })\n    }, [auth, programsState])\n\n    const logoSVG = <img src={warehouseIconUrl} alt=\"logo\" />\n\n    // render the login helper screen if that's called for\n    if (isAppPreLoading) {\n        return (\n            <AppWrapper>\n                <Loading\n                    logoSVG={logoSVG}\n                    title={'Riverscapes Warehouse'}\n                    message={'Loading authentication info'}\n                    version={version}\n                />\n            </AppWrapper>\n        )\n    } else {\n        if (!auth.isAuthenticated) {\n            if (!auth.isAuthComplete) {\n                return (\n                    <AppWrapper>\n                        <Loading\n                            logoSVG={logoSVG}\n                            title={'Riverscapes Warehouse'}\n                            message={'Authenticating'}\n                            version={version}\n                        />\n                    </AppWrapper>\n                )\n            }\n            return (\n                <AppWrapper noScroll>\n                    <LoginScreen signIn={auth.signIn} />\n                </AppWrapper>\n            )\n        } else if (!programsState || programsState?.loading) {\n            return (\n                <AppWrapper>\n                    <Loading\n                        logoSVG={logoSVG}\n                        title={'Riverscapes Warehouse'}\n                        message={'Loading Programs'}\n                        version={version}\n                    />\n                </AppWrapper>\n            )\n        } else {\n            const appWrapProps = { navigate, signOut: auth.signOut, programs: programsState?.programs as Program[] }\n            return (\n                <Switch>\n                    <Route\n                        path=\"/:program/admin\"\n                        render={(props): React.ReactElement => (\n                            <AppWrapper {...props} {...appWrapProps} noScroll containerProps={{ maxWidth: 'lg' }}>\n                                <AdminComponent {...props} programs={programsState?.programs} auth={auth} />\n                            </AppWrapper>\n                        )}\n                    />\n                    <Route\n                        path=\"/:program/:project?\"\n                        render={(props): React.ReactElement => (\n                            <AppWrapper {...props} {...appWrapProps}>\n                                <AppConnect {...props} auth={auth} programs={programsState?.programs} />\n                            </AppWrapper>\n                        )}\n                    />\n                    <Route\n                        path=\"/\"\n                        render={(props): React.ReactElement => (\n                            <AppWrapper {...props} {...appWrapProps} containerProps={{ maxWidth: 'sm' }}>\n                                <ProgramChooser {...props} navigate={navigate} programs={programsState?.programs} />\n                            </AppWrapper>\n                        )}\n                    />\n                    <Route\n                        path=\"*\"\n                        render={(props): React.ReactElement => (\n                            <AppWrapper {...props} {...appWrapProps}>\n                                404 Not found\n                            </AppWrapper>\n                        )}\n                    />\n                </Switch>\n            )\n        }\n    }\n}\nexport default AppAuthConnect\n","/* eslint-disable @typescript-eslint/no-use-before-define */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === '[::1]' ||\n        // 127.0.0.0/8 are considered localhost for IPv4.\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n)\n\ntype Config = {\n    onSuccess?: (registration: ServiceWorkerRegistration) => void\n    onUpdate?: (registration: ServiceWorkerRegistration) => void\n}\n\nexport function register(config?: Config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config)\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                            'worker. To learn more, visit https://bit.ly/CRA-PWA'\n                    )\n                })\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config)\n            }\n        })\n    }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then((registration) => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing\n                if (installingWorker == null) {\n                    return\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                    'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n                            )\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration)\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.')\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration)\n                            }\n                        }\n                    }\n                }\n            }\n        })\n        .catch((error) => {\n            console.error('Error during service worker registration:', error)\n        })\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n        headers: { 'Service-Worker': 'script' }\n    })\n        .then((response) => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type')\n            if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then((registration) => {\n                    registration.unregister().then(() => {\n                        window.location.reload()\n                    })\n                })\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config)\n            }\n        })\n        .catch(() => {\n            console.log('No internet connection found. App is running in offline mode.')\n        })\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready\n            .then((registration) => {\n                registration.unregister()\n            })\n            .catch((error) => {\n                console.error(error.message)\n            })\n    }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport AppAuthConnect from './connectors/AppAuth.connect'\nimport { HashRouter } from 'react-router-dom'\nimport log from 'loglevel'\nimport { devSetup } from '@northarrowresearch/react-common'\n\nimport * as serviceWorker from './serviceWorker'\n// Here's our global overrides css\nimport './base.css'\n\n// This does its own process.env.NODE_ENV check\n// In production it only presents a minimal set of tools\ndevSetup()\n\n// This is the font we need\nrequire('typeface-roboto')\n\nReactDOM.render(\n    <HashRouter basename=\"/\">\n        <AppAuthConnect />\n    </HashRouter>,\n    document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register()\n\n// On android this will trick the back button into not closing the app\nwindow.addEventListener('load', () => {\n    window.history.pushState({}, '')\n})\n\n// In Chrome > 52 we need to explicitly request persistent storage to make sure our\n// stuff isn't cleaned up automatically.\nif (navigator.storage && navigator.storage.persist) {\n    navigator.storage.persist().then((granted) => {\n        if (granted) {\n            log.debug('Storage will not be cleared except by explicit user action')\n        } else {\n            log.warn('Storage may be cleared by the UA under storage pressure.')\n        }\n    })\n} else {\n    log.warn('navigator.storage API not implemented.')\n}\n"],"sourceRoot":""}