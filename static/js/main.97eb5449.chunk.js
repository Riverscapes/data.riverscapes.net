(this["webpackJsonp@riverscapes/app-warehouse"]=this["webpackJsonp@riverscapes/app-warehouse"]||[]).push([[0],{19:function(e,n,t){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,n,t,r){void 0===r&&(r=t),Object.defineProperty(e,r,{enumerable:!0,get:function(){return n[t]}})}:function(e,n,t,r){void 0===r&&(r=t),e[r]=n[t]}),a=this&&this.__exportStar||function(e,n){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(n,t)||r(n,e,t)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.typeDefs=void 0,a(t(391),n),a(t(439),n),a(t(269),n);var i=t(440);Object.defineProperty(n,"typeDefs",{enumerable:!0,get:function(){return o(i).default}}),a(t(441),n),a(t(442),n),a(t(444),n),a(t(445),n)},269:function(e,n,t){"use strict";var r,a;Object.defineProperty(n,"__esModule",{value:!0}),n.ProjectTreeLayerTileTypes=n.ProjectTreeLayerTypes=n.TileTypes=n.SymbologyStatus=n.TilingStatusFinished=n.TilingStatus=n.RampType=n.AccessEnum=n.WarehouseRoleEnum=n.FieldTypeEnum=void 0,function(e){e.string="S",e.number="N",e.boolean="BOOL",e.stringArr="SARR",e.numberArr="NARR"}(n.FieldTypeEnum||(n.FieldTypeEnum={})),function(e){e.SuperUser="SUPER",e.Admin="ADMIN",e.Observer="OBSERVER",e.Participant="PARTICIPANT"}(n.WarehouseRoleEnum||(n.WarehouseRoleEnum={})),function(e){e.Public="PUBLIC",e.Private="PRIVATE",e.Secret="SECRET"}(n.AccessEnum||(n.AccessEnum={})),function(e){e.INTERPOLATED="INTERPOLATED",e.DISCRETE="DISCRETE",e.EXACT="EXACT"}(n.RampType||(n.RampType={})),function(e){e.UNKNOWN="UNKNOWN",e.QUEUED="QUEUED",e.FETCHING="FETCHING",e.NOT_APPLICABLE="NOT_APPLICABLE",e.CREATING="CREATING",e.NO_GEOMETRIES="NO_GEOMETRIES",e.TIMEOUT="TIMEOUT",e.TILING_ERROR="TILING_ERROR",e.INDEX_NOT_FOUND="INDEX_NOT_FOUND",e.LAYER_NOT_FOUND="LAYER_NOT_FOUND",e.FETCH_ERROR="FETCH_ERROR",e.SUCCESS="SUCCESS"}(r=n.TilingStatus||(n.TilingStatus={})),n.TilingStatusFinished=[r.NOT_APPLICABLE,r.NO_GEOMETRIES,r.TIMEOUT,r.TILING_ERROR,r.SUCCESS],function(e){e.UNKNOWN="UNKNOWN",e.FETCHING="FETCHING",e.MISSING="MISSING",e.NOT_APPLICABLE="NOT_APPLICABLE",e.FOUND="FOUND",e.ERROR="ERROR"}(n.SymbologyStatus||(n.SymbologyStatus={})),function(e){e.RASTER="RASTER",e.HTML="HTML",e.VECTOR_SHP="VECTOR_SHP",e.VECTOR_GPKG="VECTOR_GPKG"}(n.TileTypes||(n.TileTypes={})),function(e){e.REPORT="report",e.RASTER="raster",e.LINE="line",e.POLYGON="polygon",e.POINT="point",e.FILE="file",e.TIN="tin"}(a=n.ProjectTreeLayerTypes||(n.ProjectTreeLayerTypes={})),n.ProjectTreeLayerTileTypes=[a.RASTER,a.POLYGON,a.LINE,a.POINT]},337:function(e,n){},391:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)},a=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{s(r.next(e))}catch(n){o(n)}}function c(e){try{s(r.throw(e))}catch(n){o(n)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}s((r=r.apply(e,n||[])).next())}))},o=this&&this.__generator||function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=n.call(e,i)}catch(c){o=[6,c],r=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},i=this&&this.__rest||function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.verifyMeta=n.augmentXML=n.parseProjectXML=n.parseProgramXML=n.parseXMLMeta=n.getXML=void 0;var s=t(392),l=c(t(259)),d=t(19),u=c(t(436)),p=c(t(14));function g(e){try{return e.reduce((function(e,n){var t,a=n.$,o=n._;return r(r({},e),((t={})[a.name]=o&&o.trim(),t))}),{})}catch(n){return{}}}n.getXML=function(e){return a(this,void 0,void 0,(function(){var n,t,r;return o(this,(function(a){switch(a.label){case 0:return n=Date.now(),[4,(0,l.default)({url:e,method:"get"})];case 1:if(t=a.sent(),(r=(Date.now()-n)/1e3)>10&&p.default.warn("getXML took "+r.toFixed(1)+" seconds"),!t.data)throw new Error("Error retrieving XML file");return[2,t.data]}}))}))},n.parseXMLMeta=g,n.parseProgramXML=function(e){return a(this,void 0,void 0,(function(){var n,t,a,c,l,p,m,h,j,f;return o(this,(function(o){switch(o.label){case 0:return[4,(0,s.parseStringPromise)(e).catch((function(e){throw new d.ValidationError("Error parsing XML file. This likely means a broken or unclosed tag.",[e.message])}))];case 1:return n=o.sent(),t=g(n.Program.MetaData[0].Meta),a=t.projectFile,c=t.projectXSDs,l=i(t,["projectFile","projectXSDs"]),p=n.Program.Definitions[0].Collections[0].Collection.map((function(e){var n=e.$,t=e.Allow,a=e.AllowRegex;return r(r({},n),{Allow:t?Array.isArray(t)?t.map((function(e){return e.$})):[t]:void 0,AllowRegex:a?Array.isArray(a)?a.map((function(e){return e.$.pattern})):[a.pattern]:void 0})})),m=[],n.Program.Definitions[0].Groups[0].Group&&(m=Array.isArray(n.Program.Definitions[0].Groups[0].Group)?n.Program.Definitions[0].Groups[0].Group.map((function(e){return e.$})):[n.Program.Definitions[0].Groups[0].Group]),h=[],n.Program.Definitions[0].Products[0].Product&&(h=Array.isArray(n.Program.Definitions[0].Products[0].Product)?n.Program.Definitions[0].Products[0].Product.map((function(e){return e.$})):[n.Program.Definitions[0].Products[0].Product]),j=(new u.default.DOMParser).parseFromString(e),f=function(e,n,t,a){var o=e.getElementsByTagName("Hierarchy")[0],i=Array.from(o.getElementsByTagName("Product")),c=[];return i.forEach((function(e){var o=[],i=e.getAttribute("ref"),s=n.find((function(e){return e.id===i}));if(!s)throw new Error("Product not found for ref='"+i+"'");for(var l=e.parentNode,d=function(){var e=l.getAttribute("ref"),n=l.tagName,r="Group"===n?t.find((function(n){return n.id===e})):a.find((function(n){return n.id===e})),i=r.folder,c=r.name;o.push({type:n,id:e,folder:i,name:c}),l=l.parentNode};l&&l.parentNode&&"Hierarchy"!==l.tagName;)d();c.push(r(r({},s),{pathArr:o.reverse()}))})),c}(j,h,m,p),[2,Promise.resolve(new d.Program({name:n.Program.Name[0],machineName:n.Program.MachineName[0],projectXSDs:c,projectFile:a,meta:l,products:f,collections:p,groups:m}))]}}))}))},n.parseProjectXML=function(e){return a(this,void 0,void 0,(function(){var n,t,r,a;return o(this,(function(o){switch(o.label){case 0:return[4,(0,s.parseStringPromise)(e).catch((function(e){throw new d.ValidationError("Error parsing XML file. This likely means a broken or unclosed tag.",[e.message])}))];case 1:return n=o.sent(),t=n.Project,r={},t.Warehouse&&(r=g(t.Warehouse[0].Meta)),a={},t.MetaData&&(a=g(t.MetaData[0].Meta)),[2,Promise.resolve({id:r.id,name:t.Name[0],projType:t.ProjectType[0],Warehouse:r,program:r.program,meta:a,tags:d.Project.parseTagString(r.tags),xml:e,parsedProjectJSON:n,rawXML:e})]}}))}))},n.augmentXML=function(e,n){var t=(new u.default.DOMParser).parseFromString(n),r=t.getElementsByTagName("MetaData")[0];t.getElementsByTagName("Warehouse").length>0&&t.removeChild(t.getElementsByTagName("Warehouse")[0]);var a=t.createElement("Warehouse");return Object.keys(e).forEach((function(n){var r=t.createElement("Meta");r.setAttribute("name",n),r.appendChild(t.createTextNode(e[n])),a.appendChild(r)})),t.insertBefore(a,r),(new u.default.XMLSerializer).serializeToString(t)},n.verifyMeta=function(e,n,t){var r=t.products.find((function(n){return n.id===e}));if(!r)throw new Error("No project type '"+e+"' found in program '"+t.name+"'");return r.pathArr.filter((function(e){return"Collection"===e.type})).map((function(e){return{name:e.name,value:n[e.name]}}))}},406:function(e,n){},408:function(e,n){},439:function(e,n,t){"use strict";var r=this&&this.__makeTemplateObject||function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e},a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},a.apply(this,arguments)},o=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{s(r.next(e))}catch(n){o(n)}}function c(e){try{s(r.throw(e))}catch(n){o(n)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}s((r=r.apply(e,n||[])).next())}))},i=this&&this.__generator||function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=n.call(e,i)}catch(c){o=[6,c],r=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.adminGetUsers=n.adminUpdateUserPermissions=n.search=n.deleteProject=n.downloadZipFile=n.getWebSymbology=n.getLayerTiles=n.downloadFile=n.getUploadUrls=n.getProject=n.getProgram=n.getProgramAuth=n.getPrograms=n.validateProjectXML=n.authCheck=n.apiCall=void 0;var s,l,d,u,p,g,m,h,j,f,b,v,O,y,x,S=c(t(259)),T=t(270),w=c(t(271)),P=c(t(14)),C=t(19);n.apiCall=function(e,n,t,r,a){var o=Date.now();return(0,S.default)({url:e,method:"post",timeout:a,headers:{Authorization:n?"Bearer "+n:"Bearer NONE"},data:{query:(0,T.print)(t),variables:r}}).then((function(e){var n=e.data,a=(Date.now()-o)/1e3;return a>10&&P.default.warn("Query took "+a.toFixed(1)+" seconds. "+(0,T.print)(t).replace(/\n/g,"").slice(0,50)+" "+JSON.stringify(r)),n})).catch((function(a){throw a.response&&404===a.response.status?new Error("API Url not found: "+e):a.code&&"ECONNREFUSED"===a.code?new Error("Connection refused. Could not contact: '"+e+"'"):(P.default.error("apiCall Error",{url:e,jwt:n,query:(0,T.print)(t),variables:r,err:a}),a)}))},n.authCheck=function(e,t,a){return(0,n.apiCall)(e,t,(0,w.default)(s||(s=r(["\n            query AuthCall {\n                auth {\n                    loggedIn\n                    userPool\n                    clientId\n                    region\n                    domain\n                }\n            }\n        "],["\n            query AuthCall {\n                auth {\n                    loggedIn\n                    userPool\n                    clientId\n                    region\n                    domain\n                }\n            }\n        "]))),{},a)},n.validateProjectXML=function(e,t,a,o,i,c){return(0,n.apiCall)(e,t,(0,w.default)(l||(l=r(["\n            query validateProject($xml: String!, $projType: String!, $program: String!) {\n                validate(xml: $xml, projType: $projType, program: $program) {\n                    result\n                    xmlErrors\n                }\n            }\n        "],["\n            query validateProject($xml: String!, $projType: String!, $program: String!) {\n                validate(xml: $xml, projType: $projType, program: $program) {\n                    result\n                    xmlErrors\n                }\n            }\n        "]))),{xml:a,program:i,projType:o},c)},n.getPrograms=function(e,t,c){return o(this,void 0,void 0,(function(){return i(this,(function(o){return[2,(0,n.apiCall)(e,t,(0,w.default)(d||(d=r(["\n            query programs {\n                auth {\n                    loggedIn\n                    userPool\n                    clientId\n                    region\n                    domain\n                }\n                programs {\n                    name\n                    machineName\n                    projectXSDs\n                    projectFile\n                    role\n                    groups {\n                        id\n                        name\n                        folder\n                    }\n                    collections {\n                        id\n                        name\n                        AllowRegex\n                        Allow {\n                            id\n                            name\n                            aliases\n                            folder\n                        }\n                    }\n                    products {\n                        id\n                        name\n                        folder\n                        pathArr\n                    }\n                    hierarchy\n                    meta\n                }\n            }\n        "],["\n            query programs {\n                auth {\n                    loggedIn\n                    userPool\n                    clientId\n                    region\n                    domain\n                }\n                programs {\n                    name\n                    machineName\n                    projectXSDs\n                    projectFile\n                    role\n                    groups {\n                        id\n                        name\n                        folder\n                    }\n                    collections {\n                        id\n                        name\n                        AllowRegex\n                        Allow {\n                            id\n                            name\n                            aliases\n                            folder\n                        }\n                    }\n                    products {\n                        id\n                        name\n                        folder\n                        pathArr\n                    }\n                    hierarchy\n                    meta\n                }\n            }\n        "]))),{},c).then((function(e){return a(a({},e),{data:{programs:e.data.programs.map(C.Program.fromGraphQL)}})}))]}))}))},n.getProgramAuth=function(e,t,a,c){return o(this,void 0,void 0,(function(){var o,s,l;return i(this,(function(i){switch(i.label){case 0:return[4,(0,n.apiCall)(e,t,(0,w.default)(u||(u=r(["\n            query program($program: String!) {\n                program(program: $program) {\n                    name\n                    machineName\n                    projectXSDs\n                    projectFile\n                    role\n                    groups {\n                        id\n                        name\n                        folder\n                    }\n                    collections {\n                        id\n                        name\n                        AllowRegex\n                        Allow {\n                            id\n                            name\n                            aliases\n                            folder\n                        }\n                    }\n                    products {\n                        id\n                        name\n                        folder\n                        pathArr\n                    }\n                    hierarchy\n                    meta\n                }\n            }\n        "],["\n            query program($program: String!) {\n                program(program: $program) {\n                    name\n                    machineName\n                    projectXSDs\n                    projectFile\n                    role\n                    groups {\n                        id\n                        name\n                        folder\n                    }\n                    collections {\n                        id\n                        name\n                        AllowRegex\n                        Allow {\n                            id\n                            name\n                            aliases\n                            folder\n                        }\n                    }\n                    products {\n                        id\n                        name\n                        folder\n                        pathArr\n                    }\n                    hierarchy\n                    meta\n                }\n            }\n        "]))),{program:a},c)];case 1:return o=i.sent(),s=o.data.program,l=o.errors,[2,{data:{program:C.Program.fromGraphQL(s)},errors:l}]}}))}))},n.getProgram=function(e,t,a,c){return o(this,void 0,void 0,(function(){var o,s,l;return i(this,(function(i){switch(i.label){case 0:return[4,(0,n.apiCall)(e,t,(0,w.default)(p||(p=r(["\n            query program($program: String!) {\n                program(program: $program) {\n                    name\n                    machineName\n                    projectXSDs\n                    projectFile\n                    role\n                    groups {\n                        id\n                        name\n                        folder\n                    }\n                    collections {\n                        id\n                        name\n                        AllowRegex\n                        Allow {\n                            id\n                            name\n                            aliases\n                            folder\n                        }\n                    }\n                    products {\n                        id\n                        name\n                        folder\n                        pathArr\n                    }\n                    hierarchy\n                    meta\n                }\n            }\n        "],["\n            query program($program: String!) {\n                program(program: $program) {\n                    name\n                    machineName\n                    projectXSDs\n                    projectFile\n                    role\n                    groups {\n                        id\n                        name\n                        folder\n                    }\n                    collections {\n                        id\n                        name\n                        AllowRegex\n                        Allow {\n                            id\n                            name\n                            aliases\n                            folder\n                        }\n                    }\n                    products {\n                        id\n                        name\n                        folder\n                        pathArr\n                    }\n                    hierarchy\n                    meta\n                }\n            }\n        "]))),{program:a},c)];case 1:return o=i.sent(),s=o.data.program,l=o.errors,[2,{data:{program:C.Program.fromGraphQL(s)},errors:l}]}}))}))},n.getProject=function(e,t,c,s,l,d,u){return void 0===l&&(l=!1),void 0===d&&(d=!1),o(this,void 0,void 0,(function(){return i(this,(function(o){return[2,(0,n.apiCall)(e,t,(0,w.default)(g||(g=r(["\n            query getProject($id: ID!, $program: String!) {\n                project(id: $id, program: $program) {\n                    id\n                    name\n                    projType\n                    totalSize\n                    program\n                    tags\n                    createdBy\n                    updatedBy\n                    createdOn\n                    updatedOn\n                    meta\n                    ","\n                    ","\n                }\n            }\n        "],["\n            query getProject($id: ID!, $program: String!) {\n                project(id: $id, program: $program) {\n                    id\n                    name\n                    projType\n                    totalSize\n                    program\n                    tags\n                    createdBy\n                    updatedBy\n                    createdOn\n                    updatedOn\n                    meta\n                    ","\n                    ","\n                }\n            }\n        "])),l?"\n                    files {\n                        key\n                        md5\n                        size\n                        downloadUrl\n                    }":"",d?"\n                        tree {\n                            name\n                            description\n                            projectType\n                            metaStr\n                            leaves {\n                                id\n                                pid\n                                label\n                                layerId\n                                blLayerId\n                                layerType\n                                layerPath\n                                layerName\n                                nodeExists\n                                metaStr\n                                symbology\n                                transparency\n                            }\n                            branches {\n                                label\n                                collapsed\n                                bid\n                                pid\n                            }\n                            defaultView\n                            views  {\n                                id\n                                name\n                                description\n                                layers{\n                                id\n                                visible\n                                }\n                            }\n                        }\n                    ":""),{id:c,program:s},u).then((function(e){return a(a({},e),{data:{project:C.Project.fromGraphQL(e.data.project)}})}))]}))}))},n.getUploadUrls=function(e,t,a,c,s,l,d){return o(this,void 0,void 0,(function(){return i(this,(function(o){switch(o.label){case 0:return[4,(0,n.apiCall)(e,t,(0,w.default)(m||(m=r(["\n            query requestUploadProject($id: ID, $files: [String!], $program: String!, $projectType: String!) {\n                requestUpload(id: $id, files: $files, program: $program, projectType: $projectType) {\n                    id\n                    uploadUrls {\n                        url\n                        fields\n                        origPath\n                    }\n                }\n            }\n        "],["\n            query requestUploadProject($id: ID, $files: [String!], $program: String!, $projectType: String!) {\n                requestUpload(id: $id, files: $files, program: $program, projectType: $projectType) {\n                    id\n                    uploadUrls {\n                        url\n                        fields\n                        origPath\n                    }\n                }\n            }\n        "]))),{id:a,files:c,projectType:s,program:l},d)];case 1:return[2,o.sent()]}}))}))},n.downloadFile=function(e,t,a,c,s,l,d){return o(this,void 0,void 0,(function(){return i(this,(function(o){switch(o.label){case 0:return[4,(0,n.apiCall)(e,t,(0,w.default)(h||(h=r(["\n            query downloadFileQuery($program: String!, $id: ID!, $projType: String!, $filePath: String!) {\n                downloadFile(program: $program, id: $id, projType: $projType, filePath: $filePath) {\n                    key\n                    md5\n                    contentType\n                    size\n                    downloadUrl\n                }\n            }\n        "],["\n            query downloadFileQuery($program: String!, $id: ID!, $projType: String!, $filePath: String!) {\n                downloadFile(program: $program, id: $id, projType: $projType, filePath: $filePath) {\n                    key\n                    md5\n                    contentType\n                    size\n                    downloadUrl\n                }\n            }\n        "]))),{projType:a,program:c,id:s,filePath:l},d)];case 1:return[2,o.sent()]}}))}))},n.getLayerTiles=function(e,t,c,s,l,d,u){return o(this,void 0,void 0,(function(){var o,p;return i(this,(function(i){switch(i.label){case 0:return[4,(0,n.apiCall)(e,t,(0,w.default)(j||(j=r(["\n            query getLayerTilesQuery($program: String!, $id: ID!, $projType: String!, $layerPath: String!) {\n                getLayerTiles(program: $program, id: $id, projType: $projType, layerPath: $layerPath) {\n                    url\n                    indexUrl\n                    status\n                    lastStatus\n                    error\n                    rsLayer\n                    rasterStats\n                    numFiles\n                    started\n                    duration\n                    format\n                    bounds\n                    maxZoom\n                    minZoom\n                    originFile {\n                        lastModified\n                        etag\n                        size\n                        key\n                    }\n                }\n            }\n        "],["\n            query getLayerTilesQuery($program: String!, $id: ID!, $projType: String!, $layerPath: String!) {\n                getLayerTiles(program: $program, id: $id, projType: $projType, layerPath: $layerPath) {\n                    url\n                    indexUrl\n                    status\n                    lastStatus\n                    error\n                    rsLayer\n                    rasterStats\n                    numFiles\n                    started\n                    duration\n                    format\n                    bounds\n                    maxZoom\n                    minZoom\n                    originFile {\n                        lastModified\n                        etag\n                        size\n                        key\n                    }\n                }\n            }\n        "]))),{projType:c,program:s,id:l,layerPath:d},u)];case 1:return(o=i.sent()).data?(p=o.data.getLayerTiles,[2,{errors:o.errors,data:{getLayerTiles:a(a({},p),{started:p&&p.started&&parseInt(p.started,10),lastStatus:p&&p.lastStatus&&parseInt(p.lastStatus,10),rasterStats:p&&p.rasterStats&&JSON.parse(p.rasterStats),rsLayer:p&&p.rsLayer&&JSON.parse(p.rsLayer),originFile:p&&p.originFile&&a(a({},p.originFile),{lastModified:parseInt(p.originFile.lastModified,10)})})}}]):[2,{errors:o.errors}]}}))}))},n.getWebSymbology=function(e,t,c,s,l,d){return o(this,void 0,void 0,(function(){var o;return i(this,(function(i){switch(i.label){case 0:return[4,(0,n.apiCall)(e,t,(0,w.default)(f||(f=r(["\n            query getWebSymbology($projType: String!, $name: String!, $isRaster: Boolean) {\n                getWebSymbology(projType: $projType, name: $name, isRaster: $isRaster) {\n                    name\n                    status\n                    legend\n                    rampType\n                    mapboxJson\n                    url\n                    error\n                }\n            }\n        "],["\n            query getWebSymbology($projType: String!, $name: String!, $isRaster: Boolean) {\n                getWebSymbology(projType: $projType, name: $name, isRaster: $isRaster) {\n                    name\n                    status\n                    legend\n                    rampType\n                    mapboxJson\n                    url\n                    error\n                }\n            }\n        "]))),{projType:c,name:s,isRaster:l},d)];case 1:return(o=i.sent()).data?[2,{errors:o.errors,data:{getWebSymbology:o.data.getWebSymbology&&a(a({},o.data.getWebSymbology),{mapboxJson:o.data.getWebSymbology.mapboxJson&&JSON.parse(o.data.getWebSymbology.mapboxJson)})}}]:[2,{errors:o.errors}]}}))}))},n.downloadZipFile=function(e,t,a,c,s,l){return o(this,void 0,void 0,(function(){return i(this,(function(o){switch(o.label){case 0:return[4,(0,n.apiCall)(e,t,(0,w.default)(b||(b=r(["\n            query downloadZipFileQuery($program: String!, $id: ID!, $projType: String!) {\n                downloadZip(program: $program, id: $id, projType: $projType) {\n                    key\n                    md5\n                    contentType\n                    size\n                    downloadUrl\n                    pendingSince\n                }\n            }\n        "],["\n            query downloadZipFileQuery($program: String!, $id: ID!, $projType: String!) {\n                downloadZip(program: $program, id: $id, projType: $projType) {\n                    key\n                    md5\n                    contentType\n                    size\n                    downloadUrl\n                    pendingSince\n                }\n            }\n        "]))),{projType:a,program:c,id:s},l)];case 1:return[2,o.sent()]}}))}))},n.deleteProject=function(e,t,a,c,s){return o(this,void 0,void 0,(function(){return i(this,(function(o){switch(o.label){case 0:return[4,(0,n.apiCall)(e,t,(0,w.default)(v||(v=r(["\n            mutation deleteProject($id: ID!, $program: String!) {\n                deleteProject(id: $id, program: $program)\n            }\n        "],["\n            mutation deleteProject($id: ID!, $program: String!) {\n                deleteProject(id: $id, program: $program)\n            }\n        "]))),{program:c,id:a},s)];case 1:return[2,o.sent()]}}))}))},n.search=function(e,t,c,s,l){return o(this,void 0,void 0,(function(){var o,d,u,p,g;return i(this,(function(i){switch(i.label){case 0:return[4,(0,n.apiCall)(e,t,(0,w.default)(O||(O=r(["\n            query searchQuery(\n                $program: String!\n                $projType: String\n                $nameStr: String\n                $metaStr: String\n                $metaArr: String\n                $tags: String\n                $noTags: Boolean\n                $limit: Int\n                $nextToken: Int\n            ) {\n                search(\n                    program: $program\n                    projType: $projType\n                    nameStr: $nameStr\n                    metaStr: $metaStr\n                    metaArr: $metaArr\n                    tags: $tags\n                    noTags: $noTags\n                    limit: $limit\n                    nextToken: $nextToken\n                ) {\n                    projects {\n                        id\n                        name\n                        projType\n                        program\n                        tags\n                        totalSize\n                        createdBy\n                        updatedBy\n                        createdOn\n                        updatedOn\n                        meta\n                        score\n                    }\n                    nextToken\n                    total\n                }\n            }\n        "],["\n            query searchQuery(\n                $program: String!\n                $projType: String\n                $nameStr: String\n                $metaStr: String\n                $metaArr: String\n                $tags: String\n                $noTags: Boolean\n                $limit: Int\n                $nextToken: Int\n            ) {\n                search(\n                    program: $program\n                    projType: $projType\n                    nameStr: $nameStr\n                    metaStr: $metaStr\n                    metaArr: $metaArr\n                    tags: $tags\n                    noTags: $noTags\n                    limit: $limit\n                    nextToken: $nextToken\n                ) {\n                    projects {\n                        id\n                        name\n                        projType\n                        program\n                        tags\n                        totalSize\n                        createdBy\n                        updatedBy\n                        createdOn\n                        updatedOn\n                        meta\n                        score\n                    }\n                    nextToken\n                    total\n                }\n            }\n        "]))),a(a({},s),{program:c}),l)];case 1:return(o=i.sent()).data?(d=o.data.search||{},u=d.nextToken,p=d.projects,g=d.total,[2,{errors:o.errors,data:{search:{projects:Array.isArray(p)?p.map(C.Project.fromGraphQL):p,nextToken:u,total:g}}}]):[2,{errors:o.errors}]}}))}))},n.adminUpdateUserPermissions=function(e,t,c,s,l,d){return o(this,void 0,void 0,(function(){var o;return i(this,(function(i){switch(i.label){case 0:return[4,(0,n.apiCall)(e,t,(0,w.default)(y||(y=r(["\n            mutation project($id: ID!, $program: String!, $permission: String) {\n                updateUser(id: $id, program: $program, permission: $permission) {\n                    email\n                    name\n                    picture\n                    username\n                    createdOn\n                    updatedOn\n                    role\n                }\n            }\n        "],["\n            mutation project($id: ID!, $program: String!, $permission: String) {\n                updateUser(id: $id, program: $program, permission: $permission) {\n                    email\n                    name\n                    picture\n                    username\n                    createdOn\n                    updatedOn\n                    role\n                }\n            }\n        "]))),{program:s,id:c,permission:l},d)];case 1:return(o=i.sent()).data?[2,{errors:o.errors,data:{updateUser:o.data.updateUser?a(a({},o.data.updateUser),{createdOn:parseInt(o.data.updateUser.createdOn,10),updatedOn:parseInt(o.data.updateUser.updatedOn,10)}):null}}]:[2,{errors:o.errors}]}}))}))},n.adminGetUsers=function(e,t,c,s,l,d){return o(this,void 0,void 0,(function(){var o,u,p,g;return i(this,(function(i){switch(i.label){case 0:return[4,(0,n.apiCall)(e,t,(0,w.default)(x||(x=r(["\n            query getUsers($program: String!, $limit: Int, $nextToken: String) {\n                getUsers(program: $program, limit: $limit, nextToken: $nextToken) {\n                    users {\n                        email\n                        name\n                        picture\n                        username\n                        createdOn\n                        updatedOn\n                        role\n                    }\n                    nextToken\n                }\n            }\n        "],["\n            query getUsers($program: String!, $limit: Int, $nextToken: String) {\n                getUsers(program: $program, limit: $limit, nextToken: $nextToken) {\n                    users {\n                        email\n                        name\n                        picture\n                        username\n                        createdOn\n                        updatedOn\n                        role\n                    }\n                    nextToken\n                }\n            }\n        "]))),{program:c,limit:s,nextToken:l},d)];case 1:return(o=i.sent()).data?(u=o.data.getUsers||{},p=u.nextToken,g=u.users,[2,{errors:o.errors,data:{getUsers:{users:Array.isArray(g)?g.map((function(e){return a(a({},e),{createdOn:parseInt(e.createdOn,10),updatedOn:parseInt(e.updatedOn,10)})})):g,nextToken:p}}}]):[2,{errors:o.errors}]}}))}))}},440:function(e,n,t){"use strict";var r=this&&this.__makeTemplateObject||function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o,i=a(t(271)),c=t(269),s=(0,i.default)(o||(o=r(['\n    # Check out the cheat sheet:\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\n\n    schema {\n        query: Query\n        mutation: Mutation\n    }\n\n    type Query {\n        # Get a project and associated metadata\n        auth: AuthParams\n\n        project(id: ID!, program: String!): Project\n        projects(program: String!, projType: String, limit: Int, nextToken: String): PaginatedProjects\n\n        program(program: String!): Program\n        programs: [Program]\n\n        downloadFile(program: String!, id: ID!, projType: String!, filePath: String!): FileDownloadMeta\n\n        downloadZip(program: String!, id: ID!, projType: String!): FileDownloadMeta\n\n        getWebSymbology(projType: String, name: String!, isRaster: Boolean): Symbology\n        getLayerTiles(program: String!, id: ID!, projType: String!, layerPath: String!): TileService\n\n\n        # Request an upload start. Writes a manifest file on the upload bucket\n        # and creates upload urls for everything\n        requestUpload(id: ID, files: [String!], program: String!, projectType: String!): FileUpload\n\n        search(\n            program: String!\n            projType: String\n            nameStr: String\n            metaStr: String\n            metaArr: String\n            tags: String\n            noTags: Boolean\n            limit: Int\n            nextToken: Int\n        ): PaginatedSearchResults\n\n        validate(xml: String!, projType: String!, program: String!): Validation\n\n        getUsers(program: String!, limit: Int, nextToken: String): PaginatedUsers\n\n        projectTree(id: ID!, program: String!, projType: String!): ProjectTree\n    }\n\n    # this schema allows the following mutation:\n    type Mutation {\n        # signal a deletion of a project\n        deleteProject(id: ID!, program: String!): ID!\n        updateUser(id: ID!, program: String!, permission: String): User\n        reIndexProject(id: ID!, program: String!, projType: String!): WatcherOutput\n        queueTileRebuild(id: ID!, program: String!, projType: String!, filePath: String, symbologies: [String]): String\n    }\n\n    type User {\n        email: String\n        name: String\n        picture: String\n        username: String!\n        createdOn: String\n        updatedOn: String\n        role: String\n    }\n\n    type PaginatedUsers {\n        users: [User]\n        nextToken: String\n    }\n\n    type Validation {\n        result: Boolean\n        xmlErrors: [String]\n    }\n\n    type AuthParams {\n        loggedIn: Boolean\n        userPool: String\n        clientId: String\n        region: String\n        domain: String\n    }\n\n    interface ProjectBase {\n        id: ID!\n        name: String\n        meta: String\n        tags: String\n        projType: String\n        program: String\n        createdBy: ID!\n        updatedBy: ID!\n        createdOn: String!\n        updatedOn: String!\n    }\n\n    type Project implements ProjectBase {\n        id: ID!\n        name: String\n        meta: String\n        tags: String\n        projType: String\n        totalSize: String\n        program: String\n        createdBy: ID!\n        updatedBy: ID!\n        createdOn: String!\n        updatedOn: String!\n        files: [FileDownloadMeta]\n        tree: ProjectTree\n    }\n\n    type ProjectSearchResult implements ProjectBase {\n        id: ID!\n        name: String\n        meta: String\n        tags: String\n        projType: String\n        totalSize: String\n        program: String\n        createdBy: ID!\n        updatedBy: ID!\n        createdOn: String!\n        updatedOn: String!\n        score: Float\n        files: [FileDownloadMeta]\n    }\n\n    # This is mostly just JSON that\'s stringified\n    type Product {\n        id: ID!\n        name: String!\n        folder: String\n        # Stringified JSON Array:\n        pathArr: String\n    }\n    type Group {\n        id: ID!\n        name: String!\n        folder: String\n    }\n    type NamedAllow {\n        id: ID!\n        name: String!\n        aliases: String\n        folder: String\n    }\n    type Collection {\n        id: ID!\n        name: String!\n        AllowRegex: [String]\n        Allow: [NamedAllow]\n    }\n    type Program {\n        name: String\n        machineName: String\n        projectXSDs: String\n        projectFile: String\n        meta: String\n        groups: [Group]\n        collections: [Collection]\n        products: [Product]\n        hierarchy: String\n        role: String\n    }\n\n    type FileDownloadMeta {\n        key: String!\n        md5: String!\n        size: String\n        contentType: String\n        downloadUrl: String!\n        pendingSince: String\n    }\n\n    type FileUpload {\n        id: ID!\n        uploadUrls: [UploadUrl]\n    }\n\n    type UploadUrl {\n        url: String\n        fields: String\n        origPath: String\n    }\n\n    type FileUploadMeta {\n        key: String!\n        downloadUrl: String!\n    }\n\n    # Series Connection allows us to implement pagination easily\n    type PaginatedProjects {\n        projects: [Project]\n        nextToken: String\n    }\n\n    type PaginatedSearchResults {\n        projects: [ProjectSearchResult]\n        nextToken: Int\n        total: Int\n    }\n\n    type NewProject {\n        id: ID!\n    }\n\n    """\n    ProjectTreeLayerTypes is an enumeration to help us display layers with the\n    correct icon and assign them to the right slot\n    """\n    enum ProjectTreeLayerTypes {\n        ',"\n    }\n    enum SymbologyStatus {\n        ","\n    }\n    enum TilingStatus {\n        ","\n    }\n    enum RampType {\n        ","\n    }\n\n    type ProjectTreeBranch {\n        label: String!\n        collapsed: Boolean\n        # Branch ID and parent ID\n        bid: Int\n        pid: Int\n    }\n    type ProjectTreeLeaf {\n        id: Int # This is a global ID not an id within a branch\n        pid: Int\n        label: String!\n        layerId: ID\n        blLayerId: ID\n        layerType: ProjectTreeLayerTypes!\n        layerPath: String\n        layerName: String\n        nodeExists: Boolean\n        # This is the path that helps u\n        metaStr: String\n        symbology: String\n        transparency: Int\n    }\n\n    # The project tree comes back as non-recursive list of layers.\n    # The ProjectTree class will need to parse this into a typescript \n    # Recursive type\n    type ProjectTreeViewLayer {\n        id: ID!\n        visible: Boolean\n    }\n\n    type ProjectTreeViews {\n        id: ID!\n        name: String!\n        description: String\n        layers: [ProjectTreeViewLayer]\n    }\n\n    type ProjectTree {\n        name: String\n        description: String\n        projectType: String\n        metaStr: String\n        leaves: [ProjectTreeLeaf]\n        branches: [ProjectTreeBranch]\n        defaultView: ID\n        views: [ProjectTreeViews]\n    }\n\n    type TileServiceOriginFile {\n        lastModified: String\n        etag: String\n        size: Int\n        key: String\n    }\n\n    type TileService {\n        url: String\n        indexUrl: String\n        status: TilingStatus!\n        lastStatus: String\n        error: String\n        rasterStats: String\n        numFiles: Int\n        rsLayer: String        # Arbitrary depth so stringify rsLayer\n        started: String\n        duration: Float\n        format: String\n        bounds: [Float]\n        maxZoom: Int\n        minZoom: Int\n        originFile: TileServiceOriginFile\n    }\n    type Symbology {\n        name: String!\n        status: SymbologyStatus\n        legend: [[String]]\n        rampType: RampType\n        mapboxJson: String\n        url: String\n        error: String\n    }\n\n    # Just a nice convenience type for our lambda invoke methods\n    type WatcherOutput {\n        message: String\n        results: [String]\n        errors: [String]\n    }\n"],['\n    # Check out the cheat sheet:\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\n\n    schema {\n        query: Query\n        mutation: Mutation\n    }\n\n    type Query {\n        # Get a project and associated metadata\n        auth: AuthParams\n\n        project(id: ID!, program: String!): Project\n        projects(program: String!, projType: String, limit: Int, nextToken: String): PaginatedProjects\n\n        program(program: String!): Program\n        programs: [Program]\n\n        downloadFile(program: String!, id: ID!, projType: String!, filePath: String!): FileDownloadMeta\n\n        downloadZip(program: String!, id: ID!, projType: String!): FileDownloadMeta\n\n        getWebSymbology(projType: String, name: String!, isRaster: Boolean): Symbology\n        getLayerTiles(program: String!, id: ID!, projType: String!, layerPath: String!): TileService\n\n\n        # Request an upload start. Writes a manifest file on the upload bucket\n        # and creates upload urls for everything\n        requestUpload(id: ID, files: [String!], program: String!, projectType: String!): FileUpload\n\n        search(\n            program: String!\n            projType: String\n            nameStr: String\n            metaStr: String\n            metaArr: String\n            tags: String\n            noTags: Boolean\n            limit: Int\n            nextToken: Int\n        ): PaginatedSearchResults\n\n        validate(xml: String!, projType: String!, program: String!): Validation\n\n        getUsers(program: String!, limit: Int, nextToken: String): PaginatedUsers\n\n        projectTree(id: ID!, program: String!, projType: String!): ProjectTree\n    }\n\n    # this schema allows the following mutation:\n    type Mutation {\n        # signal a deletion of a project\n        deleteProject(id: ID!, program: String!): ID!\n        updateUser(id: ID!, program: String!, permission: String): User\n        reIndexProject(id: ID!, program: String!, projType: String!): WatcherOutput\n        queueTileRebuild(id: ID!, program: String!, projType: String!, filePath: String, symbologies: [String]): String\n    }\n\n    type User {\n        email: String\n        name: String\n        picture: String\n        username: String!\n        createdOn: String\n        updatedOn: String\n        role: String\n    }\n\n    type PaginatedUsers {\n        users: [User]\n        nextToken: String\n    }\n\n    type Validation {\n        result: Boolean\n        xmlErrors: [String]\n    }\n\n    type AuthParams {\n        loggedIn: Boolean\n        userPool: String\n        clientId: String\n        region: String\n        domain: String\n    }\n\n    interface ProjectBase {\n        id: ID!\n        name: String\n        meta: String\n        tags: String\n        projType: String\n        program: String\n        createdBy: ID!\n        updatedBy: ID!\n        createdOn: String!\n        updatedOn: String!\n    }\n\n    type Project implements ProjectBase {\n        id: ID!\n        name: String\n        meta: String\n        tags: String\n        projType: String\n        totalSize: String\n        program: String\n        createdBy: ID!\n        updatedBy: ID!\n        createdOn: String!\n        updatedOn: String!\n        files: [FileDownloadMeta]\n        tree: ProjectTree\n    }\n\n    type ProjectSearchResult implements ProjectBase {\n        id: ID!\n        name: String\n        meta: String\n        tags: String\n        projType: String\n        totalSize: String\n        program: String\n        createdBy: ID!\n        updatedBy: ID!\n        createdOn: String!\n        updatedOn: String!\n        score: Float\n        files: [FileDownloadMeta]\n    }\n\n    # This is mostly just JSON that\'s stringified\n    type Product {\n        id: ID!\n        name: String!\n        folder: String\n        # Stringified JSON Array:\n        pathArr: String\n    }\n    type Group {\n        id: ID!\n        name: String!\n        folder: String\n    }\n    type NamedAllow {\n        id: ID!\n        name: String!\n        aliases: String\n        folder: String\n    }\n    type Collection {\n        id: ID!\n        name: String!\n        AllowRegex: [String]\n        Allow: [NamedAllow]\n    }\n    type Program {\n        name: String\n        machineName: String\n        projectXSDs: String\n        projectFile: String\n        meta: String\n        groups: [Group]\n        collections: [Collection]\n        products: [Product]\n        hierarchy: String\n        role: String\n    }\n\n    type FileDownloadMeta {\n        key: String!\n        md5: String!\n        size: String\n        contentType: String\n        downloadUrl: String!\n        pendingSince: String\n    }\n\n    type FileUpload {\n        id: ID!\n        uploadUrls: [UploadUrl]\n    }\n\n    type UploadUrl {\n        url: String\n        fields: String\n        origPath: String\n    }\n\n    type FileUploadMeta {\n        key: String!\n        downloadUrl: String!\n    }\n\n    # Series Connection allows us to implement pagination easily\n    type PaginatedProjects {\n        projects: [Project]\n        nextToken: String\n    }\n\n    type PaginatedSearchResults {\n        projects: [ProjectSearchResult]\n        nextToken: Int\n        total: Int\n    }\n\n    type NewProject {\n        id: ID!\n    }\n\n    """\n    ProjectTreeLayerTypes is an enumeration to help us display layers with the\n    correct icon and assign them to the right slot\n    """\n    enum ProjectTreeLayerTypes {\n        ',"\n    }\n    enum SymbologyStatus {\n        ","\n    }\n    enum TilingStatus {\n        ","\n    }\n    enum RampType {\n        ","\n    }\n\n    type ProjectTreeBranch {\n        label: String!\n        collapsed: Boolean\n        # Branch ID and parent ID\n        bid: Int\n        pid: Int\n    }\n    type ProjectTreeLeaf {\n        id: Int # This is a global ID not an id within a branch\n        pid: Int\n        label: String!\n        layerId: ID\n        blLayerId: ID\n        layerType: ProjectTreeLayerTypes!\n        layerPath: String\n        layerName: String\n        nodeExists: Boolean\n        # This is the path that helps u\n        metaStr: String\n        symbology: String\n        transparency: Int\n    }\n\n    # The project tree comes back as non-recursive list of layers.\n    # The ProjectTree class will need to parse this into a typescript \n    # Recursive type\n    type ProjectTreeViewLayer {\n        id: ID!\n        visible: Boolean\n    }\n\n    type ProjectTreeViews {\n        id: ID!\n        name: String!\n        description: String\n        layers: [ProjectTreeViewLayer]\n    }\n\n    type ProjectTree {\n        name: String\n        description: String\n        projectType: String\n        metaStr: String\n        leaves: [ProjectTreeLeaf]\n        branches: [ProjectTreeBranch]\n        defaultView: ID\n        views: [ProjectTreeViews]\n    }\n\n    type TileServiceOriginFile {\n        lastModified: String\n        etag: String\n        size: Int\n        key: String\n    }\n\n    type TileService {\n        url: String\n        indexUrl: String\n        status: TilingStatus!\n        lastStatus: String\n        error: String\n        rasterStats: String\n        numFiles: Int\n        rsLayer: String        # Arbitrary depth so stringify rsLayer\n        started: String\n        duration: Float\n        format: String\n        bounds: [Float]\n        maxZoom: Int\n        minZoom: Int\n        originFile: TileServiceOriginFile\n    }\n    type Symbology {\n        name: String!\n        status: SymbologyStatus\n        legend: [[String]]\n        rampType: RampType\n        mapboxJson: String\n        url: String\n        error: String\n    }\n\n    # Just a nice convenience type for our lambda invoke methods\n    type WatcherOutput {\n        message: String\n        results: [String]\n        errors: [String]\n    }\n"])),Object.values(c.ProjectTreeLayerTypes).join("\n      "),Object.values(c.SymbologyStatus).join("\n      "),Object.values(c.TilingStatus).join("\n      "),Object.values(c.RampType).join("\n      "));n.default=s},441:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.Program=void 0;var a=function(){function e(e){Object.assign(this,e)}return e.fromGraphQL=function(n){if(!n)return null;var t=n.meta?JSON.parse(n.meta):{};return new e(r(r({},n),{meta:t,role:n.role,products:n.products?n.products.map((function(e){return r(r({},e),{pathArr:JSON.parse(e.pathArr)})})):[]}))},e}();n.Program=a},442:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},r.apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.Project=void 0;var o=a(t(443));function i(e){e.sort((function(e,n){return e.children&&!n.children?-1:!e.children&&n.children?1:e.name.toLowerCase()<n.name.toLowerCase()?-1:e.name.toLowerCase()>n.name.toLowerCase()?1:0}))}var c=function(){function e(e){var n=this;this.treeIzeFilePaths=function(){var e=[];return n.files.forEach((function(n){var t=n.key,r=t.split("/");1===r.length&&t.indexOf("\\")>-1&&(r=t.split("\\"));for(var a=e,o=function(){var e={name:r.shift(),children:[]},n=a.find((function(n){return n.name===e.name}));n&&n.children?a=n.children:(a.push(e),a=e.children),i(a)};r.length>1;)o();a.push({name:r[0],path:t})})),i(e),e},Object.assign(this,e),this.files||(this.files=[]),this.tree&&this.tree.leaves&&(this.tree.leaves=this.tree.leaves.map((function(e){return r(r({},e),{meta:e&&e.metaStr?JSON.parse(e.metaStr):{}})})))}return e.fromGraphQL=function(n){return n?new e(r(r({},n),{createdOn:parseInt(n.createdOn,10),updatedOn:parseInt(n.updatedOn,10),meta:n.meta?JSON.parse(n.meta):{},tags:n.tags?n.tags.split(","):[]})):null},e.fromDynamoDB=function(n){return new e(r(r({},n),{name:n.Name||n.name,meta:n.meta?e.parseDynamoMeta(n.meta):void 0}))},e.diff=function(e,n){var t=[],r=[];return n&&0!==n.length?e&&0!==e.length?{leftOnly:e.filter((function(e){var a=n.find((function(n){return e.key===n.key}));return a&&(a.md5===e.md5?r.push(e.key):t.push(e.key)),!a})).map((function(e){return e.key})),rightOnly:n.filter((function(n){return!e.find((function(e){return n.key===e.key}))})).map((function(e){return e.key})),different:t,same:r}:{leftOnly:[],rightOnly:n.map((function(e){return e.key})),different:[],same:[]}:{leftOnly:e.map((function(e){return e.key})),rightOnly:[],different:[],same:[]}},e.getProjectS3Keys=function(e,n,t){var r=o.default.join(e.machineName,t,n),a=r+".zip",i=o.default.join(r,e.projectFile),c=o.default.join(e.machineName,t,n+".zip.pending"),s=""+[e.machineName,t,n].join("-");return{prefix:r,zipKey:a,projFileKey:i,zipKeyPending:c,downloadFolderName:s,downloadZipFilename:s+".zip"}},e.parseDynamoMeta=function(e){var n=Object.keys(e).filter((function(e){return 0===e.indexOf("META_")})).reduce((function(n,t){var a,o=t.split("META_")[1];return r(r({},n),((a={})[o]=e[t],a))}),{});return JSON.stringify(n)},e.parseTagString=function(e){return e&&0!==e.trim().length?e.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0&&"null"!==e&&"undefined"!==e})):[]},e.parseS3Key=function(n,t){if(t.split("/").length<3)throw new Error("Not a valid project key");var r=t.split("/"),a=r[0],o=r[1],i=r[2];if(n.machineName!==a)throw new Error("Program passed to parseS3 key "+n.machineName+" does not correspond to program in key: "+a);return e.getProjectS3Keys(n,i,o)},e.parseS3KeyDUMB=function(e){var n=e.split("/");if(n.length<3)throw new Error("Not a valid project key");var t=n[0],r=n[1],a=n[2],i=o.default.join(t,r,a);return{programMachineName:t,projType:r,id:a,zipKey:i+".zip",prefix:i}},e}();n.Project=c},444:function(e,n,t){"use strict";var r=this&&this.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0}),n.ValidationError=void 0;var a=function(e){function n(n,t){var r=e.call(this,n)||this;return r.name=r.constructor.name,r.reasons=t,Error.captureStackTrace(r,r.constructor),r}return r(n,e),n}(Error);n.ValidationError=a},445:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TileServiceJSONClass=void 0;var r=function(e){Object.assign(this,e)};n.TileServiceJSONClass=r},458:function(e,n,t){},460:function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"tagColors",(function(){return Te})),t.d(r,"isDev",(function(){return Pe})),t.d(r,"mapConfig",(function(){return Ce})),t.d(r,"version",(function(){return Ne})),t.d(r,"endpoints",(function(){return Ie})),t.d(r,"mandatoryMetaColors",(function(){return Ee})),t.d(r,"redirectUrl",(function(){return Ae})),t.d(r,"googleAnalytics",(function(){return Re})),t.d(r,"awsAuth",(function(){return _e}));var a={};t.r(a),t.d(a,"init",(function(){return It})),t.d(a,"currentPageView",(function(){return Et})),t.d(a,"event",(function(){return At}));var o=t(0),i=t.n(o),c=t(27),s=t.n(c),l=t(15),d=t(82),u=t.n(d),p=t(113),g=t(32),m=t(37),h=t(305),j=t(19),f=t(1),b=t(535),v=t(84),O=t(532),y=function(){return y=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},y.apply(this,arguments)},x=Object(O.a)((function(e){return{root:{display:"flex",zIndex:e.zIndex.drawer+1},text:{flexGrow:1},logo:{}}})),S=function(e){var n=e.version,t=x();return Object(f.jsxs)(b.a,y({className:t.root,maxWidth:"md"},{children:[n&&Object(f.jsxs)(v.a,y({component:"div",className:t.text,color:"textSecondary",variant:"overline"},{children:["v.",n]}),void 0),Object(f.jsx)("img",{className:t.logo,alt:"footer",src:"/cc-watermarks-riverscapes_orig.png"},void 0)]}),void 0)},T=t(563),w=t(562),P=t(561),C=t(560),N=t(306),I=t(116),E=t.n(I),A=t(288),R=t.n(A),_=t(287),k=t.n(_),D=t(539),L=t(289),F=t.n(L),U=t(20),$=t(578),W=t(577),B=t(117),M=t.n(B),G=t(540),z=t(541),q=t(538),V=t(547),H=t(548),Z=t(549),K=t(550),X=t(551),Q=t(552),J=t(553),Y=t(554),ee=function(){return ee=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ee.apply(this,arguments)},ne=Object(O.a)((function(e){return{root:{},shareIconTitle:{},shareButtons:{margin:e.spacing(1,0),"&>*":{marginRight:e.spacing(1)}},flexGrow:{flexGrow:1},dlgTitle:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,display:"flex"},closeButton:{flex:"0 0"}}})),te=function(e){var n=e.open,t=e.shareUrl,r=e.handleClose,a=ne();return Object(f.jsxs)(W.a,ee({open:n,onClose:r,"aria-labelledby":"form-dialog-title"},{children:[Object(f.jsxs)(q.a,ee({className:a.dlgTitle,disableTypography:!0},{children:[Object(f.jsx)(D.a,ee({color:"inherit"},{children:Object(f.jsx)(E.a,{className:a.shareIconTitle},void 0)}),void 0),Object(f.jsx)(v.a,ee({variant:"h4",className:a.flexGrow},{children:"Share"}),void 0),Object(f.jsx)("div",ee({className:a.closeButton},{children:Object(f.jsx)(D.a,ee({onClick:r,color:"inherit"},{children:Object(f.jsx)(M.a,{},void 0)}),void 0)}),void 0)]}),void 0),Object(f.jsxs)(G.a,{children:[Object(f.jsx)(z.a,{children:"Copy this link and share it using your preferred method."},void 0),Object(f.jsx)($.a,{value:t,margin:"dense",id:"name",variant:"outlined",fullWidth:!0,inputProps:{onClick:function(e){e.preventDefault(),e.target.select()}}},void 0),Object(f.jsxs)("div",ee({className:a.shareButtons},{children:[Object(f.jsx)(V.a,ee({url:t},{children:Object(f.jsx)(H.a,{size:32,round:!0},void 0)}),void 0),Object(f.jsx)(Z.a,ee({url:t},{children:Object(f.jsx)(K.a,{size:32,round:!0},void 0)}),void 0),Object(f.jsx)(X.a,ee({url:t},{children:Object(f.jsx)(Q.a,{size:32,round:!0},void 0)}),void 0),Object(f.jsx)(J.a,ee({url:t,quote:"title"},{children:Object(f.jsx)(Y.a,{size:32,round:!0},void 0)}),void 0)]}),void 0)]},void 0)]}),void 0)},re=t(463),ae=t(579),oe=t(286),ie=t.n(oe),ce=t(555),se=function(){return se=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},se.apply(this,arguments)},le=Object(O.a)((function(e){return{root:{},title:{margin:0,display:"flex",padding:e.spacing(2),background:e.palette.warning.main,color:e.palette.warning.contrastText},actions:{margin:0,padding:e.spacing(1)},content:{padding:e.spacing(2)},rasterImgsContainer:{display:"flex",width:"100%",overflow:"hidden"},rasterImgsContainerCol:{},rasterImgs:{width:"100%",height:"auto"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)}}})),de=function(e){var n=e.onClose,t=e.open,r=le();return Object(f.jsxs)(W.a,se({"aria-labelledby":"customized-dialog-title",open:t,maxWidth:"sm",onClose:n},{children:[Object(f.jsxs)(q.a,se({disableTypography:!0,className:r.title},{children:[Object(f.jsx)(v.a,se({variant:"h6",color:"inherit"},{children:"Provisional Data"}),void 0),Object(f.jsx)(D.a,se({"aria-label":"close",className:r.closeButton,onClick:n,color:"inherit"},{children:Object(f.jsx)(M.a,{},void 0)}),void 0)]}),void 0),Object(f.jsxs)(G.a,se({dividers:!0},{children:[Object(f.jsxs)(v.a,se({paragraph:!0},{children:["As of ",Object(f.jsx)("strong",{children:"November 2021"},void 0),", All projects in the Riverscapes Warehouse are provisional!"]}),void 0),Object(f.jsxs)(v.a,se({paragraph:!0},{children:["You have been granted early-access and are free to explore and download these provisional projects and data. Until Summer 2022, the"," ",Object(f.jsx)("strong",{children:Object(f.jsx)(ce.a,se({href:"https://rave.riverscapes.xyz/",target:"_blank"},{children:"RAVE viewers"}),void 0)},void 0),", the project reports, and many of the models will be undergoing major development."]}),void 0),Object(f.jsx)(v.a,se({paragraph:!0},{children:"These provisional data are still extremely useful, but many projects have not yet been reviewed and properly quality controlled. We are actively developing a rigorous quality assurance program that will include manual quality control to communicate the quality of the data. The data might contain unreported errors. Users should use caution using data obtained from the riverscapes data warehouse until these QA/QC statuses are fully reported for each project."}),void 0),Object(f.jsx)(v.a,se({paragraph:!0},{children:"Please check back regularly for the latest version of projects and model outputs, as well as improvements. We are also developing versioning reporting, and attribution to make clear what projects were produced from what versions of tools, and who ran the tools, who curated the projects, who performed quality control and who funded or supported that work to make available to others. Thank you for your patience while we work towards a launch."}),void 0),Object(f.jsx)(v.a,se({paragraph:!0},{children:Object(f.jsx)("strong",{children:"For feature suggestions, questions or to report a bug please visit:"},void 0)}),void 0),Object(f.jsx)(v.a,se({paragraph:!0,variant:"h4",style:{textAlign:"center"}},{children:Object(f.jsx)(ce.a,se({href:"https://github.com/Riverscapes/riverscapes-website/discussions/categories/riverscapes-warehouse",target:"_blank"},{children:"Discussion forum"}),void 0)}),void 0)]}),void 0)]}),void 0)},ue=function(){return ue=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ue.apply(this,arguments)},pe=Object(O.a)((function(e){return{button:{marginLeft:e.spacing(1),paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}}})),ge=function(){var e=pe(),n=Object(o.useState)(!1),t=n[0],r=n[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(ae.a,ue({title:"These are provisional riverscape projects. They are from models and tools undergoing active development, and individual projects are undergoing QA/QC and subject to change. Please treat with caution. No warranty is expressed or implied."},{children:Object(f.jsx)(re.a,ue({variant:"contained",size:"small",color:"secondary",className:e.button,startIcon:Object(f.jsx)(ie.a,{},void 0),onClick:function(){return r(!0)}},{children:"Provisional Data"}),void 0)}),void 0),Object(f.jsx)(de,{open:t,onClose:function(){return r(!1)}},void 0)]},void 0)},me=t(171),he=t(174),je=t(173),fe=t(172),be=t(556),ve=t(557),Oe=t(558),ye=t(559),xe=t(14),Se=t.n(xe),Te={tagColors:["#418CF0","#FCB441","#E0400A","#056492","#BFBFBF","#1A3B69","#FFE382","#129CDD","#CA6B4B","#005CDB","#F3D288","#506381","#F1B9A8","#E0830A","#7893BE"]},we=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GRAPHQL:"https://gco5qebdt4.execute-api.us-west-2.amazonaws.com/production/api",REACT_APP_WEBRAVE_URL:"http://webrave.riverscapes.xyz/",REACT_APP_VERSION:"1.4.5",REACT_APP_GOOGLE_ANALYTICS:"UA-60121403-12"}).REACT_APP_DOMAIN;Se.a.debug("config: ",{domain:we});var Pe=!1,Ce={mapBoxToken:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GRAPHQL:"https://gco5qebdt4.execute-api.us-west-2.amazonaws.com/production/api",REACT_APP_WEBRAVE_URL:"http://webrave.riverscapes.xyz/",REACT_APP_VERSION:"1.4.5",REACT_APP_GOOGLE_ANALYTICS:"UA-60121403-12"}).REACT_APP_MAPBOX_TOKEN},Ne="1.4.5",Ie={graphql:"https://gco5qebdt4.execute-api.us-west-2.amazonaws.com/production/api",cdn:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GRAPHQL:"https://gco5qebdt4.execute-api.us-west-2.amazonaws.com/production/api",REACT_APP_WEBRAVE_URL:"http://webrave.riverscapes.xyz/",REACT_APP_VERSION:"1.4.5",REACT_APP_GOOGLE_ANALYTICS:"UA-60121403-12"}).REACT_APP_CDN},Ee=[me.a,he.a,je.a,fe.a,be.a,ve.a,Oe.a,ye.a],Ae=new URL("".endsWith("/")?"":"/",window.location.origin);console.log("RedirectUrl",{redirectUrl:Ae,publicUrl:""});var Re="UA-60121403-12",_e={Auth:{region:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GRAPHQL:"https://gco5qebdt4.execute-api.us-west-2.amazonaws.com/production/api",REACT_APP_WEBRAVE_URL:"http://webrave.riverscapes.xyz/",REACT_APP_VERSION:"1.4.5",REACT_APP_GOOGLE_ANALYTICS:"UA-60121403-12"}).REACT_APP_AWS_REGION_DEPLOY,userPoolId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GRAPHQL:"https://gco5qebdt4.execute-api.us-west-2.amazonaws.com/production/api",REACT_APP_WEBRAVE_URL:"http://webrave.riverscapes.xyz/",REACT_APP_VERSION:"1.4.5",REACT_APP_GOOGLE_ANALYTICS:"UA-60121403-12"}).REACT_APP_AWS_USERPOOLID,userPoolWebClientId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GRAPHQL:"https://gco5qebdt4.execute-api.us-west-2.amazonaws.com/production/api",REACT_APP_WEBRAVE_URL:"http://webrave.riverscapes.xyz/",REACT_APP_VERSION:"1.4.5",REACT_APP_GOOGLE_ANALYTICS:"UA-60121403-12"}).REACT_APP_AWS_USERPOOLWEBCLIENTID,mandatorySignIn:!0,oauth:{domain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GRAPHQL:"https://gco5qebdt4.execute-api.us-west-2.amazonaws.com/production/api",REACT_APP_WEBRAVE_URL:"http://webrave.riverscapes.xyz/",REACT_APP_VERSION:"1.4.5",REACT_APP_GOOGLE_ANALYTICS:"UA-60121403-12"}).REACT_APP_HOSTED_DOMAIN,scope:["email","profile","openid"],redirectSignIn:Ae,redirectSignOut:Ae,responseType:"code"}}},ke=function(){return ke=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ke.apply(this,arguments)},De=Object(O.a)((function(e){var n,t,r,a;return{appBar:{zIndex:e.zIndex.drawer+1},root:{display:"flex",alignItems:"center",width:"100%",padding:e.spacing(0,1),textShadow:"3px 3px 3px rgba(0,0,0,0.7)",backgroundImage:"url(/HeaderBackground.png)",backgroundRepeat:"no-repeat",backgroundPosition:"0% 50%",backgroundSize:"cover",backgroundColor:"#444444"},logo:{height:40,width:40,marginRight:e.spacing(2)},programChooser:{margin:e.spacing(0,1),color:e.palette.primary.contrastText,"& svg":{color:e.palette.primary.contrastText},"&:before":{borderColor:e.palette.primary.contrastText},"&:after":{borderColor:e.palette.primary.contrastText}},transparent:{backgroundColor:"transparent",background:"none",color:e.palette.text.primary},search:(n={position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(U.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(U.a)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%",flexGrow:1},n[e.breakpoints.up("sm")]={marginLeft:e.spacing(3),width:"auto"},n),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},spacer:{flexGrow:1},inputInput:(t={padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},t[e.breakpoints.up("sm")]={width:200},t),sectionDesktop:(r={display:"none"},r[e.breakpoints.up("sm")]={display:"flex",flexGrow:1},r),sectionMobile:(a={display:"flex",flexGrow:1},a[e.breakpoints.up("sm")]={display:"none"},a)}}));function Le(e){return(!e.meta||!e.meta.access||"PUBLIC"!==e.meta.access)&&null===e.role}var Fe,Ue=function(e){var n=e.title,t=e.program,r=e.programs,a=e.signOutHandler,c=e.toolbarItems,s=e.provisional,l=e.shareUrl,d=e.history,u=De(),p=Object(o.useState)(!1),g=p[0],m=p[1],h=Object(o.useState)(null),b=h[0],O=h[1],y=function(){return O(null)},x=d&&d.location.pathname.indexOf("/admin")>-1,S=(a||r)&&Object(f.jsxs)(N.a,ke({anchorEl:b,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!b,onClose:y},{children:[r&&Object(f.jsx)(C.a,{children:Object(f.jsx)(v.a,ke({variant:"overline",onClick:function(){return d.push("/")}},{children:"Programs"}),void 0)},void 0),r&&Object(f.jsx)(P.a,{},void 0),r&&r.length>0&&r.map((function(e,n){return Object(f.jsx)(C.a,ke({disabled:t&&t.machineName===e.machineName||Le(e),onClick:function(){return n=e,y(),void(d&&d.push("/"+n.machineName));var n},value:e.machineName},{children:e.name}),"prog-"+n)})),a&&Object(f.jsx)(P.a,{},void 0),a&&Object(f.jsx)(C.a,ke({onClick:a},{children:"Log Out"}),void 0)]}),void 0),I=t&&(t.role===j.WarehouseRoleEnum.Admin||t.role===j.WarehouseRoleEnum.SuperUser);return Object(f.jsxs)(i.a.Fragment,{children:[Object(f.jsx)(w.a,ke({position:"static",className:u.appBar},{children:Object(f.jsxs)(T.a,ke({className:u.root,disableGutters:!0},{children:[Object(f.jsx)("a",ke({href:"http://riverscapes.xyz/"},{children:Object(f.jsx)("img",{className:u.logo,src:"https://riverscapes.xyz/assets/images/RiverscapesLogo.png",alt:"logo"},void 0)}),void 0),t?Object(f.jsxs)("div",{children:[Object(f.jsx)(v.a,ke({variant:"subtitle1"},{children:t.name}),void 0),Object(f.jsx)(v.a,ke({variant:"caption"},{children:n}),void 0)]},void 0):Object(f.jsx)(v.a,ke({variant:"subtitle1"},{children:n}),void 0),Object(f.jsx)("div",{className:u.spacer},void 0),Ne&&Object(f.jsxs)(v.a,ke({component:"div",className:u.text,color:"inherit",variant:"overline"},{children:["v.",Ne]}),void 0),I&&Object(f.jsx)(D.a,ke({"aria-haspopup":"true",onClick:function(){d&&t&&(x?d.push("/"+t.machineName):d.push("/"+t.machineName+"/admin"))},color:"inherit"},{children:x?Object(f.jsx)(k.a,{},void 0):Object(f.jsx)(R.a,{},void 0)}),void 0),c,s&&Object(f.jsx)(ge,{},void 0),l&&Object(f.jsx)(D.a,ke({"aria-haspopup":"true",onClick:function(){return m(!0)},color:"inherit"},{children:Object(f.jsx)(E.a,{},void 0)}),void 0),(a||r)&&Object(f.jsx)(D.a,ke({"aria-haspopup":"true",onClick:function(e){return O(e.currentTarget)},color:"inherit"},{children:Object(f.jsx)(F.a,{},void 0)}),void 0)]}),void 0)}),void 0),S,l&&Object(f.jsx)(te,{open:g,shareUrl:l,handleClose:function(){return m(!1)}},void 0)]},void 0)},$e=function(){return $e=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},$e.apply(this,arguments)},We=function(e,n,t){if(t||2===arguments.length)for(var r,a=0,o=n.length;a<o;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))},Be=function(e){var n=e.tags,t=e.typographyProps;return n?Object(f.jsx)(i.a.Fragment,{children:n.reduce((function(e,n,r){return We(We([],e,!0),[Object(o.createElement)(v.a,$e({variant:"caption"},t,{key:"sep-"+r}),r>0&&", "),Object(f.jsx)(ae.a,$e({title:Object(f.jsxs)(i.a.Fragment,{children:[Object(f.jsxs)(v.a,$e({variant:"body1"},{children:["Warehouse Tag: ",n]}),void 0),Object(f.jsx)(v.a,$e({variant:"caption"},{children:"Warehouse tags can be added to delineate two identical projects in the warehouse"}),void 0)]},void 0)},{children:Object(f.jsx)(v.a,$e({variant:"caption",color:"secondary"},t,{children:n}),void 0)}),"whTag-"+r)],!1)}),[])},void 0):null},Me=t(564),Ge=t(138),ze=t.n(Ge),qe=t(65),Ve=t.n(qe),He=function(){return He=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},He.apply(this,arguments)},Ze=Object(O.a)((function(){return{root:{"& *":{cursor:"pointer"}},disabledButton:{opacity:.5}}})),Ke=function(e){var n=e.title,t=e.project,r=e.pendingSince,a=e.btnProps,o=e.downloadZipFile,c=Ze(),s=Object(f.jsx)(ae.a,He({title:Object(f.jsxs)(i.a.Fragment,{children:[Object(f.jsx)(v.a,He({variant:"body1"},{children:"Download Project Zip"}),void 0),Object(f.jsx)(v.a,He({variant:"caption",paragraph:!0},{children:"Click to download this project as a single zip file"}),void 0),Object(f.jsx)(v.a,He({variant:"caption",paragraph:!0},{children:"There may be a delay if the zip file needs to be built."}),void 0)]},void 0)},{children:n?Object(f.jsx)(re.a,He({variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),e.stopPropagation(),o(t)},startIcon:Object(f.jsx)(ze.a,{},void 0)},a,{children:n||"ZIP"}),void 0):Object(f.jsx)(D.a,He({color:"primary",onClick:function(e){e.preventDefault(),e.stopPropagation(),o(t)}},a,{children:Object(f.jsx)(ze.a,{},void 0)}),void 0)}),void 0);return r&&(s=Object(f.jsx)(ae.a,He({title:Object(f.jsxs)(i.a.Fragment,{children:[Object(f.jsx)(v.a,He({variant:"body1"},{children:"Preparing Zip"}),void 0),Object(f.jsx)(v.a,He({variant:"caption",paragraph:!0},{children:"The warehouse is building your zip file for you."}),void 0),Object(f.jsxs)(v.a,He({variant:"caption",paragraph:!0},{children:["started ",Ve()(r,"x").fromNow()]}),void 0)]},void 0)},{children:Object(f.jsx)(re.a,He({variant:"outlined",disableFocusRipple:!0,disableRipple:!0,disableTouchRipple:!0,color:"primary",onClick:function(e){e.preventDefault(),e.stopPropagation()},className:c.disabledButton,startIcon:Object(f.jsx)(Me.a,{color:a&&a.color&&"secondary"===a.color?"primary":"secondary",size:24,thickness:6},void 0)},a,{children:n||"ZIP"}),void 0)}),void 0)),Object(f.jsx)("div",He({className:c.root},{children:s}),void 0)},Xe=(Object(O.a)((function(e){return{root:{},whBtnLogo:{height:20,width:20,marginRight:e.spacing(1)},whButton:{maxWidth:300}}})),t(213)),Qe=t.n(Xe),Je=function(){return Je=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Je.apply(this,arguments)},Ye=Object(O.a)((function(){return{root:{"& *":{cursor:"pointer"}},disabledButton:{opacity:.5}}})),en=function(e){var n=e.title,t=e.project,r=e.url,o=e.btnProps,c=Ye();if(!r||0===r.length)return null;var s=r+"#/"+t.program+"/"+t.id,l=Object(f.jsx)(ae.a,Je({title:Object(f.jsxs)(i.a.Fragment,{children:[Object(f.jsx)(v.a,Je({variant:"body1"},{children:"Explore using map"}),void 0),Object(f.jsx)(v.a,Je({variant:"caption",paragraph:!0},{children:"Explore this data set using an online map"}),void 0)]},void 0)},{children:n?Object(f.jsx)(re.a,Je({variant:"contained",onClick:function(e){e.preventDefault(),e.stopPropagation(),a.event("warehouse","open_webrave","open_webrave"),window.open(s)},color:"primary",startIcon:Object(f.jsx)(Qe.a,{},void 0)},o,{children:n||"MAP"}),void 0):Object(f.jsx)(D.a,Je({color:"primary",onClick:function(e){e.preventDefault(),e.stopPropagation(),a.event("warehouse","open_webrave","open_webrave"),window.open(s)}},o,{children:Object(f.jsx)(Qe.a,{},void 0)}),void 0)}),void 0);return Object(f.jsx)("div",Je({className:c.root},{children:l}),void 0)},nn=t(309),tn=t(581),rn=t(546),an=t(580),on=t(464),cn=t(566),sn=t(565),ln=t(162),dn=t.n(ln),un=t(8),pn=t(170),gn=((Fe={})[j.WarehouseRoleEnum.SuperUser]=pn.a,Fe[j.WarehouseRoleEnum.Admin]=me.a,Fe[j.WarehouseRoleEnum.Participant]=Oe.a,Fe[j.WarehouseRoleEnum.Observer]=je.a,Fe),mn=function(){return mn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},mn.apply(this,arguments)},hn=Object(O.a)((function(e){return{rootContainer:{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},spacer:{flexGrow:1},root:{display:"flex",flexDirection:"column",padding:e.spacing(2,4,4,4),maxHeight:"85%",overflow:"hidden"},instruct:{flex:"0 0"},progList:{border:"1px solid #cccccc",flex:"1 1",overflowY:"scroll"},logoContainer:{flex:"0 0",padding:e.spacing(2),textAlign:"center"},scrollHint:{width:"100%",height:30,marginTop:-30,display:"block",background:"linear-gradient(0deg, rgba(255,255,255,1) 0%, rgba(255,255,255,0) 100%)",zIndex:1e3},logo:{},accessChip:mn({},Object.keys(gn).reduce((function(n,t){var r;return mn(mn({},n),((r={})["&.access_"+t]={color:e.palette.getContrastText(gn[t][500]),background:gn[t][500]},r))}),{}))}}));var jn=function(e){var n=e.programs,t=e.history,r=e.navigate,a=hn();return Object(f.jsxs)("div",mn({className:a.rootContainer},{children:[Object(f.jsx)("div",{className:a.spacer},void 0),Object(f.jsxs)(nn.a,mn({className:a.root,elevation:1},{children:[Object(f.jsx)("div",mn({className:a.logoContainer},{children:Object(f.jsx)("img",{className:a.logo,src:"/RiverscapesLogo.png",alt:"logo"},void 0)}),void 0),Object(f.jsx)(v.a,mn({variant:"h5",className:a.instruct},{children:"Choose a program:"}),void 0),Object(f.jsx)(rn.a,mn({className:a.progList},{children:n&&n.map((function(e,n){var o,i=Object(f.jsx)(an.a,{icon:Object(f.jsx)(dn.a,{},void 0),className:Object(un.a)(a.accessChip,"access_"+e.role),label:e.role||"Observer",color:"primary"},void 0),c=(!(o=e).meta||!o.meta.access||"PUBLIC"!==o.meta.access)&&null===o.role;return c&&(i=Object(f.jsx)(an.a,{label:"No Access",color:"default"},void 0)),Object(f.jsxs)(on.a,mn({disabled:c,button:!0,divider:!0,onClick:function(){return r(t,e)}},{children:[Object(f.jsx)(sn.a,{children:Object(f.jsx)(tn.a,mn({alt:"programname"},{children:e.name.substr(0,1)}),void 0)},void 0),Object(f.jsx)(cn.a,{primary:e.name,secondary:e.meta.description},void 0),i]}),"progKey-"+n)}))}),void 0),Object(f.jsx)("div",{className:a.scrollHint},void 0),Object(f.jsxs)(v.a,mn({paragraph:!0,variant:"caption",className:a.instruct},{children:["If there are programs labeled"," ",Object(f.jsx)(an.a,{label:"No Access",component:"span",color:"default",size:"small"},void 0)," and you think you should be able to see them please contact your program administrator."]}),void 0)]}),void 0),Object(f.jsx)("div",{className:a.spacer},void 0)]}),void 0)},fn=t(567),bn=t(545),vn=t(293),On=t.n(vn),yn=t(290),xn=t.n(yn),Sn=t(291),Tn=t.n(Sn),wn=t(292),Pn=t.n(wn),Cn=t(568),Nn=t(294),In=t.n(Nn),En=t(295),An=t.n(En),Rn=t(163),_n=t.n(Rn),kn=t(584),Dn=function(){return Dn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Dn.apply(this,arguments)},Ln=Object(O.a)((function(e){return{treeItemRoot:{backgroundColor:e.palette.background.paper,"&:nth-child(odd)":{backgroundColor:e.palette.background.default}},treeItemContainer:{display:"flex"},treeItemText:{marginLeft:e.spacing(1),padding:e.spacing(1),flexGrow:1},treeItemIcon:{},treeFile:{},treeFileContent:{borderBottom:"1px solid "+e.palette.grey[100]},treeFolder:{},treeFolderContent:{},treeFolderText:{padding:e.spacing(1)},allowSelect:{"&,& *":{userSelect:"text",cursor:"auto"}}}})),Fn=function e(n){var t=n.item,r=n.fileDict,a=n.keyStr,o=n.project,c=n.fileClick,s=Ln();if(t.children){var l=t.children.map((function(n,t){return Object(f.jsx)(e,{keyStr:a+"-l"+t,item:n,fileDict:r,project:o,fileClick:c},a+"-l"+t)}));return Object(f.jsx)(kn.a,Dn({nodeId:a,className:s.treeFolder,classes:{content:s.treeFolderContent},label:Object(f.jsx)("div",Dn({className:s.treeFolderText},{children:t.name}),void 0)},{children:l}),void 0)}var d=t.path?r[t.path]:{size:"0"};return Object(f.jsx)(kn.a,{nodeId:a,className:s.treeFile,classes:{root:s.treeItemRoot,content:s.treeFileContent},label:Object(f.jsxs)("div",Dn({className:s.treeItemContainer},{children:[Object(f.jsxs)("div",Dn({className:s.treeItemText},{children:[Object(f.jsx)(v.a,Dn({color:"textPrimary",component:"div",variant:"body1"},{children:t.name}),void 0),Object(f.jsxs)(v.a,Dn({color:"textSecondary",component:"div",variant:"caption"},{children:[_n()(parseInt(d.size,10))," --"," ",Object(f.jsx)("span",Dn({className:s.allowSelect},{children:t.path}),void 0)]}),void 0)]}),void 0),Object(f.jsx)(ae.a,Dn({title:Object(f.jsx)(i.a.Fragment,{children:Object(f.jsxs)(v.a,Dn({variant:"body1"},{children:["Download: ",t.path]}),void 0)},void 0)},{children:Object(f.jsx)(D.a,Dn({disableRipple:!0,className:s.treeItemIcon,color:"primary",onClick:function(){return c(o,t.path)}},{children:Object(f.jsx)(ze.a,{},void 0)}),void 0)}),void 0)]}),void 0),endIcon:d.icon},void 0)},Un=function(){return Un=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Un.apply(this,arguments)},$n=Object(O.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},allowSelect:{"&,& *":{userSelect:"text",cursor:"auto"}},scrollPaper:{alignItems:"baseline"},name:{maxWidth:"95%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginBottom:e.spacing(1)},titlebar:{backgroundColor:"#444444",color:e.palette.primary.contrastText,display:"flex"},titlebarLeft:{flexGrow:1},header:{display:"flex"},headerLeft:{flex:"1 1 80%"},headerRight:{textAlign:"right",flex:"1 0"},flexGrow:{flexGrow:1},closeButton:{flex:"0 0",color:e.palette.grey[500]},normalIcon:{},documentIcon:{color:me.a[500]},photoIcon:{color:be.a[500]},TerrainIcon:{color:he.a[500]},metaDisplay:{display:"flex",flexFlow:"wrap"},title:{marginTop:e.spacing(2)},treeItemContainer:{display:"flex"},treeItemText:{marginLeft:e.spacing(1),flexGrow:1},treeItemIcon:{},treeFileContent:{borderBottom:"1px solid "+e.palette.grey[100],padding:e.spacing(1)},treeFolder:{},treeFolderContent:{padding:e.spacing(1)},metaDisplayItem:{flex:"1 1",borderRadius:e.spacing(1),backgroundColor:"#fafafa",margin:e.spacing(1,.5),border:"#1px solid #e7e7e7",padding:e.spacing(1),maxWidth:"25%",minWidth:150,"&>*":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},prodChip:{marginLeft:e.spacing(1),backgroundColor:e.palette.primary.light,color:"white"},popOver:{padding:e.spacing(2)},subHeader:{width:"100%",display:"flex"}}})),Wn=function(e){var n=e.onClose,t=e.project,r=e.downloadFile,a=e.webRaveUrl,c=e.program,s=e.showFileTree,l=e.pendingZips,d=e.downloadZipFile,u=$n(),p=Object(o.useState)(null),g=p[0],m=p[1],h=Object(o.useState)(!1),j=h[0],b=h[1],O=l[t.id],y=[{pattern:/.*\.(png|gif|jpg|jpeg)$/i,icon:Object(f.jsx)(xn.a,{className:u.photoIcon},void 0),classStr:"photo"},{pattern:/.*\.(tif|img|shp)$/i,icon:Object(f.jsx)(Tn.a,{className:u.TerrainIcon},void 0),classStr:"terrain"},{pattern:/.*\.(csv|pdf|doc)$/i,icon:Object(f.jsx)(Pn.a,{className:u.documentIcon},void 0),classStr:"assignment"}],x=(t.files||[]).reduce((function(e,n){var t,r=y.find((function(e){var t=e.pattern;return n.key.match(t)}));return Un(Un({},e),((t={})[n.key]=Un(Un({},n),{icon:r?r.icon:Object(f.jsx)(On.a,{className:u.normalIcon},void 0),classStr:r?r.classStr:"normalIcon"}),t))}),{}),S=t.treeIzeFilePaths(),T=c.products.find((function(e){return e.id===t.projType})),w=T?T.name:"Unknown",C=Object.keys(t.meta).find((function(e){return"description"===e.toLowerCase()}));return Object(f.jsxs)(W.a,Un({onClose:n,open:!0,maxWidth:"md",fullWidth:!0,className:u.root,classes:{scrollPaper:u.scrollPaper}},{children:[Object(f.jsx)(te,{open:j,shareUrl:window.location.href,handleClose:function(){return b(!1)}},void 0),Object(f.jsxs)(q.a,Un({disableTypography:!0,className:u.titlebar},{children:[Object(f.jsxs)("div",Un({className:u.titlebarLeft},{children:[Object(f.jsx)(ae.a,Un({title:Object(f.jsx)(v.a,Un({variant:"body1"},{children:t.name}),void 0)},{children:Object(f.jsx)(v.a,Un({variant:"h5",component:"div",className:Object(un.a)(u.name,u.allowSelect)},{children:t.name}),void 0)}),void 0),Object(f.jsx)("div",Un({className:u.subHeader},{children:Object(f.jsx)("div",Un({className:u.flexGrow},{children:Object(f.jsxs)(v.a,Un({variant:"caption",color:"inherit",component:"div"},{children:["ID: ",Object(f.jsx)("span",Un({className:u.allowSelect},{children:t.id}),void 0)]}),void 0)}),void 0)}),void 0)]}),void 0),n?Object(f.jsx)("div",{children:Object(f.jsx)(D.a,Un({"aria-label":"close",className:u.closeButton,onClick:n,size:"small"},{children:Object(f.jsx)(M.a,{},void 0)}),void 0)},void 0):null]}),void 0),Object(f.jsxs)(G.a,Un({dividers:!0},{children:[Object(f.jsxs)("div",Un({className:Object(un.a)(u.allowSelect)},{children:[Object(f.jsxs)("div",Un({className:u.header},{children:[Object(f.jsxs)("div",Un({className:u.headerLeft},{children:[Object(f.jsxs)(v.a,Un({variant:"caption",component:"div",color:"inherit"},{children:[Object(f.jsx)("strong",{children:"Project Type"},void 0),": ",Object(f.jsx)("strong",{children:w},void 0)," (",T&&T.id,")"]}),void 0),Object(f.jsxs)(v.a,Un({variant:"caption",component:"div",color:"inherit"},{children:[Object(f.jsx)("strong",{children:"Created"},void 0),": ",Ve()(t.createdOn,"x").fromNow()," (",Ve()(t.createdOn,"x").format("lll"),")"]}),void 0),Object(f.jsxs)(v.a,Un({variant:"caption",component:"div",color:"inherit"},{children:[Object(f.jsx)("strong",{children:"Updated"},void 0),": ",Ve()(t.updatedOn,"x").fromNow()," (",Ve()(t.updatedOn,"x").format("lll"),")"]}),void 0),Object(f.jsxs)(v.a,Un({variant:"caption",component:"div",color:"inherit"},{children:[Object(f.jsx)("strong",{children:"Warehouse tags: "},void 0),Object(f.jsx)(Be,{tags:t.tags},void 0)]}),void 0),Object(f.jsxs)(v.a,Un({variant:"caption",component:"div",color:"inherit"},{children:[Object(f.jsx)("strong",{children:"Size (Unzipped)"},void 0),":"," ",t.totalSize&&t.totalSize>-1?_n()(t.totalSize):"Not available"]}),void 0)]}),void 0),Object(f.jsx)("div",Un({className:u.headerRight},{children:Object(f.jsxs)(fn.a,Un({color:"primary"},{children:[a&&Object(f.jsx)(en,Un({title:"Map",url:a},{project:t},{btnProps:{variant:"text"}}),void 0),Object(f.jsx)(re.a,Un({variant:"text",onClick:function(){return b(!0)},style:{cursor:"pointer"},startIcon:Object(f.jsx)(E.a,{},void 0)},{children:"Share"}),void 0),Object(f.jsx)(Ke,Un({title:"Download"},{project:t,pendingSince:O,downloadZipFile:d},{btnProps:{variant:"text"}}),void 0)]}),void 0)}),void 0)]}),void 0),C&&Object(f.jsxs)("div",{children:[Object(f.jsx)(v.a,Un({className:u.title,color:"inherit",component:"div",variant:"subtitle1"},{children:"Description"}),void 0),Object(f.jsx)(v.a,Un({color:"textSecondary",variant:"body2"},{children:t.meta[C]}),void 0)]},void 0),Object(f.jsx)(v.a,Un({className:u.title,color:"inherit",variant:"subtitle1"},{children:"Metadata"}),void 0),Object(f.jsx)(P.a,{},void 0),Object(f.jsx)("div",Un({className:u.metaDisplay},{children:Object.keys(t.meta).filter((function(e){return-1===["description"].indexOf(e.toLowerCase())})).map((function(e,n){var r=t.meta[e];return 0===t.meta[e].indexOf("http")&&(r=Object(f.jsx)(ce.a,Un({href:t.meta[e],target:"_blank"},{children:t.meta[e]}),void 0)),Object(f.jsx)(ae.a,Un({placement:"bottom",title:Object(f.jsxs)(i.a.Fragment,{children:[Object(f.jsx)(v.a,Un({variant:"body1",component:"div"},{children:Object(f.jsx)("strong",{children:e},void 0)}),void 0),Object(f.jsx)(v.a,Un({variant:"body2",component:"div"},{children:r}),void 0)]},void 0)},{children:Object(f.jsxs)("div",Un({className:u.metaDisplayItem},{children:[Object(f.jsx)(v.a,Un({variant:"caption",component:"div",color:"textPrimary"},{children:Object(f.jsx)("strong",{children:e},void 0)}),void 0),Object(f.jsx)(v.a,Un({variant:"caption",component:"div",color:"textPrimary"},{children:r}),void 0)]}),void 0)}),"result-"+n)}))}),void 0)]}),void 0),s&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(v.a,Un({className:u.title,color:"inherit",variant:"subtitle1"},{children:"Files"}),void 0),Object(f.jsx)(P.a,{},void 0),Object(f.jsx)(Cn.a,Un({className:u.treeRoot,defaultExpanded:["1"],disableSelection:!0,defaultCollapseIcon:Object(f.jsx)(In.a,{color:"inherit"},void 0),defaultExpandIcon:Object(f.jsx)(An.a,{color:"inherit"},void 0)},{children:S.map((function(e,n){return Object(f.jsx)(Fn,{project:t,keyStr:"treeNode-"+n,item:e,fileDict:x,fileClick:r},"treeNode-"+n)}))}),void 0)]},void 0)]}),void 0),Object(f.jsx)(bn.a,Un({open:Boolean(g),anchorEl:g?g[0]:null,onClose:function(){return m(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},{children:Object(f.jsx)(v.a,Un({className:u.popOver},{children:g?g[1]:""}),void 0)}),void 0)]}),void 0)},Bn=t(296),Mn=t.n(Bn),Gn=function(){return Gn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Gn.apply(this,arguments)},zn=Object(O.a)((function(e){return{rootContainer:{height:"100%",display:"flex",flexDirection:"column"},spacer:{flexGrow:1},root:{padding:e.spacing(2,4,4,4)},logoContainer:{padding:e.spacing(2),textAlign:"center"},logo:{}}})),qn=function(e){var n=e.title,t=e.signIn,r=zn();return Object(f.jsxs)(b.a,Gn({className:r.rootContainer,maxWidth:"md"},{children:[Object(f.jsx)("div",{className:r.spacer},void 0),Object(f.jsxs)(nn.a,Gn({className:r.root},{children:[Object(f.jsx)("div",Gn({className:r.logoContainer},{children:Object(f.jsx)("img",{className:r.logo,src:"/RiverscapesLogo.png",alt:"logo"},void 0)}),void 0),Object(f.jsxs)(v.a,Gn({paragraph:!0,variant:"body1"},{children:["Welcome to ",Object(f.jsx)("strong",{children:n},void 0),". Please click the button below to log in."]}),void 0),Object(f.jsx)(v.a,Gn({paragraph:!0,variant:"body1"},{children:"If you don't have an account you will be prompted to use your Google account or create a new account using another email address."}),void 0),Object(f.jsx)(re.a,Gn({variant:"contained",onClick:t,color:"primary",fullWidth:!0,size:"large",startIcon:Object(f.jsx)(Mn.a,{},void 0)},{children:"Sign In"}),void 0)]}),void 0),Object(f.jsx)("div",{className:r.spacer},void 0)]}),void 0)},Vn=t(569),Hn=t(297),Zn=t.n(Hn),Kn=function(){return Kn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Kn.apply(this,arguments)},Xn=Object(O.a)((function(e){return{root:{marginLeft:e.spacing(1)},titlebar:{display:"flex",background:e.palette.error.main,color:e.palette.error.contrastText},closeButton:{},name:{paddingLeft:e.spacing(1),flexGrow:1}}})),Qn=function(e){var n=e.onClose,t=e.program,r=Xn();return Object(f.jsxs)(W.a,Kn({onClose:n,open:!0,maxWidth:"xs",fullWidth:!0,className:r.root,classes:{}},{children:[Object(f.jsxs)(q.a,Kn({disableTypography:!0,className:r.titlebar},{children:[Object(f.jsx)(Zn.a,{color:"inherit"},void 0),Object(f.jsx)(v.a,Kn({className:r.name},{children:"Access Denied"}),void 0)]}),void 0),Object(f.jsx)(G.a,Kn({dividers:!0},{children:t?Object(f.jsxs)(v.a,Kn({variant:"body1",component:"div",color:"inherit"},{children:["You don't have access to the program ",Object(f.jsx)("strong",{children:t.name},void 0),".","If you arrived here via URL you will be able to use the URL ","again once you have access."]}),void 0):Object(f.jsx)(v.a,Kn({variant:"body1",component:"div",color:"inherit"},{children:"This URL is not valid. If you arrived here via URL you will be able to use the URL again once you have access."}),void 0)}),void 0),Object(f.jsx)(Vn.a,{children:Object(f.jsx)(re.a,Kn({onClick:n,color:"primary"},{children:"Back"}),void 0)},void 0)]}),void 0)},Jn=t(75),Yn=t.n(Jn),et=function(){return et=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},et.apply(this,arguments)},nt=function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{s(r.next(e))}catch(n){o(n)}}function c(e){try{s(r.throw(e))}catch(n){o(n)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}s((r=r.apply(e,n||[])).next())}))},tt=function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=n.call(e,i)}catch(c){o=[6,c],r=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},rt=function(e,n){return"_"+e+"_"+n},at=function(e,n){return!e||e<Date.now()-1e3*n},ot=function(e){return nt(void 0,void 0,void 0,(function(){return tt(this,(function(n){switch(n.label){case 0:return[4,Yn.a.keys()];case 1:return[2,n.sent().filter((function(n){return 0===n.indexOf("_"+e+"_")}))]}}))}))},it=function(e,n){var t=this;this.prune=function(){return nt(t,void 0,void 0,(function(){var e,n,t,r;return tt(this,(function(a){switch(a.label){case 0:return Se.a.debug("["+this.ns+"]LocalForageClass PRUNE"),[4,ot(this.ns)];case 1:e=a.sent(),n=0,a.label=2;case 2:return n<e.length?(t=e[n],[4,Yn.a.getItem(t)]):[3,6];case 3:return r=a.sent(),at(null===r||void 0===r?void 0:r.ts,this.ttl)?(Se.a.debug("["+this.ns+"]LocalForageClass Prune Expired. Deleting: "+t),[4,Yn.a.removeItem(t)]):[3,5];case 4:a.sent(),a.label=5;case 5:return n++,[3,2];case 6:return[2]}}))}))},this.get=function(e,n){return void 0===n&&(n=!1),nt(t,void 0,void 0,(function(){var t,r;return tt(this,(function(a){switch(a.label){case 0:return t=rt(this.ns,e),[4,Yn.a.getItem(t).catch((function(e){Se.a.error("LocalForageClass ERROR",e)}))];case 1:return(r=a.sent())&&r.v&&r.ts?at(r.ts,this.ttl)?(Se.a.debug("["+this.ns+"]LocalForageClass Get Expired. Deleting: "+e),[4,Yn.a.removeItem(t)]):[3,3]:[3,7];case 2:return a.sent(),[2,null];case 3:return Se.a.debug("["+this.ns+"]LocalForageClass HIT: "+e),!0!==n?[3,5]:[4,Yn.a.setItem(t,et(et({},r),{ts:Date.now()}))];case 4:a.sent(),a.label=5;case 5:return[2,r.v];case 6:return[3,8];case 7:return[2,null];case 8:return[2]}}))}))},this.set=function(e,n){var r=rt(t.ns,e),a={ts:Date.now(),v:n};return Yn.a.setItem(r,a).then((function(){Se.a.debug("["+t.ns+"]LocalForageClass Set: "+e)}))},this.del=function(e){return Se.a.debug("["+t.ns+"]LocalForageClass Deleting: "+e),Yn.a.removeItem(rt(t.ns,e)).catch((function(){})).then()},this.clear=function(){return nt(t,void 0,void 0,(function(){var e,n;return tt(this,(function(t){switch(t.label){case 0:return Se.a.debug("["+this.ns+"]LocalForageClass clear"),[4,ot(this.ns)];case 1:for(e=t.sent(),n=0;n<e.length;n++)Yn.a.removeItem(e[n]);return[2]}}))}))},this.ns=e,this.ttl=n},ct=t(67),st=t.n(ct),lt=function(){return lt=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},lt.apply(this,arguments)},dt=function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{s(r.next(e))}catch(n){o(n)}}function c(e){try{s(r.throw(e))}catch(n){o(n)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}s((r=r.apply(e,n||[])).next())}))},ut=function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=n.call(e,i)}catch(c){o=[6,c],r=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},pt=function(e,n){var t=Object(o.useState)({}),r=t[0],a=t[1],i=Object(o.useRef)();i.current=r;var c=Object(o.useCallback)((function(t,r){return dt(void 0,void 0,void 0,(function(){var a,o,i;return ut(this,(function(c){switch(c.label){case 0:if(!n)return[2,Promise.resolve()];c.label=1;case 1:return c.trys.push([1,4,,5]),[4,e.getCurrentToken()];case 2:return a=c.sent(),[4,Object(j.downloadFile)(Ie.graphql,a,t.projType,n.machineName,t.id,r)];case 3:o=c.sent();try{o.data&&window.open(o.data.downloadFile.downloadUrl,"_self")}catch(s){Se.a.error("DOWNLOAD err",s)}return[3,5];case 4:return i=c.sent(),Se.a.error("DOWNLOAD err",i),[3,5];case 5:return[2]}}))}))}),[n,e]),s=Object(o.useCallback)((function(t){if(!n)return Promise.resolve();return function r(){return e.getCurrentToken().then((function(e){return Object(j.downloadZipFile)(Ie.graphql,e,t.projType,n.machineName,t.id)})).then((function(e){var n;try{e.data&&!e.data.downloadZip.pendingSince?(a(st.a.pickBy(i.current,(function(e,n){return n!==t.id}))),window.open(e.data.downloadZip.downloadUrl,"_self")):(a(lt(lt({},i.current),((n={})[t.id]=e.data?e.data.downloadZip.pendingSince:Date.now(),n))),setTimeout(r,5e3))}catch(o){Se.a.error("DOWNLOAD err",o)}})).catch((function(e){Se.a.error("DOWNLOAD err",e)}))}()}),[n,e]);return{pendingZips:i.current,downloadFileFn:c,downloadZipFile:s}},gt=function(){return gt=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},gt.apply(this,arguments)},mt=function(e,n){var t=Object(o.useState)(),r=t[0],a=t[1],i=Object(m.h)().programId,c=Object(o.useRef)();return c.current=r,Object(o.useEffect)((function(){if(i&&!(i.length<0))try{var r=null===e||void 0===e?void 0:e.find((function(e){return e.machineName===i}));!r||c.current&&c.current.machineName===r.machineName||(r.collections=r.collections.map((function(e,n){return gt(gt({},e),{color:Ee[n%Ee.length]})})),c.current=r,Se.a.debug("useProgram",{programId:i,newProg:r,programs:e}),a(r),n&&n(r))}catch(t){return}}),[e,i,n]),r},ht=function(){return ht=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ht.apply(this,arguments)},jt=function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{s(r.next(e))}catch(n){o(n)}}function c(e){try{s(r.throw(e))}catch(n){o(n)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}s((r=r.apply(e,n||[])).next())}))},ft=function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=n.call(e,i)}catch(c){o=[6,c],r=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},bt={loading:!1,initialized:!1},vt=function(e,n,t,r,a){void 0===t&&(t=!1),void 0===r&&(r=!1);var i=Object(m.h)().projectId,c=Object(o.useState)(bt),s=c[0],l=c[1],d=Object(o.useRef)(bt);d.current=s;var u=Object(o.useRef)(!1);return Object(o.useEffect)((function(){if(!i||i.length<2)l(bt);else try{if(!n||!i)return;if(i&&s.project&&i===s.project.id)return;var o=n.machineName;setTimeout((function(){u.current||s.project||l(ht(ht({},d.current),{loading:!0}))}),500),e.getCurrentToken().then((function(e){return Object(j.getProject)(Ie.graphql,e,i,o,t,r)})).then((function(e){return jt(void 0,void 0,void 0,(function(){var n;return ft(this,(function(t){switch(t.label){case 0:return u.current=!0,Se.a.debug("getProjectById::Response",e),e.data&&e.data.project&&d.current&&d.current.project&&(null===(n=d.current)||void 0===n?void 0:n.project.id)===e.data.project.id?[2]:[3,1];case 1:return e.data?(l({project:e.data.project,loading:!1,initialized:!0}),a?[4,a(e.data.project)]:[3,3]):[3,4];case 2:t.sent(),t.label=3;case 3:return[3,6];case 4:return l({project:void 0,loading:!1,initialized:!0}),a?[4,a(null)]:[3,6];case 5:t.sent(),t.label=6;case 6:return[2]}}))}))})).catch((function(e){u.current=!0,l({project:void 0,loading:!1,initialized:!0}),Se.a.error("api.getProjectById error",e)}))}catch(c){return}}),[i,n,e]),s},Ot=(t(215),t(44)),yt=Object(Ot.b)();var xt=t(304),St=t(169),Tt=function(){return Tt=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Tt.apply(this,arguments)},wt={palette:{primary:{main:St.a[500]},secondary:{main:fe.a[600],contrastText:"#FFFFFF"},text:{}}},Pt=Tt(Tt({},wt),{palette:Tt(Tt({},wt.palette),{type:"dark"})}),Ct={home:Object(xt.a)(wt),homeDark:Object(xt.a)(Pt)},Nt=t(175),It=function(){Re?Nt.a.initialize(Re,{titleCase:!1}):Se.a.error("Google Analytics: no UA- code found")},Et=function(e){Nt.a.pageview(e||window.location.pathname+window.location.hash)},At=function(e,n,t){Nt.a.event({category:e,action:n,label:t})},Rt=t(43),_t="/RiverscapesLogo.png",kt={limit:10,nextToken:0},Dt="http://webrave.riverscapes.xyz/",Lt=t(96),Ft=Object(O.a)((function(e){return{root:{padding:e.spacing(2),margin:e.spacing(2)},itemLeft:{flex:"1 1 75%"},itemMiddle:{flex:"1 0 20%",display:"flex",textAlign:"right",flexDirection:"column"},itemRight:{paddingLeft:e.spacing(1),flex:"0 0",display:"flex",textAlign:"right",flexDirection:"column"},itemRightInner:{display:"flex",textAlign:"right"},spacer:{flexGrow:1},projDate:{},itemLine:{display:"flex"},mm:{display:"flex",width:"100%"},odd:{background:e.palette.background.default},mmItem:{},prodChip:{height:e.spacing(2.3),borderRadius:e.spacing(1)/2,color:"#999",border:"1px solid #ddd",background:"#eee",marginRight:e.spacing(1)},downloadText:{textAlign:"center",width:"100%"}}})),Ut=function(e){var n=e.project,t=e.onClick,r=e.program,a=e.pendingZips,o=e.odd,c=e.downloadZipFile,s=Ft(),d=a[n.id],u=r.products.find((function(e){return e.id===n.projType})),p=u?u.pathArr.filter((function(e){return"Collection"===e.type})):[],g=u?u.name:"<UNKNOWN>",m=p.map((function(e){return{key:e.name,val:n.meta[e.name]}}),{}),h=Object.keys(n.meta||{}).reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(Lt.a)({},t.toLowerCase(),n.meta[t]))}),{}),j=h.modelversion?"".concat(g," v.").concat(h.modelversion):g;return Object(f.jsxs)(on.a,{button:!0,onClick:t,className:Object(un.a)(Object(Lt.a)({},s.odd,o)),children:[Object(f.jsx)(sn.a,{children:Object(f.jsxs)(tn.a,{children:[" ",n.projType&&n.projType.substr(0,1)," "]})}),Object(f.jsxs)("div",{className:s.itemLeft,children:[Object(f.jsx)(v.a,{variant:"body1",children:n.name}),Object(f.jsxs)("div",{className:s.mm,children:[Object(f.jsx)(an.a,{className:s.prodChip,label:j,size:"small"}),m.map((function(e,n){var t=e.key,a=e.val,o=r.collections.find((function(e){return e.name===t})),i=o&&o.color?o.color[500]:"inherit";return Object(f.jsxs)(v.a,{className:s.mmItem,variant:"caption",color:"textSecondary",children:[n>0&&" \u2022 ",Object(f.jsxs)("span",{style:{color:i},children:[" ",a," "]})]},"mmval-".concat(n))}))]})]}),Object(f.jsxs)("div",{className:s.itemMiddle,children:[Object(f.jsx)("div",{children:Object(f.jsx)(Be,{tags:n.tags})}),n.updatedOn&&Object(f.jsx)(ae.a,{title:Object(f.jsxs)(i.a.Fragment,{children:[Object(f.jsx)(v.a,{variant:"body1",children:"Dates"}),Object(f.jsxs)(v.a,{variant:"caption",children:["Created: ",Ve()(n.createdOn,"x").format("lll"),Object(f.jsx)("br",{}),"Last updated: ",Ve()(n.updatedOn,"x").format("lll")]})]}),children:Object(f.jsx)(v.a,{className:s.projDate,variant:"caption",color:"inherit",children:Ve()(n.updatedOn,"x").format("ll")})},"whTag-dateTooltip")]}),Object(f.jsx)("div",{className:s.itemRight,children:Object(f.jsx)(Ke,{project:n,pendingSince:d,downloadZipFile:c,btnProps:{size:"small"}})}),Object(f.jsx)("div",{className:s.itemRight,children:Object(f.jsx)(en,{project:n,url:Dt,btnProps:{size:"small"}})})]})},$t=t(571),Wt=t(570),Bt=Object(O.a)((function(){return{root:{},itemText:{flexGrow:1}}})),Mt=function(){var e=Bt();return Object(f.jsxs)(on.a,{children:[Object(f.jsx)(sn.a,{children:Object(f.jsx)(Wt.a,{variant:"circle",height:40,width:40})}),Object(f.jsxs)("div",{className:e.itemText,children:[Object(f.jsx)(Wt.a,{style:{height:10,width:"60%",margin:"6px 0"}}),Object(f.jsx)(Wt.a,{style:{height:10,width:"40%",margin:"6px 0"}})]}),Object(f.jsx)($t.a,{children:Object(f.jsx)(D.a,{edge:"end",disabled:!0,children:Object(f.jsx)(Wt.a,{variant:"circle",height:40,width:40})})})]})},Gt=Object(O.a)((function(e){return{root:{padding:e.spacing(2),margin:e.spacing(2)}}})),zt=function(e){var n=e.data,t=e.program,r=e.loading,a=e.searchParams,o=e.setSearchParams,i=e.pendingZips,c=e.navigate,s=e.downloadZipFile,d=Gt();return r?Object(f.jsxs)(nn.a,{className:d.root,children:[Object(f.jsx)(Rt.c,{data:{total:0,startIndex:a.nextToken,pageSize:a.limit},loading:r,handlePaginationEvent:function(e){return o(Object(l.a)(Object(l.a)({},a),{},{nextToken:e}))}}),Object(f.jsx)(P.a,{}),Object(f.jsx)(rn.a,{children:Array(a.limit||10).fill(null).map((function(e,n){return Object(f.jsx)(Mt,{},"result-".concat(n))}))})]}):n&&n.projects&&0!==n.projects.length?Object(f.jsxs)(nn.a,{className:d.root,children:[Object(f.jsx)(Rt.c,{data:{total:n.total,startIndex:a.nextToken,pageSize:a.limit},handlePaginationEvent:function(e){return o(Object(l.a)(Object(l.a)({},a),{},{nextToken:e}))}}),Object(f.jsx)(P.a,{}),Object(f.jsx)(rn.a,{children:n&&n.projects.map((function(e,n){var r=new j.Project(e);return Object(f.jsx)(Ut,{odd:Boolean(n%2),project:r,program:t,pendingZips:i,downloadZipFile:s,onClick:function(){return c(t.machineName,r.id)}},"result-".concat(n))}))})]}):Object(f.jsx)(nn.a,{className:d.root,children:Object(f.jsx)("div",{children:"No Projects Found"})})},qt=function(e){var n=e.getCurrentToken,t=e.url,r=e.navigate,a=e.program,i=e.searchParams,c=e.setSearchParams,s=e.pendingZips,l=e.downloadZipFile,d=Object(o.useState)(!0),m=Object(g.a)(d,2),h=m[0],b=m[1],v=Object(o.useState)(),O=Object(g.a)(v,2),y=O[0],x=O[1],S=Object(o.useState)(),T=Object(g.a)(S,2),w=T[0],P=T[1];return w&&Se.a.error(w),Object(o.useEffect)((function(){function e(){return e=Object(p.a)(u.a.mark((function e(){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return b(!0),e.next=5,n();case 5:return r=e.sent,Se.a.debug("Search API Hit",{url:t,jwt:r,program:a.machineName,searchParams:i}),e.next=9,Object(j.search)(t,r,a.machineName,i).then((function(e){var n=e.data,t=e.errors;try{if(t&&t.length>0)P(t),b(!1);else if(n){var r=n.search;x(r),b(!1)}}catch(a){b(!1)}})).catch((function(e){b(!1),P([e])}));case 9:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}x(void 0),function(){e.apply(this,arguments)}()}),[a,t,i,n]),Object(f.jsx)(zt,{data:y,loading:h,navigate:r,program:a,searchParams:i,setSearchParams:c,pendingZips:s,downloadZipFile:l})};qt.whyDidYouRender=!0;var Vt=qt,Ht=t(107),Zt=t(544),Kt=t(576),Xt=t(583),Qt=t(299),Jt=t.n(Qt),Yt=Object(O.a)((function(e){return{root:{display:"flex"},advancedLeft:{flex:"1 1 30%",height:e.spacing(4),marginRight:e.spacing(1)},advancedLeftCustom:{textAlign:"center"},advancedLeftOption:{},advancedText:{flex:"1 1 70%"},advancedRight:{flex:"1 1 70%"},advancedOp:{display:"flex"},advancedTextCustomName:{flex:"1 1 30%",marginRight:e.spacing(1)},advancedTextCustomValue:{flex:"1 1 40%"},advancedOpName:{flexGrow:1},advancedOpNamId:{},advancedInput:{height:e.spacing(4)}}})),er=function(e){var n=e.row,t=e.options,r=e.changeHandler,a=Yt(),c=Object(g.a)(n,2),s=c[0],l=c[1],d=Object(o.useState)(null),u=Object(g.a)(d,2),p=u[0],m=u[1],h=s&&s.length>0&&t.find((function(e){return e.name.toLowerCase()===s.toLowerCase()})),j=h&&h.Allow&&!!h.Allow.find((function(e){return e.name.toLowerCase()&&e.name.length>0})),b=st.a.debounce((function(e,n){var t=String(e),a=String(n);if(a&&a.length>0&&h&&!j){var o=h.AllowRegex;if(o&&o.length>0){var i=[];if(o.forEach((function(e){var n=new RegExp(e);!a.match(n)&&i.push(e)})),i.length>0)return void(1===i.length?m("Value must match pattern: '".concat(i[0],"'")):m(i.reduce((function(e,n,t){return e+(t>0?" and ":"")+n}),"Value must match patterns: ")))}}m(null),Se.a.debug("CHANGING VALUES",[t,a]),t.toLowerCase()===s.toLowerCase()&&a.toLowerCase()===l.toLowerCase()||r([t,a])}),500),O=function(e){13===e&&s&&s.length>0&&(Se.a.debug("Enter pressed"),r([s,l],!0))};return Object(f.jsxs)("div",{className:a.root,children:[Object(f.jsx)(Zt.a,{className:a.advancedLeft,children:Object(f.jsxs)(Kt.a,{value:h?h.name:"__custom",inputProps:{className:a.advancedInput},onChange:function(e){return r([String(e.target.value),""],!0)},children:[Object(f.jsx)(C.a,{value:"__custom",children:Object(f.jsx)(v.a,{className:a.advancedLeftCustom,color:"textSecondary",children:Object(f.jsx)("em",{children:"Custom"})})},"aoss-custom"),t.map((function(e,n){var t=e.name;return Object(f.jsx)(C.a,{value:t,children:Object(f.jsx)(v.a,{className:a.advancedLeftOption,children:t})},"aoss-".concat(n))}))]})}),j?Object(f.jsx)(Zt.a,{className:a.advancedRight,children:Object(f.jsx)(Kt.a,{value:l,inputProps:{className:a.advancedInput},onChange:function(e){return r([s,String(e.target.value)],!0)},children:h&&h.Allow&&h.Allow.map((function(e,n){var t=e.id,r=e.name;return Object(f.jsxs)(C.a,{className:a.advancedOp,value:t,children:[Object(f.jsx)(v.a,{className:a.advancedOpName,children:r}),r!==t&&Object(f.jsx)(v.a,{variant:"caption",className:a.advancedOpNamId,children:t})]},"aooptss-".concat(n))}))})}):h?Object(f.jsx)($.a,{error:!!p,label:p,disabled:!s||0===s.length,placeholder:"...",defaultValue:l,className:a.advancedText,inputProps:{className:a.advancedInput},onKeyDown:function(e){return O(e.keyCode)},onChange:function(e){return b(s,e.target.value)}}):Object(f.jsxs)(i.a.Fragment,{children:[Object(f.jsx)($.a,{placeholder:"Meta Name",defaultValue:"",className:a.advancedTextCustomName,inputProps:{className:a.advancedInput},onKeyDown:function(e){return O(e.keyCode)},onChange:function(e){return b(e.target.value,l)}}),Object(f.jsx)($.a,{placeholder:"Meta Value",defaultValue:"",className:a.advancedTextCustomValue,inputProps:{className:a.advancedInput},onKeyDown:function(e){return O(e.keyCode)},onChange:function(e){return b(s,e.target.value)}})]})]})},nr=Object(O.a)((function(e){return{root:{padding:e.spacing(2),margin:e.spacing(2)},spacer:{flexGrow:1},actionBar:{display:"flex",width:"100%","&>*":{marginLeft:e.spacing(1)}},advanced:{},iconButton:{},textField:{},projTypeLine:{display:"flex"},projType:{marginRight:e.spacing(1),flexGrow:1,maxWidth:300},resultsNum:{flexShrink:0},projTypeMenuItem:{display:"flex"},projTypeMenuItemSelected:{display:"flex"},projTypeMenuItemName:{flexGrow:1},projTypeMenuItemNum:{color:e.palette.text.secondary,fontSize:"0.75rem"}}})),tr=function(e){var n,t,r,a,i=e.projTotals,c=e.program,s=e.searchParams,d=e.setSearchParams,u=nr(),p=Object(o.useState)([]),m=Object(g.a)(p,2),h=m[0],j=m[1],b=Object(o.useRef)(s),v=Object(o.useRef)(),O=Object(o.useRef)();function y(e,n){var t=Object(l.a)({},e||b.current||s),r=Object(Ht.a)(n||h);"__all"===t.projType&&delete t.projType;var a=r&&r.length>0&&r.filter((function(e){var n=Object(g.a)(e,2),t=n[0],r=n[1];return t&&r&&t.length>0&&r.length>0})),o=Object(l.a)(Object(l.a)({},t),{},{nextToken:0});a&&a.length>0&&(o.metaArr=JSON.stringify(a)),n&&j(n),d(o)}b.current=s;var x=function(e){if(!e)return"";try{return JSON.parse(e).join(", ")}catch(n){return""}};Object(o.useEffect)((function(){v.current&&(v.current.value=s.metaStr||""),O.current&&(s&&!0===s.noTags?O.current.value="NO_TAGS":O.current.value=x(s.tags)||"")}),[s]);var S=c&&c.products?Object.values(c.products).map((function(e){return{name:e.name,id:e.id}})):[],T=c?c.collections:[];T.sort((function(e,n){return e.name.toLowerCase()<n.name.toLowerCase()?-1:e.name.toLowerCase()>n.name.toLowerCase()?1:0})),S.sort((function(e,n){return e.name.toLowerCase()<n.name.toLowerCase()?-1:e.name.toLowerCase()>n.name.toLowerCase()?1:0}));var w=function(e){var n=e.split(",").map((function(e){return e.trim()})).filter((function(e){return e&&e.length>0}));return 0===n.length?void 0:JSON.stringify(n)},P=function(e){13===e.keyCode&&y(b.current)};return Object(f.jsxs)(nn.a,{className:u.root,children:[c&&c.products&&Object(f.jsxs)("div",{className:u.projTypeLine,children:[Object(f.jsxs)(Zt.a,{fullWidth:!0,className:u.projType,children:[Object(f.jsx)(Xt.a,{htmlFor:"projectType",children:"Project Type"}),Object(f.jsxs)(Kt.a,{id:"projectType",inputProps:{className:u.projTypeMenuItemSelected},value:(null===(n=b.current)||void 0===n?void 0:n.projType)||"__all",onChange:function(e){var n="_all"!==e.target.value?e.target.value:void 0;y(Object(l.a)(Object(l.a)({},b.current),{},{projType:n}))},children:[Object(f.jsxs)(C.a,{className:u.projTypeMenuItem,value:"__all",children:[Object(f.jsx)("div",{className:u.projTypeMenuItemName,children:"All Project Types"}),Object(f.jsx)("div",{className:u.projTypeMenuItemNum,children:i.__all>-1?"".concat(i.__all):"..."})]}),S.map((function(e,n){var t=e.name,r=e.id;return Object(f.jsxs)(C.a,{className:u.projTypeMenuItem,value:r,children:[Object(f.jsx)("div",{className:u.projTypeMenuItemName,children:t}),Object(f.jsx)("div",{className:u.projTypeMenuItemNum,children:i[r]>-1?"".concat(i[r]):"..."})]},"prod-".concat(n))}))]})]}),Object(f.jsx)("div",{className:u.spacer}),Object(f.jsx)(Zt.a,{fullWidth:!0,className:u.projType,children:Object(f.jsx)($.a,{id:"tagSearch",label:"Tag Search",autoFocus:!0,placeholder:"Term1, term2, ... or NO_TAGS",inputRef:O,defaultValue:x(null===(t=b.current)||void 0===t?void 0:t.tags),onKeyDown:P,onChange:function(e){e.target.value&&"NO_TAGS"===e.target.value.trim()?b.current=Object(l.a)(Object(l.a)({},b.current),{},{noTags:!0,tags:void 0}):b.current=Object(l.a)(Object(l.a)({},b.current),{},{noTags:void 0,tags:w(e.target.value)})}})}),Object(f.jsxs)(Zt.a,{className:u.resultsNum,children:[Object(f.jsx)(Xt.a,{htmlFor:"resultsNum",children:"Results"}),Object(f.jsxs)(Kt.a,{id:"resultsNum",value:null===(r=b.current)||void 0===r?void 0:r.limit,onChange:function(e){y(Object(l.a)(Object(l.a)({},b.current),{},{limit:e.target.value}))},children:[Object(f.jsx)(C.a,{value:10,children:"10"}),Object(f.jsx)(C.a,{value:20,children:"20"}),Object(f.jsx)(C.a,{value:50,children:"50"}),Object(f.jsx)(C.a,{value:100,children:"100"})]})]})]}),Object(f.jsx)($.a,{id:"outlined-helperText2",label:"Metadata Search",fullWidth:!0,autoFocus:!0,placeholder:"...",inputRef:v,className:u.textField,margin:"normal",variant:"outlined",defaultValue:(null===(a=b.current)||void 0===a?void 0:a.metaStr)||"",onKeyDown:P,onChange:function(e){b.current=Object(l.a)(Object(l.a)({},b.current),{},{metaStr:e.target.value})}}),h.length>0&&Object(f.jsxs)("div",{className:u.advanced,children:[h.map((function(e,n){return Object(f.jsx)(er,{row:e,options:T.filter((function(e){return!h.find((function(t,r){return r!==n&&t[0]===e.name}))})),changeHandler:function(e,t){var r=Object(Ht.a)(h);r[n]=e,j(r),t&&y(null,r)}},"advRow-".concat(n))})),Object(f.jsxs)("div",{children:[Object(f.jsx)(re.a,{onClick:function(){return y(null,[].concat(Object(Ht.a)(h),[["",""]]))},children:"+"}),Object(f.jsx)(re.a,{onClick:function(){return y(null,h.slice(0,-1))},children:"-"})]})]}),Object(f.jsxs)("div",{className:u.actionBar,children:[Object(f.jsxs)(re.a,{color:"primary",onClick:function(){b.current&&(h.length>0?y(b.current,[]):y(b.current,[["",""]]))},children:[h.length>0?"Hide":"Show"," Advanced"]}),Object(f.jsx)("div",{className:u.spacer}),Object(f.jsxs)(re.a,{className:u.iconButton,color:"primary",variant:"contained",onClick:function(){y(b.current)},children:[Object(f.jsx)(Jt.a,{})," Search"]}),Object(f.jsx)(re.a,{className:u.iconButton,color:"secondary",variant:"contained",onClick:function(){j([]),y(kt)},children:"Reset"})]})]})},rr=function(e){var n=e.getCurrentToken,t=e.url,r=e.program,a=e.searchParams,i=e.setSearchParams,c=Object(o.useState)({}),s=Object(g.a)(c,2),d=s[0],u=s[1],p=Object(o.useRef)();return p.current=d,Object(o.useEffect)((function(){r&&t&&(n().then((function(e){return Object(j.search)(t,e,r.machineName,{limit:0,nextToken:0})})).then((function(e){var n=e.data;return n&&u(Object(l.a)(Object(l.a)({},p.current),{},{__all:n.search?n.search.total:0}))})).catch((function(e){Se.a.error(e)})),r.products.reduce((function(e,a){return e.then((function(){return n().then((function(e){return Object(j.search)(t,e,r.machineName,{projType:a.id,limit:0,nextToken:0})})).then((function(e){var n=e.data;n&&u(Object(l.a)(Object(l.a)({},p.current),{},Object(Lt.a)({},a.id,n.search?n.search.total:0)))})).catch((function(e){u(Object(l.a)(Object(l.a)({},p.current),{},Object(Lt.a)({},a.id,0))),Se.a.error(e)}))}))}),Promise.resolve()))}),[r,t,n]),Object(f.jsx)(tr,{projTotals:d,program:r,searchParams:a,setSearchParams:i})};rr.whyDidYouRender=!0;var ar=rr,or=r.endpoints.graphql,ir=function(e){var n=e.history,t=e.auth,r=e.programs,c=Object(o.useState)(kt),s=Object(g.a)(c,2),l=s[0],d=s[1],u=Object(o.useCallback)((function(e){a.event("warehouse","search",JSON.stringify(e)),d(e)}),[d]),p=Object(o.useCallback)((function(e){a.event("warehouse","change_program",e.machineName),u(kt)}),[]),m=mt(r,p),h=vt(t,m,!0,!1),b=h.project,O=h.loading,y=pt(t,m),x=y.downloadFileFn,S=y.downloadZipFile,T=y.pendingZips;Object(o.useEffect)((function(){m||b?m&&!b?(a.currentPageView("warehouse/".concat(m.name)),document.title="".concat(m.name," - Riverscapes Warehouse")):m&&b&&(a.currentPageView("warehouse/".concat(b.program,"/").concat(b.projType,"/").concat(b.id)),document.title="".concat(b.name," - ").concat(m.name," - Riverscapes Warehouse")):(document.title="Riverscapes Warehouse",a.currentPageView("warehouse/Program_Chooser"))}),[m,b]);var w=Object(o.useCallback)((function(e,t){t&&t.length>10?n.push("/"+e+"/"+t):n.push("/"+e)}),[n]),P=Object(o.useCallback)((function(e,n){a.event("warehouse","download_file","".concat(e.program,"/").concat(e.projType,"/").concat(e.id,"/").concat(n)),x(e,n)}),[x]),C=Object(o.useCallback)((function(e){return a.event("warehouse","download_zip","".concat(e.program,"/").concat(e.projType,"/").concat(e.id)),S(e)}),[S]),N=Object(o.useMemo)((function(){return b&&Object(f.jsx)(Wn,{program:m,project:b,showFileTree:!0,onClose:function(){m&&w(m.machineName)},webRaveUrl:Dt,downloadFile:P,pendingZips:T,downloadZipFile:C})}),[b,P,C,w,T,m]),I=m&&Object.values(j.WarehouseRoleEnum).indexOf(m.role)>-1;Se.a.debug("App.Connect",{hasViewAccess:I,program:m});var E=Object(o.useMemo)((function(){return Object(f.jsxs)(i.a.Fragment,{children:[Object(f.jsx)(ar,{getCurrentToken:t.getCurrentToken,url:or,program:m,searchParams:l,setSearchParams:u}),Object(f.jsx)(Vt,{getCurrentToken:t.getCurrentToken,url:or,navigate:w,program:m,searchParams:l,setSearchParams:u,pendingZips:T,downloadZipFile:C})]})}),[l,m,T,C,t.getCurrentToken,w]);return I?Object(f.jsxs)(i.a.Fragment,{children:[O&&Object(f.jsx)(Rt.b,{logoSVG:Object(f.jsx)(Me.a,{size:"7rem",thickness:7}),status:Object(f.jsx)(v.a,{variant:"h5",component:"div",children:"Loading Project..."}),containerProps:{maxWidth:"xl",style:{position:"absolute",zIndex:1e3,top:0,left:0,width:"100%",height:"100%",background:"#FFFFFF77"}}}),E,N]}):Object(f.jsx)(Qn,{program:m,onClose:function(){return n.push("/")}})},cr=t(301),sr=t.n(cr),lr=t(300),dr=t.n(lr),ur=t(572),pr=t(585),gr=Object(O.a)((function(e){return{root:{},allowSelect:{userSelect:"text",cursor:"auto"},google:Object(l.a)(Object(l.a)({},e.typography.caption),{},{borderRadius:e.spacing(1.5),padding:e.spacing(.5,1),background:e.palette.primary.main,color:e.palette.primary.contrastText,marginLeft:e.spacing(2),border:"1px solid ".concat(e.palette.primary.dark)}),removeIcon:{marginLeft:e.spacing(2)}}})),mr=function(e){var n=e.user,t=e.onChange,r=e.isSuperUser,a=gr(),o=n.loading,i=function(e,r){e===j.WarehouseRoleEnum.Admin?t(n.username,r?j.WarehouseRoleEnum.Admin:j.WarehouseRoleEnum.Participant):e===j.WarehouseRoleEnum.Participant&&t(n.username,r?j.WarehouseRoleEnum.Participant:j.WarehouseRoleEnum.Observer)},c=n.role===j.WarehouseRoleEnum.SuperUser;return Object(f.jsxs)(on.a,{disabled:o||c,className:a.root,divider:!0,children:[Object(f.jsx)(sn.a,{children:n.picture&&n.picture.length>0?Object(f.jsx)(tn.a,{alt:n.name,src:n.picture}):Object(f.jsx)(tn.a,{alt:n.name,children:Object(f.jsx)(dn.a,{color:"inherit"})})}),Object(f.jsx)(cn.a,{id:"switch-list-label-wifi",primary:Object(f.jsxs)("span",{children:[Object(f.jsx)("span",{className:a.allowSelect,children:n.name}),n.username.startsWith("google")&&Object(f.jsx)("span",{className:a.google,children:"Google"})]}),secondary:Object(f.jsx)("span",{className:a.allowSelect,children:n.email})}),n.role&&Object(f.jsxs)($t.a,{children:[r&&!c&&Object(f.jsx)(ur.a,{control:Object(f.jsx)(pr.a,{edge:"end",onChange:function(e){return i(j.WarehouseRoleEnum.Admin,e.target.checked)},checked:[j.WarehouseRoleEnum.Admin,j.WarehouseRoleEnum.SuperUser].indexOf(n.role)>-1,disabled:o||[j.WarehouseRoleEnum.Observer].indexOf(n.role)>-1,inputProps:{"aria-labelledby":"switch-list-label-wifi"}}),labelPlacement:"start",label:"Program Admin"}),!c&&Object(f.jsx)(ur.a,{control:Object(f.jsx)(pr.a,{edge:"end",onChange:function(e){return i(j.WarehouseRoleEnum.Participant,e.target.checked)},checked:[j.WarehouseRoleEnum.Participant,j.WarehouseRoleEnum.Admin,j.WarehouseRoleEnum.SuperUser].indexOf(n.role)>-1,disabled:o||[j.WarehouseRoleEnum.Admin,j.WarehouseRoleEnum.SuperUser].indexOf(n.role)>-1,inputProps:{"aria-labelledby":"switch-list-label-wifi"}}),labelPlacement:"start",label:"Participant"}),!c&&Object(f.jsx)(ae.a,{title:"Remove this user from the program",children:Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(D.a,{edge:"end",className:a.removeIcon,"aria-label":"delete",color:"secondary",disabled:o,onClick:function(){return t(n.username,null)},children:Object(f.jsx)(dr.a,{})})})})]}),!n.role&&Object(f.jsx)($t.a,{children:Object(f.jsx)(ae.a,{title:"Add this user to the program",children:Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(D.a,{edge:"end","aria-label":"delete",color:"secondary",disabled:o,onClick:function(){return t(n.username,j.WarehouseRoleEnum.Observer)},children:Object(f.jsx)(sr.a,{})})})})})]})},hr=t(573),jr=t(542),fr=t(302),br=t.n(fr),vr=Object(O.a)((function(e){return{root:{display:"flex",overflow:"hidden",flexDirection:"column",margin:e.spacing(2)},description:{margin:e.spacing(0,2)},list:{flexGrow:1,overflow:"scroll",margin:e.spacing(1,2)},formControl:{margin:e.spacing(1,2)}}})),Or=function(e){var n=e.users,t=e.onChange,r=e.title,a=e.description,i=e.isSuperUser,c=vr(),s=Object(o.useState)(),l=Object(g.a)(s,2),d=l[0],u=l[1],p=Object(o.useMemo)((function(){if(d&&d.length>=3){var e=d.split(" ").filter((function(e){return e.length>=3}));return n.filter((function(n){return e.every((function(e){return n.name.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1||n.email.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1}))}))}return n}),[n,d]);return Object(f.jsxs)(nn.a,{className:c.root,children:[Object(f.jsx)(T.a,{children:Object(f.jsx)(v.a,{variant:"subtitle1",children:r})}),Object(f.jsx)(v.a,{className:c.description,variant:"caption",children:a||" "}),Object(f.jsx)(Zt.a,{className:c.formControl,children:Object(f.jsx)(jr.a,{fullWidth:!0,onChange:function(e){return u(e.target.value)},startAdornment:Object(f.jsx)(hr.a,{position:"start",children:Object(f.jsx)(br.a,{})})})}),Object(f.jsx)(rn.a,{className:c.list,children:p.map((function(e,n){return Object(f.jsx)(mr,{user:e,onChange:t,isSuperUser:i},"userRow-".concat(n))}))})]})},yr=Object(O.a)((function(e){return{rootContainer:{height:"100%",width:"100%",overflow:"hidden",position:"relative"},root:{height:"100%",width:"100%",display:"flex",overflow:"hidden",flexDirection:"column"},paperContainer:{display:"flex",width:"100%",height:"100%",overflow:"hidden","&>:first-child":{flex:"1 1 60%"},"&>:last-child":{flex:"1 1 40%"}},instructions:{color:e.palette.primary.contrastText,background:e.palette.primary.main,margin:e.spacing(2),padding:e.spacing(2)},list:{flexGrow:1,overflow:"scroll",margin:e.spacing(1,2)},loading:{background:"#FFFFFFCC",position:"absolute",zIndex:1e3}}}));function xr(e){e.sort((function(e,n){return e.name.toLowerCase().localeCompare(n.name.toLowerCase())}))}var Sr=function(e){var n=e.users,t=e.program,r=e.loading,a=e.isSuperUser,o=e.onChange,i=yr(),c=n.filter((function(e){return e.role}));xr(c);var s=n.filter((function(e){return!e.role}));xr(s);var l=t&&t.meta&&t.meta.access&&"PUBLIC"===t.meta.access,d=Object(f.jsx)("img",{src:_t,alt:"logo"});return Object(f.jsxs)("div",{className:i.rootContainer,children:[r&&Object(f.jsx)(Rt.b,{logoSVG:d,title:"Riverscapes Warehouse",message:"Loading Users: ".concat(n.length),containerProps:{maxWidth:"xl",className:i.loading}}),Object(f.jsxs)("div",{className:i.root,children:[Object(f.jsxs)(nn.a,{className:i.instructions,children:[Object(f.jsxs)(v.a,{variant:"h4",color:"inherit",children:["User admin: ",t&&t.name]}),l?Object(f.jsxs)(v.a,{variant:"body2",color:"inherit",children:["This program is ",Object(f.jsx)("strong",{children:"public"}),". All authenticated users in the Riverscapes user pool will be able to see and download projects.",Object(f.jsx)("strong",{children:"Participants"})," can add or remove projects."]}):Object(f.jsxs)(v.a,{variant:"body2",color:"inherit",children:["This program is ",Object(f.jsx)("strong",{children:"private"})," so you have to explicitly add users to view it."," ",Object(f.jsx)("strong",{children:"Participants"})," can add or remove projects."]})]}),Object(f.jsxs)("div",{className:i.paperContainer,children:[Object(f.jsx)(Or,{users:c,onChange:o,isSuperUser:a,title:"Current program users:",description:"Everyone in this list is an Observer and can view and download all projects."}),Object(f.jsx)(Or,{users:s,onChange:o,isSuperUser:a,title:"Add users:",description:l?"Users in this list CAN see everything in the program because the program is PUBLIC":"Users in this list cannot see or donwload projects in this program"})]})]})]})},Tr=function(e){var n=e.programs,t=e.auth,a=e.history,i=Object(o.useState)({users:[],loading:!0}),c=Object(g.a)(i,2),s=c[0],d=c[1],m=Object(o.useRef)(),h=Object(o.useRef)();m.current=s;var b=mt(n);Object(o.useEffect)((function(){a&&b&&b.role!==j.WarehouseRoleEnum.SuperUser&&b.role!==j.WarehouseRoleEnum.Admin&&a.push("/".concat(b.machineName))}),[b,a]),Object(o.useEffect)((function(){function e(){return(e=Object(p.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!0;case 1:if(!n&&!h.current){e.next=8;break}return n=!1,e.next=5,t.getCurrentToken().then((function(e){return Object(j.adminGetUsers)(r.endpoints.graphql,e,null===b||void 0===b?void 0:b.machineName,50,h.current)})).then((function(e){var n,r,a,o=null===(n=e.data)||void 0===n?void 0:n.getUsers.nextToken,i=t.user?t.user.accessToken.payload.username:"NOBODY",c=((null===(r=e.data)||void 0===r?void 0:r.getUsers.users)||[]).filter((function(e){return e.username!==i}));return d({users:[].concat(Object(Ht.a)((null===(a=m.current)||void 0===a?void 0:a.users)||[]),Object(Ht.a)(c)),loading:Boolean(o)}),o})).catch((function(e){Se.a.error(e)}));case 5:h.current=e.sent,e.next=1;break;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}b&&t&&function(){e.apply(this,arguments)}()}),[b,t]);var v=Object(o.useCallback)((function(e,n){var a=m.current.users.find((function(n){return n.username===e}));if(!a)throw new Error("Could not find user to change permissions of");var o=Object.assign({},a);d(Object(l.a)(Object(l.a)({},m.current),{},{users:m.current.users.map((function(t){return t.username!==e?t:Object(l.a)(Object(l.a)({},t),{},{role:n,loading:!0})}))}));var i=function(){Se.a.error("ADMIN:::Operation failed. Putting the record back"),d(Object(l.a)(Object(l.a)({},m.current),{},{users:m.current.users.map((function(n){return n.username!==e?n:o}))}))},c=setTimeout(i,3e3);return t.getCurrentToken().then((function(t){return Object(j.adminUpdateUserPermissions)(r.endpoints.graphql,t,e,null===b||void 0===b?void 0:b.machineName,n)})).then((function(n){clearTimeout(c),d(Object(l.a)(Object(l.a)({},m.current),{},{users:m.current.users.map((function(t){var r;return t.username!==e?t:Object(l.a)(Object(l.a)(Object(l.a)({},t),null===(r=n.data)||void 0===r?void 0:r.updateUser),{},{loading:!1})}))})),Se.a.debug("Admin UPDATE",n)})).catch((function(e){Se.a.error("User update query failure",e),i()}))}),[t,b]);return Object(f.jsx)(Sr,{users:s.users,isSuperUser:Boolean(b&&b.role===j.WarehouseRoleEnum.SuperUser),onChange:v,loading:Boolean(s.loading),program:b})},wr=t(574),Pr=function(e){var n=e.children,t=e.history,a=e.programs,o=e.signOut,i=e.containerProps,c=e.noScroll,s=mt(a);return Object(f.jsx)(wr.a,{theme:Ct.home,children:Object(f.jsx)(Rt.a,{containerProps:Object(l.a)({maxWidth:s?"md":"sm"},i),noScroll:c,topbar:Object(f.jsx)(Ue,{history:t,programs:a,title:"Riverscapes Warehouse",signOutHandler:o,provisional:!0,shareUrl:window.location.href,program:s}),footer:Object(f.jsx)(S,{version:r.version}),children:Object(f.jsx)(f.Fragment,{children:n})})})};a.init();var Cr=new it("AppAuth",300);Cr.prune();var Nr=function(){var e=Object(o.useState)(),n=Object(g.a)(e,2),t=n[0],a=n[1],i=Object(o.useState)(),c=Object(g.a)(i,2),s=c[0],d=c[1],b=Object(o.useState)(!0),v=Object(g.a)(b,2),O=v[0],y=v[1],x=Object(h.a)(t,!1,r.isDev),S=Object(m.g)();Object(o.useEffect)((function(){Object(j.authCheck)(r.endpoints.graphql,"").then((function(e){var n;Se.a.debug("authResp",e);var t=null===(n=e.data)||void 0===n?void 0:n.auth;t&&t.region&&(a({region:t.region,userPoolId:t.userPool,userPoolWebClientId:t.clientId,mandatorySignIn:!0,oauth:{domain:t.domain,scope:["email","profile","openid"],redirectSignIn:r.redirectUrl.toString(),redirectSignOut:r.redirectUrl.toString(),responseType:"code"}}),y(!1))})).catch((function(e){Se.a.error("api.getPrograms error",e)}))}),[]),Object(o.useEffect)((function(){if(S){var e=function(){var e=Object(p.a)(u.a.mark((function e(){var n,t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="RSUrl",e.next=3,Cr.get(n);case 3:t=e.sent,r=S.location.pathname,Se.a.debug("[".concat(n,"] Cache:::REDIRECT checking ").concat(t," === ").concat(r)),x.isAuthenticated||x.error||!x.isAuthComplete||(Se.a.debug("[".concat(n,"] Cache:::REDIRECT:::SET ").concat(r)),Cr.set(n,r)),t&&x.isAuthenticated&&x.isAuthComplete&&!x.error&&(r!==t&&(Se.a.debug("[".concat(n,"] Cache:::REDIRECT Needed! ").concat(r," !== ").concat(t)),S.push(t)),Cr.del(n));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[S,x]);var T=Object(o.useCallback)((function(e,n,t){t?e.push("/"+n.machineName+"/"+t.id):e.push("/"+n.machineName)}),[]);Object(o.useEffect)((function(){x.isAuthenticated&&!(null===s||void 0===s?void 0:s.programs)&&(d({programs:[],loading:!0}),x.getCurrentToken().then((function(e){return Object(j.getPrograms)(r.endpoints.graphql,e)})).then((function(e){Se.a.debug("API GetPrograms",e),e.data&&e.data.programs&&d({programs:e.data.programs,loading:!1})})).catch((function(e){Se.a.error("api.getPrograms error",e)})))}),[x,s]);var w=Object(f.jsx)("img",{src:_t,alt:"logo"});if(O)return Object(f.jsx)(Pr,{children:Object(f.jsx)(Rt.b,{logoSVG:w,title:"Riverscapes Warehouse",message:"Loading authentication info",version:r.version})});if(x.isAuthenticated){if(!s||(null===s||void 0===s?void 0:s.loading))return Object(f.jsx)(Pr,{children:Object(f.jsx)(Rt.b,{logoSVG:w,title:"Riverscapes Warehouse",message:"Loading Programs",version:r.version})});var P={navigate:T,signOut:x.signOut,programs:null===s||void 0===s?void 0:s.programs};return Object(f.jsxs)(m.c,{children:[Object(f.jsx)(m.a,{path:"/:programId/admin",render:function(e){return Object(f.jsx)(Pr,Object(l.a)(Object(l.a)(Object(l.a)({},e),P),{},{noScroll:!0,containerProps:{maxWidth:"lg"},children:Object(f.jsx)(Tr,Object(l.a)(Object(l.a)({},e),{},{programs:null===s||void 0===s?void 0:s.programs,auth:x}))}))}}),Object(f.jsx)(m.a,{path:"/:programId/:projectId?",render:function(e){return Object(f.jsx)(Pr,Object(l.a)(Object(l.a)(Object(l.a)({},e),P),{},{children:Object(f.jsx)(ir,Object(l.a)(Object(l.a)({},e),{},{auth:x,programs:null===s||void 0===s?void 0:s.programs}))}))}}),Object(f.jsx)(m.a,{path:"/",render:function(e){return Object(f.jsx)(Pr,Object(l.a)(Object(l.a)(Object(l.a)({},e),P),{},{containerProps:{maxWidth:"sm"},children:Object(f.jsx)(jn,Object(l.a)(Object(l.a)({},e),{},{navigate:T,programs:null===s||void 0===s?void 0:s.programs}))}))}}),Object(f.jsx)(m.a,{path:"*",render:function(e){return Object(f.jsx)(Pr,Object(l.a)(Object(l.a)(Object(l.a)({},e),P),{},{children:"404 Not found"}))}})]})}return x.isAuthComplete?Object(f.jsx)(Pr,{noScroll:!0,children:Object(f.jsx)(qn,{signIn:x.signIn,title:"Riverscapes Data Warehouse"})}):Object(f.jsx)(Pr,{children:Object(f.jsx)(Rt.b,{logoSVG:w,title:"Riverscapes Warehouse",message:"Authenticating",version:r.version})})},Ir=t(104);t(458);Object(Rt.d)(),t(459),s.a.render(Object(f.jsx)(Ir.a,{basename:"/",history:yt,children:Object(f.jsx)(Nr,{})}),document.getElementById("root")),window.addEventListener("load",(function(){window.history.pushState({},"")})),navigator.storage&&navigator.storage.persist?navigator.storage.persist().then((function(e){e?Se.a.debug("Storage will not be cleared except by explicit user action"):Se.a.warn("Storage may be cleared by the UA under storage pressure.")})):Se.a.warn("navigator.storage API not implemented.")}},[[460,1,2]]]);
//# sourceMappingURL=main.97eb5449.chunk.js.map