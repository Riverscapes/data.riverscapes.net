{"version":3,"sources":["../../src/index.ts","../../src/types.ts","../../src/xml.ts","../../src/api.ts","../../src/schema.graphql.ts","../../../src/classes/Program.ts","../../../src/classes/Project.ts","../../../src/classes/errors.ts","../../../src/classes/TileServiceJSONClass.ts","../../../src/frame/Footer.tsx","../../../src/modals/ShareDialog.tsx","../../../../src/modals/provisional/ProvisionalModal.tsx","../../../../src/modals/provisional/ProvisionalButton.tsx","../../src/config.ts","../../../src/frame/Topbar.tsx","../../../src/frame/Topbar.style.ts","../../../src/misc/WarehouseTags.tsx","../../../src/misc/DownloadZipBtn.tsx","../../../src/misc/WarehouseButton.tsx","../../../src/misc/WebRaveBtn.tsx","../../src/constants.ts","../../../src/modals/ProgramChooser.tsx","../../../../src/modals/ProjectModal/RecurseTreeItem.tsx","../../../../src/modals/ProjectModal/RecurseTreeItem.style.ts","../../../../src/modals/ProjectModal/ProjectModal.tsx","../../../../src/modals/ProjectModal/ProjectModal.style.ts","../../../src/modals/LoginScreen.tsx","../../../src/modals/NotAllowedModal.tsx","../../../src/lib/LocalForageCache.ts","../../../src/hooks/useDownloads.tsx","../../../src/hooks/useProgram.ts","../../../src/hooks/useProject.ts","../../../src/hooks/useQueryParams.ts","../../src/themes.ts","../../src/googleAnalytics.ts","config.ts","components/Search/SearchResult.tsx","components/Search/SearchResultLoading.tsx","components/Search/SearchResults.tsx","connectors/SearchResults.connect.tsx","components/Search/SearchAdvancedRow.tsx","components/Search/SearchForm.tsx","connectors/SearchForm.connect.tsx","connectors/App.connect.tsx","components/Admin/AdminRow.tsx","components/Admin/AdminList.tsx","components/Admin/AdminPanel.tsx","components/Admin/index.tsx","components/AppWrapper.tsx","connectors/AppAuth.connect.tsx","index.tsx"],"names":["default","_","fileSort","currFolder","sort","a","children","b","filter","padding","theme","spacing","button","marginLeft","paddingLeft","paddingRight","domain","flex","treeFolder","root","main","warehouseIconUrl","appDefaults","limit","nextToken","process","useStyles","makeStyles","margin","itemLeft","itemMiddle","display","textAlign","flexDirection","itemRight","itemRightInner","spacer","flexGrow","projDate","itemLine","mm","width","odd","background","palette","mmItem","prodChip","height","borderRadius","color","border","marginRight","downloadText","SearchResult","project","onClick","program","pendingZips","downloadZipFile","classes","pendingSince","id","projObj","products","find","p","projType","projObjMand","pathArr","pr","type","pTypeName","name","mandatoryMeta","map","po","key","val","meta","lowerMeta","Object","keys","reduce","acc","toLowerCase","pTypeNameVersion","ListItem","className","clsx","ListItemAvatar","Avatar","substr","Typography","variant","Chip","label","size","idx","mmFound","collections","c","style","tags","updatedOn","Tooltip","title","Fragment","moment","createdOn","format","btnProps","url","itemText","SearchResultLoading","Skeleton","ListItemSecondaryAction","IconButton","edge","disabled","SearchResults","data","loading","searchParams","setSearchParams","navigate","Paper","total","startIndex","pageSize","handlePaginationEvent","newIndex","Divider","List","Array","fill","x","projects","length","r","idr","Project","Boolean","machineName","ResultsPaneConnect","getCurrentToken","useState","isLoading","setIsLoading","results","setResults","errors","setErrors","log","error","useEffect","jwt","debug","search","then","searchData","catch","err","undefined","doEffect","advancedLeft","advancedLeftCustom","advancedLeftOption","advancedText","advancedRight","advancedOp","advancedTextCustomName","advancedTextCustomValue","advancedOpName","advancedOpNamId","advancedInput","SearchAdvancedRow","row","options","changeHandler","mKey","mVal","setErr","option","o","hasSetVals","Allow","debouncedValidate","debounce","keyU","valU","String","allowRegex","AllowRegex","errs","forEach","regex","pattern","RegExp","match","push","handleKeyPress","keyCode","FormControl","Select","value","inputProps","onChange","event","target","MenuItem","oid","TextField","placeholder","defaultValue","onKeyDown","e","actionBar","advanced","iconButton","textField","projTypeLine","maxWidth","resultsNum","flexShrink","projTypeMenuItem","projTypeMenuItemSelected","projTypeMenuItemName","projTypeMenuItemNum","text","secondary","fontSize","SearchForm","projTotals","advancedVals","setAdvancedVals","searchParamsRef","useRef","searchMetaInputRef","searchTagInputRef","submitSearch","params","advancedParams","newParams","current","newAdvanced","advFinal","k","v","submitParams","metaArr","JSON","stringify","reconstituteTags","tagSearchStr","parse","join","metaStr","noTags","projectArr","values","allAdvancedOptions","sanitizeTags","tagStr","tagArr","split","ts","trim","fullWidth","InputLabel","htmlFor","__all","prodName","prodId","autoFocus","inputRef","rid","ao","newRow","forceSubmit","Button","slice","SearchFormConnect","setProjTotals","projTotalsRef","promiseChain","prod","Promise","resolve","config","endpoints","graphql","AppConnect","history","auth","programs","_setSearchParams","useCallback","googleAnalytics","onProgramChange","newProgram","useProgram","useProject","isProjLoading","useDownloads","downloadFileFn","currentPageView","document","progName","projId","downloadFile","proj","fkey","downloadZip","projectModal","useMemo","showFileTree","onClose","webRaveUrl","hasViewAccess","WarehouseRoleEnum","indexOf","role","searchConnect","logoSVG","CircularProgress","thickness","status","component","containerProps","position","zIndex","top","left","allowSelect","userSelect","cursor","google","typography","caption","primary","contrastText","dark","removeIcon","AdminRow","user","isSuperUser","onSwitchChange","swRole","swVal","Admin","username","Participant","Observer","superUser","SuperUser","divider","picture","alt","src","ListItemText","startsWith","email","FormControlLabel","control","Switch","checked","labelPlacement","overflow","description","list","formControl","AdminList","users","setSearch","dispUsers","searchArr","s","u","every","word","toLocaleLowerCase","Toolbar","Input","startAdornment","InputAdornment","rootContainer","paperContainer","instructions","sortUsers","ulist","localeCompare","AdminPanel","progUsers","nonUsers","isProgPublic","access","message","AdminConnect","userState","setUsersState","userStateRef","nextTokenRef","first","adminGetUsers","res","newToken","getUsers","myToken","accessToken","payload","incomingUsers","startFunc","userChange","userId","newRole","foundUser","Error","backupUser","assign","reset","myTimeout","setTimeout","adminUpdateUserPermissions","clearTimeout","updateUser","AppWrapper","signOut","noScroll","ThemeProvider","themes","home","topbar","Topbar","signOutHandler","provisional","shareUrl","window","location","href","footer","version","init","LOCAL_CACHE","LocalForageCache","prune","AppAuthConnect","authInfo","setAuthInfo","programsState","setProgramsState","isAppPreLoading","setIsAppPreLoading","useHosted","isDev","useHistory","authCheck","authResp","authVals","region","userPoolId","userPool","userPoolWebClientId","clientId","mandatorySignIn","oauth","scope","redirectSignIn","redirectUrl","toString","redirectSignOut","responseType","check","cacheKey","get","storageUrl","localUrl","pathname","isAuthenticated","isAuthComplete","set","del","getPrograms","allPrograms","appWrapProps","path","render","props","signIn","devSetup","require","ReactDOM","basename","hashHistory","getElementById","addEventListener","pushState","navigator","storage","persist","granted","warn"],"mappings":"stBAAA,YACA,YACA,YAEA,aAAS,6EAAAA,OAAO,IAChB,YACA,YACA,YACA,W,mCCYA,IAmOY,EA2HA,E,4OA9VZ,SAAY,GACR,aACA,aACA,iBACA,mBACA,kBALJ,EAAY,kCAAa,KAQzB,SAAY,GACR,oBACA,gBACA,sBACA,2BAJJ,EAAY,0CAAiB,KAO7B,SAAY,GACR,kBACA,oBACA,iBAHJ,EAAY,4BAAU,KAOtB,SAAY,GACR,8BACA,sBACA,eAHJ,EAAY,wBAAQ,KA6MpB,SAAY,GACR,oBACA,kBACA,sBACA,kCACA,sBACA,gCACA,oBACA,8BACA,oCACA,oCACA,4BACA,mBAZJ,EAAY,kCAAY,KAeX,uBAAuB,CAChC,EAAa,eACb,EAAa,cACb,EAAa,QACb,EAAa,aACb,EAAa,SAGjB,SAAY,GACR,oBACA,sBACA,oBACA,kCACA,gBACA,eANJ,EAAY,sCAAe,KAS3B,SAAY,GACR,kBACA,cACA,0BACA,2BAJJ,EAAY,0BAAS,KA2FrB,SAAY,GACR,kBACA,kBACA,cACA,oBACA,gBACA,cACA,WAPJ,EAAY,oDAAqB,KAUpB,4BAA4B,CACrC,EAAsB,OACtB,EAAsB,QACtB,EAAsB,KACtB,EAAsB,M,0tEChY1B,aACI,EAAJ,UAGA,QACA,YACA,WAuBA,SAAgB,EAAa,GACzB,IACI,OAAO,EAAQ,QACX,SAAC,EAAK,G,MAAE,EAAC,IAAE,EAAC,EAAAC,EAAO,cACZ,KAAG,MACL,EAAE,MAAO,GAAK,EAAE,OAAM,GACzB,GACF,GAIP,CAFC,SACE,MAAO,EACV,CACJ,CA5BD,kBAA6B,G,oGAEV,OADT,EAAQ,KAAK,MACJ,IAAM,aAAM,CACvB,IAAK,EACL,OAAQ,S,OAIZ,GANM,EAAS,UAIT,GAAY,KAAK,MAAQ,GAAS,KACzB,IAAI,UAAI,KAAK,sBAAe,EAAS,QAAQ,GAAE,cACzD,EAAO,KAAM,MAAM,IAAI,MAAM,6BAClC,SAAO,EAAO,M,MACjB,EAMD,iBAsDA,2BAAsC,G,kHACR,UAAM,wBAAmB,GAAQ,OAAM,SAAC,GAC9D,MAAM,IAAI,kBAAgB,sEAAuE,CAAC,EAAI,SACzG,K,OAgCD,OAlCM,EAAoB,SAIpB,EAAwC,EAAa,EAAkB,QAAQ,SAAS,GAAG,MAAzF,EAAW,cAAE,EAAW,cAAK,EAAI,IAAnC,+BAEA,EAAc,EAAkB,QAAQ,YAAY,GAAG,YAAY,GAAG,WAAW,KACnF,SAAC,G,IAAE,EAAC,IAAE,EAAK,QAAE,EAAU,aAAO,cACvB,GAAC,CACJ,MAAO,EAAS,MAAM,QAAQ,GAAS,EAAM,KAAI,SAAC,GAAM,UAAG,IAAI,CAAC,QAAU,EAC1E,WAAY,EACN,MAAM,QAAQ,GACV,EAAW,KAAI,SAAC,GAAM,SAAE,EAAF,OAAW,IACjC,CAAC,EAAW,cAChB,GACR,IAEF,EAAS,GACT,EAAkB,QAAQ,YAAY,GAAG,OAAO,GAAG,QAE/C,EADA,MAAM,QAAQ,EAAkB,QAAQ,YAAY,GAAG,OAAO,GAAG,OACxD,EAAkB,QAAQ,YAAY,GAAG,OAAO,GAAG,MAAM,KAAI,SAAC,GAAM,UAAG,IACtE,CAAC,EAAkB,QAAQ,YAAY,GAAG,OAAO,GAAG,QAElE,EAAc,GACd,EAAkB,QAAQ,YAAY,GAAG,SAAS,GAAG,UAEjD,EADA,MAAM,QAAQ,EAAkB,QAAQ,YAAY,GAAG,SAAS,GAAG,SACrD,EAAkB,QAAQ,YAAY,GAAG,SAAS,GAAG,QAAQ,KAAI,SAAC,GAAM,UAAG,IAC1E,CAAC,EAAkB,QAAQ,YAAY,GAAG,SAAS,GAAG,UAIvE,GAAS,IAAI,UAAO,WAAY,gBAAgB,GAChD,EAnEV,SAAuB,EAAa,EAAe,EAAa,GAC5D,IAAM,EAAgB,EAAO,qBAAqB,aAAa,GACzD,EAAsB,MAAM,KAAK,EAAc,qBAAqB,YAEpE,EAAS,GAuBf,OArBA,EAAoB,SAAQ,SAAC,GACzB,IAAM,EAAU,GACV,EAAM,EAAO,aAAa,OAC1B,EAAU,EAAS,MAAK,SAAC,GAAM,SAAE,KAAF,CAAY,IACjD,IAAK,EAAS,MAAM,IAAI,MAAM,qCAA8B,EAAG,MAE/D,IADA,IAAI,EAAS,EAAO,W,aAEhB,IAAM,EAAM,EAAO,aAAa,OAC1B,EAAM,EAAO,QACb,EAAc,UAAR,EAAkB,EAAO,MAAK,SAAC,GAAM,SAAE,KAAF,CAAY,IAAI,EAAY,MAAK,SAAC,GAAM,SAAE,KAAF,CAAY,IAC7F,EAAiB,EAAX,OAAE,EAAS,EAAL,KACpB,EAAQ,KAAK,CACT,KAAM,EACN,GAAI,EACJ,OAAM,EACN,KAAI,IAER,EAAS,EAAO,U,EAXb,GAAU,EAAO,YAAiC,cAAnB,EAAO,S,IAa7C,EAAO,KAAI,OAAM,GAAO,CAAE,QAAS,EAAQ,YAC9C,IACM,CACV,CAuCoB,CAAc,EAAQ,EAAa,EAAQ,GAE5D,GAAO,QAAQ,QACX,IAAI,UAAQ,CACR,KAAM,EAAkB,QAAQ,KAAK,GACrC,YAAa,EAAkB,QAAQ,YAAY,GACnD,YAAW,EACX,YAAW,EACX,KAAI,EAEJ,SAAU,EACV,YAAW,EACX,OAAM,M,MAGjB,EAMD,2BAAsC,G,sGACR,UAAM,wBAAmB,GAAQ,OAAM,SAAC,GAE9D,MAAM,IAAI,kBAAgB,sEAAuE,CAAC,EAAI,SACzG,K,OAUD,OAbM,EAAoB,SAIpB,EAAS,EAAkB,QAC7B,EAAiC,GACjC,EAAO,YACP,EAAS,EAAa,EAAO,UAAU,GAAG,OAE1C,EAA+B,GAC/B,EAAO,WACP,EAAO,EAAa,EAAO,SAAS,GAAG,OAE3C,GAAO,QAAQ,QAAQ,CACnB,GAAI,EAAO,GACX,KAAM,EAAO,KAAK,GAClB,SAAU,EAAO,YAAY,GAC7B,UAAW,EACX,QAAS,EAAO,QAChB,KAAI,EACJ,KAAM,UAAQ,eAAe,EAAO,MACpC,IAAK,EACL,kBAAiB,EACjB,OAAM,K,MAEb,EAOD,sBAA2B,EAAmB,GAC1C,IAAM,GAAS,IAAI,UAAO,WAAY,gBAAgB,GAChD,EAAW,EAAO,qBAAqB,YAAY,GAErD,EAAO,qBAAqB,aAAa,OAAS,GAClD,EAAO,YAAY,EAAO,qBAAqB,aAAa,IAEhE,IAAM,EAAgB,EAAO,cAAc,aAS3C,OARA,OAAO,KAAK,GAAS,SAAQ,SAAC,GAC1B,IAAM,EAAQ,EAAO,cAAc,QACnC,EAAM,aAAa,OAAQ,GAC3B,EAAM,YAAY,EAAO,eAAe,EAAQ,KAChD,EAAc,YAAY,EAC7B,IACD,EAAO,aAAa,EAAe,IACjB,IAAI,UAAO,eAAgB,kBAAkB,EAElE,EAQD,sBACI,EACA,EACA,GAEA,IAAM,EAAa,EAAQ,SAAS,MAAK,SAAC,GAAM,SAAE,KAAF,CAAiB,IACjE,IAAK,EACD,MAAM,IAAI,MAAM,2BAAoB,EAAQ,+BAAuB,EAAQ,KAAI,MAInF,OAFuC,EAAW,QAAQ,QAAO,SAAC,GAAM,uBAAE,IAAqB,IAEtE,KAAI,SAAC,GAAqB,MAAC,CAChD,KAAM,EAAM,KACZ,MAAO,EAAY,EAAM,MAC3B,GACL,C,urEClND,I,8BAAA,YACI,EAAJ,OACA,YACA,WAeA,QAaa,UAAU,SACnB,EACA,EACA,EACA,EACA,GAEA,IAAM,EAAQ,KAAK,MACnB,OAAO,aAAM,CACT,IAAG,EACH,OAAQ,OACR,QAAO,EACP,QAAS,CACL,cAAe,EAAM,iBAAU,GAAQ,eAE3C,KAAM,CACF,OAAO,WAAM,GACb,UAAS,KAGZ,MAAK,SAAC,G,IAAQ,EAAS,OACd,GAAQ,KAAK,MAAQ,GAAS,IAQpC,OAPI,EAAO,IACP,UAAI,KACA,qBAAc,EAAK,QAAQ,GAAE,sBAAa,WAAM,GAC3C,QAAQ,MAAO,IACf,MAAM,EAAG,IAAG,YAAI,KAAK,UAAU,KAGrC,CACV,IACA,OAAM,SAAC,GAOJ,MAAI,EAAI,UAAoC,MAAxB,EAAI,SAAS,OACvB,IAAI,MAAM,6BAAsB,IAC/B,EAAI,MAAqB,iBAAb,EAAI,KACjB,IAAI,MAAM,kDAA2C,EAAG,OAI9D,UAAI,MAAM,gBAAiB,CAAE,IAAG,EAAE,IAAG,EAAE,OAAO,WAAM,GAAQ,UAAS,EAAE,IAAG,IACpE,EAEb,GACR,EAQD,qBACI,EACA,EACA,GAYA,OAAO,aACH,EACA,GAAG,EAEH,WAAG,6fAYH,GACA,EAEP,EAUD,8BACI,EACA,EACA,EACA,EACA,EACA,GASA,OAAO,aACH,EACA,GAAG,EAEH,WAAG,ujBASH,CAAE,IAAG,EAAE,QAAO,EAAE,SAAQ,GACxB,EAEP,EAMD,uBACI,EACA,EACA,G,mEAEA,MAAO,CAAP,GAAO,aACH,EACA,GAAG,EAEH,WAAG,2zEA0CH,GACA,GACF,MAAK,SAAC,GAEJ,cACO,GAAS,CACZ,KAAM,CACF,SAAU,EAAU,KAAK,SAAS,IAAI,UAAQ,eAGzD,I,MACJ,EAOD,0BACI,EACA,EACA,EACA,G,oGAKI,UAAM,aACN,EACA,GAAG,EAEH,WAAG,ygEAoCH,CAAE,QAAS,GACX,I,OAGJ,OA/CM,EAGF,SAFQ,EAAO,eACf,EAAM,SA6CV,GAAO,CACH,KAAM,CACF,QAAS,UAAQ,YAAY,IAEjC,OAAM,I,MAEb,EAOD,sBACI,EACA,EACA,EACA,G,oGAKI,UAAM,aACN,EACA,GAAG,EAEH,WAAG,ygEAoCH,CAAE,QAAS,GACX,I,OAGJ,OA/CM,EAGF,SAFQ,EAAO,eACf,EAAM,SA6CV,GAAO,CACH,KAAM,CACF,QAAS,UAAQ,YAAY,IAEjC,OAAM,I,MAEb,EASD,sBACI,EACA,EACA,EACA,EACA,EACA,EACA,G,YAFA,mBACA,c,4DAGA,UAAO,aACH,EACA,GAAG,EAEH,WAAG,q+BAwBS,yBA0CA,kDAnDI,EACM,oLAOA,GAGN,EACM,s4CAsCA,IAMtB,CAAE,GAAE,EAAE,QAAO,GACb,GACF,MAAK,SAAC,GAAc,cACf,GAAS,CACZ,KAAM,CACF,QAAS,UAAQ,YAAY,EAAU,KAAK,WAElD,I,MACL,EAoBD,yBACI,EACA,EACA,EACA,EACA,EACA,EACA,G,0FAEiB,UAAM,aACnB,EACA,GAAG,EAEH,WAAG,23BAaH,CAAE,GAAE,EAAE,MAAO,EAAU,YAAW,EAAE,QAAO,GAC3C,I,OAEJ,SApBiB,U,MAqBpB,EAED,wBACI,EACA,EACA,EACA,EACA,EACA,EACA,G,0FAEiB,UAAM,aACnB,EACA,GAAG,EAGH,WAAG,6yBAYH,CAAE,SAAQ,EAAE,QAAO,EAAE,GAAE,EAAE,SAAQ,GACjC,I,OAEJ,SApBiB,U,MAqBpB,EAED,yBACI,EACA,EACA,EACA,EACA,EACA,EACA,G,kGAEY,UAAM,aACd,EACA,GAAG,EAGH,WAAG,yrDA2BH,CAAE,SAAQ,EAAE,QAAO,EAAE,GAAE,EAAE,UAAS,GAClC,I,OAEJ,OAnCM,EAAM,UAmCH,MAEC,EAAS,EAAI,KAAK,cACxB,GAAO,CACH,OAAQ,EAAI,OACZ,KAAM,CACF,cAAa,OACN,GAAM,CAET,QAAS,GAAU,EAAO,SAAW,SAAS,EAAO,QAAS,IAC9D,WAAY,GAAU,EAAO,YAAc,SAAS,EAAO,WAAY,IAEvE,YAAa,GAAU,EAAO,aAAe,KAAK,MAAM,EAAO,aAC/D,QAAS,GAAU,EAAO,SAAW,KAAK,MAAM,EAAO,SACvD,WAAY,GACR,EAAO,YAAU,OACV,EAAO,YAAU,CACpB,aAAc,SAAS,EAAO,WAAW,aAAc,YAjBhE,GAAO,CAAE,OAAQ,EAAI,S,MAuBvC,EAED,2BACI,EACA,EACA,EACA,EACA,EACA,G,gGAEY,UAAM,aACd,EACA,GAAG,EACH,WAAG,m2BAcH,CAAE,SAAQ,EAAE,KAAI,EAAE,SAAQ,GAC1B,I,OAEJ,OApBM,EAAM,UAoBH,KAEL,GAAO,CACH,OAAQ,EAAI,OACZ,KAAM,CACF,gBAAiB,EAAI,KAAK,iBAAe,OAClC,EAAI,KAAK,iBAAe,CAC3B,WAAY,EAAI,KAAK,gBAAgB,YAAc,KAAK,MAAM,EAAI,KAAK,gBAAgB,iBAPxF,GAAO,CAAE,OAAQ,EAAI,S,MAYvC,EAUD,2BACI,EACA,EACA,EACA,EACA,EACA,G,0FAEiB,UAAM,aACnB,EACA,GAAG,EAGH,WAAG,myBAaH,CAAE,SAAQ,EAAE,QAAO,EAAE,GAAE,GACvB,I,OAEJ,SArBiB,U,MAsBpB,EASD,yBACI,EACA,EACA,EACA,EACA,G,0FAEiB,UAAM,aACnB,EACA,GAAG,EAGH,WAAG,mUAMH,CAAE,QAAO,EAAE,GAAE,GACb,I,OAEJ,SAdiB,U,MAepB,EASD,kBACI,EACA,EACA,EACA,EACA,G,wGAEY,UAAM,aACd,EACA,GAAG,EAEH,WAAG,miFAyCF,OAEI,GAAM,CAAE,QAAO,IACpB,I,OAEJ,OAlDM,EAAM,UAkDH,MAEC,EAAiC,EAAI,KAAK,QAAU,GAAlD,EAAS,YAAE,EAAQ,WAAE,EAAK,QAClC,GAAO,CACH,OAAQ,EAAI,OACZ,KAAM,CACF,OAAQ,CACJ,SAAU,MAAM,QAAQ,GAAY,EAAS,IAAI,UAAQ,aAAe,EACxE,UAAS,EACT,MAAK,OATN,GAAO,CAAE,OAAQ,EAAI,S,MAcvC,EAED,sCACI,EACA,EACA,EACA,EACA,EACA,G,gGAEiB,UAAM,aACnB,EACA,GAAG,EACH,WAAG,u0BAcH,CAAE,QAAO,EAAE,GAAE,EAAE,WAAU,GACzB,I,OAEJ,OApBM,EAAW,UAoBH,KAEV,GAAO,CACH,OAAQ,EAAS,OACjB,KAAM,CACF,WAAY,EAAS,KAAK,WACrB,OACQ,EAAS,KAAK,YAAU,CAC3B,UAAW,SAAS,EAAS,KAAK,WAAW,UAAW,IACxD,UAAW,SAAS,EAAS,KAAK,WAAW,UAAW,MAE5D,QAXE,GAAO,CAAE,OAAQ,EAAS,S,MAejD,EAED,yBACI,EACA,EACA,EACA,EACA,EACA,G,sGAEiB,UAAM,aACnB,EACA,GAAG,EAGH,WAAG,yiCAiBH,CAAE,QAAO,EAAE,MAAK,EAAE,UAAS,GAC3B,I,OAGJ,OA1BM,EAAW,UA0BH,MAEJ,EAAqC,EAAS,KAAK,UAAY,GAAlD,EAAY,YAAE,EAAK,QACtC,GAAO,CACH,OAAQ,EAAS,OACjB,KAAM,CACF,SAAU,CACN,MAAO,MAAM,QAAQ,GACf,EAAM,KAAI,SAAC,GAAM,cACV,GAAC,CACJ,UAAW,SAAS,EAAE,UAAW,IACjC,UAAW,SAAS,EAAE,UAHT,KAIf,IACF,EACN,UAAW,OAdP,GAAO,CAAE,OAAQ,EAAS,S,MAmBjD,C,0SC54BD,I,EAAA,YACI,EAAJ,OAIM,GAAQ,EAAG,WAAG,m2aAwN2C,gDAGN,6CAGH,yCAGJ,iuEATxC,OAAO,OAAO,yBAAuB,KAAK,YAG1C,OAAO,OAAO,mBAAiB,KAAK,YAGpC,OAAO,OAAO,gBAAc,KAAK,YAGjC,OAAO,OAAO,YAAU,KAAK,aA8FvC,UAAe,C,8UCzTf,iBAgBI,WAAY,GACR,OAAO,OAAO,KAAM,EACvB,CAqBL,OAfW,cAAP,SAAmB,GACf,IAAK,EAAO,OAAO,KACnB,IAAM,EAAO,EAAM,KAAO,KAAK,MAAM,EAAM,MAAQ,GACnD,OAAO,IAAI,EAAO,OACX,GAAK,CACR,KAAI,EACJ,KAAM,EAAM,KACZ,SAAU,EAAM,SACV,EAAM,SAAS,KAAI,SAAC,GAAM,cACnB,GAAC,CACJ,QAAS,KAAK,MAAM,EAFE,UAGxB,IACF,KAEb,EACL,CAAC,CAvCD,GAAa,W,8ZCDb,gBAQA,SAASC,EAASC,GACdA,EAAWC,MAAK,SAAC,EAAG,GAChB,OAAIC,EAAEC,WAAaC,EAAED,UAAkB,GAClC,EAAE,UAAY,EAAE,SAAiB,EAClC,EAAE,KAAK,cAAgB,EAAE,KAAK,eAAuB,EACrD,EAAE,KAAK,cAAgB,EAAE,KAAK,cAAsB,EACjD,CACV,GACJ,CAWD,iBAoBI,WAAY,GAAZ,WA0CA,sBAAmB,WACf,IAAM,EAAO,GAuBb,OArBA,EAAK,MAAM,SAAQ,SAAC,G,IAAE,EAAG,MACjB,EAAU,EAAI,MAAM,KAED,IAAnB,EAAQ,QAAgB,EAAI,QAAQ,OAAS,IAC7C,EAAU,EAAI,MAAM,OAGxB,IADA,IAAI,EAAa,E,aAEb,IAAM,EAAS,CAAE,KAAM,EAAQ,QAAS,SAAU,IAC5C,EAAQ,EAAW,MAAK,SAAC,GAAM,SAAE,OAAS,EAAX,IAAsB,IACvD,GAAS,EAAM,SACf,EAAa,EAAM,UAEnB,EAAW,KAAK,GAChB,EAAa,EAAO,UAExB,EAAS,E,EATN,EAAQ,OAAS,G,IAWxB,EAAW,KAAK,CAAE,KAAM,EAAQ,GAAI,KAAM,GAC7C,IACD,EAAS,GACF,CACV,EAlEG,OAAO,OAAO,KAAM,GACf,KAAK,QAAO,KAAK,MAAQ,IAC1B,KAAK,MAAQ,KAAK,KAAK,SACvB,KAAK,KAAK,OAAS,KAAK,KAAK,OAAO,KAAI,SAAC,GAAO,cACzC,GAAE,CACL,KAAM,GAAM,EAAG,QAAU,KAAK,MAAM,EAAG,SAFK,IAG9C,IAET,CA4LL,OAtLW,cAAc,SAAC,GAClB,OAAK,EACE,IAAI,EAAO,OACX,GAAK,CACR,UAAW,SAAS,EAAM,UAAW,IACrC,UAAW,SAAS,EAAM,UAAW,IACrC,KAAM,EAAM,KAAO,KAAK,MAAM,EAAM,MAAQ,GAC5C,KAAM,EAAM,KAAO,EAAM,KAAK,MAAM,KAAO,MAN5B,IAQtB,EAOM,eAAe,SAAC,GACnB,OAAO,IAAI,EAAO,OACX,GAAK,CACR,KAAM,EAAM,MAAQ,EAAM,KAC1B,KAAM,EAAM,KAAO,EAAQ,gBAAgB,EAAM,WAAQ,IAEhE,EAmCM,OAAO,SAAC,EAA8B,GACzC,IAAM,EAAY,GACZ,EAAO,GAEb,OAAK,GAA0B,IAAjB,EAAM,OAOR,GAAwB,IAAhB,EAAK,OA0BlB,CACH,SAjBa,EACZE,QAAO,SAAC,GACL,IAAM,EAAQ,EAAM,MAAK,SAAC,GAAc,SAAS,MAAQ,EAAjB,GAA8B,IAKtE,OAJI,IACI,EAAM,MAAQ,EAAS,IAAK,EAAK,KAAK,EAAS,KAC9C,EAAU,KAAK,EAAS,OAEzB,CACX,IACA,KAAI,SAAC,GAAM,YAAK,IASjB,UANc,EACb,QAAO,SAAC,GAAc,OAAC,EAAK,MAAK,SAAC,GAAa,SAAU,MAAQ,EAAlB,GAAzB,GAAwD,IAC9E,KAAI,SAAC,GAAM,YAAK,IAKjB,UAAS,EACT,KAAI,GA7BG,CACH,SAAU,GACV,UAAW,EAAM,KAAI,SAAC,GAAM,YAAK,IACjC,UAAW,GACX,KAAM,IAXH,CACH,SAAU,EAAK,KAAI,SAAC,GAAM,YAAK,IAC/B,UAAW,GACX,UAAW,GACX,KAAM,GAkCjB,EAQM,mBAAmB,SAAC,EAAkB,EAAmB,GAC5D,IAAM,EAAS,UAAK,KAAK,EAAQ,YAAa,EAAU,GAClD,EAAS,UAAG,EAAM,QAClB,EAAc,UAAK,KAAK,EAAQ,EAAQ,aACxC,EAAgB,UAAK,KAAK,EAAQ,YAAa,EAAU,UAAG,EAAS,iBAIrE,EAAqB,UAAG,CAAC,EAAQ,YAAa,EAAU,GAAW,KAAK,MAG9E,MAAO,CACH,OAAM,EACN,OAAM,EACN,YAAW,EACX,cAAa,EACb,mBAAkB,EAClB,oBARwB,UAAG,EAAkB,QAUpD,EAEM,kBAAkB,SAAC,GAEtB,IAAM,EAAW,OAAO,KAAK,GACxB,QAAO,SAAC,GAAM,aAAE,QAAQ,QAAc,IACtC,QAAO,SAAC,EAAK,G,MACJ,EAAO,EAAE,MAAM,SAAS,GAC9B,cAAY,KAAG,MAAG,GAAO,EAAO,GAAE,GACrC,GAAE,IACP,OAAO,KAAK,UAAU,EACzB,EAEM,iBAAiB,SAAC,GACrB,OAAK,GAAyC,IAA5B,EAAU,OAAO,OAC5B,EACF,MAAM,KACN,KAAI,SAAC,GAAM,eAAQ,IACnB,QAAO,SAAC,GAAM,SAAE,OAAS,GAAW,SAAN,GAAhB,cAAgC,CAAiB,IAJZ,EAK3D,EAKM,aAAa,SAAC,EAAkB,GAEnC,GADe,EAAI,MAAM,KACd,OAAS,EAAG,MAAM,IAAI,MAAM,2BACjC,MAAqC,EAAI,MAAM,KAA9C,EAAkB,KAAE,EAAQ,KAAE,EAAE,KACvC,GAAI,EAAQ,cAAgB,EACxB,MAAM,IAAI,MACN,wCAAiC,EAAQ,YAAW,mDAA2C,IAGvG,OAAO,EAAQ,iBAAiB,EAAS,EAAI,EAChD,EAKM,iBAAiB,SACpB,GAEA,IAAM,EAAS,EAAI,MAAM,KACzB,GAAI,EAAO,OAAS,EAAG,MAAM,IAAI,MAAM,2BAChC,MAAoC,EAAlB,GAAE,EAAgB,EAAR,GAAE,EAAM,EAAJ,GACjC,EAAS,UAAK,KAAK,EAAoB,EAAU,GAEvD,MAAO,CACH,mBAAkB,EAClB,SAAQ,EACR,GAAE,EACF,OALW,UAAG,EAAM,QAMpB,OAAM,EAEb,EACL,CAAC,CAzND,GAAa,W,kmBCrCb,kBAGI,WAAY,EAAiB,GAA7B,MACI,YAAM,IAAQ,K,OAEd,EAAK,KAAO,EAAK,YAAY,KAC7B,EAAK,QAAU,EAIf,MAAM,kBAAkB,EAAM,EAAK,a,CACtC,CACL,OAbqC,OAarC,CAAC,CAbD,CAAqC,OAAxB,mB,kHCKb,MAmBI,SAAY,GACR,OAAO,OAAO,KAAM,EACvB,EArBQ,wB,27BCIP,EAAY,aAAW,SAAC,GAAU,MAAC,CACrC,KAAM,CACF,QAAS,OACT,OAAQ,EAAM,OAAO,OAAS,GAElC,KAAM,CACF,SAAU,GAEd,KAAM,GACR,IAoBa,EAlBiB,SAAC,G,IAAE,EAAO,UAChC,EAAU,IAChB,OACI,eAAC,IAAS,GAAC,UAAW,EAAQ,KAAM,SAAS,MAAI,WAC5C,GACG,eAAC,IAAU,GAAC,UAAU,MAAM,UAAW,EAAQ,KAAM,MAAM,gBAAgB,QAAQ,YAAU,gBACtF,MAGX,qBACI,UAAW,EAAQ,KACnB,IAAI,SACJ,IAAK,UAAG,GAAsB,4CAI7C,E,6dCRK,GAAY,aAAW,SAAC,GAAU,MAAC,CACrC,KAAM,GACN,eAAgB,GAChB,aAAc,CACV,OAAQ,EAAM,QAAQ,EAAG,GACzB,MAAO,CACH,YAAa,EAAM,QAAQ,KAGnC,SAAU,CACN,SAAU,GAEd,SAAU,CACN,MAAO,EAAM,QAAQ,QAAQ,aAC7B,gBAAiB,EAAM,QAAQ,QAAQ,KACvC,QAAS,QAEb,YAAa,CACT,KAAM,OAEZ,IAsDa,GApDsB,SAAC,G,IAAE,EAAI,OAAE,EAAQ,WAAE,EAAW,cACzD,EAAU,KAChB,OACI,eAAC,IAAM,GAAC,KAAM,EAAM,QAAS,EAAW,kBAAkB,qBAAmB,WACzE,eAAC,IAAW,GAAC,UAAW,EAAQ,SAAU,mBAAiB,cACvD,cAAC,IAAU,GAAC,MAAM,WAAS,UACvB,cAAC,IAAS,CAAC,UAAW,EAAQ,oBAElC,cAAC,IAAU,GAAC,QAAQ,KAAK,UAAW,EAAQ,UAAQ,qBAGpD,uBAAK,UAAW,EAAQ,aAAW,UAC/B,cAAC,IAAU,GAAC,QAAS,EAAa,MAAM,WAAS,UAC7C,cAAC,IAAS,cAItB,eAAC,IAAa,WACV,cAAC,IAAiB,uEAClB,cAAC,IAAS,CACN,MAAO,EACP,OAAO,QACP,GAAG,OACH,QAAQ,WACR,WAAS,EACT,WAAY,CACR,QAAS,SAAC,GACN,EAAE,iBACa,EAAE,OACV,QACV,KAGT,wBAAK,UAAW,EAAQ,cAAY,WAChC,cAAC,IAAgB,GAAC,IAAK,GAAQ,UAC3B,cAAC,IAAS,CAAC,KAAM,GAAI,OAAK,OAE9B,cAAC,IAAkB,GAAC,IAAK,GAAQ,UAC7B,cAAC,IAAW,CAAC,KAAM,GAAI,OAAK,OAEhC,cAAC,IAAmB,GAAC,IAAK,GAAQ,UAC9B,cAAC,IAAY,CAAC,KAAM,GAAI,OAAK,OAEjC,cAAC,IAAmB,GAAC,IAAK,EAAU,MAAO,SAAO,UAC9C,cAAC,IAAY,CAAC,KAAM,GAAI,OAAK,iBAMpD,E,sQCxFK,GAAY,aAAW,SAAC,GAAU,MAAC,CACrC,KAAM,GACN,MAAO,CACH,OAAQ,EACR,QAAS,OACT,QAAS,EAAM,QAAQ,GACvB,WAAY,EAAM,QAAQ,QAAQ,KAClC,MAAO,EAAM,QAAQ,QAAQ,cAEjC,QAAS,CACL,OAAQ,EACR,QAAS,EAAM,QAAQ,IAE3B,QAAS,CACLC,QAASC,EAAMC,QAAQ,IAE3B,oBAAqB,CACjB,QAAS,OACT,MAAO,OACP,SAAU,UAEd,uBAAwB,GACxB,WAAY,CACR,MAAO,OACP,OAAQ,QAEZ,YAAa,CACT,SAAU,WACV,MAAO,EAAM,QAAQ,GACrB,IAAK,EAAM,QAAQ,IAEzB,IAqEa,GA/D2C,SAAC,G,IAAE,EAAO,UAAE,EAAI,OAChE,EAAU,KAChB,OACI,eAAC,IAAM,sBAAiB,0BAA0B,KAAM,EAAM,SAAS,KAAK,QAAS,GAAO,WACxF,eAAC,IAAW,IAAC,mBAAiB,EAAC,UAAW,EAAQ,OAAK,WACnD,cAAC,IAAU,IAAC,QAAQ,KAAK,MAAM,WAAS,gCAIxC,cAAC,IAAU,iBAAY,QAAQ,UAAW,EAAQ,YAAa,QAAS,EAAS,MAAM,WAAS,UAC5F,cAAC,IAAS,WAGlB,eAAC,IAAa,IAAC,UAAQ,cACnB,eAAC,IAAU,IAAC,WAAS,uBACX,mDAA8B,mEAExC,eAAC,IAAU,IAAC,WAAS,oJAEgB,IACjC,iCACI,cAAC,KAAI,IAAC,KAAK,gCAAgC,OAAO,UAAQ,8BAGrD,0FAGb,cAAC,IAAU,IAAC,WAAS,+dAOrB,cAAC,IAAU,IAAC,WAAS,+cAOrB,cAAC,IAAU,IAAC,WAAS,aACjB,4GAEJ,cAAC,IAAU,IAAC,WAAS,EAAC,MAAO,CAAE,UAAW,WAAU,UAChD,cAAC,KAAM,IACH,QAAQ,WACR,KAAK,QACL,KAAK,kGACL,OAAO,UAAQ,mCAKvB,eAAC,IAAU,IAAC,WAAS,EAAC,QAAQ,WAAS,WACnC,0CAAqB,iHAMxC,E,mNCvGK,GAAY,aAAW,SAAC,GAAU,MAAC,CAYrCC,OAAQ,CACJC,WAAYH,EAAMC,QAAQ,GAC1BG,YAAaJ,EAAMC,QAAQ,GAC3BI,aAAcL,EAAMC,QAAQ,IASlC,IAwBa,GAtBqB,WAChC,IAAM,EAAU,KACV,EAAkB,oBAAkB,GAAnC,EAAI,KAAE,EAAO,KAEpB,OACI,qCACI,cAAC,KAAO,IAAC,MAAM,gPAA8O,UACzP,cAAC,KAAM,IACH,QAAQ,YACR,KAAK,QACL,MAAM,YACN,UAAW,EAAQ,OACnB,UAAW,cAAC,KAAW,IACvB,QAAS,WAAM,YAAa,sCAKpC,cAAC,GAAgB,CAAC,KAAM,EAAM,QAAS,WAAM,YAAc,MAGtE,E,oGCpDY,GAAY,CAErB,UAAW,CACP,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YAIJK,GAAS,2VAAY,iBAKzB,KAAI,MAAM,WAAY,CAAE,OAAM,KACvB,IAAM,IAAgC,EAEhC,GAAY,CACrB,YAAa,2VAAY,wBAIhB,GAAU,QAEV,GAAY,CACrB,QAAS,wEACT,IAAK,2VAAY,eAGR,GAAsB,CAAC,KAAK,KAAO,KAAM,KAAQ,KAAQ,KAAM,KAAM,MACrE,GAAc,IAAI,IAC3B,GAAuB,SAAS,KAAO,GAAkD,IACzF,OAAO,SAAS,QAEpB,QAAQ,IAAI,cAAe,CAAE,YAAW,GAAE,UAAW,KAE9C,IAAM,GAAkB,iBAElB,GAAU,CACnB,KAAM,CACF,OAAQ,2VAAY,4BACpB,WAAY,2VAAY,yBACxB,oBAAqB,2VAAY,kCACjC,iBAAiB,EACjB,MAAO,CACH,OAAQ,2VAAY,wBACpB,MAAO,CAAC,QAAS,UAAW,UAC5B,eAAgB,GAChB,gBAAiB,GACjB,aAAc,U,mNCxCpB,GAAY,aCpBH,SAAC,G,YAA6B,MAAC,CAC1C,OAAQ,CACJ,OAAQ,EAAM,OAAO,OAAS,GAElC,KAAM,CACF,QAAS,OACT,WAAY,SACZ,MAAO,OACP,QAAS,EAAM,QAAQ,EAAG,GAC1B,WAAY,8BACZ,gBAAiB,cAAO,GAAsB,0BAC9C,iBAAkB,YAClB,mBAAoB,SACpB,eAAgB,QAChB,gBAAiB,WAErB,KAAM,CACF,OAAQ,GACR,MAAO,GACP,YAAa,EAAM,QAAQ,IAE/B,eAAgB,CACZ,OAAQ,EAAM,QAAQ,EAAG,GACzB,MAAO,EAAM,QAAQ,QAAQ,aAC7B,QAAS,CACL,MAAO,EAAM,QAAQ,QAAQ,cAEjC,WAAY,CACR,YAAa,EAAM,QAAQ,QAAQ,cAEvC,UAAW,CACP,YAAa,EAAM,QAAQ,QAAQ,eAG3C,YAAa,CACT,gBAAiB,cACjB,WAAY,OACZ,MAAO,EAAM,QAAQ,KAAK,SAG9B,QAAM,GACF,SAAU,WACV,aAAc,EAAM,MAAM,aAC1B,gBAAiB,YAAM,EAAM,QAAQ,OAAO,MAAO,KACnD,UAAW,CACP,gBAAiB,YAAM,EAAM,QAAQ,OAAO,MAAO,MAEvD,YAAa,EAAM,QAAQ,GAC3B,WAAY,EACZ,MAAO,OACP,SAAU,GACV,EAAC,EAAM,YAAY,GAAG,OAAQ,CAC1B,WAAY,EAAM,QAAQ,GAC1B,MAAO,QAEd,GACD,WAAY,CACR,MAAO,EAAM,QAAQ,GACrB,OAAQ,OACR,SAAU,WACV,cAAe,OACf,QAAS,OACT,WAAY,SACZ,eAAgB,UAEpB,UAAW,CACP,MAAO,WAEX,OAAQ,CACJ,SAAU,GAEd,YAAU,GACN,QAAS,EAAM,QAAQ,EAAG,EAAG,EAAG,GAChC,WAAY,EAAM,YAAY,OAAO,SACrC,MAAO,QACP,EAAC,EAAM,YAAY,GAAG,OAAQ,CAC1B,MAAO,KAEd,GACD,gBAAc,GACV,QAAS,QACT,EAAC,EAAM,YAAY,GAAG,OAAQ,CAC1B,QAAS,OACT,SAAU,GAEjB,GACD,eAAa,GACT,QAAS,OACT,SAAU,GACV,EAAC,EAAM,YAAY,GAAG,OAAQ,CAC1B,QAAS,QAEhB,GA5FL,IDiCM,SAAU,GAAW,GACvB,QAAI,EAAK,OAAQ,EAAK,KAAK,QAA+B,WAArB,EAAK,KAAK,SAC1B,OAAd,EAAK,IACf,CAED,I,GAqHe,GArHiB,SAAC,G,IAC7B,EAAK,QACL,EAAO,UACP,EAAQ,WACR,EAAc,iBACd,EAAY,eACZ,EAAW,cACX,EAAQ,WACR,EAAO,UAED,EAAU,KACV,EAA4B,oBAAkB,GAA7C,EAAS,KAAE,EAAY,KACxB,EAA8C,mBAAS,MAAtD,EAAkB,KAAE,EAAqB,KAE1C,EAAwB,WAAY,cAA2B,EAO/D,EAAU,GAAW,EAAQ,SAAS,SAAS,QAAQ,WAAa,EAUpE,GAAoB,GAAkB,IACxC,eAAC,IAAI,IACD,SAAU,EACV,aAAc,CAAE,SAAU,MAAO,WAAY,SAC7C,aAAW,EACX,gBAAiB,CAAE,SAAU,MAAO,WAAY,SAChD,OAAQ,EACR,QAAS,GAAqB,WAE7B,GACG,cAAC,IAAQ,UACL,cAAC,IAAU,IAAC,QAAQ,WAAW,QAAS,WAAY,SAAQ,KAAR,IAAiB,6BAK5E,GAAY,cAAC,IAAO,IACpB,GACG,EAAS,OAAS,GAClB,EAAS,KAAI,SAAC,EAAM,GAAQ,OACxB,cAAC,IAAQ,IACL,SAAW,GAAW,EAAQ,cAAgB,EAAK,aAAgB,GAAW,GAE9E,QAAS,WAAY,OArCjB,EAqCiB,EApCrC,SACI,GAAS,EAAQ,KAAK,WAAI,EAAG,eAFd,IAAC,CAqCqC,EACzC,MAAO,EAAK,aAAW,UAEtB,EAAK,OAJD,eAHe,GAS3B,IACJ,GAAkB,cAAC,IAAO,IAC1B,GAAkB,cAAC,IAAQ,IAAC,QAAS,GAAc,2BAGtD,EACF,IAAY,EAAQ,OAAS,oBAAkB,OAAS,EAAQ,OAAS,oBAAkB,WAE/F,OACI,eAAC,IAAM,SAAQ,WACX,cAAC,IAAM,IAAC,SAAS,SAAS,UAAW,EAAQ,QAAM,UAC/C,eAAC,IAAO,IAAC,UAAW,EAAQ,KAAM,gBAAc,cAC5C,sBAAG,KAAK,2BAAyB,UAC7B,qBACI,UAAW,EAAQ,KACnB,IAAK,4DACL,IAAI,YAGX,EACG,gCACI,cAAC,IAAU,IAAC,QAAQ,aAAW,UAAE,EAAQ,QACzC,cAAC,IAAU,IAAC,QAAQ,WAAS,UAAE,QAGnC,cAAC,IAAU,IAAC,QAAQ,aAAW,UAAE,KAErC,qBAAK,UAAW,EAAQ,SACvB,IACG,eAAC,IAAU,IAAC,UAAU,MAAM,UAAW,EAAQ,KAAM,MAAM,UAAU,QAAQ,YAAU,gBAChF,OAGV,GACG,cAAC,IAAU,oBAAe,OAAO,QAvEjC,WACZ,GAAW,IACP,EAAS,EAAQ,KAAK,WAAI,EAAQ,cACjC,EAAQ,KAAK,WAAI,EAAQ,YAAW,WAEhD,EAkE0E,MAAM,WAAS,UACjE,EAAU,cAAC,IAAW,IAAM,cAAC,IAAqB,OAG1D,EACA,GAAe,cAAC,GAAiB,IACjC,GACG,cAAC,IAAU,oBAAe,OAAO,QArFzB,WAAY,YAAkB,EAqFyB,MAAM,WAAS,UAC1E,cAAC,IAAS,QAGhB,GAAkB,IAChB,cAAC,IAAU,oBAAe,OAAO,QA5ExB,SAAC,GAAgB,SAAsB,EAAtB,cAA0C,EA4EJ,MAAM,WAAS,UAC3E,cAAC,IAAQ,cAKxB,EACA,GAAY,cAAC,GAAW,CAAC,KAAM,EAAW,SAAU,EAAU,YAAa,WAAM,YAAmB,MAGhH,E,sZEvGc,GAjCwB,SAAC,G,IAAE,EAAI,OAAE,EAAe,kBAE3D,OAAK,EAED,cAAC,IAAM,SAAQ,UACV,EAAK,QACF,SAAC,EAAK,EAAI,GAAQ,gBACX,GAAG,IACN,wBAAC,IAAU,IAAC,QAAQ,WAAc,EAAe,CAAE,IAAK,cAAO,KAC1D,EAAM,GAAK,MAEhB,cAAC,KAAO,IAEJ,MACI,eAAC,IAAM,SAAQ,WACX,eAAC,IAAU,IAAC,QAAQ,SAAO,6BAAiB,MAC5C,cAAC,IAAU,IAAC,QAAQ,WAAS,oGAGhB,UAGrB,cAAC,IAAU,IAAC,QAAQ,UAAU,MAAM,aAAgB,EAAe,UAC9D,OAXA,gBAAS,MANJ,EAoBjB,GACD,MAzBM,IA6BrB,E,sQCxCK,GAAY,aAAW,WAAM,MAAC,CAChC,KAAM,CACF,MAAO,CACH,OAAQ,YAGhB,eAAgB,CACZ,QAAS,IAEf,IAsGa,GA5FyB,SAAC,G,IAAE,EAAK,QAAE,EAAO,UAAE,EAAY,eAAE,EAAQ,WAAE,EAAe,kBACxF,EAAU,KAEZ,EACA,cAAC,KAAO,IACJ,MACI,eAAC,IAAM,SAAQ,WACX,cAAC,IAAU,IAAC,QAAQ,SAAO,oCAC3B,cAAC,IAAU,IAAC,QAAQ,UAAU,WAAS,sEAGvC,cAAC,IAAU,IAAC,QAAQ,UAAU,WAAS,8EAG1B,UAGpB,EACG,cAAC,KAAM,IACH,QAAQ,YACR,MAAM,UACN,QAAS,SAAC,GACN,EAAE,iBACF,EAAE,kBACF,EAAgB,EACnB,EACD,UAAW,cAAC,KAAiB,KACzB,EAAQ,UAEX,GAAS,SAGd,cAAC,IAAU,IACP,MAAM,UACN,QAAS,SAAC,GACN,EAAE,iBACF,EAAE,kBACF,EAAgB,EACnB,GACI,EAA4B,UAEjC,cAAC,KAAiB,UAgDlC,OA3CI,IACA,EACI,cAAC,KAAO,IACJ,MACI,eAAC,IAAM,SAAQ,WACX,cAAC,IAAU,IAAC,QAAQ,SAAO,6BAC3B,cAAC,IAAU,IAAC,QAAQ,UAAU,WAAS,mEAGvC,eAAC,IAAU,IAAC,QAAQ,UAAU,WAAS,yBAC1B,KAAO,EAAc,KAAK,kBAE1B,UAGrB,cAAC,KAAM,IACH,QAAQ,WACR,oBAAkB,EAClB,eAAa,EACb,oBAAkB,EAClB,MAAM,UACN,QAAS,SAAC,GACN,EAAE,iBACF,EAAE,iBACL,EACD,UAAW,EAAQ,eACnB,UACI,cAAC,KAAgB,CACb,MACI,GAAY,EAAS,OAA4B,cAAnB,EAAS,MAAwB,UAAY,YAE/E,KAAM,GACN,UAAW,KAGf,EAAQ,UAEX,GAAS,aAMnB,wBAAK,UAAW,EAAQ,MAAI,UAAG,IACzC,E,IClHiB,aAAW,SAAC,GAAU,MAAC,CACrC,KAAM,GAGN,UAAW,CAAE,OAAQ,GAAI,MAAO,GAAI,YAAa,EAAM,QAAQ,IAC/D,SAAU,CAEN,SAAU,KAEhB,I,sOCLI,GAAY,aAAW,WAAM,MAAC,CAChC,KAAM,CACF,MAAO,CACH,OAAQ,YAGhB,eAAgB,CACZ,QAAS,IAEf,IA0Da,GAjDqB,SAAC,G,IAAE,EAAK,QAAE,EAAO,UAAE,EAAG,MAAE,EAAQ,WAC1D,EAAU,KAChB,IAAK,GAAsB,IAAf,EAAI,OAAc,OAAO,KACrC,IAAM,EAAa,UAAG,EAAG,aAAK,EAAQ,QAAO,YAAI,EAAQ,IACnD,EACF,cAAC,KAAO,IACJ,MACI,eAAC,IAAM,SAAQ,WACX,cAAC,IAAU,IAAC,QAAQ,SAAO,iCAC3B,cAAC,IAAU,IAAC,QAAQ,UAAU,WAAS,gEAG1B,UAGpB,EACG,cAAC,KAAM,IACH,QAAQ,YACR,QAAS,SAAC,GACN,EAAE,iBACF,EAAE,kBACF,EAAgB,MAAM,YAAa,eAAgB,gBACnD,OAAO,KAAK,EACf,EACD,MAAM,UACN,UAAW,cAAC,KAAU,KAClB,EAAQ,UAEX,GAAS,SAGd,cAAC,IAAU,IACP,MAAM,UACN,QAAS,SAAC,GACN,EAAE,iBACF,EAAE,kBACF,EAAgB,MAAM,YAAa,eAAgB,gBACnD,OAAO,KAAK,EACf,GACI,EAA4B,UAEjC,cAAC,KAAU,UAK3B,OAAO,wBAAK,UAAW,EAAQ,MAAI,UAAG,IACzC,E,6GCxEY,KAAY,OACpB,oBAAkB,WAAY,KAC/B,GAAC,oBAAkB,OAAQ,KAC3B,GAAC,oBAAkB,aAAc,KACjC,GAAC,oBAAkB,UAAW,KACjC,I,mNCWK,GAAY,aAAW,SAAC,GAAU,MAAC,CACrC,cAAe,CACX,OAAQ,OACR,QAAS,OACT,cAAe,SACf,SAAU,UAEd,OAAQ,CACJ,SAAU,GAEd,KAAM,CACF,QAAS,OACT,cAAe,SACf,QAAS,EAAM,QAAQ,EAAG,EAAG,EAAG,GAChC,UAAW,MACX,SAAU,UAEd,SAAU,CACN,KAAM,OAEV,SAAU,CAEN,OAAQ,oBACRC,KAAM,MACN,UAAW,UAEf,cAAe,CACXA,KAAM,MACN,QAAS,EAAM,QAAQ,GACvB,UAAW,UAEf,WAAY,CACR,MAAO,OACP,OAAQ,GACR,WAAY,GACZ,QAAS,QAET,WAAY,0EACZ,OAAQ,KAEZ,KAAM,GACN,WAAY,GAAF,GACH,OAAO,KAAK,IAAc,QACzB,SAAC,EAAK,G,MAAQ,gBACP,KAAG,MACL,mBAAY,IAAQ,CACjB,MAAO,EAAM,QAAQ,gBAAgB,GAAa,GAAK,MACvD,WAAY,GAAa,GAAK,MACjC,GACH,GACF,KAGV,IAaF,IAuDe,GAvDyB,SAAC,G,IAAE,EAAQ,WAAE,EAAO,UAAE,EAAQ,WAC5D,EAAU,KAEhB,OACI,yBAAK,UAAW,EAAQ,eAAa,WACjC,qBAAK,UAAW,EAAQ,SACxB,eAAC,KAAK,IAAC,UAAW,EAAQ,KAAM,UAAW,GAAC,WACxC,wBAAK,UAAW,EAAQ,eAAa,UACjC,qBAAK,UAAW,EAAQ,KAAM,IAA8B,uBAAwB,IAAI,YAE5F,cAAC,IAAU,IAAC,QAAQ,KAAK,UAAW,EAAQ,UAAQ,iCAGpD,cAAC,KAAI,IAAC,UAAW,EAAQ,UAAQ,UAC5B,GACG,EAAS,KAAI,SAAC,EAAG,GACb,IArBD,EAqBK,EACA,cAAC,KAAI,CACD,KAAM,cAAC,KAAQ,IACf,UAAW,aAAK,EAAQ,WAAY,iBAAU,EAAE,OAChD,MAAO,EAAE,MAAQ,WACjB,MAAM,YAGR,KA7BP,EA6B6B,GA5B3C,OAAQ,EAAK,KAAK,QAA+B,WAArB,EAAK,KAAK,SAC1B,OAAd,EAAK,KA6BY,OADI,IAAU,EAAO,cAAC,KAAI,CAAC,MAAM,YAAY,MAAM,aAE/C,eAAC,KAAQ,IAEL,SAAU,EACV,QAAM,EACN,SAAO,EACP,QAAS,WAAY,SAAS,EAAT,EAAoB,cAEzC,cAAC,KAAc,UACX,cAAC,KAAM,IAAC,IAAI,eAAa,UAAE,EAAE,KAAK,OAAO,EAAG,QAEhD,cAAC,KAAY,CAAC,QAAS,EAAE,KAAM,UAAW,EAAE,KAAK,cAChD,KAVI,kBAAW,GAa3B,OAET,qBAAK,UAAW,EAAQ,aACxB,eAAC,IAAU,IAAC,WAAS,EAAC,QAAQ,UAAU,UAAW,EAAQ,UAAQ,2CACjC,IAC9B,cAAC,KAAI,CAAC,MAAM,YAAY,UAAU,OAAO,MAAM,UAAU,KAAK,UAAU,mGAIhF,qBAAK,UAAW,EAAQ,YAGnC,E,8YC5HK,GAAY,aCZH,SAAC,GAA6B,MAAC,CAC1C,aAAc,CACV,gBAAiB,EAAM,QAAQ,WAAW,MAC1C,mBAAoB,CAChB,gBAAiB,EAAM,QAAQ,WAAW,UAGlD,kBAAmB,CACf,QAAS,QAEb,aAAc,CACV,WAAY,EAAM,QAAQ,GAC1B,QAAS,EAAM,QAAQ,GACvB,SAAU,GAEd,aAAc,GACd,SAAU,GACV,gBAAiB,CACb,aAAc,oBAAa,EAAM,QAAQ,KAAK,OAElDC,WAAY,GACZ,kBAAmB,GACnB,eAAgB,CACZ,QAAS,EAAM,QAAQ,IAE3B,YAAa,CACT,QAAS,CACL,WAAY,OACZ,OAAQ,SA5BpB,ID6Fe,GAvE0B,SAAnC,EAAoC,G,IAAE,EAAI,OAAE,EAAQ,WAAE,EAAM,SAAE,EAAO,UAAE,EAAS,YAC5E,EAAU,KAChB,GAAI,EAAK,SAAU,CACf,IAAM,EAAa,EAAK,SAAS,KAAI,SAAC,EAAG,GAAQ,OAC7C,cAAC,EAAe,CACZ,OAAQ,UAAG,EAAM,aAAK,GAEtB,KAAM,EACN,SAAU,EACV,QAAS,EACT,UAAW,GAJN,UAAG,EAAM,aAH2B,GAShD,IACD,OACI,cAAC,KAAQ,IACL,OAAQ,EACR,UAAW,EAAQ,WACnB,QAAS,CACL,QAAS,EAAQ,mBAErB,MAAO,wBAAK,UAAW,EAAQ,gBAAc,UAAG,EAAK,SAAW,UAE/D,IAGZ,CAEG,IAAM,EAAc,EAAK,KAAO,EAAS,EAAK,MAAQ,CAAE,KAAM,KAC9D,OACI,cAAC,KAAQ,CACL,OAAQ,EACR,UAAW,EAAQ,SACnB,QAAS,CACL,KAAM,EAAQ,aACd,QAAS,EAAQ,iBAErB,MACI,yBAAK,UAAW,EAAQ,mBAAiB,WACrC,yBAAK,UAAW,EAAQ,cAAY,WAChC,cAAC,IAAU,IAAC,MAAM,cAAc,UAAU,MAAM,QAAQ,SAAO,UAC1D,EAAK,QAEV,eAAC,IAAU,IAAC,MAAM,gBAAgB,UAAU,MAAM,QAAQ,WAAS,WAC9D,KAAS,SAAS,EAAO,KAAM,KAAI,MAAK,IACzC,yBAAM,UAAW,EAAQ,aAAW,UAAG,EAAK,gBAGpD,cAAC,KAAO,IACJ,MACI,cAAC,IAAM,SAAQ,UACX,eAAC,IAAU,IAAC,QAAQ,SAAO,wBAAY,EAAK,YAC/B,UAGrB,cAAC,IAAU,IACP,eAAa,EACb,UAAW,EAAQ,aACnB,MAAM,UACN,QAAS,WAAY,SAAU,EAAS,EAAnB,KAA6B,aAElD,cAAC,KAAiB,cAKlC,QAAS,EAAO,MAI/B,E,mNEtDK,GAAY,aCpCH,SAAC,GAA6B,MAAC,CAC1C,KAAM,CACF,OAAQ,EACR,QAAS,EAAM,QAAQ,IAE3B,YAAa,CACT,QAAS,CACL,WAAY,OACZ,OAAQ,SAGhB,YAAa,CACT,WAAY,YAEhB,KAAM,CACF,SAAU,MACV,WAAY,SACZ,SAAU,SACV,aAAc,WACd,aAAc,EAAM,QAAQ,IAEhC,SAAU,CACN,gBAAiB,UACjB,MAAO,EAAM,QAAQ,QAAQ,aAC7B,QAAS,QAEb,aAAc,CACV,SAAU,GAEd,OAAQ,CACJ,QAAS,QAEb,WAAY,CACR,KAAM,WAEV,YAAa,CACT,UAAW,QACX,KAAM,OAEV,SAAU,CACN,SAAU,GAEd,YAAa,CACT,KAAM,MAIN,MAAO,EAAM,QAAQ,KAAK,MAE9B,WAAY,GACZ,aAAc,CACV,MAAO,KAAI,MAEf,UAAW,CACP,MAAO,KAAO,MAElB,YAAa,CACT,MAAO,KAAM,MAEjB,YAAa,CACT,QAAS,OACT,SAAU,QAEd,MAAO,CACH,UAAW,EAAM,QAAQ,IAE7B,kBAAmB,CACf,QAAS,QAEb,aAAc,CACV,WAAY,EAAM,QAAQ,GAC1B,SAAU,GAEd,aAAc,GACd,gBAAiB,CAEb,aAAc,oBAAa,EAAM,QAAQ,KAAK,MAC9C,QAAS,EAAM,QAAQ,IAE3B,WAAY,GACZ,kBAAmB,CAEf,QAAS,EAAM,QAAQ,IAE3B,gBAAiB,CACb,KAAM,MACN,aAAc,EAAM,QAAQ,GAC5B,gBAAiB,UACjB,OAAQ,EAAM,QAAQ,EAAG,IACzB,OAAQ,qBACR,QAAS,EAAM,QAAQ,GACvB,SAAU,MACV,SAAU,IACV,MAAO,CACH,WAAY,SACZ,SAAU,SACV,aAAc,aAGtB,SAAU,CACN,WAAY,EAAM,QAAQ,GAC1B,gBAAiB,EAAM,QAAQ,QAAQ,MACvC,MAAO,SAQX,QAAS,CACL,QAAS,EAAM,QAAQ,IAE3B,UAAW,CACP,MAAO,OAEP,QAAS,QApHjB,IDsSe,GArPuB,SAAC,G,IACnC,EAAO,UACP,EAAO,UACP,EAAY,eACZ,EAAU,aACV,EAAO,UACP,EAAY,eACZ,EAAW,cACX,EAAe,kBAET,EAAU,KAEV,EAAwB,mBAA4B,MAAnD,EAAO,KAAE,EAAU,KACpB,EAA4B,oBAAkB,GAA7C,EAAS,KAAE,EAAY,KAExB,EAAe,EAAY,EAAQ,IAEnC,EAAc,CAChB,CAAE,QAAS,2BAA4B,KAAM,cAAC,KAAS,CAAC,UAAW,EAAQ,YAAe,SAAU,SACpG,CAAE,QAAS,sBAAuB,KAAM,cAAC,KAAO,CAAC,UAAW,EAAQ,cAAiB,SAAU,WAC/F,CACI,QAAS,sBACT,KAAM,cAAC,KAAU,CAAC,UAAW,EAAQ,eACrC,SAAU,eAIZ,GAAS,EAAQ,OAAS,IAAI,QAAO,SAAC,EAAK,G,MACvC,EAAQ,EAAY,MAAK,SAAC,G,IAAE,EAAO,UAAO,SAAK,IAAI,MAAM,EAAQ,IACvE,gBACO,KAAG,MACL,EAAK,KAAG,SACF,GAAI,CACP,KAAM,EAAQ,EAAM,KAAO,cAAC,KAAmB,CAAC,UAAW,EAAQ,aACnE,SAAU,EAAQ,EAAM,SAAW,eAAY,GAG1D,GAAE,IACG,EAAW,EAAQ,mBACnB,EAAQ,EAAQ,SAAS,MAAK,SAAC,GAAM,SAAE,KAAO,EAAT,QAAyB,IAC9D,EAAY,EAAQ,EAAM,KAAO,UAEjC,EAAiB,OAAO,KAAK,EAAQ,MAAM,MAAK,SAAC,GAAM,wBAAE,aAA+B,IAE9F,OACI,eAAC,IAAM,IACH,QAAS,EACT,MAAI,EACJ,SAAS,KACT,WAAS,EACT,UAAW,EAAQ,KACnB,QAAS,CACL,YAAa,EAAQ,cACxB,WAED,cAAC,GAAW,CACR,KAAM,EACN,SAAU,OAAO,SAAS,KAC1B,YAAa,WAAY,YAAmB,IAGhD,eAAC,IAAW,IAAC,mBAAiB,EAAC,UAAW,EAAQ,UAAQ,WACtD,yBAAK,UAAW,EAAQ,cAAY,WAChC,cAAC,KAAO,IAAC,MAAO,cAAC,IAAU,IAAC,QAAQ,SAAO,UAAE,EAAQ,SAAkB,UACnE,cAAC,IAAU,IAAC,QAAQ,KAAK,UAAU,MAAM,UAAW,aAAK,EAAQ,KAAM,EAAQ,cAAY,UACtF,EAAQ,WAGjB,wBAAK,UAAW,EAAQ,WAAS,UAC7B,wBAAK,UAAW,EAAQ,UAAQ,UAC5B,eAAC,IAAU,IAAC,QAAQ,UAAU,MAAM,UAAU,UAAU,OAAK,kBACrD,yBAAM,UAAW,EAAQ,aAAW,UAAG,EAAQ,oBAKlE,EACG,8BACI,cAAC,IAAU,iBAAY,QAAQ,UAAW,EAAQ,YAAa,QAAS,EAAS,KAAK,SAAO,UACzF,cAAC,IAAS,SAGlB,SAER,eAAC,IAAa,IAAC,UAAQ,cACnB,yBAAK,UAAW,aAAK,EAAQ,cAAY,WACrC,yBAAK,UAAW,EAAQ,QAAM,WAC1B,yBAAK,UAAW,EAAQ,YAAU,WAC9B,eAAC,IAAU,IAAC,QAAQ,UAAU,UAAU,MAAM,MAAM,WAAS,WACzD,kDAA6B,KAAE,iCAAS,IAAmB,KAAG,GAAS,EAAM,GAAE,QAEnF,eAAC,IAAU,IAAC,QAAQ,UAAU,UAAU,MAAM,MAAM,WAAS,WACzD,6CAAwB,KAAG,KAAO,EAAQ,UAAW,KAAK,UAAS,KAClE,KAAO,EAAQ,UAAW,KAAK,OAAO,OAAM,QAEjD,eAAC,IAAU,IAAC,QAAQ,UAAU,UAAU,MAAM,MAAM,WAAS,WACzD,6CAAwB,KAAG,KAAO,EAAQ,UAAW,KAAK,UAAS,KAClE,KAAO,EAAQ,UAAW,KAAK,OAAO,OAAM,QAGjD,eAAC,IAAU,IAAC,QAAQ,UAAU,UAAU,MAAM,MAAM,WAAS,WACzD,sDACA,cAAC,GAAa,CAAC,KAAM,EAAQ,WAEjC,eAAC,IAAU,IAAC,QAAQ,UAAU,UAAU,MAAM,MAAM,WAAS,WACzD,qDAAgC,IAAE,IACjC,EAAQ,WAAa,EAAQ,WAAa,EACrC,KAAS,EAAQ,WACjB,wBAGd,wBAAK,UAAW,EAAQ,aAAW,UAC/B,eAAC,KAAW,IAAC,MAAM,WAAS,WACvB,GACG,cAAC,GAAU,IACP,MAAM,MACN,IAAK,GACD,CAAE,QAAO,GAAE,CACf,SAAU,CACN,QAAS,WAIrB,cAAC,KAAM,IACH,QAAQ,OACR,QAAS,WAAY,YAAkB,EACvC,MAAO,CACH,OAAQ,WAEZ,UAAW,cAAC,IAAS,KAAG,qBAK5B,cAAC,GAAc,IACX,MAAM,YACF,CAAE,QAAO,EAAE,aAAY,EAAE,gBAAe,GAAE,CAC9C,SAAU,CACN,QAAS,sBAO5B,GACG,gCACI,cAAC,IAAU,IAAC,UAAW,EAAQ,MAAO,MAAM,UAAU,UAAU,MAAM,QAAQ,aAAW,2BAGzF,cAAC,IAAU,IAAC,MAAM,gBAAgB,QAAQ,SAAO,UAC5C,EAAQ,KAAK,SAI1B,cAAC,IAAU,IAAC,UAAW,EAAQ,MAAO,MAAM,UAAU,QAAQ,aAAW,wBAGzE,cAAC,IAAO,IACR,wBAAK,UAAW,EAAQ,aAAW,UAC9B,OAAO,KAAK,EAAQ,MAChB,QAAO,SAAC,GAAM,YAAC,eAAe,QAAQ,EAAE,cAAqB,IAC7D,KAAI,SAAC,EAAS,GACX,IAAI,EAAiC,EAAQ,KAAK,GAQlD,OAP8C,IAA1C,EAAQ,KAAK,GAAS,QAAQ,UAC9B,EACI,cAAC,KAAI,IAAC,KAAM,EAAQ,KAAK,GAAU,OAAO,UAAQ,UAC7C,EAAQ,KAAK,OAKtB,cAAC,KAAO,IAEJ,UAAU,SACV,MACI,eAAC,IAAM,SAAQ,WACX,cAAC,IAAU,IAAC,QAAQ,QAAQ,UAAU,OAAK,UACvC,iCAAS,OAEb,cAAC,IAAU,IAAC,QAAQ,QAAQ,UAAU,OAAK,UACtC,SAEQ,UAGrB,yBAAK,UAAW,EAAQ,iBAAe,WACnC,cAAC,IAAU,IAAC,QAAQ,UAAU,UAAU,MAAM,MAAM,eAAa,UAC7D,iCAAS,OAGb,cAAC,IAAU,IAAC,QAAQ,UAAU,UAAU,MAAM,MAAM,eAAa,UAC5D,WAnBJ,iBAAU,GAwB1B,WAGZ,GACG,qCACI,cAAC,IAAU,IAAC,UAAW,EAAQ,MAAO,MAAM,UAAU,QAAQ,aAAW,qBAGzE,cAAC,IAAO,IACR,cAAC,KAAQ,IACL,UAAW,EAAQ,SACnB,gBAAiB,CAAC,KAClB,kBAAgB,EAChB,oBAAqB,cAAC,KAAc,CAAC,MAAM,YAC3C,kBAAmB,cAAC,KAAgB,CAAC,MAAM,aAAY,UAEtD,EAAS,KAAI,SAAC,EAAI,GAAQ,OACvB,cAAC,GAAe,CACZ,QAAS,EAET,OAAQ,mBAAY,GACpB,KAAM,EACN,SAAU,EACV,UAAW,GAJN,mBAHc,GAS1B,cAKjB,cAAC,KAAO,IACJ,KAAM,QAAQ,GACd,SAAU,EAAU,EAAQ,GAAK,KACjC,QAAS,WAAY,cAAgB,EACrC,aAAc,CACV,SAAU,SACV,WAAY,UAEhB,gBAAiB,CACb,SAAU,MACV,WAAY,WACf,UAED,cAAC,IAAU,IAAC,UAAW,EAAQ,SAAO,UAAG,EAAU,EAAQ,GAAK,YAI/E,E,wOEhSK,GAAY,aAAW,SAAC,GAAU,MAAC,CACrC,cAAe,CAGX,OAAQ,OACR,QAAS,OACT,cAAe,UAEnB,OAAQ,CACJ,SAAU,GAEdC,KAAM,CACF,QAAS,EAAM,QAAQ,EAAG,EAAG,EAAG,IAEpC,cAAe,CACX,QAAS,EAAM,QAAQ,GACvB,UAAW,UAEf,KAAM,GACR,IAwCa,GAjCsB,SAAC,G,IAAE,EAAK,QAAE,EAAM,SAC3C,EAAU,KAEhB,OACI,eAAC,IAAS,IAAC,UAAW,EAAQ,cAAe,SAAS,MAAI,WACtD,qBAAK,UAAW,EAAQ,SACxB,eAAC,KAAK,IAAC,UAAW,EAAQ,MAAI,WAC1B,wBAAK,UAAW,EAAQ,eAAa,UACjC,qBAAK,UAAW,EAAQ,KAAM,IAA8B,uBAAwB,IAAI,YAE5F,eAAC,IAAU,IAAC,WAAS,EAAC,QAAQ,SAAO,yBACtB,iCAAS,IAAe,iDAEvC,cAAC,IAAU,IAAC,WAAS,EAAC,QAAQ,SAAO,UAE7B,uIAGR,cAAC,KAAM,IACH,QAAQ,YACR,QAAS,EACT,MAAM,UACN,WAAS,EACT,KAAK,QACL,UAAW,cAAC,KAAY,KAAG,2BAKnC,qBAAK,UAAW,EAAQ,YAGnC,E,kPCrDK,GAAY,aAAW,SAAC,GAAU,MAAC,CACrC,KAAM,CACF,WAAY,EAAM,QAAQ,IAE9B,SAAU,CACN,QAAS,OACT,WAAY,EAAM,QAAQ,MAAM,KAChC,MAAO,EAAM,QAAQ,MAAM,cAE/B,YAAa,GACb,KAAM,CACF,YAAa,EAAM,QAAQ,GAC3B,SAAU,GAEhB,IAiDa,GA1C0B,SAAC,G,IAAE,EAAO,UAAE,EAAO,UAClD,EAAU,KAChB,OACI,eAAC,IAAM,IACH,QAAS,EACT,MAAI,EACJ,SAAS,KACT,WAAS,EACT,UAAW,EAAQ,KACnB,QACI,IAEC,WAGL,eAAC,IAAW,IAAC,mBAAiB,EAAC,UAAW,EAAQ,UAAQ,WACtD,cAAC,KAAS,CAAC,MAAM,YACjB,cAAC,IAAU,IAAC,UAAW,EAAQ,MAAI,iCAEvC,cAAC,IAAa,IAAC,UAAQ,aAClB,EACG,eAAC,IAAU,IAAC,QAAQ,QAAQ,UAAU,MAAM,MAAM,WAAS,WACtD,wCACD,iCAAS,EAAQ,OAAc,IAAE,+DAChC,kCAGL,cAAC,IAAU,IAAC,QAAQ,QAAQ,UAAU,MAAM,MAAM,WAAS,UAEnD,uHAKhB,cAAC,KAAa,UACV,cAAC,KAAM,IAAC,QAAS,EAAS,MAAM,WAAS,UACpC,eAKpB,E,ujDCnEK,GAAU,SAAC,EAAc,GAAgB,iBAAI,EAAI,YAAR,EAAiB,EAC1D,GAAe,SAAC,EAAI,GACtB,OAAQ,GAAM,EAAK,KAAK,MAAc,IAAN,CACnC,EACK,GAAU,SAAO,GAAU,2C,mDAChB,SAAM,KAAY,Q,OAC/B,SADa,SACD,QAAO,SAAC,GAAM,aAAE,QAAQ,WAAI,EAAE,KAAU,K,MACvD,EA2Fc,GAtFX,SAAY,EAAY,GAAxB,WAQA,WAAQ,iD,+DAES,OADb,KAAI,MAAM,WAAI,KAAK,GAAE,4BACR,GAAM,GAAQ,KAAK,K,OAA1B,EAAO,SACJ,EAAM,E,wBAAG,EAAM,EAAK,QACnB,EAAM,EAAK,GACL,GAAM,KAAY,QAA2B,KAF1B,M,cAEzB,EAAM,SACR,GAAgB,OAAH,QAAG,IAAH,OAAG,EAAH,EAAK,GAAI,KAAK,MAC3B,KAAI,MAAM,WAAI,KAAK,GAAE,sDAA8C,IACnE,GAAM,KAAY,WAAW,KAF7B,M,OAEA,S,wBAL6B,I,6BAQxC,EAQD,SAAM,SAAU,EAAa,G,YAAA,c,0FAEZ,OADP,EAAS,GAAQ,KAAK,GAAI,GACnB,GAAM,KAAY,QAAqB,GAAQ,OAAM,SAAC,GAC/D,KAAI,MAAM,yBAA0B,EACvC,K,cAFK,EAAO,WAGD,EAAK,GAAK,EAAK,GACnB,GAAa,EAAK,GAAI,KAAK,MAC3B,KAAI,MAAM,WAAI,KAAK,GAAE,oDAA4C,IACjE,GAAM,KAAY,WAAW,KAF7B,MADJ,M,OAII,OADA,SACA,GAAO,M,cAEP,KAAI,MAAM,WAAI,KAAK,GAAE,kCAA0B,KAChC,IAAX,QAAiB,GAAM,KAAY,QAAQ,EAAM,SAAO,GAAI,CAAE,GAAI,KAAK,U,OAAtD,S,iBACrB,MAAO,CAAC,EAAD,EAAK,G,0BAEb,SAAO,M,uBACjB,EAOD,SAAM,SAAI,EAAa,GACnB,IAAM,EAAS,GAAQ,EAAK,GAAI,GAC1B,EAAmB,CACrB,GAAI,KAAK,MACT,EAAG,GAEP,OAAO,KAAY,QAAQ,EAAQ,GAAK,MAAK,WACzC,KAAI,MAAM,WAAI,EAAK,GAAE,kCAA0B,GAClD,GACJ,EAMD,SAAM,SAAC,GAEH,OADA,KAAI,MAAM,WAAI,EAAK,GAAE,uCAA+B,IAC7C,KACF,WAAW,GAAQ,EAAK,GAAI,IAC5B,OAAM,WAEN,IACA,MACR,EAID,WAAQ,iD,2DAES,OADb,KAAI,MAAM,WAAI,KAAK,GAAE,4BACR,GAAM,GAAQ,KAAK,K,OAChC,IADM,EAAO,SACJ,EAAM,EAAG,EAAM,EAAK,OAAQ,IACjC,KAAY,WAAW,EAAK,I,gBAEnC,EAlFG,KAAK,GAAK,EACV,KAAK,IAAM,CACd,E,ujDCmEU,GA5EK,SAAC,EAAuB,GAClC,MAAgC,mBAAsB,IAArD,EAAW,KAAE,EAAc,KAC5B,EAAiB,mBACvB,EAAe,QAAU,EAEzB,IAAM,EAAiB,uBACnB,SAAO,EAAkB,GAAY,2C,6DACjC,IAAK,EAAS,SAAO,QAAQ,W,iBAEb,O,sBAAA,GAAM,EAAK,mB,OACX,OADN,EAAM,SACA,GAAM,uBACd,GAAU,QACV,EACA,EAAQ,SACR,EAAQ,YACR,EAAQ,GACR,I,OANE,EAAM,SAQZ,IACQ,EAAI,MAAM,OAAO,KAAK,EAAI,KAAK,aAAa,YAAa,QAGhE,CAFC,MAAO,GACL,KAAI,MAAM,eAAgB,EAC7B,C,qCAED,KAAI,MAAM,eAAgB,G,6BAEjC,GACD,CAAC,EAAS,IAER,EAAkB,uBACpB,SAAC,GACG,IAAK,EAAS,OAAO,QAAQ,UAiC7B,OAhCqB,SAAf,IACF,SACK,kBACA,MAAK,SAAC,GACH,iCACI,GAAU,QACV,EACA,EAAQ,SACR,EAAQ,YACR,EAAQ,GACX,IAEJ,MAAK,SAAC,G,MACH,IACQ,EAAI,OAAS,EAAI,KAAK,YAAY,cAClC,EAAe,KAAE,OAAO,EAAe,SAAS,SAAC,EAAK,GAAQ,WAAQ,EAAR,EAAkB,KAChF,OAAO,KAAK,EAAI,KAAK,YAAY,YAAa,WAE9C,EAAc,SACP,EAAe,WAAO,MACxB,EAAQ,IAAK,EAAI,KAAO,EAAI,KAAK,YAAY,aAAe,KAAK,MAAK,KAE3E,WAAW,EAAc,KAIhC,CAFC,MAAO,GACL,KAAI,MAAM,eAAgB,EAC7B,CACJ,IACA,OAAM,SAAC,GACJ,KAAI,MAAM,eAAgB,EAC7B,GAAC,CAEH,EACV,GACD,CAAC,EAAS,IAGd,MAAO,CACH,YAAa,EAAe,QAC5B,eAAc,EACd,gBAAe,EAEtB,E,mNCrDc,GA7BI,SAAC,EAAsB,GAChC,MAAwB,qBAAvB,EAAO,KAAE,EAAU,KAClB,EAAc,cAAL,UACX,EAAiB,mBAuBvB,OAtBA,EAAe,QAAU,EAEzB,qBAAU,WACN,GAAK,KAAa,EAAU,OAAS,GACrC,IACI,IAAM,EAAkB,OAAR,QAAQ,IAAR,OAAQ,EAAR,EAAU,MAAK,SAAC,GAAM,SAAE,cAAF,CAA2B,KAC7D,GAAa,EAAe,SAAW,EAAe,QAAQ,cAAgB,EAAQ,cAEtF,EAAQ,YAAc,EAAQ,YAAY,KAAI,SAAC,EAAG,GAAQ,gBACnD,GAAC,CACJ,MAAO,GAAoB,EAAM,GAFqB,SAGxD,IACF,EAAe,QAAU,EACzB,KAAI,MAAM,aAAc,CAAE,UAAS,EAAE,QAAO,EAAE,SAAQ,IACtD,EAAW,GACP,GAAiB,EAAgB,GAI5C,CAFC,SACE,MACH,CACJ,GAAE,CAAC,EAAU,EAAW,IAElB,CACV,E,miDCnBK,GAAa,CAAE,SAAS,EAAO,aAAa,GA+DnC,GA7DI,SACf,EACA,EACA,EACA,EACA,QAFA,mBACA,cAGQ,MAAc,cAAL,UACX,EAA4B,mBAA0B,IAArD,EAAS,KAAE,EAAY,KACxB,EAAsB,iBAAwB,IACpD,EAAoB,QAAU,EAC9B,IAAM,EAAkB,kBAAO,GA+C/B,OA7CA,qBAAU,WACN,IAAK,GAAa,EAAU,OAAS,EACjC,EAAa,SAGjB,IACI,IAAK,IAAY,EAAW,OAC5B,GAAI,GAAa,EAAU,SAAW,IAAc,EAAU,QAAQ,GAAI,OAC1E,IAAM,EAAkB,EAAQ,YAEhC,YAAW,WACF,EAAgB,SAAY,EAAU,SACvC,EAAY,SAAM,EAAoB,SAAO,CAAE,SAAS,IAC/D,GAAE,KACH,EAAK,kBACA,MAAK,SAAC,GAAQ,4BAAW,GAAU,QAAmB,EAAK,EAAW,EAAiB,EAAzE,EAAqF,IACnG,MAAK,SAAO,GAAG,2C,gEACZ,EAAgB,SAAU,EAC1B,KAAI,MAAM,2BAA4B,GAElC,EAAI,MACJ,EAAI,KAAK,SACT,EAAoB,SACpB,EAAoB,QAAQ,UACD,QAA3B,IAAoB,eAAO,eAAE,QAAQ,MAAO,EAAI,KAAK,QAAQ,GAE7D,IANA,M,cAOO,EAAI,MACX,EAAa,CAAE,QAAS,EAAI,KAAK,QAAS,SAAS,EAAO,aAAa,IACnE,EAAiB,GAAM,EAAgB,EAAI,KAAK,UAAhD,OAFG,M,OAEc,S,2CAErB,EAAa,CAAE,aAAS,EAAW,SAAS,EAAO,aAAa,IAC5D,EAAiB,GAAM,EAAgB,OAAvC,M,OAAiB,S,iCAE5B,IACA,OAAM,SAAC,GACJ,EAAgB,SAAU,EAC1B,EAAa,CAAE,aAAS,EAAW,SAAS,EAAO,aAAa,IAChE,KAAI,MAAM,2BAA4B,EACzC,GAGR,CAFC,SACE,MACH,CACJ,GAAE,CAAC,EAAW,EAAS,IAEjB,CACV,E,kBCzDY,GAAc,e,2OCRrB,GAAqB,CACvB,QAAS,CACL,QAAS,CACL,KAAM,KAAO,MAEjB,UAAW,CACPC,KAAM,KAAO,KACb,aAAc,WAElB,KAAM,KASR,GAAQ,SACP,IAAI,CACP,QAAO,SACA,GAAK,SAAO,CACf,KAAM,WAIC,IACX,KAAM,aAAY,IAClB,SAAU,aAAY,K,UClCb,GAAO,WACZ,GACA,KAAQ,WAAW,GAAiB,CAEhC,WAAW,IAEd,KAAI,MAAM,sCAClB,EAEY,GAAkB,SAAC,GAC5B,KAAQ,SAAS,GAAQ,OAAO,SAAS,SAAW,OAAO,SAAS,KACvE,EAEY,GAAQ,SAAC,EAAkB,EAAgB,GACpD,KAAQ,MAAM,CACV,SAAQ,EACR,OAAM,EACN,MAAK,GAEZ,E,SChBYC,GAA4C,uBAE5CC,GAP6B,CACtCC,MAAO,GACPC,UAAW,GAKFF,GAEGG,kC,SCKVC,GAAYC,aAAW,SAACjB,GAAD,MAAY,CACrCS,KAAM,CACFV,QAASC,EAAMC,QAAQ,GACvBiB,OAAQlB,EAAMC,QAAQ,IAE1BkB,SAAU,CACNZ,KAAM,WAEVa,WAAY,CAERb,KAAM,UACNc,QAAS,OACTC,UAAW,QACXC,cAAe,UAEnBC,UAAW,CAEPpB,YAAaJ,EAAMC,QAAQ,GAC3BM,KAAM,MACNc,QAAS,OACTC,UAAW,QACXC,cAAe,UAEnBE,eAAgB,CAEZJ,QAAS,OACTC,UAAW,SAEfI,OAAQ,CACJC,SAAU,GAEdC,SAAU,CAAC,EACXC,SAAU,CACNR,QAAS,QAEbS,GAAI,CACAT,QAAS,OACTU,MAAO,QAEXC,IAAK,CACDC,WAAYjC,EAAMkC,QAAQD,WAAW3C,SAEzC6C,OAAQ,CAAC,EACTC,SAAU,CACNC,OAAQrC,EAAMC,QAAQ,KACtBqC,aAActC,EAAMC,QAAQ,GAAK,EACjCsC,MAAO,OACPC,OAAO,iBACPP,WAAY,OACZQ,YAAazC,EAAMC,QAAQ,IAE/ByC,aAAc,CAEVpB,UAAW,SACXS,MAAO,QAtDc,IAmJdY,GA9EuB,SAAC,GAA6E,IAA3EC,EAA0E,EAA1EA,QAASC,EAAiE,EAAjEA,QAASC,EAAwD,EAAxDA,QAASC,EAA+C,EAA/CA,YAAaf,EAAkC,EAAlCA,IAAKgB,EAA6B,EAA7BA,gBAC5EC,EAAUjC,KACVkC,EAAeH,EAAYH,EAAQO,IAGnCC,EAAUN,EAAQO,SAASC,MAAK,SAACC,GAAD,OAAOA,EAAEJ,KAAOP,EAAQY,QAAxB,IAChCC,EAAcL,EAAUA,EAAQM,QAAQ5D,QAAO,SAAC6D,GAAD,MAAoB,eAAZA,EAAGC,IAAX,IAAoC,GAEnFC,EAAYT,EAAUA,EAAQU,KAAO,YACrCC,EAAgBN,EAAYO,KAAI,SAACC,GAAD,MAAS,CAAEC,IAAKD,EAAGH,KAAMK,IAAKvB,EAAQwB,KAAKH,EAAGH,MAA9C,GAAwD,CAAC,GAEzFO,EAAoCC,OAAOC,KAAK3B,EAAQwB,MAAQ,CAAC,GAAGI,QACtE,SAACC,EAAKP,GAAN,mBAAC,eAAmBO,GAApB,mBAA0BP,EAAIQ,cAAgB9B,EAAQwB,KAAKF,IAA3D,GACA,CAAC,GAGCS,EAAmBN,EAAS,aAAT,UAA+BR,EAA/B,cAA8CQ,EAAS,cAAqBR,EAErG,OACI,eAACe,GAAA,EAAD,CAAU1E,QAAM,EAAC2C,QAASA,EAASgC,UAAWC,aAAK,gBAAG7B,EAAQjB,IAAMA,IAApE,UACI,cAAC+C,GAAA,EAAD,UACI,eAACC,GAAA,EAAD,eAAUpC,EAAQY,UAAYZ,EAAQY,SAASyB,OAAO,EAAG,GAAzD,SAEJ,sBAAKJ,UAAW5B,EAAQ9B,SAAxB,UACI,cAAC+D,EAAA,EAAD,CAAYC,QAAQ,QAApB,SAA6BvC,EAAQkB,OACrC,sBAAKe,UAAW5B,EAAQnB,GAAxB,UACI,cAACsD,GAAA,EAAD,CAAMP,UAAW5B,EAAQb,SAAUiD,MAAOV,EAAkBW,KAAK,UAChEvB,EAAcC,KAAI,WAAeuB,GAAS,IAArBrB,EAAoB,EAApBA,IAAKC,EAAe,EAAfA,IACjBqB,EAAU1C,EAAQ2C,YAAYnC,MAAK,SAACoC,GAAD,OAAOA,EAAE5B,OAASI,CAAlB,IACnC3B,EAAQiD,GAAWA,EAAQjD,MAAQiD,EAAQjD,MAAM,KAAO,UAC9D,OACI,eAAC2C,EAAA,EAAD,CAEIL,UAAW5B,EAAQd,OACnBgD,QAAQ,UACR5C,MAAM,gBAJV,UAMKgD,EAAM,GAAK,WACZ,uBAAMI,MAAO,CAAEpD,SAAf,cAA0B4B,EAA1B,SAPJ,gBACkBoB,GASzB,UAGT,sBAAKV,UAAW5B,EAAQ7B,WAAxB,UACI,8BACI,cAAC,GAAD,CAAewE,KAAMhD,EAAQgD,SAEhChD,EAAQiD,WACL,cAACC,GAAA,EAAD,CAEIC,MACI,eAAC,IAAMC,SAAP,WACI,cAACd,EAAA,EAAD,CAAYC,QAAQ,QAApB,mBACA,eAACD,EAAA,EAAD,CAAYC,QAAQ,UAApB,sBACcc,KAAOrD,EAAQsD,UAAW,KAAKC,OAAO,OAChD,uBAFJ,iBAGmBF,KAAOrD,EAAQiD,UAAW,KAAKM,OAAO,aARrE,SAaI,cAACjB,EAAA,EAAD,CAAYL,UAAW5B,EAAQrB,SAAUuD,QAAQ,UAAU5C,MAAM,UAAjE,SACK0D,KAAOrD,EAAQiD,UAAW,KAAKM,OAAO,SAd/C,wBAmBR,qBAAKtB,UAAW5B,EAAQzB,UAAxB,SACI,cAAC,GAAD,CAAsBoB,UAASM,eAAcF,kBAAmBoD,SAAU,CAAEd,KAAM,aAEtF,qBAAKT,UAAW5B,EAAQzB,UAAxB,SACI,cAAC,GAAD,CAAYoB,QAASA,EAASyD,IAAKzF,GAAkCwF,SAAU,CAAEd,KAAM,eAItG,E,oBCxJKtE,GAAYC,aAAW,iBAAO,CAChCR,KAAM,CAAC,EACP6F,SAAU,CACN3E,SAAU,GAHW,IA2Bd4E,GApBuB,WAClC,IAAMtD,EAAUjC,KAChB,OACI,eAAC4D,GAAA,EAAD,WACI,cAACG,GAAA,EAAD,UACI,cAACyB,GAAA,EAAD,CAAUrB,QAAQ,SAAS9C,OAAQ,GAAIN,MAAO,OAElD,sBAAK8C,UAAW5B,EAAQqD,SAAxB,UACI,cAACE,GAAA,EAAD,CAAUb,MAAO,CAAEtD,OAAQ,GAAIN,MAAO,MAAOb,OAAQ,WACrD,cAACsF,GAAA,EAAD,CAAUb,MAAO,CAAEtD,OAAQ,GAAIN,MAAO,MAAOb,OAAQ,cAEzD,cAACuF,GAAA,EAAD,UACI,cAACC,EAAA,EAAD,CAAYC,KAAK,MAAMC,UAAQ,EAA/B,SACI,cAACJ,GAAA,EAAD,CAAUrB,QAAQ,SAAS9C,OAAQ,GAAIN,MAAO,WAKjE,ECpBKf,GAAYC,aAAW,SAACjB,GAAD,MAAY,CACrCS,KAAM,CACFV,QAASC,EAAMC,QAAQ,GACvBiB,OAAQlB,EAAMC,QAAQ,IAHD,IAyGd4G,GAvFwB,SAAC,GAS1B,IARVC,EAQS,EARTA,KACAhE,EAOS,EAPTA,QACAiE,EAMS,EANTA,QACAC,EAKS,EALTA,aACAC,EAIS,EAJTA,gBACAlE,EAGS,EAHTA,YACAmE,EAES,EAFTA,SACAlE,EACS,EADTA,gBAEMC,EAAUjC,KAGhB,OAAI+F,EAEI,eAACI,GAAA,EAAD,CAAOtC,UAAW5B,EAAQxC,KAA1B,UACI,cAAC,KAAD,CACIqG,KAAM,CACFM,MAAO,EACPC,WAAYL,EAAalG,UACzBwG,SAAUN,EAAanG,OAE3BkG,QAASA,EACTQ,sBAAuB,SAACC,GAAD,OACnBP,EAAgB,2BACTD,GADQ,IAEXlG,UAAW0G,IAHI,IAO3B,cAACC,EAAA,EAAD,IACA,cAACC,GAAA,EAAD,UACKC,MAAMX,EAAanG,OAAS,IACxB+G,KAAK,MACL5D,KAAI,SAAC6D,EAAGtC,GAAJ,OACD,cAAC,GAAD,oBAAoCA,GADnC,SAQpBuB,GAASA,EAAKgB,UAAqC,IAAzBhB,EAAKgB,SAASC,OASzC,eAACZ,GAAA,EAAD,CAAOtC,UAAW5B,EAAQxC,KAA1B,UACI,cAAC,KAAD,CACIqG,KAAM,CACFM,MAAON,EAAKM,MACZC,WAAYL,EAAalG,UACzBwG,SAAUN,EAAanG,OAE3B0G,sBAAuB,SAACC,GAAD,OACnBP,EAAgB,2BACTD,GADQ,IAEXlG,UAAW0G,IAHI,IAO3B,cAACC,EAAA,EAAD,IACA,cAACC,GAAA,EAAD,UACKZ,GACGA,EAAKgB,SAAS9D,KAAI,SAACgE,EAAGC,GAClB,IAAMrF,EAAU,IAAIsF,UAAQF,GAC5B,OACI,cAAC,GAAD,CAEIhG,IAAKmG,QAAQF,EAAM,GACnBrF,QAASA,EACTE,QAASA,EACTC,YAAaA,EACbC,gBAAiBA,EACjBH,QAAS,kBAAYqE,EAASpE,EAAQsF,YAAaxF,EAAQO,GAAlD,GAPb,iBACmB8E,GAS1B,SArCT,cAACd,GAAA,EAAD,CAAOtC,UAAW5B,EAAQxC,KAA1B,SACI,qDAwCf,EClGK4H,GAAsC,SAAC,GAS/B,IARVC,EAQS,EARTA,gBACAjC,EAOS,EAPTA,IACAa,EAMS,EANTA,SACApE,EAKS,EALTA,QACAkE,EAIS,EAJTA,aACAC,EAGS,EAHTA,gBACAlE,EAES,EAFTA,YACAC,EACS,EADTA,gBAEA,EAAkCuF,oBAAkB,GAApD,mBAAOC,EAAP,KAAkBC,EAAlB,KACA,EAA8BF,qBAA9B,mBAAOG,EAAP,KAAgBC,EAAhB,KACA,EAA4BJ,qBAA5B,mBAAOK,EAAP,KAAeC,EAAf,KAiCA,OAhCID,GAAQE,KAAIC,MAAMH,GAEtBI,qBAAU,WAAM,sDAEZ,iGACSlG,EADT,wDAEI2F,GAAa,GAFjB,SAGsBH,IAHtB,cAGUW,EAHV,OAIIH,KAAII,MAAM,iBAAkB,CAAE7C,MAAK4C,MAAKnG,QAASA,EAAQsF,YAAapB,iBAJ1E,SAKUmC,iBAAO9C,EAAK4C,EAAKnG,EAAQsF,YAAapB,GACvCoC,MAAK,YAAuB,IAApBtC,EAAmB,EAAnBA,KAAM8B,EAAa,EAAbA,OACX,IACI,GAAIA,GAAUA,EAAOb,OAAS,EAC1Bc,EAAUD,GACVH,GAAa,QACV,GAAI3B,EAAM,CACb,IAAMuC,EAAavC,EAAKqC,OACxBR,EAAWU,GACXZ,GAAa,EAChB,CAGJ,CAFC,SACEA,GAAa,EAChB,CACJ,IACAa,OAAM,SAACC,GACJd,GAAa,GACbI,EAAU,CAACU,GACd,IAvBT,2CAFY,wBACZZ,OAAWa,GADC,mCA2BZC,EACH,GAAE,CAAC3G,EAASuD,EAAKW,EAAcsB,IAG5B,cAAC,GAAD,CACIxB,KAAM4B,EACN3B,QAASyB,EACTtB,SAAUA,EACVpE,QAASA,EACTkE,aAAcA,EACdC,gBAAiBA,EACjBlE,YAAaA,EACbC,gBAAiBA,GAG5B,EACDqF,GAAkB,iBAAsB,EACzBA,U,4DClETrH,GAAYC,aAAW,SAACjB,GAAD,MAAY,CACrCS,KAAM,CACFY,QAAS,QAEbqI,aAAc,CACVnJ,KAAM,UACN8B,OAAQrC,EAAMC,QAAQ,GACtBwC,YAAazC,EAAMC,QAAQ,IAE/B0J,mBAAoB,CAChBrI,UAAW,UAEfsI,mBAAoB,CAAC,EACrBC,aAAc,CACVtJ,KAAM,WAEVuJ,cAAe,CACXvJ,KAAM,WAEVwJ,WAAY,CACR1I,QAAS,QAEb2I,uBAAwB,CACpBzJ,KAAM,UACNkC,YAAazC,EAAMC,QAAQ,IAE/BgK,wBAAyB,CACrB1J,KAAM,WAEV2J,eAAgB,CACZvI,SAAU,GAGdwI,gBAAiB,CAAC,EAClBC,cAAe,CACX/H,OAAQrC,EAAMC,QAAQ,IAnCD,IA2MdoK,GA9J4B,SAAC,GAA4C,IAA1CC,EAAyC,EAAzCA,IAAKC,EAAoC,EAApCA,QAASC,EAA2B,EAA3BA,cAClDvH,EAAUjC,KAChB,cAAqBsJ,EAArB,GAAOG,EAAP,KAAaC,EAAb,KACA,EAAsBnC,mBAAwB,MAA9C,mBAAOgB,EAAP,KAAYoB,EAAZ,KAEMC,EAASH,GAAQA,EAAK1C,OAAS,GAAKwC,EAAQjH,MAAK,SAACuH,GAAD,OAAOA,EAAE/G,KAAKY,gBAAkB+F,EAAK/F,aAArC,IACjDoG,EAAaF,GAAUA,EAAOG,SAAWH,EAAOG,MAAMzH,MAAK,SAACuH,GAAD,OAAOA,EAAE/G,KAAKY,eAAiBmG,EAAE/G,KAAKiE,OAAS,CAA/C,IAwC3DiD,EAAoBzL,KAAE0L,UAtCX,SAACC,EAAeC,GAE7B,IAAMjH,EAAMkH,OAAOF,GACb/G,EAAMiH,OAAOD,GACnB,GAAIhH,GAAOA,EAAI4D,OAAS,GAAK6C,IAAWE,EAAY,CAChD,IAAMO,EAAaT,EAAOU,WAC1B,GAAID,GAAcA,EAAWtD,OAAS,EAAG,CACrC,IAAMwD,EAAiB,GAUvB,GATAF,EAAWG,SAAQ,SAACC,GAEhB,IAAMC,EAAU,IAAIC,OAAOF,IACTtH,EAAIyH,MAAMF,IAExBH,EAAKM,KAAKJ,EAEjB,IAEGF,EAAKxD,OAAS,EAUd,YAToB,IAAhBwD,EAAKxD,OAAc4C,EAAO,8BAAD,OAA+BY,EAAK,GAApC,MAEzBZ,EACIY,EAAK/G,QACD,SAACC,EAAK8E,EAAKhE,GAAX,OAAmBd,GAAOc,EAAM,EAAI,QAAU,IAAMgE,CAApD,GACA,gCAMnB,CACJ,CACDoB,EAAO,MACP7B,KAAII,MAAM,kBAAmB,CAAChF,EAAKC,IAC/BD,EAAIQ,gBAAkB+F,EAAK/F,eAAiBP,EAAIO,gBAAkBgG,EAAKhG,eACvE8F,EAAc,CAACtG,EAAKC,GAE3B,GAE8C,KAEzC2H,EAAiB,SAACC,GACJ,KAAZA,GAAkBtB,GAAQA,EAAK1C,OAAS,IACxCe,KAAII,MAAM,iBACVsB,EAAc,CAACC,EAAMC,IAAO,GAEnC,EAED,OACI,sBAAK7F,UAAW5B,EAAQxC,KAAxB,UACI,cAACuL,GAAA,EAAD,CAAanH,UAAW5B,EAAQyG,aAAhC,SACI,eAACuC,GAAA,EAAD,CACIC,MAAOtB,EAASA,EAAO9G,KAAO,WAC9BqI,WAAY,CACRtH,UAAW5B,EAAQmH,eAEvBgC,SAAU,SACNC,GADM,OAKC7B,EAAc,CAACY,OAAOiB,EAAMC,OAAOJ,OAAQ,KAAK,EALjD,EALd,UAYI,cAACK,EAAA,EAAD,CAA8BL,MAAM,WAApC,SACI,cAAChH,EAAA,EAAD,CAAYL,UAAW5B,EAAQ0G,mBAAoBpH,MAAM,gBAAzD,SACI,2CAFR,eAKCgI,EAAQvG,KAAI,WAAWwI,GAAX,IAAG1I,EAAH,EAAGA,KAAH,OACT,cAACyI,EAAA,EAAD,CAA8BL,MAAOpI,EAArC,SACI,cAACoB,EAAA,EAAD,CAAYL,UAAW5B,EAAQ2G,mBAA/B,SAAoD9F,KADxD,eAAuB0I,GADd,SAOpB1B,EACG,cAACkB,GAAA,EAAD,CAAanH,UAAW5B,EAAQ6G,cAAhC,SACI,cAACmC,GAAA,EAAD,CACIC,MAAOxB,EACPyB,WAAY,CACRtH,UAAW5B,EAAQmH,eAEvBgC,SAAU,SACNC,GADM,OAKC7B,EAAc,CAACC,EAAMW,OAAOiB,EAAMC,OAAOJ,SAAS,EALnD,EALd,SAYKtB,GACGA,EAAOG,OACPH,EAAOG,MAAM/G,KAAI,WAAewI,GAAS,IAArBrJ,EAAoB,EAApBA,GAAIW,EAAgB,EAAhBA,KACpB,OACI,eAACyI,EAAA,EAAD,CAAU1H,UAAW5B,EAAQ8G,WAAmCmC,MAAO/I,EAAvE,UACI,cAAC+B,EAAA,EAAD,CAAYL,UAAW5B,EAAQiH,eAA/B,SAAgDpG,IAC/CA,IAASX,GACN,cAAC+B,EAAA,EAAD,CAAYC,QAAQ,UAAUN,UAAW5B,EAAQkH,gBAAjD,SACKhH,MAJb,kBAAyDqJ,GAShE,QAGb5B,EACA,cAAC6B,EAAA,EAAD,CACI1D,QAASQ,EACTlE,MAAOkE,EACP3C,UAAW6D,GAAwB,IAAhBA,EAAK1C,OACxB2E,YAAY,MACZC,aAAcjC,EACd7F,UAAW5B,EAAQ4G,aACnBsC,WAAY,CACRtH,UAAW5B,EAAQmH,eAEvBwC,UAAW,SAACC,GAAD,OAAkDf,EAAee,EAAEd,QAAnE,EACXK,SAAU,SAACS,GAAD,OAAkD7B,EAAkBP,EAAMoC,EAAEP,OAAOJ,MAAnF,IAGd,eAAC,IAAMlG,SAAP,WACI,cAACyG,EAAA,EAAD,CACIC,YAAY,YACZC,aAAa,GACb9H,UAAW5B,EAAQ+G,uBACnBmC,WAAY,CACRtH,UAAW5B,EAAQmH,eAEvBwC,UAAW,SAACC,GAAD,OAAkDf,EAAee,EAAEd,QAAnE,EACXK,SAAU,SAACS,GAAD,OACN7B,EAAkB6B,EAAEP,OAAOJ,MAAOxB,EAD5B,IAId,cAAC+B,EAAA,EAAD,CACIC,YAAY,aACZC,aAAa,GACb9H,UAAW5B,EAAQgH,wBACnBkC,WAAY,CACRtH,UAAW5B,EAAQmH,eAEvBwC,UAAW,SAACC,GAAD,OAAkDf,EAAee,EAAEd,QAAnE,EACXK,SAAU,SAACS,GAAD,OACN7B,EAAkBP,EAAMoC,EAAEP,OAAOJ,MAD3B,SAQjC,ECrMKlL,GAAYC,aAAW,SAACjB,GAAD,MAAY,CACrCS,KAAM,CACFV,QAASC,EAAMC,QAAQ,GACvBiB,OAAQlB,EAAMC,QAAQ,IAE1ByB,OAAQ,CACJC,SAAU,GAEdmL,UAAW,CACPzL,QAAS,OACTU,MAAO,OACP,MAAO,CACH5B,WAAYH,EAAMC,QAAQ,KAGlC8M,SAAU,CAAC,EACXC,WAAY,CAAC,EACbC,UAAW,CAAC,EACZC,aAAc,CACV7L,QAAS,QAEbmC,SAAU,CACNf,YAAazC,EAAMC,QAAQ,GAC3B0B,SAAU,EACVwL,SAAU,KAEdC,WAAY,CACRC,WAAY,GAEhBC,iBAAkB,CACdjM,QAAS,QAEbkM,yBAA0B,CACtBlM,QAAS,QAEbmM,qBAAsB,CAClB7L,SAAU,GAEd8L,oBAAqB,CACjBlL,MAAOvC,EAAMkC,QAAQwL,KAAKC,UAC1BC,SAAU,WAxCW,IAySdC,GAlPqB,SAAC,GAAmE,IAAD,QAAhEC,EAAgE,EAAhEA,WAAYhL,EAAoD,EAApDA,QAASkE,EAA2C,EAA3CA,aAAcC,EAA6B,EAA7BA,gBAChEhE,EAAUjC,KAChB,EAAwCuH,mBAAqB,IAA7D,mBAAOwF,EAAP,KAAqBC,EAArB,KACMC,EAAkBC,iBAAiClH,GACnDmH,EAAqBD,mBACrBE,EAAoBF,mBAG1B,SAASG,EAAaC,EAA6BC,GAC/C,IAAMC,EAAuB,eAASF,GAAWL,EAAgBQ,SAA4BzH,GACvF0H,EAAW,aAAQH,GAAkBR,GAEhB,UAAvBS,EAAUhL,iBAA6BgL,EAAUhL,SAErD,IAAMmL,EACFD,GACAA,EAAY3G,OAAS,GACrB2G,EAAY5O,QAAO,mCAAE8O,EAAF,KAAKC,EAAL,YAAYD,GAAKC,GAAKD,EAAE7G,OAAS,GAAK8G,EAAE9G,OAAS,CAAjD,IAEjB+G,EAA0B,2BAAQN,GAAR,IAAmB1N,UAAW,IAC1D6N,GAAYA,EAAS5G,OAAS,IAAG+G,EAAaC,QAAUC,KAAKC,UAAUN,IAEvEJ,GAAgBP,EAAgBO,GACpCtH,EAAgB6H,EACnB,CAlBDb,EAAgBQ,QAAUzH,EAoB1B,IAAMkI,EAAmB,SAACC,GACtB,IAAKA,EAAc,MAAO,GAC1B,IACI,OAAOH,KAAKI,MAAMD,GAAcE,KAAK,KAGxC,CAFC,SACE,MAAO,EACV,CACJ,EAEDrG,qBAAU,WACFmF,EAAmBM,UAASN,EAAmBM,QAAQvC,MAASlF,EAA8BsI,SAAW,IACzGlB,EAAkBK,UACdzH,IAAwC,IAAxBA,EAAauI,OAAiBnB,EAAkBK,QAAQvC,MAAQ,UAEhFkC,EAAkBK,QAAQvC,MAAQgD,EAAkBlI,EAA8BpB,OAAS,GAGtG,GAAE,CAACoB,IAEJ,IASMwI,EACF1M,GAAWA,EAAQO,SAAWiB,OAAOmL,OAAO3M,EAAQO,UAAUW,KAAI,kBAAmB,CAAEF,KAArB,EAAGA,KAAwBX,GAA3B,EAASA,GAAT,IAAoC,GAEpGuM,EAAuC5M,EAAUA,EAAQ2C,YAAc,GAE7EiK,EAAmBhQ,MAAK,SAACC,EAAGE,GACxB,OAAIF,EAAEmE,KAAKY,cAAgB7E,EAAEiE,KAAKY,eAAuB,EACrD/E,EAAEmE,KAAKY,cAAgB7E,EAAEiE,KAAKY,cAAsB,EACjD,CACV,IACD8K,EAAW9P,MAAK,SAACC,EAAGE,GAChB,OAAIF,EAAEmE,KAAKY,cAAgB7E,EAAEiE,KAAKY,eAAuB,EACrD/E,EAAEmE,KAAKY,cAAgB7E,EAAEiE,KAAKY,cAAsB,EACjD,CACV,IAED,IAAMiL,EAAe,SAACC,GAClB,IAAMC,EAASD,EACVE,MAAM,KACN9L,KAAI,SAAC+L,GAAD,OAAQA,EAAGC,MAAX,IACJlQ,QAAO,SAACiQ,GAAD,OAAQA,GAAMA,EAAGhI,OAAS,CAA1B,IACZ,OAAsB,IAAlB8H,EAAO9H,YAAc,EACbiH,KAAKC,UAAUY,EAC9B,EAEK/D,EAAiB,SAACe,GACF,KAAdA,EAAEd,SACFsC,EAAaJ,EAAgBQ,QAEpC,EACD,OACI,eAACtH,GAAA,EAAD,CAAOtC,UAAW5B,EAAQxC,KAA1B,UACKqC,GAAWA,EAAQO,UAChB,sBAAKwB,UAAW5B,EAAQiK,aAAxB,UACI,eAAClB,GAAA,EAAD,CAAaiE,WAAS,EAACpL,UAAW5B,EAAQO,SAA1C,UACI,cAAC0M,GAAA,EAAD,CAAYC,QAAQ,cAApB,0BACA,eAAClE,GAAA,EAAD,CACI9I,GAAG,cACHgJ,WAAY,CACRtH,UAAW5B,EAAQsK,0BAEvBrB,OAAO,UAAA+B,EAAgBQ,eAAhB,eAAyBjL,WAAY,QAC5C4I,SAAU,SAACC,GACP,IAAM7I,EACqB,SAAvB6I,EAAMC,OAAOJ,MAAoBG,EAAMC,OAAOJ,WAAmB1C,EACrE6E,EAAa,2BAAMJ,EAAgBQ,SAAvB,IAAiDjL,aAChE,EAVL,UAYI,eAAC+I,EAAA,EAAD,CAAU1H,UAAW5B,EAAQqK,iBAAkBpB,MAAM,QAArD,UACI,qBAAKrH,UAAW5B,EAAQuK,qBAAxB,+BACA,qBAAK3I,UAAW5B,EAAQwK,oBAAxB,SACKK,EAAWsC,OAAS,EAApB,UAA2BtC,EAAWsC,OAAU,WAGxDZ,EAAWxL,KAAI,WAAiCuB,GAAjC,IAAS8K,EAAT,EAAGvM,KAAoBwM,EAAvB,EAAmBnN,GAAnB,OACZ,eAACoJ,EAAA,EAAD,CAAU1H,UAAW5B,EAAQqK,iBAAsCpB,MAAOoE,EAA1E,UACI,qBAAKzL,UAAW5B,EAAQuK,qBAAxB,SAA+C6C,IAC/C,qBAAKxL,UAAW5B,EAAQwK,oBAAxB,SACKK,EAAWwC,IAAW,EAAtB,UAA6BxC,EAAWwC,IAAY,UAH7D,eAA4D/K,GADhD,UAUxB,qBAAKV,UAAW5B,EAAQvB,SACxB,cAACsK,GAAA,EAAD,CAAaiE,WAAS,EAACpL,UAAW5B,EAAQO,SAA1C,SACI,cAACiJ,EAAA,EAAD,CACItJ,GAAG,YACHkC,MAAM,aACNkL,WAAS,EACT7D,YAAY,+BACZ8D,SAAUpC,EAEVzB,aAAcuC,EAAgB,UAACjB,EAAgBQ,eAAjB,aAAC,EAAyB7I,MAExDgH,UAAWd,EACXM,SAAU,SAACC,GACHA,EAAMC,OAAOJ,OAAuC,YAA9BG,EAAMC,OAAOJ,MAAM8D,OACzC/B,EAAgBQ,QAAhB,2BACQR,EAAgBQ,SADxB,IAEIc,QAAQ,EACR3J,UAAM4D,IAGVyE,EAAgBQ,QAAhB,2BACQR,EAAgBQ,SADxB,IAEIc,YAAQ/F,EACR5D,KAAM+J,EAAatD,EAAMC,OAAOJ,QAG3C,MAIT,eAACF,GAAA,EAAD,CAAanH,UAAW5B,EAAQmK,WAAhC,UACI,cAAC8C,GAAA,EAAD,CAAYC,QAAQ,aAApB,qBACA,eAAClE,GAAA,EAAD,CACI9I,GAAG,aACH+I,MAAK,UAAE+B,EAAgBQ,eAAlB,aAAE,EAAyB5N,MAChCuL,SAAU,SAACC,GACPgC,EAAa,2BACLJ,EAAgBQ,SADZ,IAER5N,MAAOwL,EAAMC,OAAOJ,QAE3B,EARL,UAUI,cAACK,EAAA,EAAD,CAAUL,MAAO,GAAjB,gBACA,cAACK,EAAA,EAAD,CAAUL,MAAO,GAAjB,gBACA,cAACK,EAAA,EAAD,CAAUL,MAAO,GAAjB,gBACA,cAACK,EAAA,EAAD,CAAUL,MAAO,IAAjB,0BAKhB,cAACO,EAAA,EAAD,CACItJ,GAAG,uBACHkC,MAAM,kBACN4K,WAAS,EACTM,WAAS,EACT7D,YAAY,MACZ8D,SAAUrC,EACVtJ,UAAW5B,EAAQgK,UACnB/L,OAAO,SACPiE,QAAQ,WACRwH,cAAc,UAAAsB,EAAgBQ,eAAhB,eAAyBa,UAAW,GAElD1C,UAAWd,EACXM,SAAU,SAACC,GACP4B,EAAgBQ,QAAhB,2BACQR,EAAgBQ,SADxB,IAEIa,QAASjD,EAAMC,OAAOJ,OAE7B,IAEJ6B,EAAahG,OAAS,GACnB,sBAAKlD,UAAW5B,EAAQ8J,SAAxB,UACKgB,EAAa/J,KAAI,SAACsG,EAAKmG,GAAN,OACd,cAAC,GAAD,CAEInG,IAAKA,EACLC,QAASmF,EAAmB5P,QAAO,SAAC4Q,GAChC,OAAQ3C,EAAazK,MAAK,SAACgH,EAAK/E,GAAN,OAAcA,IAAQkL,GAAOnG,EAAI,KAAOoG,EAAG5M,IAA3C,GAC7B,IACD0G,cAAe,SAACmG,EAA0BC,GACtC,IAAMlC,EAAW,aAAOX,GACxBW,EAAY+B,GAAOE,EACnB3C,EAAgBU,GACZkC,GAAavC,EAAa,KAAMK,EACvC,GAXL,iBACmB+B,GAFL,IAelB,gCACI,cAACI,GAAA,EAAD,CAAQhO,QAAS,kBAAYwL,EAAa,KAAD,uBAAWN,GAAX,CAAyB,CAAC,GAAI,MAAtD,EAAjB,eACA,cAAC8C,GAAA,EAAD,CAAQhO,QAAS,kBAAYwL,EAAa,KAAMN,EAAa+C,MAAM,GAAI,GAAtD,EAAjB,qBAIZ,sBAAKjM,UAAW5B,EAAQ6J,UAAxB,UACI,eAAC+D,GAAA,EAAD,CAAQtO,MAAM,UAAUM,QAvKb,WACdoL,EAAgBQ,UACjBV,EAAahG,OAAS,EACtBsG,EAAaJ,EAAgBQ,QAAS,IAEtCJ,EAAaJ,EAAgBQ,QAAS,CAAC,CAAC,GAAI,MAEnD,EAgKW,UACKV,EAAahG,OAAS,EAAI,OAAS,OADxC,eAGA,qBAAKlD,UAAW5B,EAAQvB,SACxB,eAACmP,GAAA,EAAD,CACIhM,UAAW5B,EAAQ+J,WACnBzK,MAAM,UACN4C,QAAQ,YACRtC,QAAS,WACLwL,EAAaJ,EAAgBQ,QAChC,EANL,UAQI,cAAC,KAAD,IARJ,aAUA,cAACoC,GAAA,EAAD,CACIhM,UAAW5B,EAAQ+J,WACnBzK,MAAM,YACN4C,QAAQ,YACRtC,QAAS,WACLmL,EAAgB,IAChBK,EAAazN,GAChB,EAPL,wBAcf,ECxSKmQ,GAAqC,SAAC,GAM9B,IALVzI,EAKS,EALTA,gBACAjC,EAIS,EAJTA,IACAvD,EAGS,EAHTA,QACAkE,EAES,EAFTA,aACAC,EACS,EADTA,gBAEA,EAAoCsB,mBAAqB,CAAC,GAA1D,mBAAOuF,EAAP,KAAmBkD,EAAnB,KACMC,EAAgB/C,mBA0CtB,OAzCA+C,EAAcxC,QAAUX,EAExB9E,qBAAU,WACFlG,GAAWuD,IACXiC,IAEKc,MAAK,SAACH,GAAD,OAASE,iBAAO9C,EAAK4C,EAAKnG,EAAQsF,YAAa,CAAEvH,MAAO,EAAGC,UAAW,GAAtE,IACLsI,MACG,gBAAGtC,EAAH,EAAGA,KAAH,OACIA,GACAkK,EAAc,2BACPC,EAAcxC,SADR,IAET2B,MAAOtJ,EAAKqC,OAASrC,EAAKqC,OAAO/B,MAAQ,IAJjD,IAOHkC,OAAM,SAACC,GACJT,KAAIC,MAAMQ,EACb,IAELzG,EAAQO,SAASmB,QAAO,SAAC0M,EAAcC,GAiBnC,OAAOD,EAAa9H,MAhBH,kBACbd,IACKc,MAAK,SAACH,GAAD,OACFE,iBAAO9C,EAAK4C,EAAKnG,EAAQsF,YAAa,CAAE5E,SAAU2N,EAAKhO,GAAItC,MAAO,EAAGC,UAAW,GAD9E,IAGLsI,MAAK,YAAe,IAAZtC,EAAW,EAAXA,KACLA,GACIkK,EAAc,2BACPC,EAAcxC,SADR,mBAER0C,EAAKhO,GAAK2D,EAAKqC,OAASrC,EAAKqC,OAAO/B,MAAQ,IAExD,IACAkC,OAAM,SAACC,GACJyH,EAAc,2BAAKC,EAAcxC,SAApB,mBAA8B0C,EAAKhO,GAAK,KACrD2F,KAAIC,MAAMQ,EACb,GAfQ,GAiBpB,GAAE6H,QAAQC,WAElB,GAAE,CAACvO,EAASuD,EAAKiC,IAGd,cAAC,GAAD,CACIwF,WAAYA,EACZhL,QAASA,EACTkE,aAAcA,EACdC,gBAAiBA,GAG5B,EACD8J,GAAiB,iBAAsB,EACxBA,UCpDT1K,GAAMiL,EAAOC,UAAUC,QAuJdC,GA5IqB,SAAC,GAAwC,IAAtCC,EAAqC,EAArCA,QAASC,EAA4B,EAA5BA,KAAMC,EAAsB,EAAtBA,SAElD,EAAyCrJ,mBAAuB3H,IAAhE,mBAAOoG,EAAP,KAAqB6K,EAArB,KAEM5K,EAAkB6K,uBACpB,SAAC3N,GACG4N,EAAgB1F,MAAM,YAAa,SAAU2C,KAAKC,UAAU9K,IAC5D0N,EAAiB1N,EACpB,GACD,CAAC0N,IAGCG,EAAkBF,uBAAY,SAACG,GACjCF,EAAgB1F,MAAM,YAAa,iBAAkB4F,EAAW7J,aAChEnB,EAAgBrG,GACnB,GAAE,IAEGkC,EAAUoP,GAAWN,EAAUI,GACrC,EAA4CG,GAAWR,EAAM7O,GAAS,GAAM,GAApEF,EAAR,EAAQA,QAAkBwP,EAA1B,EAAiBrL,QACjB,EAAyDsL,GAAaV,EAAM7O,GAApEwP,EAAR,EAAQA,eAAgBtP,EAAxB,EAAwBA,gBAAiBD,EAAzC,EAAyCA,YAGzCiG,qBAAU,WACDlG,GAAYF,EAGNE,IAAYF,GACnBmP,EAAgBQ,gBAAhB,oBAA6CzP,EAAQgB,OACrD0O,SAASzM,MAAT,UAAoBjD,EAAQgB,KAA5B,6BACOhB,GAAWF,IAClBmP,EAAgBQ,gBAAhB,oBAA6C3P,EAAQE,QAArD,YAAgEF,EAAQY,SAAxE,YAAoFZ,EAAQO,KAC5FqP,SAASzM,MAAT,UAAoBnD,EAAQkB,KAA5B,cAAsChB,EAAQgB,KAA9C,8BAPA0O,SAASzM,MAAQ,wBACjBgM,EAAgBQ,gBAAhB,6BAQP,GAAE,CAACzP,EAASF,IAEb,IAAMsE,EAAwD4K,uBAC1D,SAACW,EAAkBC,GACXA,GAAUA,EAAO3K,OAAS,GAAI2J,EAAQ7F,KAAK,IAAM4G,EAAW,IAAMC,GACjEhB,EAAQ7F,KAAK,IAAM4G,EAC3B,GACD,CAACf,IAGCiB,EAAeb,uBACjB,SAACc,EAAeC,GACZd,EAAgB1F,MAAM,YAAa,gBAAnC,UAAuDuG,EAAK9P,QAA5D,YAAuE8P,EAAKpP,SAA5E,YAAwFoP,EAAKzP,GAA7F,YAAmG0P,IACnGP,EAAeM,EAAMC,EACxB,GACD,CAACP,IAECQ,EAAchB,uBAChB,SAACc,GAEG,OADAb,EAAgB1F,MAAM,YAAa,eAAnC,UAAsDuG,EAAK9P,QAA3D,YAAsE8P,EAAKpP,SAA3E,YAAuFoP,EAAKzP,KACrFH,EAAgB4P,EAC1B,GACD,CAAC5P,IAGC+P,EAAeC,mBACjB,kBACIpQ,GACI,cAAC,GAAD,CACIE,QAASA,EACTF,QAASA,EACTqQ,cAAY,EACZC,QAAS,WACDpQ,GAASoE,EAASpE,EAAQsF,YACjC,EACD+K,WAAYvS,GACZ+R,aAAcA,EACd5P,YAAaA,EACbC,gBAAiB8P,GAZ7B,GAeA,CAAClQ,EAAS+P,EAAcG,EAAa5L,EAAUnE,EAAaD,IAG1DsQ,EAAgBtQ,GAAWwB,OAAOmL,OAAO4D,qBAAmBC,QAAQxQ,EAAQyQ,OAAS,EAC3FzK,KAAII,MAAM,cAAe,CAAEkK,gBAAetQ,YAE1C,IAAM0Q,EAAgBR,mBAClB,kBACI,eAAC,IAAMhN,SAAP,WACI,cAAC,GAAD,CAEQsC,gBAAiBqJ,EAAKrJ,gBACtBjC,OACAvD,QAASA,EACTkE,eACAC,oBAGR,cAAC,GAAD,CAEQqB,gBAAiBqJ,EAAKrJ,gBACtBjC,OACAa,WACApE,QAASA,EACTkE,eACAC,kBACAlE,cACAC,gBAAiB8P,MApBjC,GAyBA,CAAC9L,EAAclE,EAASC,EAAa+P,EAAanB,EAAKrJ,gBAAiBpB,IAG5E,OAAKkM,EAGD,eAAC,IAAMpN,SAAP,WACKoM,GACG,cAAC,KAAD,CACIqB,QAAS,cAACC,GAAA,EAAD,CAAkBpO,KAAK,OAAOqO,UAAW,IAClDC,OACI,cAAC1O,EAAA,EAAD,CAAYC,QAAQ,KAAK0O,UAAU,MAAnC,gCAIJC,eAAgB,CACZ3G,SAAU,KACVxH,MAAO,CACHoO,SAAU,WACVC,OAAQ,IACRC,IAAK,EACLC,KAAM,EACNnS,MAAO,OACPM,OAAQ,OACRJ,WAAY,gBAK3BuR,EACAT,KA3BkB,cAAC,GAAD,CAAiBjQ,QAASA,EAAoBoQ,QAAS,kBAAYxB,EAAQ7F,KAAK,IAAzB,GA8BrF,E,8DC7IK7K,GAAYC,aACd,SAACjB,GAAD,MAA+B,CAC3BS,KAAM,CAAC,EACP0T,YAAa,CACTC,WAAY,OACZC,OAAQ,QAEZC,OAAO,2BACAtU,EAAMuU,WAAWC,SADlB,IAEFlS,aAActC,EAAMC,QAAQ,KAC5BF,QAASC,EAAMC,QAAQ,GAAK,GAC5BgC,WAAYjC,EAAMkC,QAAQuS,QAAQ/T,KAClC6B,MAAOvC,EAAMkC,QAAQuS,QAAQC,aAC7BvU,WAAYH,EAAMC,QAAQ,GAC1BuC,OAAO,aAAD,OAAexC,EAAMkC,QAAQuS,QAAQE,QAE/CC,WAAY,CACRzU,WAAYH,EAAMC,QAAQ,IAhBlC,IAuJW4U,GAlImB,SAAC,GAA4C,IAA1CC,EAAyC,EAAzCA,KAAM1I,EAAmC,EAAnCA,SAAU2I,EAAyB,EAAzBA,YAC3C9R,EAAUjC,KACV+F,EAAU+N,EAAK/N,QAEfiO,EAAiB,SAACC,EAA2BC,GAC3CD,IAAW5B,oBAAkB8B,MAClB/I,EAAS0I,EAAKM,SAArBF,EAA+B7B,oBAAkB8B,MACxB9B,oBAAkBgC,aACxCJ,IAAW5B,oBAAkBgC,aACzBjJ,EAAS0I,EAAKM,SAArBF,EAA+B7B,oBAAkBgC,YACxBhC,oBAAkBiC,SAEtD,EACKC,EAAYT,EAAKvB,OAASF,oBAAkBmC,UAElD,OACI,eAAC5Q,GAAA,EAAD,CAAUgC,SAAUG,GAAWwO,EAAW1Q,UAAW5B,EAAQxC,KAAMgV,SAAO,EAA1E,UACI,cAAC1Q,GAAA,EAAD,UACK+P,EAAKY,SAAWZ,EAAKY,QAAQ3N,OAAS,EACnC,cAAC/C,GAAA,EAAD,CAAQ2Q,IAAKb,EAAKhR,KAAM8R,IAAKd,EAAKY,UAElC,cAAC1Q,GAAA,EAAD,CAAQ2Q,IAAKb,EAAKhR,KAAlB,SACI,cAAC,KAAD,CAAUvB,MAAM,gBAI5B,cAACsT,GAAA,EAAD,CACI1S,GAAG,yBACHsR,QACI,iCACI,sBAAM5P,UAAW5B,EAAQkR,YAAzB,SAAuCW,EAAKhR,OAC3CgR,EAAKM,SAASU,WAAW,WAAa,sBAAMjR,UAAW5B,EAAQqR,OAAzB,uBAG/C3G,UAAW,sBAAM9I,UAAW5B,EAAQkR,YAAzB,SAAuCW,EAAKiB,UAE1DjB,EAAKvB,MACF,eAAC9M,GAAA,EAAD,WACKsO,IAAgBQ,GACb,cAACS,GAAA,EAAD,CACIC,QACI,cAACC,GAAA,EAAD,CACIvP,KAAK,MACLyF,SAAU,SAACS,GAAD,OAAamI,EAAe3B,oBAAkB8B,MAAOtI,EAAEP,OAAO6J,QAA9D,EACVA,QACI,CAAC9C,oBAAkB8B,MAAO9B,oBAAkBmC,WAAWlC,QACnDwB,EAAKvB,OACJ,EAET3M,SACIG,GACA,CAACsM,oBAAkBiC,UAAUhC,QAAQwB,EAAKvB,OAA8B,EAE5EpH,WAAY,CAAE,kBAAmB,4BAGzCiK,eAAe,QACf/Q,MAAM,mBAGZkQ,GACE,cAACS,GAAA,EAAD,CACIC,QACI,cAACC,GAAA,EAAD,CACIvP,KAAK,MACLyF,SAAU,SAACS,GAAD,OACNmI,EAAe3B,oBAAkBgC,YAAaxI,EAAEP,OAAO6J,QADjD,EAGVA,QACI,CACI9C,oBAAkBgC,YAClBhC,oBAAkB8B,MAClB9B,oBAAkBmC,WACpBlC,QAAQwB,EAAKvB,OAA8B,EAEjD3M,SACIG,GACA,CAACsM,oBAAkB8B,MAAO9B,oBAAkBmC,WAAWlC,QACnDwB,EAAKvB,OACJ,EAETpH,WAAY,CAAE,kBAAmB,4BAGzCiK,eAAe,QACf/Q,MAAM,iBAIZkQ,GACE,cAACzP,GAAA,EAAD,CAASC,MAAO,oCAAhB,SACI,mCAEI,cAACW,EAAA,EAAD,CACIC,KAAK,MACL9B,UAAW5B,EAAQ2R,WACnB,aAAW,SACXrS,MAAM,YACNqE,SAAUG,EACVlE,QAAS,kBAAYuJ,EAAS0I,EAAKM,SAAU,KAApC,EANb,SAQI,cAAC,KAAD,cAOtBN,EAAKvB,MACH,cAAC9M,GAAA,EAAD,UACI,cAACX,GAAA,EAAD,CAASC,MAAO,+BAAhB,SACI,mCAEI,cAACW,EAAA,EAAD,CACIC,KAAK,MACL,aAAW,SACXpE,MAAM,YACNqE,SAAUG,EACVlE,QAAS,kBAAYuJ,EAAS0I,EAAKM,SAAU/B,oBAAkBiC,SAAtD,EALb,SAOI,cAAC,KAAD,cAQ/B,E,yCCzKKtU,GAAYC,aAAW,SAACjB,GAAD,MAAY,CACrCS,KAAM,CACFY,QAAS,OACTgV,SAAU,SACV9U,cAAe,SACfL,OAAQlB,EAAMC,QAAQ,IAE1BqW,YAAa,CACTpV,OAAQlB,EAAMC,QAAQ,EAAG,IAE7BsW,KAAM,CACF5U,SAAU,EACV0U,SAAU,SACVnV,OAAQlB,EAAMC,QAAQ,EAAG,IAE7BuW,YAAa,CACTtV,OAAQlB,EAAMC,QAAQ,EAAG,IAhBJ,IAyEdwW,GA7CoB,SAAC,GAAiE,IAA/DC,EAA8D,EAA9DA,MAAOtK,EAAuD,EAAvDA,SAAUrG,EAA6C,EAA7CA,MAAOuQ,EAAsC,EAAtCA,YAAavB,EAAyB,EAAzBA,YACjE9R,EAAUjC,KAChB,EAA4BuH,qBAA5B,mBAAOY,EAAP,KAAewN,EAAf,KACMC,EAAY5D,mBAAQ,WACtB,GAAI7J,GAAUA,EAAOpB,QAAU,EAAG,CAC9B,IAAM8O,EAAa1N,EAAkB2G,MAAM,KAAKhQ,QAAO,SAACgX,GAAD,OAAOA,EAAE/O,QAAU,CAAnB,IACvD,OAAO2O,EAAM5W,QAAO,SAACiX,GAEjB,OAAOF,EAAUG,OAAM,SAACC,GACpB,OACIF,EAAEjT,KAAKoT,oBAAoB5D,QAAQ2D,EAAKC,sBAAwB,GAChEH,EAAEhB,MAAMmB,oBAAoB5D,QAAQ2D,EAAKC,sBAAwB,CAExE,GACJ,GACJ,CAAM,OAAOR,CACjB,GAAE,CAACA,EAAOvN,IAEX,OACI,eAAChC,GAAA,EAAD,CAAOtC,UAAW5B,EAAQxC,KAA1B,UACI,cAAC0W,EAAA,EAAD,UACI,cAACjS,EAAA,EAAD,CAAYC,QAAQ,YAApB,SAAiCY,MAErC,cAACb,EAAA,EAAD,CAAYL,UAAW5B,EAAQqT,YAAanR,QAAQ,UAApD,SACKmR,GAAe,MAEpB,cAACtK,GAAA,EAAD,CAAanH,UAAW5B,EAAQuT,YAAhC,SACI,cAACY,GAAA,EAAD,CACInH,WAAS,EACT7D,SAAU,SAACS,GAAD,OAAa8J,EAAU9J,EAAEP,OAAOJ,MAAhC,EACVmL,eACI,cAACC,GAAA,EAAD,CAAgBvD,SAAS,QAAzB,SACI,cAAC,KAAD,UAKhB,cAACrM,GAAA,EAAD,CAAM7C,UAAW5B,EAAQsT,KAAzB,SACKK,EAAU5S,KAAI,SAAC+S,EAAGxR,GAAJ,OACX,cAAC,GAAD,CAAiCuP,KAAMiC,EAAG3K,SAAUA,EAAU2I,YAAaA,GAA3E,kBAA0BxP,GADf,QAM9B,EC5EKvE,GAAYC,aAAW,SAACjB,GAAD,MAAY,CACrCuX,cAAe,CACXlV,OAAQ,OACRN,MAAO,OACPsU,SAAU,SACVtC,SAAU,YAEdtT,KAAM,CACF4B,OAAQ,OACRN,MAAO,OACPV,QAAS,OACTgV,SAAU,SACV9U,cAAe,UAEnBiW,eAAgB,CACZnW,QAAS,OACTU,MAAO,OACPM,OAAQ,OACRgU,SAAU,SACV,iBAAkB,CACd9V,KAAM,WAEV,gBAAiB,CACbA,KAAM,YAGdkX,aAAc,CACVlV,MAAOvC,EAAMkC,QAAQuS,QAAQC,aAC7BzS,WAAYjC,EAAMkC,QAAQuS,QAAQ/T,KAClCQ,OAAQlB,EAAMC,QAAQ,GACtBF,QAASC,EAAMC,QAAQ,IAE3BsW,KAAM,CACF5U,SAAU,EACV0U,SAAU,SACVnV,OAAQlB,EAAMC,QAAQ,EAAG,IAE7B8G,QAAS,CAEL9E,WAAY,YACZ8R,SAAU,WACVC,OAAQ,KAzCa,IAqD7B,SAAS0D,GAAUC,GACfA,EAAMjY,MAAK,SAACC,EAAaE,GACrB,OAAOF,EAAEmE,KAAKY,cAAckT,cAAc/X,EAAEiE,KAAKY,cACpD,GACJ,CAED,IA6DemT,GA7DqB,SAAC,GAA+D,IAA7DnB,EAA4D,EAA5DA,MAAO5T,EAAqD,EAArDA,QAASiE,EAA4C,EAA5CA,QAASgO,EAAmC,EAAnCA,YAAa3I,EAAsB,EAAtBA,SACnEnJ,EAAUjC,KACV8W,EAAYpB,EAAM5W,QAAO,SAACiX,GAAD,OAAOA,EAAExD,IAAT,IAC/BmE,GAAUI,GACV,IAAMC,EAAWrB,EAAM5W,QAAO,SAACiX,GAAD,OAAQA,EAAExD,IAAV,IAC9BmE,GAAUK,GAEV,IAAMC,EAAelV,GAAWA,EAAQsB,MAAQtB,EAAQsB,KAAK6T,QAAkC,WAAxBnV,EAAQsB,KAAK6T,OAC9ExE,EAAU,qBAAKmC,IAAKjV,GAAkBgV,IAAI,SAChD,OACI,sBAAK9Q,UAAW5B,EAAQsU,cAAxB,UACKxQ,GACG,cAAC,KAAD,CACI0M,QAASA,EACT1N,MAAO,wBACPmS,QAAO,yBAAoBxB,EAAM3O,QACjC+L,eAAgB,CAAE3G,SAAU,KAAMtI,UAAW5B,EAAQ8D,WAG7D,sBAAKlC,UAAW5B,EAAQxC,KAAxB,UACI,eAAC0G,GAAA,EAAD,CAAOtC,UAAW5B,EAAQwU,aAA1B,UACI,eAACvS,EAAA,EAAD,CAAYC,QAAQ,KAAK5C,MAAM,UAA/B,yBACiBO,GAAWA,EAAQgB,QAEnCkU,EACG,eAAC9S,EAAA,EAAD,CAAYC,QAAQ,QAAQ5C,MAAM,UAAlC,6BACoB,4CADpB,oGAGI,kDAHJ,kCAMA,eAAC2C,EAAA,EAAD,CAAYC,QAAQ,QAAQ5C,MAAM,UAAlC,6BACoB,6CADpB,mDAC6F,IACzF,kDAFJ,qCAMR,sBAAKsC,UAAW5B,EAAQuU,eAAxB,UACI,cAAC,GAAD,CACId,MAAOoB,EACP1L,SAAUA,EACV2I,YAAaA,EACbhP,MAAM,yBACNuQ,YAAY,iFAEhB,cAAC,GAAD,CACII,MAAOqB,EACP3L,SAAUA,EACV2I,YAAaA,EACbhP,MAAM,aACNuQ,YACI0B,EACM,qFACA,+EAOjC,EC8BcG,GA3IuB,SAAC,GAAwC,IAAtCvG,EAAqC,EAArCA,SAAUD,EAA2B,EAA3BA,KAAMD,EAAqB,EAArBA,QACrD,EAAmCnJ,mBAAoB,CACnDmO,MAAO,GACP3P,SAAS,IAFb,mBAAOqR,EAAP,KAAkBC,EAAlB,KAIMC,EAAepK,mBACfqK,EAAerK,mBACrBoK,EAAa7J,QAAU2J,EAEvB,IAAMtV,EAAUoP,GAAWN,GAG3B5I,qBAAU,WAEF0I,GACA5O,GACAA,EAAQyQ,OAASF,oBAAkBmC,WACnC1S,EAAQyQ,OAASF,oBAAkB8B,OAEnCzD,EAAQ7F,KAAR,WAAiB/I,EAAQsF,aAEhC,GAAE,CAACtF,EAAS4O,IAEb1I,qBAAU,WAAM,sDAEZ,8FACQwP,GAAQ,EADhB,WAEWA,IAASD,EAAa9J,QAFjC,uBAGQ+J,GAAQ,EAHhB,SAIqC7G,EACxBrJ,kBACAc,MAAK,SAACH,GAAD,OACFwP,wBACInH,EAAOC,UAAUC,QACjBvI,EAFS,OAGTnG,QAHS,IAGTA,OAHS,EAGTA,EAASsF,YACT,GACAmQ,EAAa9J,QANf,IASLrF,MAAK,SAACsP,GAAS,IAAD,MACLC,EAAQ,UAAGD,EAAI5R,YAAP,aAAG,EAAU8R,SAAS9X,UAE9B+X,EAAUlH,EAAKmD,KAAOnD,EAAKmD,KAAKgE,YAAYC,QAAQ3D,SAAW,SAC/D4D,IAAiB,UAAAN,EAAI5R,YAAJ,eAAU8R,SAASlC,QAAS,IAAI5W,QAAO,SAACiX,GAAD,OAAOA,EAAE3B,WAAayD,CAAtB,IAM9D,OAJAR,EAAc,CACV3B,MAAM,GAAD,qBAAO,UAAA4B,EAAa7J,eAAb,eAAsBiI,QAAS,IAAtC,aAA8CsC,IACnDjS,QAASoB,QAAQwQ,KAEdA,CACV,IACArP,OAAM,SAACC,GACJT,KAAIC,MAAMQ,EAEb,IA9Bb,OAIQgP,EAAa9J,QAJrB,kEAFY,sBACP3L,GAAY6O,GADL,mCAmCZsH,EACH,GAAE,CAACnW,EAAS6O,IAEb,IAAMuH,EAAapH,uBACf,SAACqH,EAAgBC,GAEb,IAAMC,EAAaf,EAAa7J,QAAsBiI,MAAMpT,MAAK,SAACyT,GAAD,OAAOA,EAAE3B,WAAa+D,CAAtB,IACjE,IAAKE,EAAW,MAAM,IAAIC,MAAM,gDAChC,IAAMC,EAAajV,OAAOkV,OAAO,CAAC,EAAGH,GAGrChB,EAAc,2BACNC,EAAa7J,SADR,IAETiI,MAAQ4B,EAAa7J,QAAsBiI,MAAM1S,KAAI,SAAC+S,GAClD,OAAIA,EAAE3B,WAAa+D,EAAepC,EAEvB,2BACAA,GADP,IAEIxD,KAAM6F,EACNrS,SAAS,GAGpB,OAEL,IAAM0S,EAAQ,WACV3Q,KAAIC,MAAM,qDACVsP,EAAc,2BACNC,EAAa7J,SADR,IAETiI,MAAQ4B,EAAa7J,QAAsBiI,MAAM1S,KAAI,SAAC+S,GAClD,OAAIA,EAAE3B,WAAa+D,EAAepC,EACtBwC,CACf,MAER,EACKG,EAAYC,WAAWF,EAAO,KACpC,OAAO9H,EACFrJ,kBACAc,MAAK,SAACH,GAAD,OACF2Q,qCACItI,EAAOC,UAAUC,QACjBvI,EACAkQ,EAHsB,OAItBrW,QAJsB,IAItBA,OAJsB,EAItBA,EAASsF,YACTgR,EANF,IASLhQ,MAAK,SAACtC,GACH+S,aAAaH,GAEbrB,EAAc,2BACNC,EAAa7J,SADR,IAETiI,MAAQ4B,EAAa7J,QAAsBiI,MAAM1S,KAAI,SAAC+S,GAAO,IAAD,EACxD,OAAIA,EAAE3B,WAAa+D,EAAepC,EAE9B,uCACOA,GADP,UAEOjQ,EAAKA,YAFZ,aAEO,EAAWgT,YAFlB,IAGI/S,SAAS,GAEpB,OAEL+B,KAAII,MAAM,eAAgBpC,EAC7B,IACAwC,OAAM,SAACC,GACJT,KAAIC,MAAM,4BAA6BQ,GACvCkQ,GACH,GACR,GACD,CAAC9H,EAAM7O,IAGX,OACI,cAAC,GAAD,CACI4T,MAAO0B,EAAU1B,MACjB3B,YAAa5M,QAAQrF,GAAWA,EAAQyQ,OAASF,oBAAkBmC,WACnEpJ,SAAU8M,EACVnS,QAASoB,QAAQiQ,EAAUrR,SAC3BjE,QAASA,GAGpB,E,UClHciX,GAzBqB,SAAC,GAA+E,IAA7Ena,EAA4E,EAA5EA,SAAU8R,EAAkE,EAAlEA,QAASE,EAAyD,EAAzDA,SAAUoI,EAA+C,EAA/CA,QAASlG,EAAsC,EAAtCA,eAAgBmG,EAAsB,EAAtBA,SACnFnX,EAAUoP,GAAWN,GAC3B,OACI,cAACsI,GAAA,EAAD,CAAela,MAAOma,GAAOC,KAA7B,SACI,cAAC,KAAD,CACItG,eAAc,aAAI3G,SAAWrK,EAAiB,KAAP,MAAgBgR,GACvDmG,SAAUA,EACVI,OACI,cAACC,GAAD,CACI5I,QAASA,EACTE,SAAUA,EACV7L,MAAM,wBACNwU,eAAgBP,EAChBQ,aAAW,EACXC,SAAUC,OAAOC,SAASC,KAC1B9X,QAASA,IAGjB+X,OAAQ,cAAC,EAAD,CAAQC,QAASxJ,EAAOwJ,UAdpC,SAgBI,mCAAGlb,OAIlB,EC5BDmS,EAAgBgJ,OAEhB,IAAMC,GAAc,IAAIC,GAAiB,UAAW,KACpDD,GAAYE,QAEZ,IA4KeC,GA5KkB,WAC7B,MAAgC5S,qBAAhC,mBAAO6S,EAAP,KAAiBC,EAAjB,KACA,EAA0C9S,qBAA1C,mBAAO+S,EAAP,KAAsBC,EAAtB,KACA,EAA8ChT,oBAAS,GAAvD,mBAAOiT,EAAP,KAAwBC,EAAxB,KAEM9J,EAAwB+J,YAAUN,GAAqC,EAAO9J,EAAOqK,OACrFjK,EAAUkK,cAIhB5S,qBAAU,WACN6S,oBAAUvK,EAAOC,UAAUC,QAAmB,IACzCpI,MAAK,SAAC0S,GAAc,IAAD,EAChBhT,KAAII,MAAM,WAAY4S,GACtB,IAAMC,EAAQ,UAAGD,EAAShV,YAAZ,aAAG,EAAe6K,KAC5BoK,GAAYA,EAASC,SACrBX,EAAY,CACRW,OAAQD,EAASC,OACjBC,WAAYF,EAASG,SACrBC,oBAAqBJ,EAASK,SAC9BC,iBAAiB,EACjBC,MAAO,CACHhc,OAAQyb,EAASzb,OACjBic,MAAO,CAAC,QAAS,UAAW,UAC5BC,eAAgBlL,EAAOmL,YAAYC,WACnCC,gBAAiBrL,EAAOmL,YAAYC,WACpCE,aAAc,UAGtBnB,GAAmB,GAE1B,IACAnS,OAAM,SAACC,GACJT,KAAIC,MAAM,wBAAyBQ,EACtC,GACR,GAAE,IAGHP,qBAAU,WACN,GAAK0I,EAAL,CACA,IAAMmL,EAAK,iDAAG,yGACJC,EADI,iBAEe9B,GAAY+B,IAAYD,GAFvC,OAEJE,EAFI,OAIJC,EAAWvL,EAAQiJ,SAASuC,SAClCpU,KAAII,MAAJ,WAAc4T,EAAd,uCAAqDE,EAArD,gBAAuEC,IAElEtL,EAAKwL,iBAAoBxL,EAAK5I,QAAS4I,EAAKyL,iBAC7CtU,KAAII,MAAJ,WAAc4T,EAAd,oCAAkDG,IAClDjC,GAAYqC,IAAIP,EAAUG,IAE1BD,GAAcrL,EAAKwL,iBAAmBxL,EAAKyL,iBAAmBzL,EAAK5I,QAC/DkU,IAAaD,IACblU,KAAII,MAAJ,WAAc4T,EAAd,sCAAoDG,EAApD,gBAAoED,IACpEtL,EAAQ7F,KAAKmR,IAGjBhC,GAAYsC,IAAIR,IAjBV,2CAAH,qDAoBXD,GArBoB,CAsBvB,GAAE,CAACnL,EAASC,IAEb,IAAMzK,EAAW4K,uBAAY,SAACJ,EAAkB5O,EAAkBF,GAC1DA,EAAS8O,EAAQ7F,KAAK,IAAM/I,EAAQsF,YAAc,IAAMxF,EAAQO,IAC/DuO,EAAQ7F,KAAK,IAAM/I,EAAQsF,YACnC,GAAE,IAGHY,qBAAU,YACD2I,EAAKwL,iBAAN,OAAyB7B,QAAzB,IAAyBA,KAAe1J,WAE5C2J,EAAiB,CAAE3J,SAAU,GAAI7K,SAAS,IAC1C4K,EAAKrJ,kBACAc,MAAK,SAACH,GAAD,OAASsU,sBAAYjM,EAAOC,UAAUC,QAAmBvI,EAAzD,IACLG,MAAK,SAACoU,GACH1U,KAAII,MAAM,kBAAmBsU,GACzBA,EAAY1W,MAAQ0W,EAAY1W,KAAK8K,UACrC2J,EAAiB,CAAE3J,SAAU4L,EAAY1W,KAAK8K,SAAU7K,SAAS,GAExE,IACAuC,OAAM,SAACC,GACJT,KAAIC,MAAM,wBAAyBQ,EAEtC,IACR,GAAE,CAACoI,EAAM2J,IAEV,IAAM7H,EAAU,qBAAKmC,IAAKjV,GAAkBgV,IAAI,SAGhD,GAAI6F,EACA,OACI,cAAC,GAAD,UACI,cAAC,KAAD,CACI/H,QAASA,EACT1N,MAAO,wBACPmS,QAAS,8BACT4C,QAASxJ,EAAOwJ,YAK5B,GAAKnJ,EAAKwL,gBAkBH,KAAK7B,GAAD,OAAkBA,QAAlB,IAAkBA,KAAevU,QACxC,OACI,cAAC,GAAD,UACI,cAAC,KAAD,CACI0M,QAASA,EACT1N,MAAO,wBACPmS,QAAS,mBACT4C,QAASxJ,EAAOwJ,YAK5B,IAAM2C,EAAe,CAAEvW,WAAU8S,QAASrI,EAAKqI,QAASpI,SAAQ,OAAE0J,QAAF,IAAEA,OAAF,EAAEA,EAAe1J,UACjF,OACI,eAAC,IAAD,WACI,cAAC,IAAD,CACI8L,KAAK,oBACLC,OAAQ,SAACC,GAAD,OACJ,cAAC,GAAD,uCAAgBA,GAAWH,GAA3B,IAAyCxD,UAAQ,EAACnG,eAAgB,CAAE3G,SAAU,MAA9E,SACI,cAACgI,GAAD,2BAAoByI,GAApB,IAA2BhM,SAAQ,OAAE0J,QAAF,IAAEA,OAAF,EAAEA,EAAe1J,SAAUD,KAAMA,OAFpE,IAMZ,cAAC,IAAD,CACI+L,KAAK,0BACLC,OAAQ,SAACC,GAAD,OACJ,cAAC,GAAD,uCAAgBA,GAAWH,GAA3B,aACI,cAAC,GAAD,2BAAgBG,GAAhB,IAAuBjM,KAAMA,EAAMC,SAAQ,OAAE0J,QAAF,IAAEA,OAAF,EAAEA,EAAe1J,cAF5D,IAMZ,cAAC,IAAD,CACI8L,KAAK,IACLC,OAAQ,SAACC,GAAD,OACJ,cAAC,GAAD,uCAAgBA,GAAWH,GAA3B,IAAyC3J,eAAgB,CAAE3G,SAAU,MAArE,SACI,cAAC,GAAD,2BAAoByQ,GAApB,IAA2B1W,SAAUA,EAAU0K,SAAQ,OAAE0J,QAAF,IAAEA,OAAF,EAAEA,EAAe1J,cAFxE,IAMZ,cAAC,IAAD,CACI8L,KAAK,IACLC,OAAQ,SAACC,GAAD,OACJ,cAAC,GAAD,uCAAgBA,GAAWH,GAA3B,+BADI,MAQvB,CAlEG,OAAK9L,EAAKyL,eAaN,cAAC,GAAD,CAAYnD,UAAQ,EAApB,SACI,cAAC,GAAD,CAAa4D,OAAQlM,EAAKkM,OAAQ9X,MAAO,iCAZzC,cAAC,GAAD,UACI,cAAC,KAAD,CACI0N,QAASA,EACT1N,MAAO,wBACPmS,QAAS,iBACT4C,QAASxJ,EAAOwJ,WA6D3C,E,iBChLDgD,eAGAC,EAAQ,KAERC,IAASL,OACL,cAAC,KAAD,CAAYM,SAAS,IAAIvM,QAASwM,GAAlC,SACI,cAAC,GAAD,MAEJ1L,SAAS2L,eAAe,SAS5BzD,OAAO0D,iBAAiB,QAAQ,WAC5B1D,OAAOhJ,QAAQ2M,UAAU,CAAC,EAAG,GAChC,IAIGC,UAAUC,SAAWD,UAAUC,QAAQC,QACvCF,UAAUC,QAAQC,UAAUpV,MAAK,SAACqV,GAC1BA,EACA3V,KAAII,MAAM,8DAEVJ,KAAI4V,KAAK,2DAEhB,IAED5V,KAAI4V,KAAK,yC","file":"static/js/main.de06cbe2.chunk.js","sourcesContent":["export { default as Footer } from './frame/Footer';\nexport { default as Topbar } from './frame/Topbar';\nexport { default as WarehouseTags } from './misc/WarehouseTags';\nexport { default as DownloadZipBtn } from './misc/DownloadZipBtn';\nexport { default as WarehouseButton } from './misc/WarehouseButton';\nexport { default as WebRaveBtn } from './misc/WebRaveBtn';\nexport { default as ProgramChooser } from './modals/ProgramChooser';\nexport { default as ProjectModal } from './modals/ProjectModal/ProjectModal';\nexport { default as ShareDialog } from './modals/ShareDialog';\nexport { default as LoginScreen } from './modals/LoginScreen';\nexport { default as NotAllowedModal } from './modals/NotAllowedModal';\nexport { default as ProvisionalButton } from './modals/provisional/ProvisionalButton';\nexport { default as LocalForageCache } from './lib/LocalForageCache';\nexport { default as useDownloads } from './hooks/useDownloads';\nexport { default as useLocalCache } from './hooks/useLocalCache';\nexport { default as useProgram } from './hooks/useProgram';\nexport { default as useProject } from './hooks/useProject';\nexport { default as useQueryParams, hashHistory } from './hooks/useQueryParams';\nexport { default as themes } from './themes';\nexport * as googleAnalytics from './googleAnalytics';\nexport * as config from './config';\nexport * from './types';\nexport * from './constants';\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProjectTreeLayerTileTypes = exports.ProjectTreeLayerTypes = exports.TileTypes = exports.SymbologyStatus = exports.TilingStatusFinished = exports.TilingStatus = exports.RampType = exports.AccessEnum = exports.WarehouseRoleEnum = exports.FieldTypeEnum = void 0;\nvar FieldTypeEnum;\n(function (FieldTypeEnum) {\n    FieldTypeEnum[\"string\"] = \"S\";\n    FieldTypeEnum[\"number\"] = \"N\";\n    FieldTypeEnum[\"boolean\"] = \"BOOL\";\n    FieldTypeEnum[\"stringArr\"] = \"SARR\";\n    FieldTypeEnum[\"numberArr\"] = \"NARR\";\n})(FieldTypeEnum = exports.FieldTypeEnum || (exports.FieldTypeEnum = {}));\nvar WarehouseRoleEnum;\n(function (WarehouseRoleEnum) {\n    WarehouseRoleEnum[\"SuperUser\"] = \"SUPER\";\n    WarehouseRoleEnum[\"Admin\"] = \"ADMIN\";\n    WarehouseRoleEnum[\"Observer\"] = \"OBSERVER\";\n    WarehouseRoleEnum[\"Participant\"] = \"PARTICIPANT\";\n})(WarehouseRoleEnum = exports.WarehouseRoleEnum || (exports.WarehouseRoleEnum = {}));\nvar AccessEnum;\n(function (AccessEnum) {\n    AccessEnum[\"Public\"] = \"PUBLIC\";\n    AccessEnum[\"Private\"] = \"PRIVATE\";\n    AccessEnum[\"Secret\"] = \"SECRET\";\n})(AccessEnum = exports.AccessEnum || (exports.AccessEnum = {}));\nvar RampType;\n(function (RampType) {\n    RampType[\"INTERPOLATED\"] = \"INTERPOLATED\";\n    RampType[\"DISCRETE\"] = \"DISCRETE\";\n    RampType[\"EXACT\"] = \"EXACT\";\n})(RampType = exports.RampType || (exports.RampType = {}));\nvar TilingStatus;\n(function (TilingStatus) {\n    TilingStatus[\"UNKNOWN\"] = \"UNKNOWN\";\n    TilingStatus[\"QUEUED\"] = \"QUEUED\";\n    TilingStatus[\"FETCHING\"] = \"FETCHING\";\n    TilingStatus[\"NOT_APPLICABLE\"] = \"NOT_APPLICABLE\";\n    TilingStatus[\"CREATING\"] = \"CREATING\";\n    TilingStatus[\"NO_GEOMETRIES\"] = \"NO_GEOMETRIES\";\n    TilingStatus[\"TIMEOUT\"] = \"TIMEOUT\";\n    TilingStatus[\"TILING_ERROR\"] = \"TILING_ERROR\";\n    TilingStatus[\"INDEX_NOT_FOUND\"] = \"INDEX_NOT_FOUND\";\n    TilingStatus[\"LAYER_NOT_FOUND\"] = \"LAYER_NOT_FOUND\";\n    TilingStatus[\"FETCH_ERROR\"] = \"FETCH_ERROR\";\n    TilingStatus[\"SUCCESS\"] = \"SUCCESS\";\n})(TilingStatus = exports.TilingStatus || (exports.TilingStatus = {}));\nexports.TilingStatusFinished = [\n    TilingStatus.NOT_APPLICABLE,\n    TilingStatus.NO_GEOMETRIES,\n    TilingStatus.TIMEOUT,\n    TilingStatus.TILING_ERROR,\n    TilingStatus.SUCCESS\n];\nvar SymbologyStatus;\n(function (SymbologyStatus) {\n    SymbologyStatus[\"UNKNOWN\"] = \"UNKNOWN\";\n    SymbologyStatus[\"FETCHING\"] = \"FETCHING\";\n    SymbologyStatus[\"MISSING\"] = \"MISSING\";\n    SymbologyStatus[\"NOT_APPLICABLE\"] = \"NOT_APPLICABLE\";\n    SymbologyStatus[\"FOUND\"] = \"FOUND\";\n    SymbologyStatus[\"ERROR\"] = \"ERROR\";\n})(SymbologyStatus = exports.SymbologyStatus || (exports.SymbologyStatus = {}));\nvar TileTypes;\n(function (TileTypes) {\n    TileTypes[\"RASTER\"] = \"RASTER\";\n    TileTypes[\"HTML\"] = \"HTML\";\n    TileTypes[\"VECTOR_SHP\"] = \"VECTOR_SHP\";\n    TileTypes[\"VECTOR_GPKG\"] = \"VECTOR_GPKG\";\n})(TileTypes = exports.TileTypes || (exports.TileTypes = {}));\nvar ProjectTreeLayerTypes;\n(function (ProjectTreeLayerTypes) {\n    ProjectTreeLayerTypes[\"REPORT\"] = \"report\";\n    ProjectTreeLayerTypes[\"RASTER\"] = \"raster\";\n    ProjectTreeLayerTypes[\"LINE\"] = \"line\";\n    ProjectTreeLayerTypes[\"POLYGON\"] = \"polygon\";\n    ProjectTreeLayerTypes[\"POINT\"] = \"point\";\n    ProjectTreeLayerTypes[\"FILE\"] = \"file\";\n    ProjectTreeLayerTypes[\"TIN\"] = \"tin\";\n})(ProjectTreeLayerTypes = exports.ProjectTreeLayerTypes || (exports.ProjectTreeLayerTypes = {}));\nexports.ProjectTreeLayerTileTypes = [\n    ProjectTreeLayerTypes.RASTER,\n    ProjectTreeLayerTypes.POLYGON,\n    ProjectTreeLayerTypes.LINE,\n    ProjectTreeLayerTypes.POINT\n];\n//# sourceMappingURL=types.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.verifyMeta = exports.augmentXML = exports.parseProjectXML = exports.parseProgramXML = exports.parseXMLMeta = exports.getXML = void 0;\nvar xml2js_1 = require(\"xml2js\");\nvar axios_1 = __importDefault(require(\"axios\"));\nvar _1 = require(\"./\");\nvar xmldom_1 = __importDefault(require(\"xmldom\"));\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nfunction getXML(url) {\n    return __awaiter(this, void 0, void 0, function () {\n        var start, result, duration;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    start = Date.now();\n                    return [4, (0, axios_1.default)({\n                            url: url,\n                            method: 'get'\n                        })];\n                case 1:\n                    result = _a.sent();\n                    duration = (Date.now() - start) / 1000;\n                    if (duration > 10)\n                        loglevel_1.default.warn(\"getXML took \".concat(duration.toFixed(1), \" seconds\"));\n                    if (!result.data)\n                        throw new Error('Error retrieving XML file');\n                    return [2, result.data];\n            }\n        });\n    });\n}\nexports.getXML = getXML;\nfunction parseXMLMeta(metaArr) {\n    try {\n        return metaArr.reduce(function (acc, _a) {\n            var _b;\n            var $ = _a.$, _ = _a._;\n            return (__assign(__assign({}, acc), (_b = {}, _b[$.name] = _ && _.trim(), _b)));\n        }, {});\n    }\n    catch (_a) {\n        return {};\n    }\n}\nexports.parseXMLMeta = parseXMLMeta;\nfunction _recursePaths(xmlDom, products, groups, collections) {\n    var HierarchyNode = xmlDom.getElementsByTagName('Hierarchy')[0];\n    var productsInHierarchy = Array.from(HierarchyNode.getElementsByTagName('Product'));\n    var retVal = [];\n    productsInHierarchy.forEach(function (prodEl) {\n        var pathArr = [];\n        var ref = prodEl.getAttribute('ref');\n        var product = products.find(function (o) { return o.id === ref; });\n        if (!product)\n            throw new Error(\"Product not found for ref='\".concat(ref, \"'\"));\n        var currEl = prodEl.parentNode;\n        var _loop_1 = function () {\n            var ref_1 = currEl.getAttribute('ref');\n            var tag = currEl.tagName;\n            var def = tag === 'Group' ? groups.find(function (g) { return g.id === ref_1; }) : collections.find(function (g) { return g.id === ref_1; });\n            var folder = def.folder, name_1 = def.name;\n            pathArr.push({\n                type: tag,\n                id: ref_1,\n                folder: folder,\n                name: name_1\n            });\n            currEl = currEl.parentNode;\n        };\n        while (currEl && currEl.parentNode && currEl.tagName !== 'Hierarchy') {\n            _loop_1();\n        }\n        retVal.push(__assign(__assign({}, product), { pathArr: pathArr.reverse() }));\n    });\n    return retVal;\n}\nfunction parseProgramXML(rawXML) {\n    return __awaiter(this, void 0, void 0, function () {\n        var parsedProgramJSON, _a, projectFile, projectXSDs, meta, collections, groups, productsRaw, xmlDom, products;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, (0, xml2js_1.parseStringPromise)(rawXML).catch(function (err) {\n                        throw new _1.ValidationError('Error parsing XML file. This likely means a broken or unclosed tag.', [err.message]);\n                    })];\n                case 1:\n                    parsedProgramJSON = _b.sent();\n                    _a = parseXMLMeta(parsedProgramJSON.Program.MetaData[0].Meta), projectFile = _a.projectFile, projectXSDs = _a.projectXSDs, meta = __rest(_a, [\"projectFile\", \"projectXSDs\"]);\n                    collections = parsedProgramJSON.Program.Definitions[0].Collections[0].Collection.map(function (_a) {\n                        var $ = _a.$, Allow = _a.Allow, AllowRegex = _a.AllowRegex;\n                        return (__assign(__assign({}, $), { Allow: Allow ? (Array.isArray(Allow) ? Allow.map(function (a) { return a.$; }) : [Allow]) : undefined, AllowRegex: AllowRegex\n                                ? Array.isArray(AllowRegex)\n                                    ? AllowRegex.map(function (a) { return a.$.pattern; })\n                                    : [AllowRegex.pattern]\n                                : undefined }));\n                    });\n                    groups = [];\n                    if (parsedProgramJSON.Program.Definitions[0].Groups[0].Group) {\n                        if (Array.isArray(parsedProgramJSON.Program.Definitions[0].Groups[0].Group))\n                            groups = parsedProgramJSON.Program.Definitions[0].Groups[0].Group.map(function (a) { return a.$; });\n                        else\n                            groups = [parsedProgramJSON.Program.Definitions[0].Groups[0].Group];\n                    }\n                    productsRaw = [];\n                    if (parsedProgramJSON.Program.Definitions[0].Products[0].Product) {\n                        if (Array.isArray(parsedProgramJSON.Program.Definitions[0].Products[0].Product))\n                            productsRaw = parsedProgramJSON.Program.Definitions[0].Products[0].Product.map(function (a) { return a.$; });\n                        else\n                            productsRaw = [parsedProgramJSON.Program.Definitions[0].Products[0].Product];\n                    }\n                    xmlDom = new xmldom_1.default.DOMParser().parseFromString(rawXML);\n                    products = _recursePaths(xmlDom, productsRaw, groups, collections);\n                    return [2, Promise.resolve(new _1.Program({\n                            name: parsedProgramJSON.Program.Name[0],\n                            machineName: parsedProgramJSON.Program.MachineName[0],\n                            projectXSDs: projectXSDs,\n                            projectFile: projectFile,\n                            meta: meta,\n                            products: products,\n                            collections: collections,\n                            groups: groups\n                        }))];\n            }\n        });\n    });\n}\nexports.parseProgramXML = parseProgramXML;\nfunction parseProjectXML(rawXML) {\n    return __awaiter(this, void 0, void 0, function () {\n        var parsedProjectJSON, retVal, whMeta, meta;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, (0, xml2js_1.parseStringPromise)(rawXML).catch(function (err) {\n                        throw new _1.ValidationError('Error parsing XML file. This likely means a broken or unclosed tag.', [err.message]);\n                    })];\n                case 1:\n                    parsedProjectJSON = _a.sent();\n                    retVal = parsedProjectJSON.Project;\n                    whMeta = {};\n                    if (retVal.Warehouse) {\n                        whMeta = parseXMLMeta(retVal.Warehouse[0].Meta);\n                    }\n                    meta = {};\n                    if (retVal.MetaData) {\n                        meta = parseXMLMeta(retVal.MetaData[0].Meta);\n                    }\n                    return [2, Promise.resolve({\n                            id: whMeta.id,\n                            name: retVal.Name[0],\n                            projType: retVal.ProjectType[0],\n                            Warehouse: whMeta,\n                            program: whMeta.program,\n                            meta: meta,\n                            tags: _1.Project.parseTagString(whMeta.tags),\n                            xml: rawXML,\n                            parsedProjectJSON: parsedProjectJSON,\n                            rawXML: rawXML\n                        })];\n            }\n        });\n    });\n}\nexports.parseProjectXML = parseProjectXML;\nfunction augmentXML(newMeta, xmlfile) {\n    var parsed = new xmldom_1.default.DOMParser().parseFromString(xmlfile);\n    var metadata = parsed.getElementsByTagName('MetaData')[0];\n    if (parsed.getElementsByTagName('Warehouse').length > 0) {\n        parsed.removeChild(parsed.getElementsByTagName('Warehouse')[0]);\n    }\n    var warehouseNode = parsed.createElement('Warehouse');\n    Object.keys(newMeta).forEach(function (k) {\n        var mNode = parsed.createElement('Meta');\n        mNode.setAttribute('name', k);\n        mNode.appendChild(parsed.createTextNode(newMeta[k]));\n        warehouseNode.appendChild(mNode);\n    });\n    parsed.insertBefore(warehouseNode, metadata);\n    var formatted = new xmldom_1.default.XMLSerializer().serializeToString(parsed);\n    return formatted;\n}\nexports.augmentXML = augmentXML;\nfunction verifyMeta(projType, projectMeta, program) {\n    var projectDef = program.products.find(function (p) { return p.id === projType; });\n    if (!projectDef) {\n        throw new Error(\"No project type '\".concat(projType, \"' found in program '\").concat(program.name, \"'\"));\n    }\n    var collectionathArrs = projectDef.pathArr.filter(function (f) { return f.type === 'Collection'; });\n    return collectionathArrs.map(function (arrEl) { return ({\n        name: arrEl.name,\n        value: projectMeta[arrEl.name]\n    }); });\n}\nexports.verifyMeta = verifyMeta;\n//# sourceMappingURL=xml.js.map","\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.adminGetUsers = exports.adminUpdateUserPermissions = exports.search = exports.deleteProject = exports.downloadZipFile = exports.getWebSymbology = exports.getLayerTiles = exports.downloadFile = exports.getUploadUrls = exports.getProject = exports.getProgram = exports.getProgramAuth = exports.getPrograms = exports.validateProjectXML = exports.authCheck = exports.apiCall = void 0;\nvar axios_1 = __importDefault(require(\"axios\"));\nvar graphql_1 = require(\"graphql\");\nvar graphql_tag_1 = __importDefault(require(\"graphql-tag\"));\nvar loglevel_1 = __importDefault(require(\"loglevel\"));\nvar _1 = require(\"./\");\nvar apiCall = function (url, jwt, query, variables, timeout) {\n    var start = Date.now();\n    return (0, axios_1.default)({\n        url: url,\n        method: 'post',\n        timeout: timeout,\n        headers: {\n            Authorization: jwt ? \"Bearer \".concat(jwt) : 'Bearer NONE'\n        },\n        data: {\n            query: (0, graphql_1.print)(query),\n            variables: variables\n        }\n    })\n        .then(function (_a) {\n        var axiosData = _a.data;\n        var time = (Date.now() - start) / 1000;\n        if (time > 10)\n            loglevel_1.default.warn(\"Query took \".concat(time.toFixed(1), \" seconds. \").concat((0, graphql_1.print)(query)\n                .replace(/\\n/g, '')\n                .slice(0, 50), \" \").concat(JSON.stringify(variables)));\n        return axiosData;\n    })\n        .catch(function (err) {\n        if (err.response && err.response.status === 404) {\n            throw new Error(\"API Url not found: \".concat(url));\n        }\n        else if (err.code && err.code === 'ECONNREFUSED') {\n            throw new Error(\"Connection refused. Could not contact: '\".concat(url, \"'\"));\n        }\n        else {\n            loglevel_1.default.error('apiCall Error', { url: url, jwt: jwt, query: (0, graphql_1.print)(query), variables: variables, err: err });\n            throw err;\n        }\n    });\n};\nexports.apiCall = apiCall;\nfunction authCheck(url, jwt, timeout) {\n    return (0, exports.apiCall)(url, jwt, (0, graphql_tag_1.default)(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n            query AuthCall {\\n                auth {\\n                    loggedIn\\n                    userPool\\n                    clientId\\n                    region\\n                    domain\\n                }\\n            }\\n        \"], [\"\\n            query AuthCall {\\n                auth {\\n                    loggedIn\\n                    userPool\\n                    clientId\\n                    region\\n                    domain\\n                }\\n            }\\n        \"]))), {}, timeout);\n}\nexports.authCheck = authCheck;\nfunction validateProjectXML(url, jwt, xml, projType, program, timeout) {\n    return (0, exports.apiCall)(url, jwt, (0, graphql_tag_1.default)(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n            query validateProject($xml: String!, $projType: String!, $program: String!) {\\n                validate(xml: $xml, projType: $projType, program: $program) {\\n                    result\\n                    xmlErrors\\n                }\\n            }\\n        \"], [\"\\n            query validateProject($xml: String!, $projType: String!, $program: String!) {\\n                validate(xml: $xml, projType: $projType, program: $program) {\\n                    result\\n                    xmlErrors\\n                }\\n            }\\n        \"]))), { xml: xml, program: program, projType: projType }, timeout);\n}\nexports.validateProjectXML = validateProjectXML;\nfunction getPrograms(url, jwt, timeout) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2, (0, exports.apiCall)(url, jwt, (0, graphql_tag_1.default)(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n            query programs {\\n                auth {\\n                    loggedIn\\n                    userPool\\n                    clientId\\n                    region\\n                    domain\\n                }\\n                programs {\\n                    name\\n                    machineName\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"], [\"\\n            query programs {\\n                auth {\\n                    loggedIn\\n                    userPool\\n                    clientId\\n                    region\\n                    domain\\n                }\\n                programs {\\n                    name\\n                    machineName\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"]))), {}, timeout).then(function (gqlReturn) {\n                    return __assign(__assign({}, gqlReturn), { data: {\n                            programs: gqlReturn.data.programs.map(_1.Program.fromGraphQL)\n                        } });\n                })];\n        });\n    });\n}\nexports.getPrograms = getPrograms;\nfunction getProgramAuth(url, jwt, programName, timeout) {\n    return __awaiter(this, void 0, void 0, function () {\n        var _a, program, errors;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, (0, exports.apiCall)(url, jwt, (0, graphql_tag_1.default)(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n            query program($program: String!) {\\n                program(program: $program) {\\n                    name\\n                    machineName\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"], [\"\\n            query program($program: String!) {\\n                program(program: $program) {\\n                    name\\n                    machineName\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"]))), { program: programName }, timeout)];\n                case 1:\n                    _a = _b.sent(), program = _a.data.program, errors = _a.errors;\n                    return [2, {\n                            data: {\n                                program: _1.Program.fromGraphQL(program)\n                            },\n                            errors: errors\n                        }];\n            }\n        });\n    });\n}\nexports.getProgramAuth = getProgramAuth;\nfunction getProgram(url, jwt, programName, timeout) {\n    return __awaiter(this, void 0, void 0, function () {\n        var _a, program, errors;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, (0, exports.apiCall)(url, jwt, (0, graphql_tag_1.default)(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n            query program($program: String!) {\\n                program(program: $program) {\\n                    name\\n                    machineName\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"], [\"\\n            query program($program: String!) {\\n                program(program: $program) {\\n                    name\\n                    machineName\\n                    projectXSDs\\n                    projectFile\\n                    role\\n                    groups {\\n                        id\\n                        name\\n                        folder\\n                    }\\n                    collections {\\n                        id\\n                        name\\n                        AllowRegex\\n                        Allow {\\n                            id\\n                            name\\n                            aliases\\n                            folder\\n                        }\\n                    }\\n                    products {\\n                        id\\n                        name\\n                        folder\\n                        pathArr\\n                    }\\n                    hierarchy\\n                    meta\\n                }\\n            }\\n        \"]))), { program: programName }, timeout)];\n                case 1:\n                    _a = _b.sent(), program = _a.data.program, errors = _a.errors;\n                    return [2, {\n                            data: {\n                                program: _1.Program.fromGraphQL(program)\n                            },\n                            errors: errors\n                        }];\n            }\n        });\n    });\n}\nexports.getProgram = getProgram;\nfunction getProject(url, jwt, id, program, files, tree, timeout) {\n    if (files === void 0) { files = false; }\n    if (tree === void 0) { tree = false; }\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2, (0, exports.apiCall)(url, jwt, (0, graphql_tag_1.default)(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n            query getProject($id: ID!, $program: String!) {\\n                project(id: $id, program: $program) {\\n                    id\\n                    name\\n                    projType\\n                    totalSize\\n                    program\\n                    tags\\n                    createdBy\\n                    updatedBy\\n                    createdOn\\n                    updatedOn\\n                    meta\\n                    \", \"\\n                    \", \"\\n                }\\n            }\\n        \"], [\"\\n            query getProject($id: ID!, $program: String!) {\\n                project(id: $id, program: $program) {\\n                    id\\n                    name\\n                    projType\\n                    totalSize\\n                    program\\n                    tags\\n                    createdBy\\n                    updatedBy\\n                    createdOn\\n                    updatedOn\\n                    meta\\n                    \", \"\\n                    \", \"\\n                }\\n            }\\n        \"])), files\n                    ? \"\\n                    files {\\n                        key\\n                        md5\\n                        size\\n                        downloadUrl\\n                    }\"\n                    : '', tree\n                    ? \"\\n                        tree {\\n                            name\\n                            description\\n                            projectType\\n                            metaStr\\n                            leaves {\\n                                id\\n                                pid\\n                                label\\n                                layerId\\n                                blLayerId\\n                                layerType\\n                                layerPath\\n                                layerName\\n                                nodeExists\\n                                metaStr\\n                                symbology\\n                                transparency\\n                            }\\n                            branches {\\n                                label\\n                                collapsed\\n                                bid\\n                                pid\\n                            }\\n                            defaultView\\n                            views  {\\n                                id\\n                                name\\n                                description\\n                                layers{\\n                                id\\n                                visible\\n                                }\\n                            }\\n                        }\\n                    \"\n                    : ''), { id: id, program: program }, timeout).then(function (gqlReturn) { return (__assign(__assign({}, gqlReturn), { data: {\n                        project: _1.Project.fromGraphQL(gqlReturn.data.project)\n                    } })); })];\n        });\n    });\n}\nexports.getProject = getProject;\nfunction getUploadUrls(url, jwt, id, fileList, projectType, program, timeout) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, (0, exports.apiCall)(url, jwt, (0, graphql_tag_1.default)(templateObject_7 || (templateObject_7 = __makeTemplateObject([\"\\n            query requestUploadProject($id: ID, $files: [String!], $program: String!, $projectType: String!) {\\n                requestUpload(id: $id, files: $files, program: $program, projectType: $projectType) {\\n                    id\\n                    uploadUrls {\\n                        url\\n                        fields\\n                        origPath\\n                    }\\n                }\\n            }\\n        \"], [\"\\n            query requestUploadProject($id: ID, $files: [String!], $program: String!, $projectType: String!) {\\n                requestUpload(id: $id, files: $files, program: $program, projectType: $projectType) {\\n                    id\\n                    uploadUrls {\\n                        url\\n                        fields\\n                        origPath\\n                    }\\n                }\\n            }\\n        \"]))), { id: id, files: fileList, projectType: projectType, program: program }, timeout)];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.getUploadUrls = getUploadUrls;\nfunction downloadFile(url, jwt, projType, program, id, filePath, timeout) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, (0, exports.apiCall)(url, jwt, (0, graphql_tag_1.default)(templateObject_8 || (templateObject_8 = __makeTemplateObject([\"\\n            query downloadFileQuery($program: String!, $id: ID!, $projType: String!, $filePath: String!) {\\n                downloadFile(program: $program, id: $id, projType: $projType, filePath: $filePath) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                }\\n            }\\n        \"], [\"\\n            query downloadFileQuery($program: String!, $id: ID!, $projType: String!, $filePath: String!) {\\n                downloadFile(program: $program, id: $id, projType: $projType, filePath: $filePath) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                }\\n            }\\n        \"]))), { projType: projType, program: program, id: id, filePath: filePath }, timeout)];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.downloadFile = downloadFile;\nfunction getLayerTiles(url, jwt, projType, program, id, layerPath, timeout) {\n    return __awaiter(this, void 0, void 0, function () {\n        var res, retVal;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, (0, exports.apiCall)(url, jwt, (0, graphql_tag_1.default)(templateObject_9 || (templateObject_9 = __makeTemplateObject([\"\\n            query getLayerTilesQuery($program: String!, $id: ID!, $projType: String!, $layerPath: String!) {\\n                getLayerTiles(program: $program, id: $id, projType: $projType, layerPath: $layerPath) {\\n                    url\\n                    indexUrl\\n                    status\\n                    lastStatus\\n                    error\\n                    rsLayer\\n                    rasterStats\\n                    numFiles\\n                    started\\n                    duration\\n                    format\\n                    bounds\\n                    maxZoom\\n                    minZoom\\n                    originFile {\\n                        lastModified\\n                        etag\\n                        size\\n                        key\\n                    }\\n                }\\n            }\\n        \"], [\"\\n            query getLayerTilesQuery($program: String!, $id: ID!, $projType: String!, $layerPath: String!) {\\n                getLayerTiles(program: $program, id: $id, projType: $projType, layerPath: $layerPath) {\\n                    url\\n                    indexUrl\\n                    status\\n                    lastStatus\\n                    error\\n                    rsLayer\\n                    rasterStats\\n                    numFiles\\n                    started\\n                    duration\\n                    format\\n                    bounds\\n                    maxZoom\\n                    minZoom\\n                    originFile {\\n                        lastModified\\n                        etag\\n                        size\\n                        key\\n                    }\\n                }\\n            }\\n        \"]))), { projType: projType, program: program, id: id, layerPath: layerPath }, timeout)];\n                case 1:\n                    res = _a.sent();\n                    if (!res.data)\n                        return [2, { errors: res.errors }];\n                    else {\n                        retVal = res.data.getLayerTiles;\n                        return [2, {\n                                errors: res.errors,\n                                data: {\n                                    getLayerTiles: __assign(__assign({}, retVal), { started: retVal && retVal.started && parseInt(retVal.started, 10), lastStatus: retVal && retVal.lastStatus && parseInt(retVal.lastStatus, 10), rasterStats: retVal && retVal.rasterStats && JSON.parse(retVal.rasterStats), rsLayer: retVal && retVal.rsLayer && JSON.parse(retVal.rsLayer), originFile: retVal &&\n                                            retVal.originFile && __assign(__assign({}, retVal.originFile), { lastModified: parseInt(retVal.originFile.lastModified, 10) }) })\n                                }\n                            }];\n                    }\n                    return [2];\n            }\n        });\n    });\n}\nexports.getLayerTiles = getLayerTiles;\nfunction getWebSymbology(url, jwt, projType, name, isRaster, timeout) {\n    return __awaiter(this, void 0, void 0, function () {\n        var res;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, (0, exports.apiCall)(url, jwt, (0, graphql_tag_1.default)(templateObject_10 || (templateObject_10 = __makeTemplateObject([\"\\n            query getWebSymbology($projType: String!, $name: String!, $isRaster: Boolean) {\\n                getWebSymbology(projType: $projType, name: $name, isRaster: $isRaster) {\\n                    name\\n                    status\\n                    legend\\n                    rampType\\n                    mapboxJson\\n                    url\\n                    error\\n                }\\n            }\\n        \"], [\"\\n            query getWebSymbology($projType: String!, $name: String!, $isRaster: Boolean) {\\n                getWebSymbology(projType: $projType, name: $name, isRaster: $isRaster) {\\n                    name\\n                    status\\n                    legend\\n                    rampType\\n                    mapboxJson\\n                    url\\n                    error\\n                }\\n            }\\n        \"]))), { projType: projType, name: name, isRaster: isRaster }, timeout)];\n                case 1:\n                    res = _a.sent();\n                    if (!res.data)\n                        return [2, { errors: res.errors }];\n                    else {\n                        return [2, {\n                                errors: res.errors,\n                                data: {\n                                    getWebSymbology: res.data.getWebSymbology && __assign(__assign({}, res.data.getWebSymbology), { mapboxJson: res.data.getWebSymbology.mapboxJson && JSON.parse(res.data.getWebSymbology.mapboxJson) })\n                                }\n                            }];\n                    }\n                    return [2];\n            }\n        });\n    });\n}\nexports.getWebSymbology = getWebSymbology;\nfunction downloadZipFile(url, jwt, projType, program, id, timeout) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, (0, exports.apiCall)(url, jwt, (0, graphql_tag_1.default)(templateObject_11 || (templateObject_11 = __makeTemplateObject([\"\\n            query downloadZipFileQuery($program: String!, $id: ID!, $projType: String!) {\\n                downloadZip(program: $program, id: $id, projType: $projType) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                    pendingSince\\n                }\\n            }\\n        \"], [\"\\n            query downloadZipFileQuery($program: String!, $id: ID!, $projType: String!) {\\n                downloadZip(program: $program, id: $id, projType: $projType) {\\n                    key\\n                    md5\\n                    contentType\\n                    size\\n                    downloadUrl\\n                    pendingSince\\n                }\\n            }\\n        \"]))), { projType: projType, program: program, id: id }, timeout)];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.downloadZipFile = downloadZipFile;\nfunction deleteProject(url, jwt, id, program, timeout) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, (0, exports.apiCall)(url, jwt, (0, graphql_tag_1.default)(templateObject_12 || (templateObject_12 = __makeTemplateObject([\"\\n            mutation deleteProject($id: ID!, $program: String!) {\\n                deleteProject(id: $id, program: $program)\\n            }\\n        \"], [\"\\n            mutation deleteProject($id: ID!, $program: String!) {\\n                deleteProject(id: $id, program: $program)\\n            }\\n        \"]))), { program: program, id: id }, timeout)];\n                case 1:\n                    response = _a.sent();\n                    return [2, response];\n            }\n        });\n    });\n}\nexports.deleteProject = deleteProject;\nfunction search(url, jwt, program, params, timeout) {\n    return __awaiter(this, void 0, void 0, function () {\n        var res, _a, nextToken, projects, total;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, (0, exports.apiCall)(url, jwt, (0, graphql_tag_1.default)(templateObject_13 || (templateObject_13 = __makeTemplateObject([\"\\n            query searchQuery(\\n                $program: String!\\n                $projType: String\\n                $nameStr: String\\n                $metaStr: String\\n                $metaArr: String\\n                $tags: String\\n                $noTags: Boolean\\n                $limit: Int\\n                $nextToken: Int\\n            ) {\\n                search(\\n                    program: $program\\n                    projType: $projType\\n                    nameStr: $nameStr\\n                    metaStr: $metaStr\\n                    metaArr: $metaArr\\n                    tags: $tags\\n                    noTags: $noTags\\n                    limit: $limit\\n                    nextToken: $nextToken\\n                ) {\\n                    projects {\\n                        id\\n                        name\\n                        projType\\n                        program\\n                        tags\\n                        totalSize\\n                        createdBy\\n                        updatedBy\\n                        createdOn\\n                        updatedOn\\n                        meta\\n                        score\\n                    }\\n                    nextToken\\n                    total\\n                }\\n            }\\n        \"], [\"\\n            query searchQuery(\\n                $program: String!\\n                $projType: String\\n                $nameStr: String\\n                $metaStr: String\\n                $metaArr: String\\n                $tags: String\\n                $noTags: Boolean\\n                $limit: Int\\n                $nextToken: Int\\n            ) {\\n                search(\\n                    program: $program\\n                    projType: $projType\\n                    nameStr: $nameStr\\n                    metaStr: $metaStr\\n                    metaArr: $metaArr\\n                    tags: $tags\\n                    noTags: $noTags\\n                    limit: $limit\\n                    nextToken: $nextToken\\n                ) {\\n                    projects {\\n                        id\\n                        name\\n                        projType\\n                        program\\n                        tags\\n                        totalSize\\n                        createdBy\\n                        updatedBy\\n                        createdOn\\n                        updatedOn\\n                        meta\\n                        score\\n                    }\\n                    nextToken\\n                    total\\n                }\\n            }\\n        \"]))), __assign(__assign({}, params), { program: program }), timeout)];\n                case 1:\n                    res = _b.sent();\n                    if (!res.data)\n                        return [2, { errors: res.errors }];\n                    else {\n                        _a = res.data.search || {}, nextToken = _a.nextToken, projects = _a.projects, total = _a.total;\n                        return [2, {\n                                errors: res.errors,\n                                data: {\n                                    search: {\n                                        projects: Array.isArray(projects) ? projects.map(_1.Project.fromGraphQL) : projects,\n                                        nextToken: nextToken,\n                                        total: total\n                                    }\n                                }\n                            }];\n                    }\n                    return [2];\n            }\n        });\n    });\n}\nexports.search = search;\nfunction adminUpdateUserPermissions(url, jwt, id, program, permission, timeout) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, (0, exports.apiCall)(url, jwt, (0, graphql_tag_1.default)(templateObject_14 || (templateObject_14 = __makeTemplateObject([\"\\n            mutation project($id: ID!, $program: String!, $permission: String) {\\n                updateUser(id: $id, program: $program, permission: $permission) {\\n                    email\\n                    name\\n                    picture\\n                    username\\n                    createdOn\\n                    updatedOn\\n                    role\\n                }\\n            }\\n        \"], [\"\\n            mutation project($id: ID!, $program: String!, $permission: String) {\\n                updateUser(id: $id, program: $program, permission: $permission) {\\n                    email\\n                    name\\n                    picture\\n                    username\\n                    createdOn\\n                    updatedOn\\n                    role\\n                }\\n            }\\n        \"]))), { program: program, id: id, permission: permission }, timeout)];\n                case 1:\n                    response = _a.sent();\n                    if (!response.data)\n                        return [2, { errors: response.errors }];\n                    else {\n                        return [2, {\n                                errors: response.errors,\n                                data: {\n                                    updateUser: response.data.updateUser\n                                        ? __assign(__assign({}, response.data.updateUser), { createdOn: parseInt(response.data.updateUser.createdOn, 10), updatedOn: parseInt(response.data.updateUser.updatedOn, 10) }) : null\n                                }\n                            }];\n                    }\n                    return [2];\n            }\n        });\n    });\n}\nexports.adminUpdateUserPermissions = adminUpdateUserPermissions;\nfunction adminGetUsers(url, jwt, program, limit, nextToken, timeout) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response, _a, nextTokenNEW, users;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4, (0, exports.apiCall)(url, jwt, (0, graphql_tag_1.default)(templateObject_15 || (templateObject_15 = __makeTemplateObject([\"\\n            query getUsers($program: String!, $limit: Int, $nextToken: String) {\\n                getUsers(program: $program, limit: $limit, nextToken: $nextToken) {\\n                    users {\\n                        email\\n                        name\\n                        picture\\n                        username\\n                        createdOn\\n                        updatedOn\\n                        role\\n                    }\\n                    nextToken\\n                }\\n            }\\n        \"], [\"\\n            query getUsers($program: String!, $limit: Int, $nextToken: String) {\\n                getUsers(program: $program, limit: $limit, nextToken: $nextToken) {\\n                    users {\\n                        email\\n                        name\\n                        picture\\n                        username\\n                        createdOn\\n                        updatedOn\\n                        role\\n                    }\\n                    nextToken\\n                }\\n            }\\n        \"]))), { program: program, limit: limit, nextToken: nextToken }, timeout)];\n                case 1:\n                    response = _b.sent();\n                    if (!response.data)\n                        return [2, { errors: response.errors }];\n                    else {\n                        _a = response.data.getUsers || {}, nextTokenNEW = _a.nextToken, users = _a.users;\n                        return [2, {\n                                errors: response.errors,\n                                data: {\n                                    getUsers: {\n                                        users: Array.isArray(users)\n                                            ? users.map(function (u) { return (__assign(__assign({}, u), { createdOn: parseInt(u.createdOn, 10), updatedOn: parseInt(u.updatedOn, 10) })); })\n                                            : users,\n                                        nextToken: nextTokenNEW\n                                    }\n                                }\n                            }];\n                    }\n                    return [2];\n            }\n        });\n    });\n}\nexports.adminGetUsers = adminGetUsers;\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9, templateObject_10, templateObject_11, templateObject_12, templateObject_13, templateObject_14, templateObject_15;\n//# sourceMappingURL=api.js.map","\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar graphql_tag_1 = __importDefault(require(\"graphql-tag\"));\nvar types_1 = require(\"./types\");\nvar typeDefs = (0, graphql_tag_1.default)(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n    # Check out the cheat sheet:\\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\\n\\n    schema {\\n        query: Query\\n        mutation: Mutation\\n    }\\n\\n    type Query {\\n        # Get a project and associated metadata\\n        auth: AuthParams\\n\\n        project(id: ID!, program: String!): Project\\n        projects(program: String!, projType: String, limit: Int, nextToken: String): PaginatedProjects\\n\\n        program(program: String!): Program\\n        programs: [Program]\\n\\n        downloadFile(program: String!, id: ID!, projType: String!, filePath: String!): FileDownloadMeta\\n\\n        downloadZip(program: String!, id: ID!, projType: String!): FileDownloadMeta\\n\\n        getWebSymbology(projType: String, name: String!, isRaster: Boolean): Symbology\\n        getLayerTiles(program: String!, id: ID!, projType: String!, layerPath: String!): TileService\\n\\n\\n        # Request an upload start. Writes a manifest file on the upload bucket\\n        # and creates upload urls for everything\\n        requestUpload(id: ID, files: [String!], program: String!, projectType: String!): FileUpload\\n\\n        search(\\n            program: String!\\n            projType: String\\n            nameStr: String\\n            metaStr: String\\n            metaArr: String\\n            tags: String\\n            noTags: Boolean\\n            limit: Int\\n            nextToken: Int\\n        ): PaginatedSearchResults\\n\\n        validate(xml: String!, projType: String!, program: String!): Validation\\n\\n        getUsers(program: String!, limit: Int, nextToken: String): PaginatedUsers\\n\\n        projectTree(id: ID!, program: String!, projType: String!): ProjectTree\\n    }\\n\\n    # this schema allows the following mutation:\\n    type Mutation {\\n        # signal a deletion of a project\\n        deleteProject(id: ID!, program: String!): ID!\\n        updateUser(id: ID!, program: String!, permission: String): User\\n        reIndexProject(id: ID!, program: String!, projType: String!): WatcherOutput\\n        queueTileRebuild(id: ID!, program: String!, projType: String!, filePath: String, symbologies: [String]): String\\n    }\\n\\n    type User {\\n        email: String\\n        name: String\\n        picture: String\\n        username: String!\\n        createdOn: String\\n        updatedOn: String\\n        role: String\\n    }\\n\\n    type PaginatedUsers {\\n        users: [User]\\n        nextToken: String\\n    }\\n\\n    type Validation {\\n        result: Boolean\\n        xmlErrors: [String]\\n    }\\n\\n    type AuthParams {\\n        loggedIn: Boolean\\n        userPool: String\\n        clientId: String\\n        region: String\\n        domain: String\\n    }\\n\\n    interface ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n    }\\n\\n    type Project implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        files: [FileDownloadMeta]\\n        tree: ProjectTree\\n    }\\n\\n    type ProjectSearchResult implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        score: Float\\n        files: [FileDownloadMeta]\\n    }\\n\\n    # This is mostly just JSON that's stringified\\n    type Product {\\n        id: ID!\\n        name: String!\\n        folder: String\\n        # Stringified JSON Array:\\n        pathArr: String\\n    }\\n    type Group {\\n        id: ID!\\n        name: String!\\n        folder: String\\n    }\\n    type NamedAllow {\\n        id: ID!\\n        name: String!\\n        aliases: String\\n        folder: String\\n    }\\n    type Collection {\\n        id: ID!\\n        name: String!\\n        AllowRegex: [String]\\n        Allow: [NamedAllow]\\n    }\\n    type Program {\\n        name: String\\n        machineName: String\\n        projectXSDs: String\\n        projectFile: String\\n        meta: String\\n        groups: [Group]\\n        collections: [Collection]\\n        products: [Product]\\n        hierarchy: String\\n        role: String\\n    }\\n\\n    type FileDownloadMeta {\\n        key: String!\\n        md5: String!\\n        size: String\\n        contentType: String\\n        downloadUrl: String!\\n        pendingSince: String\\n    }\\n\\n    type FileUpload {\\n        id: ID!\\n        uploadUrls: [UploadUrl]\\n    }\\n\\n    type UploadUrl {\\n        url: String\\n        fields: String\\n        origPath: String\\n    }\\n\\n    type FileUploadMeta {\\n        key: String!\\n        downloadUrl: String!\\n    }\\n\\n    # Series Connection allows us to implement pagination easily\\n    type PaginatedProjects {\\n        projects: [Project]\\n        nextToken: String\\n    }\\n\\n    type PaginatedSearchResults {\\n        projects: [ProjectSearchResult]\\n        nextToken: Int\\n        total: Int\\n    }\\n\\n    type NewProject {\\n        id: ID!\\n    }\\n\\n    \\\"\\\"\\\"\\n    ProjectTreeLayerTypes is an enumeration to help us display layers with the\\n    correct icon and assign them to the right slot\\n    \\\"\\\"\\\"\\n    enum ProjectTreeLayerTypes {\\n        \", \"\\n    }\\n    enum SymbologyStatus {\\n        \", \"\\n    }\\n    enum TilingStatus {\\n        \", \"\\n    }\\n    enum RampType {\\n        \", \"\\n    }\\n\\n    type ProjectTreeBranch {\\n        label: String!\\n        collapsed: Boolean\\n        # Branch ID and parent ID\\n        bid: Int\\n        pid: Int\\n    }\\n    type ProjectTreeLeaf {\\n        id: Int # This is a global ID not an id within a branch\\n        pid: Int\\n        label: String!\\n        layerId: ID\\n        blLayerId: ID\\n        layerType: ProjectTreeLayerTypes!\\n        layerPath: String\\n        layerName: String\\n        nodeExists: Boolean\\n        # This is the path that helps u\\n        metaStr: String\\n        symbology: String\\n        transparency: Int\\n    }\\n\\n    # The project tree comes back as non-recursive list of layers.\\n    # The ProjectTree class will need to parse this into a typescript \\n    # Recursive type\\n    type ProjectTreeViewLayer {\\n        id: ID!\\n        visible: Boolean\\n    }\\n\\n    type ProjectTreeViews {\\n        id: ID!\\n        name: String!\\n        description: String\\n        layers: [ProjectTreeViewLayer]\\n    }\\n\\n    type ProjectTree {\\n        name: String\\n        description: String\\n        projectType: String\\n        metaStr: String\\n        leaves: [ProjectTreeLeaf]\\n        branches: [ProjectTreeBranch]\\n        defaultView: ID\\n        views: [ProjectTreeViews]\\n    }\\n\\n    type TileServiceOriginFile {\\n        lastModified: String\\n        etag: String\\n        size: Int\\n        key: String\\n    }\\n\\n    type TileService {\\n        url: String\\n        indexUrl: String\\n        status: TilingStatus!\\n        lastStatus: String\\n        error: String\\n        rasterStats: String\\n        numFiles: Int\\n        rsLayer: String        # Arbitrary depth so stringify rsLayer\\n        started: String\\n        duration: Float\\n        format: String\\n        bounds: [Float]\\n        maxZoom: Int\\n        minZoom: Int\\n        originFile: TileServiceOriginFile\\n    }\\n    type Symbology {\\n        name: String!\\n        status: SymbologyStatus\\n        legend: [[String]]\\n        rampType: RampType\\n        mapboxJson: String\\n        url: String\\n        error: String\\n    }\\n\\n    # Just a nice convenience type for our lambda invoke methods\\n    type WatcherOutput {\\n        message: String\\n        results: [String]\\n        errors: [String]\\n    }\\n\"], [\"\\n    # Check out the cheat sheet:\\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\\n\\n    schema {\\n        query: Query\\n        mutation: Mutation\\n    }\\n\\n    type Query {\\n        # Get a project and associated metadata\\n        auth: AuthParams\\n\\n        project(id: ID!, program: String!): Project\\n        projects(program: String!, projType: String, limit: Int, nextToken: String): PaginatedProjects\\n\\n        program(program: String!): Program\\n        programs: [Program]\\n\\n        downloadFile(program: String!, id: ID!, projType: String!, filePath: String!): FileDownloadMeta\\n\\n        downloadZip(program: String!, id: ID!, projType: String!): FileDownloadMeta\\n\\n        getWebSymbology(projType: String, name: String!, isRaster: Boolean): Symbology\\n        getLayerTiles(program: String!, id: ID!, projType: String!, layerPath: String!): TileService\\n\\n\\n        # Request an upload start. Writes a manifest file on the upload bucket\\n        # and creates upload urls for everything\\n        requestUpload(id: ID, files: [String!], program: String!, projectType: String!): FileUpload\\n\\n        search(\\n            program: String!\\n            projType: String\\n            nameStr: String\\n            metaStr: String\\n            metaArr: String\\n            tags: String\\n            noTags: Boolean\\n            limit: Int\\n            nextToken: Int\\n        ): PaginatedSearchResults\\n\\n        validate(xml: String!, projType: String!, program: String!): Validation\\n\\n        getUsers(program: String!, limit: Int, nextToken: String): PaginatedUsers\\n\\n        projectTree(id: ID!, program: String!, projType: String!): ProjectTree\\n    }\\n\\n    # this schema allows the following mutation:\\n    type Mutation {\\n        # signal a deletion of a project\\n        deleteProject(id: ID!, program: String!): ID!\\n        updateUser(id: ID!, program: String!, permission: String): User\\n        reIndexProject(id: ID!, program: String!, projType: String!): WatcherOutput\\n        queueTileRebuild(id: ID!, program: String!, projType: String!, filePath: String, symbologies: [String]): String\\n    }\\n\\n    type User {\\n        email: String\\n        name: String\\n        picture: String\\n        username: String!\\n        createdOn: String\\n        updatedOn: String\\n        role: String\\n    }\\n\\n    type PaginatedUsers {\\n        users: [User]\\n        nextToken: String\\n    }\\n\\n    type Validation {\\n        result: Boolean\\n        xmlErrors: [String]\\n    }\\n\\n    type AuthParams {\\n        loggedIn: Boolean\\n        userPool: String\\n        clientId: String\\n        region: String\\n        domain: String\\n    }\\n\\n    interface ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n    }\\n\\n    type Project implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        files: [FileDownloadMeta]\\n        tree: ProjectTree\\n    }\\n\\n    type ProjectSearchResult implements ProjectBase {\\n        id: ID!\\n        name: String\\n        meta: String\\n        tags: String\\n        projType: String\\n        totalSize: String\\n        program: String\\n        createdBy: ID!\\n        updatedBy: ID!\\n        createdOn: String!\\n        updatedOn: String!\\n        score: Float\\n        files: [FileDownloadMeta]\\n    }\\n\\n    # This is mostly just JSON that's stringified\\n    type Product {\\n        id: ID!\\n        name: String!\\n        folder: String\\n        # Stringified JSON Array:\\n        pathArr: String\\n    }\\n    type Group {\\n        id: ID!\\n        name: String!\\n        folder: String\\n    }\\n    type NamedAllow {\\n        id: ID!\\n        name: String!\\n        aliases: String\\n        folder: String\\n    }\\n    type Collection {\\n        id: ID!\\n        name: String!\\n        AllowRegex: [String]\\n        Allow: [NamedAllow]\\n    }\\n    type Program {\\n        name: String\\n        machineName: String\\n        projectXSDs: String\\n        projectFile: String\\n        meta: String\\n        groups: [Group]\\n        collections: [Collection]\\n        products: [Product]\\n        hierarchy: String\\n        role: String\\n    }\\n\\n    type FileDownloadMeta {\\n        key: String!\\n        md5: String!\\n        size: String\\n        contentType: String\\n        downloadUrl: String!\\n        pendingSince: String\\n    }\\n\\n    type FileUpload {\\n        id: ID!\\n        uploadUrls: [UploadUrl]\\n    }\\n\\n    type UploadUrl {\\n        url: String\\n        fields: String\\n        origPath: String\\n    }\\n\\n    type FileUploadMeta {\\n        key: String!\\n        downloadUrl: String!\\n    }\\n\\n    # Series Connection allows us to implement pagination easily\\n    type PaginatedProjects {\\n        projects: [Project]\\n        nextToken: String\\n    }\\n\\n    type PaginatedSearchResults {\\n        projects: [ProjectSearchResult]\\n        nextToken: Int\\n        total: Int\\n    }\\n\\n    type NewProject {\\n        id: ID!\\n    }\\n\\n    \\\"\\\"\\\"\\n    ProjectTreeLayerTypes is an enumeration to help us display layers with the\\n    correct icon and assign them to the right slot\\n    \\\"\\\"\\\"\\n    enum ProjectTreeLayerTypes {\\n        \", \"\\n    }\\n    enum SymbologyStatus {\\n        \", \"\\n    }\\n    enum TilingStatus {\\n        \", \"\\n    }\\n    enum RampType {\\n        \", \"\\n    }\\n\\n    type ProjectTreeBranch {\\n        label: String!\\n        collapsed: Boolean\\n        # Branch ID and parent ID\\n        bid: Int\\n        pid: Int\\n    }\\n    type ProjectTreeLeaf {\\n        id: Int # This is a global ID not an id within a branch\\n        pid: Int\\n        label: String!\\n        layerId: ID\\n        blLayerId: ID\\n        layerType: ProjectTreeLayerTypes!\\n        layerPath: String\\n        layerName: String\\n        nodeExists: Boolean\\n        # This is the path that helps u\\n        metaStr: String\\n        symbology: String\\n        transparency: Int\\n    }\\n\\n    # The project tree comes back as non-recursive list of layers.\\n    # The ProjectTree class will need to parse this into a typescript \\n    # Recursive type\\n    type ProjectTreeViewLayer {\\n        id: ID!\\n        visible: Boolean\\n    }\\n\\n    type ProjectTreeViews {\\n        id: ID!\\n        name: String!\\n        description: String\\n        layers: [ProjectTreeViewLayer]\\n    }\\n\\n    type ProjectTree {\\n        name: String\\n        description: String\\n        projectType: String\\n        metaStr: String\\n        leaves: [ProjectTreeLeaf]\\n        branches: [ProjectTreeBranch]\\n        defaultView: ID\\n        views: [ProjectTreeViews]\\n    }\\n\\n    type TileServiceOriginFile {\\n        lastModified: String\\n        etag: String\\n        size: Int\\n        key: String\\n    }\\n\\n    type TileService {\\n        url: String\\n        indexUrl: String\\n        status: TilingStatus!\\n        lastStatus: String\\n        error: String\\n        rasterStats: String\\n        numFiles: Int\\n        rsLayer: String        # Arbitrary depth so stringify rsLayer\\n        started: String\\n        duration: Float\\n        format: String\\n        bounds: [Float]\\n        maxZoom: Int\\n        minZoom: Int\\n        originFile: TileServiceOriginFile\\n    }\\n    type Symbology {\\n        name: String!\\n        status: SymbologyStatus\\n        legend: [[String]]\\n        rampType: RampType\\n        mapboxJson: String\\n        url: String\\n        error: String\\n    }\\n\\n    # Just a nice convenience type for our lambda invoke methods\\n    type WatcherOutput {\\n        message: String\\n        results: [String]\\n        errors: [String]\\n    }\\n\"])), Object.values(types_1.ProjectTreeLayerTypes).join('\\n      '), Object.values(types_1.SymbologyStatus).join('\\n      '), Object.values(types_1.TilingStatus).join('\\n      '), Object.values(types_1.RampType).join('\\n      '));\nexports.default = typeDefs;\nvar templateObject_1;\n//# sourceMappingURL=schema.graphql.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Program = void 0;\nvar Program = (function () {\n    function Program(programObj) {\n        Object.assign(this, programObj);\n    }\n    Program.fromGraphQL = function (input) {\n        if (!input)\n            return null;\n        var meta = input.meta ? JSON.parse(input.meta) : {};\n        return new Program(__assign(__assign({}, input), { meta: meta, role: input.role, products: input.products\n                ? input.products.map(function (p) { return (__assign(__assign({}, p), { pathArr: JSON.parse(p.pathArr) })); })\n                : [] }));\n    };\n    return Program;\n}());\nexports.Program = Program;\n//# sourceMappingURL=Program.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Project = void 0;\nvar path_1 = __importDefault(require(\"path\"));\nfunction fileSort(currFolder) {\n    currFolder.sort(function (a, b) {\n        if (a.children && !b.children)\n            return -1;\n        if (!a.children && b.children)\n            return 1;\n        if (a.name.toLowerCase() < b.name.toLowerCase())\n            return -1;\n        if (a.name.toLowerCase() > b.name.toLowerCase())\n            return 1;\n        return 0;\n    });\n}\nvar Project = (function () {\n    function Project(projectObj) {\n        var _this = this;\n        this.treeIzeFilePaths = function () {\n            var root = [];\n            _this.files.forEach(function (_a) {\n                var key = _a.key;\n                var pathArr = key.split('/');\n                if (pathArr.length === 1 && key.indexOf('\\\\') > -1) {\n                    pathArr = key.split('\\\\');\n                }\n                var currFolder = root;\n                var _loop_1 = function () {\n                    var folder = { name: pathArr.shift(), children: [] };\n                    var found = currFolder.find(function (f) { return f.name === folder.name; });\n                    if (found && found.children) {\n                        currFolder = found.children;\n                    }\n                    else {\n                        currFolder.push(folder);\n                        currFolder = folder.children;\n                    }\n                    fileSort(currFolder);\n                };\n                while (pathArr.length > 1) {\n                    _loop_1();\n                }\n                currFolder.push({ name: pathArr[0], path: key });\n            });\n            fileSort(root);\n            return root;\n        };\n        Object.assign(this, projectObj);\n        if (!this.files)\n            this.files = [];\n        if (this.tree && this.tree.leaves) {\n            this.tree.leaves = this.tree.leaves.map(function (lf) { return (__assign(__assign({}, lf), { meta: lf && lf.metaStr ? JSON.parse(lf.metaStr) : {} })); });\n        }\n    }\n    Project.fromGraphQL = function (input) {\n        if (!input)\n            return null;\n        return new Project(__assign(__assign({}, input), { createdOn: parseInt(input.createdOn, 10), updatedOn: parseInt(input.updatedOn, 10), meta: input.meta ? JSON.parse(input.meta) : {}, tags: input.tags ? input.tags.split(',') : [] }));\n    };\n    Project.fromDynamoDB = function (input) {\n        return new Project(__assign(__assign({}, input), { name: input.Name || input.name, meta: input.meta ? Project.parseDynamoMeta(input.meta) : undefined }));\n    };\n    Project.diff = function (left, right) {\n        var different = [];\n        var same = [];\n        if (!right || right.length === 0) {\n            return {\n                leftOnly: left.map(function (f) { return f.key; }),\n                rightOnly: [],\n                different: [],\n                same: []\n            };\n        }\n        else if (!left || left.length === 0) {\n            return {\n                leftOnly: [],\n                rightOnly: right.map(function (f) { return f.key; }),\n                different: [],\n                same: []\n            };\n        }\n        var leftOnly = left\n            .filter(function (leftFile) {\n            var found = right.find(function (rightFile) { return leftFile.key === rightFile.key; });\n            if (found) {\n                if (found.md5 === leftFile.md5)\n                    same.push(leftFile.key);\n                else\n                    different.push(leftFile.key);\n            }\n            return !found;\n        })\n            .map(function (f) { return f.key; });\n        var rightOnly = right\n            .filter(function (rightFile) { return !left.find(function (leftFile) { return rightFile.key === leftFile.key; }); })\n            .map(function (f) { return f.key; });\n        return {\n            leftOnly: leftOnly,\n            rightOnly: rightOnly,\n            different: different,\n            same: same\n        };\n    };\n    Project.getProjectS3Keys = function (program, projectId, projType) {\n        var prefix = path_1.default.join(program.machineName, projType, projectId);\n        var zipKey = \"\".concat(prefix, \".zip\");\n        var projFileKey = path_1.default.join(prefix, program.projectFile);\n        var zipKeyPending = path_1.default.join(program.machineName, projType, \"\".concat(projectId, \".zip.pending\"));\n        var downloadFolderName = \"\".concat([program.machineName, projType, projectId].join('-'));\n        var downloadZipFilename = \"\".concat(downloadFolderName, \".zip\");\n        return {\n            prefix: prefix,\n            zipKey: zipKey,\n            projFileKey: projFileKey,\n            zipKeyPending: zipKeyPending,\n            downloadFolderName: downloadFolderName,\n            downloadZipFilename: downloadZipFilename\n        };\n    };\n    Project.parseDynamoMeta = function (dynObj) {\n        var metavals = Object.keys(dynObj)\n            .filter(function (k) { return k.indexOf('META_') === 0; })\n            .reduce(function (acc, k) {\n            var _a;\n            var newk = k.split('META_')[1];\n            return __assign(__assign({}, acc), (_a = {}, _a[newk] = dynObj[k], _a));\n        }, {});\n        return JSON.stringify(metavals);\n    };\n    Project.parseTagString = function (tagString) {\n        if (!tagString || tagString.trim().length === 0)\n            return [];\n        return tagString\n            .split(',')\n            .map(function (t) { return t.trim(); })\n            .filter(function (t) { return t.length > 0 && t !== 'null' && t !== 'undefined'; });\n    };\n    Project.parseS3Key = function (program, key) {\n        var keyArr = key.split('/');\n        if (keyArr.length < 3)\n            throw new Error('Not a valid project key');\n        var _a = key.split('/'), programMachineName = _a[0], projType = _a[1], id = _a[2];\n        if (program.machineName !== programMachineName) {\n            throw new Error(\"Program passed to parseS3 key \".concat(program.machineName, \" does not correspond to program in key: \").concat(programMachineName));\n        }\n        return Project.getProjectS3Keys(program, id, projType);\n    };\n    Project.parseS3KeyDUMB = function (key) {\n        var keyArr = key.split('/');\n        if (keyArr.length < 3)\n            throw new Error('Not a valid project key');\n        var programMachineName = keyArr[0], projType = keyArr[1], id = keyArr[2];\n        var prefix = path_1.default.join(programMachineName, projType, id);\n        var zipKey = \"\".concat(prefix, \".zip\");\n        return {\n            programMachineName: programMachineName,\n            projType: projType,\n            id: id,\n            zipKey: zipKey,\n            prefix: prefix\n        };\n    };\n    return Project;\n}());\nexports.Project = Project;\n//# sourceMappingURL=Project.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValidationError = void 0;\nvar ValidationError = (function (_super) {\n    __extends(ValidationError, _super);\n    function ValidationError(message, reasons) {\n        var _this = _super.call(this, message) || this;\n        _this.name = _this.constructor.name;\n        _this.reasons = reasons;\n        Error.captureStackTrace(_this, _this.constructor);\n        return _this;\n    }\n    return ValidationError;\n}(Error));\nexports.ValidationError = ValidationError;\n//# sourceMappingURL=errors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TileServiceJSONClass = void 0;\nvar TileServiceJSONClass = (function () {\n    function TileServiceJSONClass(raw) {\n        Object.assign(this, raw);\n    }\n    return TileServiceJSONClass;\n}());\nexports.TileServiceJSONClass = TileServiceJSONClass;\n//# sourceMappingURL=TileServiceJSONClass.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsxs as _jsxs, jsx as _jsx } from \"react/jsx-runtime\";\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) { return ({\n    root: {\n        display: 'flex',\n        zIndex: theme.zIndex.drawer + 1\n    },\n    text: {\n        flexGrow: 1\n    },\n    logo: {}\n}); });\nvar Footer = function (_a) {\n    var version = _a.version;\n    var classes = useStyles();\n    return (_jsxs(Container, __assign({ className: classes.root, maxWidth: \"md\" }, { children: [version && (_jsxs(Typography, __assign({ component: \"div\", className: classes.text, color: \"textSecondary\", variant: \"overline\" }, { children: [\"v.\", version] }))), _jsx(\"img\", { className: classes.logo, alt: \"footer\", src: \"\".concat(process.env.PUBLIC_URL, \"/cc-watermarks-riverscapes_orig.png\") })] })));\n};\nexport default Footer;\n//# sourceMappingURL=Footer.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport ShareIcon from '@material-ui/icons/Share';\nimport CloseIcon from '@material-ui/icons/Close';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { FacebookShareButton, LinkedinShareButton, TwitterShareButton, EmailShareButton, FacebookIcon, TwitterIcon, LinkedinIcon, EmailIcon } from 'react-share';\nvar useStyles = makeStyles(function (theme) { return ({\n    root: {},\n    shareIconTitle: {},\n    shareButtons: {\n        margin: theme.spacing(1, 0),\n        '&>*': {\n            marginRight: theme.spacing(1)\n        }\n    },\n    flexGrow: {\n        flexGrow: 1\n    },\n    dlgTitle: {\n        color: theme.palette.primary.contrastText,\n        backgroundColor: theme.palette.primary.main,\n        display: 'flex'\n    },\n    closeButton: {\n        flex: '0 0'\n    }\n}); });\nvar ShareDialog = function (_a) {\n    var open = _a.open, shareUrl = _a.shareUrl, handleClose = _a.handleClose;\n    var classes = useStyles();\n    return (_jsxs(Dialog, __assign({ open: open, onClose: handleClose, \"aria-labelledby\": \"form-dialog-title\" }, { children: [_jsxs(DialogTitle, __assign({ className: classes.dlgTitle, disableTypography: true }, { children: [_jsx(IconButton, __assign({ color: \"inherit\" }, { children: _jsx(ShareIcon, { className: classes.shareIconTitle }) })), _jsx(Typography, __assign({ variant: \"h4\", className: classes.flexGrow }, { children: \"Share\" })), _jsx(\"div\", __assign({ className: classes.closeButton }, { children: _jsx(IconButton, __assign({ onClick: handleClose, color: \"inherit\" }, { children: _jsx(CloseIcon, {}) })) }))] })), _jsxs(DialogContent, { children: [_jsx(DialogContentText, { children: \"Copy this link and share it using your preferred method.\" }), _jsx(TextField, { value: shareUrl, margin: \"dense\", id: \"name\", variant: \"outlined\", fullWidth: true, inputProps: {\n                            onClick: function (e) {\n                                e.preventDefault();\n                                var target = e.target;\n                                target.select();\n                            }\n                        } }), _jsxs(\"div\", __assign({ className: classes.shareButtons }, { children: [_jsx(EmailShareButton, __assign({ url: shareUrl }, { children: _jsx(EmailIcon, { size: 32, round: true }) })), _jsx(TwitterShareButton, __assign({ url: shareUrl }, { children: _jsx(TwitterIcon, { size: 32, round: true }) })), _jsx(LinkedinShareButton, __assign({ url: shareUrl }, { children: _jsx(LinkedinIcon, { size: 32, round: true }) })), _jsx(FacebookShareButton, __assign({ url: shareUrl, quote: 'title' }, { children: _jsx(FacebookIcon, { size: 32, round: true }) }))] }))] })] })));\n};\nexport default ShareDialog;\n//# sourceMappingURL=ShareDialog.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport Link from '@material-ui/core/Link';\nimport Dialog from '@material-ui/core/Dialog';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) { return ({\n    root: {},\n    title: {\n        margin: 0,\n        display: 'flex',\n        padding: theme.spacing(2),\n        background: theme.palette.warning.main,\n        color: theme.palette.warning.contrastText\n    },\n    actions: {\n        margin: 0,\n        padding: theme.spacing(1)\n    },\n    content: {\n        padding: theme.spacing(2)\n    },\n    rasterImgsContainer: {\n        display: 'flex',\n        width: '100%',\n        overflow: 'hidden'\n    },\n    rasterImgsContainerCol: {},\n    rasterImgs: {\n        width: '100%',\n        height: 'auto'\n    },\n    closeButton: {\n        position: 'absolute',\n        right: theme.spacing(1),\n        top: theme.spacing(1)\n    }\n}); });\nvar ProvisionalModal = function (_a) {\n    var onClose = _a.onClose, open = _a.open;\n    var classes = useStyles();\n    return (_jsxs(Dialog, __assign({ \"aria-labelledby\": \"customized-dialog-title\", open: open, maxWidth: \"sm\", onClose: onClose }, { children: [_jsxs(DialogTitle, __assign({ disableTypography: true, className: classes.title }, { children: [_jsx(Typography, __assign({ variant: \"h6\", color: \"inherit\" }, { children: \"Provisional Data\" })), _jsx(IconButton, __assign({ \"aria-label\": \"close\", className: classes.closeButton, onClick: onClose, color: \"inherit\" }, { children: _jsx(CloseIcon, {}) }))] })), _jsxs(DialogContent, __assign({ dividers: true }, { children: [_jsxs(Typography, __assign({ paragraph: true }, { children: [\"As of \", _jsx(\"strong\", { children: \"November 2021\" }), \", All projects in the Riverscapes Warehouse are provisional!\"] })), _jsxs(Typography, __assign({ paragraph: true }, { children: [\"You have been granted early-access and are free to explore and download these provisional projects and data. Until Summer 2022, the\", ' ', _jsx(\"strong\", { children: _jsx(Link, __assign({ href: \"https://rave.riverscapes.net/\", target: \"_blank\" }, { children: \"RAVE viewers\" })) }), \", the project reports, and many of the models will be undergoing major development.\"] })), _jsx(Typography, __assign({ paragraph: true }, { children: \"These provisional data are still extremely useful, but many projects have not yet been reviewed and properly quality controlled. We are actively developing a rigorous quality assurance program that will include manual quality control to communicate the quality of the data. The data might contain unreported errors. Users should use caution using data obtained from the riverscapes data warehouse until these QA/QC statuses are fully reported for each project.\" })), _jsx(Typography, __assign({ paragraph: true }, { children: \"Please check back regularly for the latest version of projects and model outputs, as well as improvements. We are also developing versioning reporting, and attribution to make clear what projects were produced from what versions of tools, and who ran the tools, who curated the projects, who performed quality control and who funded or supported that work to make available to others. Thank you for your patience while we work towards a launch.\" })), _jsx(Typography, __assign({ paragraph: true }, { children: _jsx(\"strong\", { children: \"For feature suggestions, questions or to report a bug please visit:\" }) })), _jsx(Typography, __assign({ paragraph: true, style: { textAlign: 'center' } }, { children: _jsx(Button, __assign({ variant: \"outlined\", size: \"large\", href: \"https://github.com/Riverscapes/riverscapes-website/discussions/categories/riverscapes-warehouse\", target: \"_blank\" }, { children: \"Discussion forum\" })) })), _jsxs(Typography, __assign({ paragraph: true, variant: \"caption\" }, { children: [_jsx(\"strong\", { children: \"Note\" }), \": Issues and discussions are open and public but you will need a free Github account to contribute.\"] }))] }))] })));\n};\nexport default ProvisionalModal;\n//# sourceMappingURL=ProvisionalModal.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport ToolTip from '@material-ui/core/Tooltip';\nimport { makeStyles } from '@material-ui/core/styles';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport ProvisionalModal from './ProvisionalModal';\nvar useStyles = makeStyles(function (theme) { return ({\n    button: {\n        marginLeft: theme.spacing(1),\n        paddingLeft: theme.spacing(2),\n        paddingRight: theme.spacing(2)\n    }\n}); });\nvar ProvisionalButton = function () {\n    var classes = useStyles();\n    var _a = useState(false), open = _a[0], setOpen = _a[1];\n    return (_jsxs(_Fragment, { children: [_jsx(ToolTip, __assign({ title: \"These are provisional riverscape projects. They are from models and tools undergoing active development, and individual projects are undergoing QA/QC and subject to change. Please treat with caution. No warranty is expressed or implied.\" }, { children: _jsx(Button, __assign({ variant: \"contained\", size: \"small\", color: \"secondary\", className: classes.button, startIcon: _jsx(WarningIcon, {}), onClick: function () { return setOpen(true); } }, { children: \"Provisional Data\" })) })), _jsx(ProvisionalModal, { open: open, onClose: function () { return setOpen(false); } })] }));\n};\nexport default ProvisionalButton;\n//# sourceMappingURL=ProvisionalButton.js.map","import { red, green, blue, orange, purple, cyan, lime, brown } from '@material-ui/core/colors';\nimport log from 'loglevel';\nexport var tagColors = {\n    tagColors: [\n        '#418CF0',\n        '#FCB441',\n        '#E0400A',\n        '#056492',\n        '#BFBFBF',\n        '#1A3B69',\n        '#FFE382',\n        '#129CDD',\n        '#CA6B4B',\n        '#005CDB',\n        '#F3D288',\n        '#506381',\n        '#F1B9A8',\n        '#E0830A',\n        '#7893BE'\n    ]\n};\nvar domain = process.env.REACT_APP_DOMAIN;\nif (process.env.NODE_ENV && process.env.NODE_ENV === 'development') {\n    domain = 'localhost';\n}\nlog.debug('config: ', { domain: domain });\nexport var isDev = process.env.NODE_ENV && process.env.NODE_ENV === 'development';\nexport var mapConfig = {\n    mapBoxToken: process.env.REACT_APP_MAPBOX_TOKEN\n};\nexport var version = process.env.REACT_APP_VERSION;\nexport var endpoints = {\n    graphql: process.env.REACT_APP_GRAPHQL,\n    cdn: process.env.REACT_APP_CDN\n};\nexport var mandatoryMetaColors = [red, green, blue, orange, purple, cyan, lime, brown];\nexport var redirectUrl = new URL(process.env.PUBLIC_URL.endsWith('/') ? process.env.PUBLIC_URL : process.env.PUBLIC_URL + '/', window.location.origin);\nconsole.log('RedirectUrl', { redirectUrl: redirectUrl, publicUrl: process.env.PUBLIC_URL });\nexport var googleAnalytics = process.env.REACT_APP_GOOGLE_ANALYTICS;\nexport var awsAuth = {\n    Auth: {\n        region: process.env.REACT_APP_AWS_REGION_DEPLOY,\n        userPoolId: process.env.REACT_APP_AWS_USERPOOLID,\n        userPoolWebClientId: process.env.REACT_APP_AWS_USERPOOLWEBCLIENTID,\n        mandatorySignIn: true,\n        oauth: {\n            domain: process.env.REACT_APP_HOSTED_DOMAIN,\n            scope: ['email', 'profile', 'openid'],\n            redirectSignIn: redirectUrl,\n            redirectSignOut: redirectUrl,\n            responseType: 'code'\n        }\n    }\n};\n//# sourceMappingURL=config.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport AppBar from '@material-ui/core/AppBar';\nimport Divider from '@material-ui/core/Divider';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\nimport ShareIcon from '@material-ui/icons/Share';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\nimport ListAltIcon from '@material-ui/icons/ListAlt';\nimport IconButton from '@material-ui/core/IconButton';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport { WarehouseRoleEnum } from '@riverscapes/common';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Typography } from '@material-ui/core';\nimport style from './Topbar.style';\nimport ShareDialog from '../modals/ShareDialog';\nimport ProvisionalButton from '../modals/provisional/ProvisionalButton';\nimport { version } from '../config';\nvar useStyles = makeStyles(style);\nexport function isDisabled(prog) {\n    if (prog.meta && prog.meta.access && prog.meta.access === 'PUBLIC')\n        return false;\n    return prog.role === null;\n}\nvar TopBar = function (_a) {\n    var title = _a.title, program = _a.program, programs = _a.programs, signOutHandler = _a.signOutHandler, toolbarItems = _a.toolbarItems, provisional = _a.provisional, shareUrl = _a.shareUrl, history = _a.history;\n    var classes = useStyles();\n    var _b = useState(false), shareOpen = _b[0], setShareOpen = _b[1];\n    var _c = useState(null), mobileMoreAnchorEl = _c[0], setMobileMoreAnchorEl = _c[1];\n    var handleMobileMenuClose = function () { return setMobileMoreAnchorEl(null); };\n    var handleShareMenuOpen = function () { return setShareOpen(true); };\n    var handleNavigate = function (nm) {\n        handleMobileMenuClose();\n        if (history)\n            history.push(\"/\".concat(nm.machineName));\n    };\n    var isAdmin = history && history.location.pathname.indexOf('/admin') > -1;\n    var handleAdmin = function () {\n        if (history && program) {\n            if (isAdmin)\n                history.push(\"/\".concat(program.machineName));\n            else\n                history.push(\"/\".concat(program.machineName, \"/admin\"));\n        }\n    };\n    var handleMobileMenuOpen = function (event) { return setMobileMoreAnchorEl(event.currentTarget); };\n    var renderMobileMenu = (signOutHandler || programs) && (_jsxs(Menu, __assign({ anchorEl: mobileMoreAnchorEl, anchorOrigin: { vertical: 'top', horizontal: 'right' }, keepMounted: true, transformOrigin: { vertical: 'top', horizontal: 'right' }, open: !!mobileMoreAnchorEl, onClose: handleMobileMenuClose }, { children: [programs && (_jsx(MenuItem, { children: _jsx(Typography, __assign({ variant: \"overline\", onClick: function () { return history.push(\"/\"); } }, { children: \"Programs\" })) })), programs && _jsx(Divider, {}), programs &&\n                programs.length > 0 &&\n                programs.map(function (prog, idx) { return (_jsx(MenuItem, __assign({ disabled: (program && program.machineName === prog.machineName) || isDisabled(prog), onClick: function () { return handleNavigate(prog); }, value: prog.machineName }, { children: prog.name }), \"prog-\".concat(idx))); }), signOutHandler && _jsx(Divider, {}), signOutHandler && _jsx(MenuItem, __assign({ onClick: signOutHandler }, { children: \"Log Out\" }))] })));\n    var showAdmin = program && (program.role === WarehouseRoleEnum.Admin || program.role === WarehouseRoleEnum.SuperUser);\n    return (_jsxs(React.Fragment, { children: [_jsx(AppBar, __assign({ position: \"static\", className: classes.appBar }, { children: _jsxs(Toolbar, __assign({ className: classes.root, disableGutters: true }, { children: [_jsx(\"a\", __assign({ href: \"http://riverscapes.net/\" }, { children: _jsx(\"img\", { className: classes.logo, src: 'https://riverscapes.net/assets/images/RiverscapesLogo.png', alt: \"logo\" }) })), program ? (_jsxs(\"div\", { children: [_jsx(Typography, __assign({ variant: \"subtitle1\" }, { children: program.name })), _jsx(Typography, __assign({ variant: \"caption\" }, { children: title }))] })) : (_jsx(Typography, __assign({ variant: \"subtitle1\" }, { children: title }))), _jsx(\"div\", { className: classes.spacer }), version && (_jsxs(Typography, __assign({ component: \"div\", className: classes.text, color: \"inherit\", variant: \"overline\" }, { children: [\"v.\", version] }))), showAdmin && (_jsx(IconButton, __assign({ \"aria-haspopup\": \"true\", onClick: handleAdmin, color: \"inherit\" }, { children: isAdmin ? _jsx(ListAltIcon, {}) : _jsx(SupervisorAccountIcon, {}) }))), toolbarItems, provisional && _jsx(ProvisionalButton, {}), shareUrl && (_jsx(IconButton, __assign({ \"aria-haspopup\": \"true\", onClick: handleShareMenuOpen, color: \"inherit\" }, { children: _jsx(ShareIcon, {}) }))), (signOutHandler || programs) && (_jsx(IconButton, __assign({ \"aria-haspopup\": \"true\", onClick: handleMobileMenuOpen, color: \"inherit\" }, { children: _jsx(MoreIcon, {}) })))] })) })), renderMobileMenu, shareUrl && _jsx(ShareDialog, { open: shareOpen, shareUrl: shareUrl, handleClose: function () { return setShareOpen(false); } })] }));\n};\nexport default TopBar;\n//# sourceMappingURL=Topbar.js.map","import { alpha } from '@material-ui/core/styles';\nexport default (function (theme) {\n    var _a, _b, _c, _d;\n    return ({\n        appBar: {\n            zIndex: theme.zIndex.drawer + 1\n        },\n        root: {\n            display: 'flex',\n            alignItems: 'center',\n            width: '100%',\n            padding: theme.spacing(0, 1),\n            textShadow: '3px 3px 3px rgba(0,0,0,0.7)',\n            backgroundImage: \"url(\".concat(process.env.PUBLIC_URL, \"/HeaderBackground.png)\"),\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: '0% 50%',\n            backgroundSize: 'cover',\n            backgroundColor: '#444444'\n        },\n        logo: {\n            height: 40,\n            width: 40,\n            marginRight: theme.spacing(2)\n        },\n        programChooser: {\n            margin: theme.spacing(0, 1),\n            color: theme.palette.primary.contrastText,\n            '& svg': {\n                color: theme.palette.primary.contrastText\n            },\n            '&:before': {\n                borderColor: theme.palette.primary.contrastText\n            },\n            '&:after': {\n                borderColor: theme.palette.primary.contrastText\n            }\n        },\n        transparent: {\n            backgroundColor: 'transparent',\n            background: 'none',\n            color: theme.palette.text.primary\n        },\n        search: (_a = {\n                position: 'relative',\n                borderRadius: theme.shape.borderRadius,\n                backgroundColor: alpha(theme.palette.common.white, 0.15),\n                '&:hover': {\n                    backgroundColor: alpha(theme.palette.common.white, 0.25)\n                },\n                marginRight: theme.spacing(2),\n                marginLeft: 0,\n                width: '100%',\n                flexGrow: 1\n            },\n            _a[theme.breakpoints.up('sm')] = {\n                marginLeft: theme.spacing(3),\n                width: 'auto'\n            },\n            _a),\n        searchIcon: {\n            width: theme.spacing(7),\n            height: '100%',\n            position: 'absolute',\n            pointerEvents: 'none',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center'\n        },\n        inputRoot: {\n            color: 'inherit'\n        },\n        spacer: {\n            flexGrow: 1\n        },\n        inputInput: (_b = {\n                padding: theme.spacing(1, 1, 1, 7),\n                transition: theme.transitions.create('width'),\n                width: '100%'\n            },\n            _b[theme.breakpoints.up('sm')] = {\n                width: 200\n            },\n            _b),\n        sectionDesktop: (_c = {\n                display: 'none'\n            },\n            _c[theme.breakpoints.up('sm')] = {\n                display: 'flex',\n                flexGrow: 1\n            },\n            _c),\n        sectionMobile: (_d = {\n                display: 'flex',\n                flexGrow: 1\n            },\n            _d[theme.breakpoints.up('sm')] = {\n                display: 'none'\n            },\n            _d)\n    });\n});\n//# sourceMappingURL=Topbar.style.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { createElement as _createElement } from \"react\";\nimport React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\nvar WarehouseTags = function (_a) {\n    var tags = _a.tags, typographyProps = _a.typographyProps;\n    if (!tags)\n        return null;\n    return (_jsx(React.Fragment, { children: tags.reduce(function (acc, ts, idx) { return __spreadArray(__spreadArray([], acc, true), [\n            _createElement(Typography, __assign({ variant: \"caption\" }, typographyProps, { key: \"sep-\".concat(idx) }), idx > 0 && ', '),\n            _jsx(Tooltip, __assign({ title: _jsxs(React.Fragment, { children: [_jsxs(Typography, __assign({ variant: \"body1\" }, { children: [\"Warehouse Tag: \", ts] })), _jsx(Typography, __assign({ variant: \"caption\" }, { children: \"Warehouse tags can be added to delineate two identical projects in the warehouse\" }))] }) }, { children: _jsx(Typography, __assign({ variant: \"caption\", color: \"secondary\" }, typographyProps, { children: ts })) }), \"whTag-\".concat(idx))\n        ], false); }, []) }));\n};\nexport default WarehouseTags;\n//# sourceMappingURL=WarehouseTags.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport moment from 'moment';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function () { return ({\n    root: {\n        '& *': {\n            cursor: 'pointer'\n        }\n    },\n    disabledButton: {\n        opacity: 0.5\n    }\n}); });\nvar DownloadZipBtn = function (_a) {\n    var title = _a.title, project = _a.project, pendingSince = _a.pendingSince, btnProps = _a.btnProps, downloadZipFile = _a.downloadZipFile;\n    var classes = useStyles();\n    var btnRender = (_jsx(Tooltip, __assign({ title: _jsxs(React.Fragment, { children: [_jsx(Typography, __assign({ variant: \"body1\" }, { children: \"Download Project Zip\" })), _jsx(Typography, __assign({ variant: \"caption\", paragraph: true }, { children: \"Click to download this project as a single zip file\" })), _jsx(Typography, __assign({ variant: \"caption\", paragraph: true }, { children: \"There may be a delay if the zip file needs to be built.\" }))] }) }, { children: title ? (_jsx(Button, __assign({ variant: \"contained\", color: \"primary\", onClick: function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n                downloadZipFile(project);\n            }, startIcon: _jsx(CloudDownloadIcon, {}) }, btnProps, { children: title || 'ZIP' }))) : (_jsx(IconButton, __assign({ color: \"primary\", onClick: function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n                downloadZipFile(project);\n            } }, btnProps, { children: _jsx(CloudDownloadIcon, {}) }))) })));\n    if (pendingSince) {\n        btnRender = (_jsx(Tooltip, __assign({ title: _jsxs(React.Fragment, { children: [_jsx(Typography, __assign({ variant: \"body1\" }, { children: \"Preparing Zip\" })), _jsx(Typography, __assign({ variant: \"caption\", paragraph: true }, { children: \"The warehouse is building your zip file for you.\" })), _jsxs(Typography, __assign({ variant: \"caption\", paragraph: true }, { children: [\"started \", moment(pendingSince, 'x').fromNow()] }))] }) }, { children: _jsx(Button, __assign({ variant: \"outlined\", disableFocusRipple: true, disableRipple: true, disableTouchRipple: true, color: \"primary\", onClick: function (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }, className: classes.disabledButton, startIcon: _jsx(CircularProgress, { color: btnProps && btnProps.color && btnProps.color === 'secondary' ? 'primary' : 'secondary', size: 24, thickness: 6 }) }, btnProps, { children: title || 'ZIP' })) })));\n    }\n    return _jsx(\"div\", __assign({ className: classes.root }, { children: btnRender }));\n};\nexport default DownloadZipBtn;\n//# sourceMappingURL=DownloadZipBtn.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { googleAnalytics } from '..';\nvar useStyles = makeStyles(function (theme) { return ({\n    root: {},\n    whBtnLogo: { height: 20, width: 20, marginRight: theme.spacing(1) },\n    whButton: {\n        maxWidth: 300\n    }\n}); });\nvar WarehouseButton = function (_a) {\n    var title = _a.title, href = _a.href, stay = _a.stay;\n    var classes = useStyles();\n    return (_jsxs(Button, __assign({ className: classes.whButton, target: stay ? undefined : '_blank', variant: \"contained\", href: href, onClick: function () {\n            googleAnalytics.event('webrave', 'open_warehouse', 'open_warehouse');\n        }, color: \"secondary\", fullWidth: true }, { children: [_jsx(\"img\", { className: classes.whBtnLogo, src: 'https://riverscapes.net/assets/images/RiverscapesLogo.png', alt: \"logo\" }), title] })));\n};\nexport default WarehouseButton;\n//# sourceMappingURL=WarehouseButton.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport PublicIcon from '@material-ui/icons/Public';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { googleAnalytics } from '..';\nvar useStyles = makeStyles(function () { return ({\n    root: {\n        '& *': {\n            cursor: 'pointer'\n        }\n    },\n    disabledButton: {\n        opacity: 0.5\n    }\n}); });\nvar WebRaveBtn = function (_a) {\n    var title = _a.title, project = _a.project, url = _a.url, btnProps = _a.btnProps;\n    var classes = useStyles();\n    if (!url || url.length === 0)\n        return null;\n    var webRaveUrl = \"\".concat(url, \"#/\").concat(project.program, \"/\").concat(project.id);\n    var btnRender = (_jsx(Tooltip, __assign({ title: _jsxs(React.Fragment, { children: [_jsx(Typography, __assign({ variant: \"body1\" }, { children: \"Explore using map\" })), _jsx(Typography, __assign({ variant: \"caption\", paragraph: true }, { children: \"Explore this data set using an online map\" }))] }) }, { children: title ? (_jsx(Button, __assign({ variant: \"contained\", onClick: function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n                googleAnalytics.event('warehouse', 'open_webrave', 'open_webrave');\n                window.open(webRaveUrl);\n            }, color: \"primary\", startIcon: _jsx(PublicIcon, {}) }, btnProps, { children: title || 'MAP' }))) : (_jsx(IconButton, __assign({ color: \"primary\", onClick: function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n                googleAnalytics.event('warehouse', 'open_webrave', 'open_webrave');\n                window.open(webRaveUrl);\n            } }, btnProps, { children: _jsx(PublicIcon, {}) }))) })));\n    return _jsx(\"div\", __assign({ className: classes.root }, { children: btnRender }));\n};\nexport default WebRaveBtn;\n//# sourceMappingURL=WebRaveBtn.js.map","var _a;\nimport { WarehouseRoleEnum } from '@riverscapes/common';\nimport { red, pink, blue, lime } from '@material-ui/core/colors';\nexport var accessColors = (_a = {},\n    _a[WarehouseRoleEnum.SuperUser] = pink,\n    _a[WarehouseRoleEnum.Admin] = red,\n    _a[WarehouseRoleEnum.Participant] = lime,\n    _a[WarehouseRoleEnum.Observer] = blue,\n    _a);\n//# sourceMappingURL=constants.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport Paper from '@material-ui/core/Paper';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport List from '@material-ui/core/List';\nimport Chip from '@material-ui/core/Chip';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport FaceIcon from '@material-ui/icons/Face';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport { accessColors } from '../constants';\nvar useStyles = makeStyles(function (theme) { return ({\n    rootContainer: {\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        overflow: 'hidden'\n    },\n    spacer: {\n        flexGrow: 1\n    },\n    root: {\n        display: 'flex',\n        flexDirection: 'column',\n        padding: theme.spacing(2, 4, 4, 4),\n        maxHeight: '85%',\n        overflow: 'hidden'\n    },\n    instruct: {\n        flex: '0 0'\n    },\n    progList: {\n        border: '1px solid #cccccc',\n        flex: '1 1',\n        overflowY: 'scroll'\n    },\n    logoContainer: {\n        flex: '0 0',\n        padding: theme.spacing(2),\n        textAlign: 'center'\n    },\n    scrollHint: {\n        width: '100%',\n        height: 30,\n        marginTop: -30,\n        display: 'block',\n        background: 'linear-gradient(0deg, rgba(255,255,255,1) 0%, rgba(255,255,255,0) 100%)',\n        zIndex: 1000\n    },\n    logo: {},\n    accessChip: __assign({}, Object.keys(accessColors).reduce(function (acc, ack) {\n        var _a;\n        return (__assign(__assign({}, acc), (_a = {}, _a[\"&.access_\".concat(ack)] = {\n            color: theme.palette.getContrastText(accessColors[ack][500]),\n            background: accessColors[ack][500]\n        }, _a)));\n    }, {}))\n}); });\nexport function isDisabled(prog) {\n    if (prog.meta && prog.meta.access && prog.meta.access === 'PUBLIC')\n        return false;\n    return prog.role === null;\n}\nvar ProgramChooser = function (_a) {\n    var programs = _a.programs, history = _a.history, navigate = _a.navigate;\n    var classes = useStyles();\n    return (_jsxs(\"div\", __assign({ className: classes.rootContainer }, { children: [_jsx(\"div\", { className: classes.spacer }), _jsxs(Paper, __assign({ className: classes.root, elevation: 1 }, { children: [_jsx(\"div\", __assign({ className: classes.logoContainer }, { children: _jsx(\"img\", { className: classes.logo, src: process.env.PUBLIC_URL + '/RiverscapesLogo.png', alt: \"logo\" }) })), _jsx(Typography, __assign({ variant: \"h5\", className: classes.instruct }, { children: \"Choose a program:\" })), _jsx(List, __assign({ className: classes.progList }, { children: programs &&\n                            programs.map(function (p, idx) {\n                                var chip = (_jsx(Chip, { icon: _jsx(FaceIcon, {}), className: clsx(classes.accessChip, \"access_\".concat(p.role)), label: p.role || 'Observer', color: \"primary\" }));\n                                var disabled = isDisabled(p);\n                                if (disabled)\n                                    chip = _jsx(Chip, { label: \"No Access\", color: \"default\" });\n                                return (_jsxs(ListItem, __assign({ disabled: disabled, button: true, divider: true, onClick: function () { return navigate(history, p); } }, { children: [_jsx(ListItemAvatar, { children: _jsx(Avatar, __assign({ alt: \"programname\" }, { children: p.name.substr(0, 1) })) }), _jsx(ListItemText, { primary: p.name, secondary: p.meta.description }), chip] }), \"progKey-\".concat(idx)));\n                            }) })), _jsx(\"div\", { className: classes.scrollHint }), _jsxs(Typography, __assign({ paragraph: true, variant: \"caption\", className: classes.instruct }, { children: [\"If there are programs labeled\", ' ', _jsx(Chip, { label: \"No Access\", component: \"span\", color: \"default\", size: \"small\" }), \" and you think you should be able to see them please contact your program administrator.\"] }))] })), _jsx(\"div\", { className: classes.spacer })] })));\n};\nexport default ProgramChooser;\n//# sourceMappingURL=ProgramChooser.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport TreeItem from '@material-ui/lab/TreeItem';\nimport filesize from 'filesize';\nimport style from './RecurseTreeItem.style';\nvar useStyles = makeStyles(style);\nvar RecurseTreeItem = function (_a) {\n    var item = _a.item, fileDict = _a.fileDict, keyStr = _a.keyStr, project = _a.project, fileClick = _a.fileClick;\n    var classes = useStyles();\n    if (item.children) {\n        var childNodes = item.children.map(function (c, idx) { return (_jsx(RecurseTreeItem, { keyStr: \"\".concat(keyStr, \"-l\").concat(idx), item: c, fileDict: fileDict, project: project, fileClick: fileClick }, \"\".concat(keyStr, \"-l\").concat(idx))); });\n        return (_jsx(TreeItem, __assign({ nodeId: keyStr, className: classes.treeFolder, classes: {\n                content: classes.treeFolderContent\n            }, label: _jsx(\"div\", __assign({ className: classes.treeFolderText }, { children: item.name })) }, { children: childNodes })));\n    }\n    else {\n        var lookup = item.path ? fileDict[item.path] : { size: '0' };\n        return (_jsx(TreeItem, { nodeId: keyStr, className: classes.treeFile, classes: {\n                root: classes.treeItemRoot,\n                content: classes.treeFileContent\n            }, label: _jsxs(\"div\", __assign({ className: classes.treeItemContainer }, { children: [_jsxs(\"div\", __assign({ className: classes.treeItemText }, { children: [_jsx(Typography, __assign({ color: \"textPrimary\", component: \"div\", variant: \"body1\" }, { children: item.name })), _jsxs(Typography, __assign({ color: \"textSecondary\", component: \"div\", variant: \"caption\" }, { children: [filesize(parseInt(lookup.size, 10)), \" --\", ' ', _jsx(\"span\", __assign({ className: classes.allowSelect }, { children: item.path }))] }))] })), _jsx(Tooltip, __assign({ title: _jsx(React.Fragment, { children: _jsxs(Typography, __assign({ variant: \"body1\" }, { children: [\"Download: \", item.path] })) }) }, { children: _jsx(IconButton, __assign({ disableRipple: true, className: classes.treeItemIcon, color: \"primary\", onClick: function () { return fileClick(project, item.path); } }, { children: _jsx(CloudDownloadIcon, {}) })) }))] })), endIcon: lookup.icon }));\n    }\n};\nexport default RecurseTreeItem;\n//# sourceMappingURL=RecurseTreeItem.js.map","export default (function (theme) { return ({\n    treeItemRoot: {\n        backgroundColor: theme.palette.background.paper,\n        '&:nth-child(odd)': {\n            backgroundColor: theme.palette.background.default\n        }\n    },\n    treeItemContainer: {\n        display: 'flex'\n    },\n    treeItemText: {\n        marginLeft: theme.spacing(1),\n        padding: theme.spacing(1),\n        flexGrow: 1\n    },\n    treeItemIcon: {},\n    treeFile: {},\n    treeFileContent: {\n        borderBottom: \"1px solid \".concat(theme.palette.grey[100])\n    },\n    treeFolder: {},\n    treeFolderContent: {},\n    treeFolderText: {\n        padding: theme.spacing(1)\n    },\n    allowSelect: {\n        '&,& *': {\n            userSelect: 'text',\n            cursor: 'auto'\n        }\n    }\n}); });\n//# sourceMappingURL=RecurseTreeItem.style.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Link from '@material-ui/core/Link';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Dialog from '@material-ui/core/Dialog';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport Divider from '@material-ui/core/Divider';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Typography from '@material-ui/core/Typography';\nimport Popover from '@material-ui/core/Popover';\nimport ShareIcon from '@material-ui/icons/Share';\nimport InsertDriveFileIcon from '@material-ui/icons/InsertDriveFile';\nimport PhotoIcon from '@material-ui/icons/Photo';\nimport Terrain from '@material-ui/icons/Terrain';\nimport Assignment from '@material-ui/icons/Assignment';\nimport TreeView from '@material-ui/lab/TreeView';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport WarehouseTags from '../../misc/WarehouseTags';\nimport clsx from 'clsx';\nimport filesize from 'filesize';\nimport moment from 'moment';\nimport WebRaveBtn from '../../misc/WebRaveBtn';\nimport DownloadZipBtn from '../../misc/DownloadZipBtn';\nimport ShareDialog from '../../modals/ShareDialog';\nimport RecurseTreeItem from './RecurseTreeItem';\nimport style from './ProjectModal.style';\nvar useStyles = makeStyles(style);\nvar ProjectModal = function (_a) {\n    var onClose = _a.onClose, project = _a.project, downloadFile = _a.downloadFile, webRaveUrl = _a.webRaveUrl, program = _a.program, showFileTree = _a.showFileTree, pendingZips = _a.pendingZips, downloadZipFile = _a.downloadZipFile;\n    var classes = useStyles();\n    var _b = useState(null), popOver = _b[0], setPopover = _b[1];\n    var _c = useState(false), shareOpen = _c[0], setShareOpen = _c[1];\n    var pendingSince = pendingZips[project.id];\n    var iconMapping = [\n        { pattern: /.*\\.(png|gif|jpg|jpeg)$/i, icon: _jsx(PhotoIcon, { className: classes.photoIcon }), classStr: 'photo' },\n        { pattern: /.*\\.(tif|img|shp)$/i, icon: _jsx(Terrain, { className: classes.TerrainIcon }), classStr: 'terrain' },\n        {\n            pattern: /.*\\.(csv|pdf|doc)$/i,\n            icon: _jsx(Assignment, { className: classes.documentIcon }),\n            classStr: 'assignment'\n        }\n    ];\n    var files = (project.files || []).reduce(function (acc, file) {\n        var _a;\n        var found = iconMapping.find(function (_a) {\n            var pattern = _a.pattern;\n            return file.key.match(pattern);\n        });\n        return __assign(__assign({}, acc), (_a = {}, _a[file.key] = __assign(__assign({}, file), { icon: found ? found.icon : _jsx(InsertDriveFileIcon, { className: classes.normalIcon }), classStr: found ? found.classStr : 'normalIcon' }), _a));\n    }, {});\n    var fileTree = project.treeIzeFilePaths();\n    var pType = program.products.find(function (p) { return p.id === project.projType; });\n    var pTypeName = pType ? pType.name : 'Unknown';\n    var descriptionTag = Object.keys(project.meta).find(function (k) { return k.toLowerCase() === 'description'; });\n    return (_jsxs(Dialog, __assign({ onClose: onClose, open: true, maxWidth: \"md\", fullWidth: true, className: classes.root, classes: {\n            scrollPaper: classes.scrollPaper\n        } }, { children: [_jsx(ShareDialog, { open: shareOpen, shareUrl: window.location.href, handleClose: function () { return setShareOpen(false); } }), _jsxs(DialogTitle, __assign({ disableTypography: true, className: classes.titlebar }, { children: [_jsxs(\"div\", __assign({ className: classes.titlebarLeft }, { children: [_jsx(Tooltip, __assign({ title: _jsx(Typography, __assign({ variant: \"body1\" }, { children: project.name })) }, { children: _jsx(Typography, __assign({ variant: \"h5\", component: \"div\", className: clsx(classes.name, classes.allowSelect) }, { children: project.name })) })), _jsx(\"div\", __assign({ className: classes.subHeader }, { children: _jsx(\"div\", __assign({ className: classes.flexGrow }, { children: _jsxs(Typography, __assign({ variant: \"caption\", color: \"inherit\", component: \"div\" }, { children: [\"ID: \", _jsx(\"span\", __assign({ className: classes.allowSelect }, { children: project.id }))] })) })) }))] })), onClose ? (_jsx(\"div\", { children: _jsx(IconButton, __assign({ \"aria-label\": \"close\", className: classes.closeButton, onClick: onClose, size: \"small\" }, { children: _jsx(CloseIcon, {}) })) })) : null] })), _jsxs(DialogContent, __assign({ dividers: true }, { children: [_jsxs(\"div\", __assign({ className: clsx(classes.allowSelect) }, { children: [_jsxs(\"div\", __assign({ className: classes.header }, { children: [_jsxs(\"div\", __assign({ className: classes.headerLeft }, { children: [_jsxs(Typography, __assign({ variant: \"caption\", component: \"div\", color: \"inherit\" }, { children: [_jsx(\"strong\", { children: \"Project Type\" }), \": \", _jsx(\"strong\", { children: pTypeName }), \" (\", pType && pType.id, \")\"] })), _jsxs(Typography, __assign({ variant: \"caption\", component: \"div\", color: \"inherit\" }, { children: [_jsx(\"strong\", { children: \"Created\" }), \": \", moment(project.createdOn, 'x').fromNow(), \" (\", moment(project.createdOn, 'x').format('lll'), \")\"] })), _jsxs(Typography, __assign({ variant: \"caption\", component: \"div\", color: \"inherit\" }, { children: [_jsx(\"strong\", { children: \"Updated\" }), \": \", moment(project.updatedOn, 'x').fromNow(), \" (\", moment(project.updatedOn, 'x').format('lll'), \")\"] })), _jsxs(Typography, __assign({ variant: \"caption\", component: \"div\", color: \"inherit\" }, { children: [_jsx(\"strong\", { children: \"Warehouse tags: \" }), _jsx(WarehouseTags, { tags: project.tags })] })), _jsxs(Typography, __assign({ variant: \"caption\", component: \"div\", color: \"inherit\" }, { children: [_jsx(\"strong\", { children: \"Size (Unzipped)\" }), \":\", ' ', project.totalSize && project.totalSize > -1\n                                                        ? filesize(project.totalSize)\n                                                        : 'Not available'] }))] })), _jsx(\"div\", __assign({ className: classes.headerRight }, { children: _jsxs(ButtonGroup, __assign({ color: \"primary\" }, { children: [webRaveUrl && (_jsx(WebRaveBtn, __assign({ title: \"Map\", url: webRaveUrl }, { project: project }, { btnProps: {\n                                                        variant: 'text'\n                                                    } }))), _jsx(Button, __assign({ variant: \"text\", onClick: function () { return setShareOpen(true); }, style: {\n                                                        cursor: 'pointer'\n                                                    }, startIcon: _jsx(ShareIcon, {}) }, { children: \"Share\" })), _jsx(DownloadZipBtn, __assign({ title: \"Download\" }, { project: project, pendingSince: pendingSince, downloadZipFile: downloadZipFile }, { btnProps: {\n                                                        variant: 'text'\n                                                    } }))] })) }))] })), descriptionTag && (_jsxs(\"div\", { children: [_jsx(Typography, __assign({ className: classes.title, color: \"inherit\", component: \"div\", variant: \"subtitle1\" }, { children: \"Description\" })), _jsx(Typography, __assign({ color: \"textSecondary\", variant: \"body2\" }, { children: project.meta[descriptionTag] }))] })), _jsx(Typography, __assign({ className: classes.title, color: \"inherit\", variant: \"subtitle1\" }, { children: \"Metadata\" })), _jsx(Divider, {}), _jsx(\"div\", __assign({ className: classes.metaDisplay }, { children: Object.keys(project.meta)\n                                    .filter(function (k) { return ['description'].indexOf(k.toLowerCase()) === -1; })\n                                    .map(function (metaKey, idk) {\n                                    var textComponent = project.meta[metaKey];\n                                    if (project.meta[metaKey].indexOf('http') === 0) {\n                                        textComponent = (_jsx(Link, __assign({ href: project.meta[metaKey], target: \"_blank\" }, { children: project.meta[metaKey] })));\n                                    }\n                                    return (_jsx(Tooltip, __assign({ placement: \"bottom\", title: _jsxs(React.Fragment, { children: [_jsx(Typography, __assign({ variant: \"body1\", component: \"div\" }, { children: _jsx(\"strong\", { children: metaKey }) })), _jsx(Typography, __assign({ variant: \"body2\", component: \"div\" }, { children: textComponent }))] }) }, { children: _jsxs(\"div\", __assign({ className: classes.metaDisplayItem }, { children: [_jsx(Typography, __assign({ variant: \"caption\", component: \"div\", color: \"textPrimary\" }, { children: _jsx(\"strong\", { children: metaKey }) })), _jsx(Typography, __assign({ variant: \"caption\", component: \"div\", color: \"textPrimary\" }, { children: textComponent }))] })) }), \"result-\".concat(idk)));\n                                }) }))] })), showFileTree && (_jsxs(_Fragment, { children: [_jsx(Typography, __assign({ className: classes.title, color: \"inherit\", variant: \"subtitle1\" }, { children: \"Files\" })), _jsx(Divider, {}), _jsx(TreeView, __assign({ className: classes.treeRoot, defaultExpanded: ['1'], disableSelection: true, defaultCollapseIcon: _jsx(ExpandMoreIcon, { color: \"inherit\" }), defaultExpandIcon: _jsx(ChevronRightIcon, { color: \"inherit\" }) }, { children: fileTree.map(function (ft, idx) { return (_jsx(RecurseTreeItem, { project: project, keyStr: \"treeNode-\".concat(idx), item: ft, fileDict: files, fileClick: downloadFile }, \"treeNode-\".concat(idx))); }) }))] }))] })), _jsx(Popover, __assign({ open: Boolean(popOver), anchorEl: popOver ? popOver[0] : null, onClose: function () { return setPopover(null); }, anchorOrigin: {\n                    vertical: 'bottom',\n                    horizontal: 'center'\n                }, transformOrigin: {\n                    vertical: 'top',\n                    horizontal: 'center'\n                } }, { children: _jsx(Typography, __assign({ className: classes.popOver }, { children: popOver ? popOver[1] : '' })) }))] })));\n};\nexport default ProjectModal;\n//# sourceMappingURL=ProjectModal.js.map","import { red, purple, green } from '@material-ui/core/colors';\nexport default (function (theme) { return ({\n    root: {\n        margin: 0,\n        padding: theme.spacing(2)\n    },\n    allowSelect: {\n        '&,& *': {\n            userSelect: 'text',\n            cursor: 'auto'\n        }\n    },\n    scrollPaper: {\n        alignItems: 'baseline'\n    },\n    name: {\n        maxWidth: '95%',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        marginBottom: theme.spacing(1)\n    },\n    titlebar: {\n        backgroundColor: '#444444',\n        color: theme.palette.primary.contrastText,\n        display: 'flex'\n    },\n    titlebarLeft: {\n        flexGrow: 1\n    },\n    header: {\n        display: 'flex'\n    },\n    headerLeft: {\n        flex: '1 1 80%'\n    },\n    headerRight: {\n        textAlign: 'right',\n        flex: '1 0'\n    },\n    flexGrow: {\n        flexGrow: 1\n    },\n    closeButton: {\n        flex: '0 0',\n        color: theme.palette.grey[500]\n    },\n    normalIcon: {},\n    documentIcon: {\n        color: red[500]\n    },\n    photoIcon: {\n        color: purple[500]\n    },\n    TerrainIcon: {\n        color: green[500]\n    },\n    metaDisplay: {\n        display: 'flex',\n        flexFlow: 'wrap'\n    },\n    title: {\n        marginTop: theme.spacing(2)\n    },\n    treeItemContainer: {\n        display: 'flex'\n    },\n    treeItemText: {\n        marginLeft: theme.spacing(1),\n        flexGrow: 1\n    },\n    treeItemIcon: {},\n    treeFileContent: {\n        borderBottom: \"1px solid \".concat(theme.palette.grey[100]),\n        padding: theme.spacing(1)\n    },\n    treeFolder: {},\n    treeFolderContent: {\n        padding: theme.spacing(1)\n    },\n    metaDisplayItem: {\n        flex: '1 1',\n        borderRadius: theme.spacing(1),\n        backgroundColor: '#fafafa',\n        margin: theme.spacing(1, 0.5),\n        border: '#1px solid #e7e7e7',\n        padding: theme.spacing(1),\n        maxWidth: '25%',\n        minWidth: 150,\n        '&>*': {\n            whiteSpace: 'nowrap',\n            overflow: 'hidden',\n            textOverflow: 'ellipsis'\n        }\n    },\n    prodChip: {\n        marginLeft: theme.spacing(1),\n        backgroundColor: theme.palette.primary.light,\n        color: 'white'\n    },\n    popOver: {\n        padding: theme.spacing(2)\n    },\n    subHeader: {\n        width: '100%',\n        display: 'flex'\n    }\n}); });\n//# sourceMappingURL=ProjectModal.style.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport Container from '@material-ui/core/Container';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) { return ({\n    rootContainer: {\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    spacer: {\n        flexGrow: 1\n    },\n    root: {\n        padding: theme.spacing(2, 4, 4, 4)\n    },\n    logoContainer: {\n        padding: theme.spacing(2),\n        textAlign: 'center'\n    },\n    logo: {}\n}); });\nvar LoginScreen = function (_a) {\n    var title = _a.title, signIn = _a.signIn;\n    var classes = useStyles();\n    return (_jsxs(Container, __assign({ className: classes.rootContainer, maxWidth: \"md\" }, { children: [_jsx(\"div\", { className: classes.spacer }), _jsxs(Paper, __assign({ className: classes.root }, { children: [_jsx(\"div\", __assign({ className: classes.logoContainer }, { children: _jsx(\"img\", { className: classes.logo, src: process.env.PUBLIC_URL + '/RiverscapesLogo.png', alt: \"logo\" }) })), _jsxs(Typography, __assign({ paragraph: true, variant: \"body1\" }, { children: [\"Welcome to \", _jsx(\"strong\", { children: title }), \". Please click the button below to log in.\"] })), _jsx(Typography, __assign({ paragraph: true, variant: \"body1\" }, { children: \"If you don't have an account you will be prompted to use your Google account or create a new account using another email address.\" })), _jsx(Button, __assign({ variant: \"contained\", onClick: signIn, color: \"primary\", fullWidth: true, size: \"large\", startIcon: _jsx(LockOpenIcon, {}) }, { children: \"Sign In\" }))] })), _jsx(\"div\", { className: classes.spacer })] })));\n};\nexport default LoginScreen;\n//# sourceMappingURL=LoginScreen.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport Typography from '@material-ui/core/Typography';\nvar useStyles = makeStyles(function (theme) { return ({\n    root: {\n        marginLeft: theme.spacing(1)\n    },\n    titlebar: {\n        display: 'flex',\n        background: theme.palette.error.main,\n        color: theme.palette.error.contrastText\n    },\n    closeButton: {},\n    name: {\n        paddingLeft: theme.spacing(1),\n        flexGrow: 1\n    }\n}); });\nvar NotAllowedModal = function (_a) {\n    var onClose = _a.onClose, program = _a.program;\n    var classes = useStyles();\n    return (_jsxs(Dialog, __assign({ onClose: onClose, open: true, maxWidth: \"xs\", fullWidth: true, className: classes.root, classes: {} }, { children: [_jsxs(DialogTitle, __assign({ disableTypography: true, className: classes.titlebar }, { children: [_jsx(ErrorIcon, { color: \"inherit\" }), _jsx(Typography, __assign({ className: classes.name }, { children: \"Access Denied\" }))] })), _jsx(DialogContent, __assign({ dividers: true }, { children: program ? (_jsxs(Typography, __assign({ variant: \"body1\", component: \"div\", color: \"inherit\" }, { children: [\"You don't have access to the program \", _jsx(\"strong\", { children: program.name }), \".\", 'If you arrived here via URL you will be able to use the URL ', 'again once you have access.'] }))) : (_jsx(Typography, __assign({ variant: \"body1\", component: \"div\", color: \"inherit\" }, { children: 'This URL is not valid. If you arrived here via URL you will be able to use the URL again once you have access.' }))) })), _jsx(DialogActions, { children: _jsx(Button, __assign({ onClick: onClose, color: \"primary\" }, { children: 'Back' })) })] })));\n};\nexport default NotAllowedModal;\n//# sourceMappingURL=NotAllowedModal.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport localforage from 'localforage';\nimport log from 'loglevel';\nvar makeKey = function (name, key) { return \"_\".concat(name, \"_\").concat(key); };\nvar checkExpired = function (ts, ttl) {\n    return !ts || ts < Date.now() - ttl * 1000;\n};\nvar getKeys = function (ns) { return __awaiter(void 0, void 0, void 0, function () {\n    var keys;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4, localforage.keys()];\n            case 1:\n                keys = _a.sent();\n                return [2, keys.filter(function (k) { return k.indexOf(\"_\".concat(ns, \"_\")) === 0; })];\n        }\n    });\n}); };\nvar LocalForageCache = (function () {\n    function LocalForageCache(ns, ttl) {\n        var _this = this;\n        this.prune = function () { return __awaiter(_this, void 0, void 0, function () {\n            var keys, idx, key, val;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        log.debug(\"[\".concat(this.ns, \"]LocalForageClass PRUNE\"));\n                        return [4, getKeys(this.ns)];\n                    case 1:\n                        keys = _a.sent();\n                        idx = 0;\n                        _a.label = 2;\n                    case 2:\n                        if (!(idx < keys.length)) return [3, 6];\n                        key = keys[idx];\n                        return [4, localforage.getItem(key)];\n                    case 3:\n                        val = _a.sent();\n                        if (!checkExpired(val === null || val === void 0 ? void 0 : val.ts, this.ttl)) return [3, 5];\n                        log.debug(\"[\".concat(this.ns, \"]LocalForageClass Prune Expired. Deleting: \").concat(key));\n                        return [4, localforage.removeItem(key)];\n                    case 4:\n                        _a.sent();\n                        _a.label = 5;\n                    case 5:\n                        idx++;\n                        return [3, 2];\n                    case 6: return [2];\n                }\n            });\n        }); };\n        this.get = function (key, update) {\n            if (update === void 0) { update = false; }\n            return __awaiter(_this, void 0, void 0, function () {\n                var newKey, item;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            newKey = makeKey(this.ns, key);\n                            return [4, localforage.getItem(newKey).catch(function (e) {\n                                    log.error('LocalForageClass ERROR', e);\n                                })];\n                        case 1:\n                            item = _a.sent();\n                            if (!(item && item.v && item.ts)) return [3, 7];\n                            if (!checkExpired(item.ts, this.ttl)) return [3, 3];\n                            log.debug(\"[\".concat(this.ns, \"]LocalForageClass Get Expired. Deleting: \").concat(key));\n                            return [4, localforage.removeItem(newKey)];\n                        case 2:\n                            _a.sent();\n                            return [2, null];\n                        case 3:\n                            log.debug(\"[\".concat(this.ns, \"]LocalForageClass HIT: \").concat(key));\n                            if (!(update === true)) return [3, 5];\n                            return [4, localforage.setItem(newKey, __assign(__assign({}, item), { ts: Date.now() }))];\n                        case 4:\n                            _a.sent();\n                            _a.label = 5;\n                        case 5: return [2, item.v];\n                        case 6: return [3, 8];\n                        case 7: return [2, null];\n                        case 8: return [2];\n                    }\n                });\n            });\n        };\n        this.set = function (key, value) {\n            var newKey = makeKey(_this.ns, key);\n            var val = {\n                ts: Date.now(),\n                v: value\n            };\n            return localforage.setItem(newKey, val).then(function () {\n                log.debug(\"[\".concat(_this.ns, \"]LocalForageClass Set: \").concat(key));\n            });\n        };\n        this.del = function (key) {\n            log.debug(\"[\".concat(_this.ns, \"]LocalForageClass Deleting: \").concat(key));\n            return localforage\n                .removeItem(makeKey(_this.ns, key))\n                .catch(function () {\n            })\n                .then();\n        };\n        this.clear = function () { return __awaiter(_this, void 0, void 0, function () {\n            var keys, idx;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        log.debug(\"[\".concat(this.ns, \"]LocalForageClass clear\"));\n                        return [4, getKeys(this.ns)];\n                    case 1:\n                        keys = _a.sent();\n                        for (idx = 0; idx < keys.length; idx++) {\n                            localforage.removeItem(keys[idx]);\n                        }\n                        return [2];\n                }\n            });\n        }); };\n        this.ns = ns;\n        this.ttl = ttl;\n    }\n    return LocalForageCache;\n}());\nexport default LocalForageCache;\n//# sourceMappingURL=LocalForageCache.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { useState, useRef, useCallback } from 'react';\nimport { downloadFile, downloadZipFile as apiDownloadZip } from '@riverscapes/common';\nimport _ from 'lodash';\nimport log from 'loglevel';\nimport { endpoints } from '../config';\nvar useDownload = function (auth, program) {\n    var _a = useState({}), pendingZips = _a[0], setPendingZips = _a[1];\n    var pendingZipsRef = useRef();\n    pendingZipsRef.current = pendingZips;\n    var downloadFileFn = useCallback(function (project, fkey) { return __awaiter(void 0, void 0, void 0, function () {\n        var jwt, res, error_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!program)\n                        return [2, Promise.resolve()];\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 4, , 5]);\n                    return [4, auth.getCurrentToken()];\n                case 2:\n                    jwt = _a.sent();\n                    return [4, downloadFile(endpoints.graphql, jwt, project.projType, program.machineName, project.id, fkey)];\n                case 3:\n                    res = _a.sent();\n                    try {\n                        if (res.data)\n                            window.open(res.data.downloadFile.downloadUrl, '_self');\n                    }\n                    catch (err) {\n                        log.error('DOWNLOAD err', err);\n                    }\n                    return [3, 5];\n                case 4:\n                    error_1 = _a.sent();\n                    log.error('DOWNLOAD err', error_1);\n                    return [3, 5];\n                case 5: return [2];\n            }\n        });\n    }); }, [program, auth]);\n    var downloadZipFile = useCallback(function (project) {\n        if (!program)\n            return Promise.resolve();\n        var checkZipFunc = function () {\n            return auth\n                .getCurrentToken()\n                .then(function (jwt) {\n                return apiDownloadZip(endpoints.graphql, jwt, project.projType, program.machineName, project.id);\n            })\n                .then(function (res) {\n                var _a;\n                try {\n                    if (res.data && !res.data.downloadZip.pendingSince) {\n                        setPendingZips(_.pickBy(pendingZipsRef.current, function (val, key) { return key !== project.id; }));\n                        window.open(res.data.downloadZip.downloadUrl, '_self');\n                    }\n                    else {\n                        setPendingZips(__assign(__assign({}, pendingZipsRef.current), (_a = {}, _a[project.id] = res.data ? res.data.downloadZip.pendingSince : Date.now(), _a)));\n                        setTimeout(checkZipFunc, 5000);\n                    }\n                }\n                catch (err) {\n                    log.error('DOWNLOAD err', err);\n                }\n            })\n                .catch(function (err) {\n                log.error('DOWNLOAD err', err);\n            });\n        };\n        return checkZipFunc();\n    }, [program, auth]);\n    return {\n        pendingZips: pendingZipsRef.current,\n        downloadFileFn: downloadFileFn,\n        downloadZipFile: downloadZipFile\n    };\n};\nexport default useDownload;\n//# sourceMappingURL=useDownloads.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { useEffect, useRef, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { mandatoryMetaColors } from '../config';\nimport log from 'loglevel';\nvar useProgram = function (programs, onProgramChange) {\n    var _a = useState(), program = _a[0], setProgram = _a[1];\n    var programId = useParams().programId;\n    var currProgramRef = useRef();\n    currProgramRef.current = program;\n    useEffect(function () {\n        if (!programId || programId.length < 0)\n            return;\n        try {\n            var newProg = programs === null || programs === void 0 ? void 0 : programs.find(function (p) { return p.machineName === programId; });\n            if (newProg && (!currProgramRef.current || currProgramRef.current.machineName !== newProg.machineName)) {\n                newProg.collections = newProg.collections.map(function (c, idx) { return (__assign(__assign({}, c), { color: mandatoryMetaColors[idx % mandatoryMetaColors.length] })); });\n                currProgramRef.current = newProg;\n                log.debug('useProgram', { programId: programId, newProg: newProg, programs: programs });\n                setProgram(newProg);\n                if (onProgramChange)\n                    onProgramChange(newProg);\n            }\n        }\n        catch (_a) {\n            return;\n        }\n    }, [programs, programId, onProgramChange]);\n    return program;\n};\nexport default useProgram;\n//# sourceMappingURL=useProgram.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { useEffect, useRef, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { getProject } from '@riverscapes/common';\nimport { endpoints } from '../config';\nimport log from 'loglevel';\nvar STATE_INIT = { loading: false, initialized: false };\nvar useProject = function (auth, program, files, tree, onProjectChange) {\n    if (files === void 0) { files = false; }\n    if (tree === void 0) { tree = false; }\n    var projectId = useParams().projectId;\n    var _a = useState(STATE_INIT), projState = _a[0], setProjState = _a[1];\n    var currProjectStateRef = useRef(STATE_INIT);\n    currProjectStateRef.current = projState;\n    var projLoadingDone = useRef(false);\n    useEffect(function () {\n        if (!projectId || projectId.length < 2) {\n            setProjState(STATE_INIT);\n            return;\n        }\n        try {\n            if (!program || !projectId)\n                return;\n            if (projectId && projState.project && projectId === projState.project.id)\n                return;\n            var progMachineName_1 = program.machineName;\n            setTimeout(function () {\n                if (!projLoadingDone.current && !projState.project)\n                    setProjState(__assign(__assign({}, currProjectStateRef.current), { loading: true }));\n            }, 500);\n            auth.getCurrentToken()\n                .then(function (jwt) { return getProject(endpoints.graphql, jwt, projectId, progMachineName_1, files, tree); })\n                .then(function (res) { return __awaiter(void 0, void 0, void 0, function () {\n                var _a;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            projLoadingDone.current = true;\n                            log.debug('getProjectById::Response', res);\n                            if (!(res.data &&\n                                res.data.project &&\n                                currProjectStateRef.current &&\n                                currProjectStateRef.current.project &&\n                                ((_a = currProjectStateRef.current) === null || _a === void 0 ? void 0 : _a.project.id) === res.data.project.id)) return [3, 1];\n                            return [2];\n                        case 1:\n                            if (!res.data) return [3, 4];\n                            setProjState({ project: res.data.project, loading: false, initialized: true });\n                            if (!onProjectChange) return [3, 3];\n                            return [4, onProjectChange(res.data.project)];\n                        case 2:\n                            _b.sent();\n                            _b.label = 3;\n                        case 3: return [3, 6];\n                        case 4:\n                            setProjState({ project: undefined, loading: false, initialized: true });\n                            if (!onProjectChange) return [3, 6];\n                            return [4, onProjectChange(null)];\n                        case 5:\n                            _b.sent();\n                            _b.label = 6;\n                        case 6: return [2];\n                    }\n                });\n            }); })\n                .catch(function (err) {\n                projLoadingDone.current = true;\n                setProjState({ project: undefined, loading: false, initialized: true });\n                log.error('api.getProjectById error', err);\n            });\n        }\n        catch (_a) {\n            return;\n        }\n    }, [projectId, program, auth]);\n    return projState;\n};\nexport default useProject;\n//# sourceMappingURL=useProject.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { useEffect, useState } from 'react';\nimport { useParams, generatePath } from 'react-router-dom';\nimport log from 'loglevel';\nimport base64url from 'base64url';\nimport { createHashHistory } from 'history';\nimport { isUndefined } from 'lodash';\nexport var hashHistory = createHashHistory();\nvar useQueryParams = function (pathPattern, history) {\n    var _a = useParams(), config = _a.config, params = __rest(_a, [\"config\"]);\n    var _b = useState([null, {}]), _c = _b[0], encoded = _c[0], decoded = _c[1], setState = _b[1];\n    var setQuery = function (input) {\n        if (Object.keys(input).length === 0) {\n            setState([null, {}]);\n            var newPath = generatePath(pathPattern, params);\n            history.replace(newPath);\n        }\n        else {\n            var newEncoded = encode(input);\n            if (newEncoded !== config) {\n                var newPath = generatePath(pathPattern, __assign(__assign({}, params), { config: newEncoded }));\n                log.debug('DEBUG::useQueryParams setQuery', { newEncoded: newEncoded, input: input });\n                setState([newEncoded, input]);\n                history.replace(newPath);\n            }\n        }\n    };\n    useEffect(function () {\n        if (!config || encoded === config) {\n            return;\n        }\n        else {\n            try {\n                var decoded_1 = decode(config);\n                log.debug('DEBUG::useQueryParams  YES!!!', { encoded: encoded, config: config, decoded: decoded_1 });\n                setState([config, decoded_1]);\n            }\n            catch (e) {\n                log.error(e);\n                setState([null, {}]);\n            }\n        }\n    }, [config, encoded]);\n    return { query: decoded, setQuery: setQuery };\n};\nexport default useQueryParams;\nfunction encode(qry) {\n    if (qry === null || isUndefined(qry))\n        return null;\n    switch (typeof qry) {\n        case 'string':\n            return qry;\n        default:\n            if (typeof qry === 'object' && Object.keys(qry || {}).length === 0) {\n                return '';\n            }\n            else {\n                return '~' + base64url(JSON.stringify(qry));\n            }\n    }\n}\nfunction decode(input) {\n    if (!input || input.length < 2 || input[0] !== '~')\n        return {};\n    var output = {};\n    try {\n        output = JSON.parse(base64url.decode(input.slice(1)));\n    }\n    catch (_a) {\n        output = {};\n    }\n    return output;\n}\n//# sourceMappingURL=useQueryParams.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { createTheme } from '@material-ui/core/styles';\nimport { indigo, orange } from '@material-ui/core/colors';\nvar home = {\n    palette: {\n        primary: {\n            main: indigo[500]\n        },\n        secondary: {\n            main: orange[600],\n            contrastText: '#FFFFFF'\n        },\n        text: {}\n    }\n};\nvar homeDark = __assign(__assign({}, home), { palette: __assign(__assign({}, home.palette), { type: 'dark' }) });\nexport default {\n    home: createTheme(home),\n    homeDark: createTheme(homeDark)\n};\n//# sourceMappingURL=themes.js.map","import ReactGA from 'react-ga';\nimport { googleAnalytics } from './config';\nimport log from 'loglevel';\nexport var init = function () {\n    if (googleAnalytics)\n        ReactGA.initialize(googleAnalytics, {\n            titleCase: false\n        });\n    else\n        log.error('Google Analytics: no UA- code found');\n};\nexport var currentPageView = function (path) {\n    ReactGA.pageview(path || window.location.pathname + window.location.hash);\n};\nexport var event = function (category, action, label) {\n    ReactGA.event({\n        category: category,\n        action: action,\n        label: label\n    });\n};\n//# sourceMappingURL=googleAnalytics.js.map","import { SearchParams } from '@riverscapes/common'\n\nconst searchDefaultParams: SearchParams = {\n    limit: 10,\n    nextToken: 0\n}\n\nexport const warehouseIconUrl = process.env.PUBLIC_URL + '/RiverscapesLogo.png'\n\nexport const appDefaults = {\n    searchDefaultParams,\n    webRaveURL: process.env.REACT_APP_WEBRAVE_URL as string\n}\n","import React from 'react'\nimport clsx from 'clsx'\nimport Typography from '@material-ui/core/Typography'\nimport ListItem from '@material-ui/core/ListItem'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport Avatar from '@material-ui/core/Avatar'\n\nimport { WarehouseTags, DownloadZipBtn, WebRaveBtn, PendingZips } from '@riverscapes/react-common'\n// import log from 'loglevel'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Chip } from '@material-ui/core'\nimport moment from 'moment'\nimport { Project, Program } from '@riverscapes/common'\nimport { appDefaults } from '../../config'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        padding: theme.spacing(2),\n        margin: theme.spacing(2)\n    },\n    itemLeft: {\n        flex: '1 1 75%'\n    },\n    itemMiddle: {\n        // border: '1px solid red',\n        flex: '1 0 20%',\n        display: 'flex',\n        textAlign: 'right',\n        flexDirection: 'column'\n    },\n    itemRight: {\n        // border: '1px solid red',\n        paddingLeft: theme.spacing(1),\n        flex: '0 0',\n        display: 'flex',\n        textAlign: 'right',\n        flexDirection: 'column'\n    },\n    itemRightInner: {\n        // border: '1px solid blue',\n        display: 'flex',\n        textAlign: 'right'\n    },\n    spacer: {\n        flexGrow: 1\n    },\n    projDate: {},\n    itemLine: {\n        display: 'flex'\n    },\n    mm: {\n        display: 'flex',\n        width: '100%'\n    },\n    odd: {\n        background: theme.palette.background.default\n    },\n    mmItem: {},\n    prodChip: {\n        height: theme.spacing(2.3),\n        borderRadius: theme.spacing(1) / 2,\n        color: '#999',\n        border: `1px solid #ddd`,\n        background: '#eee',\n        marginRight: theme.spacing(1)\n    },\n    downloadText: {\n        // position: 'absolute',\n        textAlign: 'center',\n        width: '100%'\n        // bottom: -theme.spacing(2),\n        // right: 0\n    }\n}))\n\ninterface Props {\n    project: Project\n    odd?: boolean\n    onClick: () => void\n    program: Program\n    pendingZips: PendingZips\n    downloadZipFile: (proj: Project) => Promise<void>\n}\n\nconst SearchResult: React.FC<Props> = ({ project, onClick, program, pendingZips, odd, downloadZipFile }: Props) => {\n    const classes = useStyles()\n    const pendingSince = pendingZips[project.id]\n\n    // Figure out which fields are mandatory\n    const projObj = program.products.find((p) => p.id === project.projType)\n    const projObjMand = projObj ? projObj.pathArr.filter((pr) => pr.type === 'Collection') : []\n\n    const pTypeName = projObj ? projObj.name : '<UNKNOWN>'\n    const mandatoryMeta = projObjMand.map((po) => ({ key: po.name, val: project.meta[po.name] }), {})\n\n    const lowerMeta: Record<string, string> = Object.keys(project.meta || {}).reduce(\n        (acc, key) => ({ ...acc, [key.toLowerCase()]: project.meta[key] }),\n        {}\n    )\n\n    const pTypeNameVersion = lowerMeta['modelversion'] ? `${pTypeName} v.${lowerMeta['modelversion']}` : pTypeName\n\n    return (\n        <ListItem button onClick={onClick} className={clsx({ [classes.odd]: odd as boolean })}>\n            <ListItemAvatar>\n                <Avatar> {project.projType && project.projType.substr(0, 1)} </Avatar>\n            </ListItemAvatar>\n            <div className={classes.itemLeft}>\n                <Typography variant=\"body1\">{project.name}</Typography>\n                <div className={classes.mm}>\n                    <Chip className={classes.prodChip} label={pTypeNameVersion} size=\"small\" />\n                    {mandatoryMeta.map(({ key, val }, idx) => {\n                        const mmFound = program.collections.find((c) => c.name === key)\n                        const color = mmFound && mmFound.color ? mmFound.color[500] : 'inherit'\n                        return (\n                            <Typography\n                                key={`mmval-${idx}`}\n                                className={classes.mmItem}\n                                variant=\"caption\"\n                                color=\"textSecondary\"\n                            >\n                                {idx > 0 && ' • '}\n                                <span style={{ color }}> {val} </span>\n                            </Typography>\n                        )\n                    })}\n                </div>\n            </div>\n            <div className={classes.itemMiddle}>\n                <div>\n                    <WarehouseTags tags={project.tags} />\n                </div>\n                {project.updatedOn && (\n                    <Tooltip\n                        key={`whTag-dateTooltip`}\n                        title={\n                            <React.Fragment>\n                                <Typography variant=\"body1\">Dates</Typography>\n                                <Typography variant=\"caption\">\n                                    Created: {moment(project.createdOn, 'x').format('lll')}\n                                    <br />\n                                    Last updated: {moment(project.updatedOn, 'x').format('lll')}\n                                </Typography>\n                            </React.Fragment>\n                        }\n                    >\n                        <Typography className={classes.projDate} variant=\"caption\" color=\"inherit\">\n                            {moment(project.updatedOn, 'x').format('ll')}\n                        </Typography>\n                    </Tooltip>\n                )}\n            </div>\n            <div className={classes.itemRight}>\n                <DownloadZipBtn {...{ project, pendingSince, downloadZipFile }} btnProps={{ size: 'small' }} />\n            </div>\n            <div className={classes.itemRight}>\n                <WebRaveBtn project={project} url={appDefaults.webRaveURL as string} btnProps={{ size: 'small' }} />\n            </div>\n        </ListItem>\n    )\n}\n\nexport default SearchResult\n","import React from 'react'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\n\nimport Skeleton from '@material-ui/lab/Skeleton'\nimport IconButton from '@material-ui/core/IconButton'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(() => ({\n    root: {},\n    itemText: {\n        flexGrow: 1\n    }\n}))\n\nconst SearchResultLoading: React.FC = () => {\n    const classes = useStyles()\n    return (\n        <ListItem>\n            <ListItemAvatar>\n                <Skeleton variant=\"circle\" height={40} width={40} />\n            </ListItemAvatar>\n            <div className={classes.itemText}>\n                <Skeleton style={{ height: 10, width: '60%', margin: '6px 0' }} />\n                <Skeleton style={{ height: 10, width: '40%', margin: '6px 0' }} />\n            </div>\n            <ListItemSecondaryAction>\n                <IconButton edge=\"end\" disabled>\n                    <Skeleton variant=\"circle\" height={40} width={40} />\n                </IconButton>\n            </ListItemSecondaryAction>\n        </ListItem>\n    )\n}\n\nexport default SearchResultLoading\n","import React from 'react'\nimport Paper from '@material-ui/core/Paper'\nimport Divider from '@material-ui/core/Divider'\n\nimport List from '@material-ui/core/List'\nimport SearchResult from './SearchResult'\nimport SearchResultLoading from './SearchResultLoading'\n\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport { PaginationWidget } from '@northarrowresearch/react-common'\nimport { Project, Program, SearchResultsInterface, SearchParams } from '@riverscapes/common'\nimport { PendingZips } from '@riverscapes/react-common'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        padding: theme.spacing(2),\n        margin: theme.spacing(2)\n    }\n}))\n\ninterface Props {\n    data?: SearchResultsInterface\n    loading?: boolean\n    program: Program\n    searchParams: SearchParams\n    setSearchParams: (params: SearchParams) => void\n    pendingZips: PendingZips\n    navigate: (progName: string, projId?: string) => void\n    downloadZipFile: (proj: Project) => Promise<void>\n}\n\nconst SearchResults: React.FC<Props> = ({\n    data,\n    program,\n    loading,\n    searchParams,\n    setSearchParams,\n    pendingZips,\n    navigate,\n    downloadZipFile\n}: Props) => {\n    const classes = useStyles()\n\n    //  The loading state of this object is just a bunch of empty skeletons\n    if (loading) {\n        return (\n            <Paper className={classes.root}>\n                <PaginationWidget\n                    data={{\n                        total: 0,\n                        startIndex: searchParams.nextToken,\n                        pageSize: searchParams.limit\n                    }}\n                    loading={loading}\n                    handlePaginationEvent={(newIndex: number): void =>\n                        setSearchParams({\n                            ...searchParams,\n                            nextToken: newIndex\n                        })\n                    }\n                />\n                <Divider />\n                <List>\n                    {Array(searchParams.limit || 10)\n                        .fill(null)\n                        .map((x, idx) => (\n                            <SearchResultLoading key={`result-${idx}`} />\n                        ))}\n                </List>\n            </Paper>\n        )\n    }\n    //  Maybe search returned nothing\n    if (!data || !data.projects || data.projects.length === 0) {\n        return (\n            <Paper className={classes.root}>\n                <div>No Projects Found</div>\n            </Paper>\n        )\n    }\n\n    return (\n        <Paper className={classes.root}>\n            <PaginationWidget\n                data={{\n                    total: data.total,\n                    startIndex: searchParams.nextToken,\n                    pageSize: searchParams.limit\n                }}\n                handlePaginationEvent={(newIndex: number): void =>\n                    setSearchParams({\n                        ...searchParams,\n                        nextToken: newIndex\n                    })\n                }\n            />\n            <Divider />\n            <List>\n                {data &&\n                    data.projects.map((r, idr) => {\n                        const project = new Project(r)\n                        return (\n                            <SearchResult\n                                key={`result-${idr}`}\n                                odd={Boolean(idr % 2)}\n                                project={project}\n                                program={program}\n                                pendingZips={pendingZips}\n                                downloadZipFile={downloadZipFile}\n                                onClick={(): void => navigate(program.machineName, project.id)}\n                            />\n                        )\n                    })}\n            </List>\n        </Paper>\n    )\n}\n\nexport default SearchResults\n","import React, { useState, useEffect } from 'react'\n\nimport { search, SearchResultsInterface, Program, Project, SearchParams } from '@riverscapes/common'\nimport { PendingZips } from '@riverscapes/react-common'\n\nimport SearchResults from '../components/Search/SearchResults'\nimport log from 'loglevel'\n\ninterface Props {\n    program?: Program\n    getCurrentToken: () => Promise<string>\n    url: string\n    searchParams: SearchParams\n    setSearchParams: (params: SearchParams) => void\n    navigate: (progName: string, projId?: string) => void\n    pendingZips: PendingZips\n    downloadZipFile: (proj: Project) => Promise<void>\n}\n\nconst ResultsPaneConnect: React.FC<Props> = ({\n    getCurrentToken,\n    url,\n    navigate,\n    program,\n    searchParams,\n    setSearchParams,\n    pendingZips,\n    downloadZipFile\n}: Props) => {\n    const [isLoading, setIsLoading] = useState<boolean>(true)\n    const [results, setResults] = useState<SearchResultsInterface>()\n    const [errors, setErrors] = useState<Record<string, unknown>[]>()\n    if (errors) log.error(errors)\n\n    useEffect(() => {\n        setResults(undefined)\n        async function doEffect(): Promise<void> {\n            if (!program) return\n            setIsLoading(true)\n            const jwt = await getCurrentToken()\n            log.debug('Search API Hit', { url, jwt, program: program.machineName, searchParams })\n            await search(url, jwt, program.machineName, searchParams)\n                .then(({ data, errors }) => {\n                    try {\n                        if (errors && errors.length > 0) {\n                            setErrors(errors)\n                            setIsLoading(false)\n                        } else if (data) {\n                            const searchData = data.search\n                            setResults(searchData)\n                            setIsLoading(false)\n                        }\n                    } catch {\n                        setIsLoading(false)\n                    }\n                })\n                .catch((err) => {\n                    setIsLoading(false)\n                    setErrors([err])\n                })\n        }\n        doEffect()\n    }, [program, url, searchParams, getCurrentToken])\n\n    return (\n        <SearchResults\n            data={results}\n            loading={isLoading}\n            navigate={navigate}\n            program={program as Program}\n            searchParams={searchParams}\n            setSearchParams={setSearchParams}\n            pendingZips={pendingZips}\n            downloadZipFile={downloadZipFile}\n        />\n    )\n}\nResultsPaneConnect['whyDidYouRender'] = true\nexport default ResultsPaneConnect\n","import React, { useState } from 'react'\nimport TextField from '@material-ui/core/TextField'\nimport Typography from '@material-ui/core/Typography'\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport { makeStyles } from '@material-ui/core'\n\nimport { CollectionType } from '@riverscapes/common'\nimport log from 'loglevel'\nimport _ from 'lodash'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: 'flex'\n    },\n    advancedLeft: {\n        flex: '1 1 30%',\n        height: theme.spacing(4),\n        marginRight: theme.spacing(1)\n    },\n    advancedLeftCustom: {\n        textAlign: 'center'\n    },\n    advancedLeftOption: {},\n    advancedText: {\n        flex: '1 1 70%'\n    },\n    advancedRight: {\n        flex: '1 1 70%'\n    },\n    advancedOp: {\n        display: 'flex'\n    },\n    advancedTextCustomName: {\n        flex: '1 1 30%',\n        marginRight: theme.spacing(1)\n    },\n    advancedTextCustomValue: {\n        flex: '1 1 40%'\n    },\n    advancedOpName: {\n        flexGrow: 1\n    },\n\n    advancedOpNamId: {},\n    advancedInput: {\n        height: theme.spacing(4)\n    }\n}))\n\ninterface Props {\n    row: string[]\n    options: CollectionType[]\n    changeHandler: (newRow: [string, string], forceSubmit?: boolean) => void\n}\n\nconst SearchAdvancedRow: React.FC<Props> = ({ row, options, changeHandler }: Props) => {\n    const classes = useStyles()\n    const [mKey, mVal] = row\n    const [err, setErr] = useState<string | null>(null)\n\n    const option = mKey && mKey.length > 0 && options.find((o) => o.name.toLowerCase() === mKey.toLowerCase())\n    const hasSetVals = option && option.Allow && !!option.Allow.find((o) => o.name.toLowerCase() && o.name.length > 0)\n\n    const validate = (keyU: unknown, valU: unknown): void => {\n        // regex validation\n        const key = String(keyU)\n        const val = String(valU)\n        if (val && val.length > 0 && option && !hasSetVals) {\n            const allowRegex = option.AllowRegex\n            if (allowRegex && allowRegex.length > 0) {\n                const errs: string[] = []\n                allowRegex.forEach((regex) => {\n                    // log.info(regex)\n                    const pattern = new RegExp(regex)\n                    const hasError = !val.match(pattern)\n                    if (hasError) {\n                        errs.push(regex)\n                    }\n                })\n                // Bail on the query if there are any errors. Display them in the error column\n                if (errs.length > 0) {\n                    if (errs.length === 1) setErr(`Value must match pattern: '${errs[0]}'`)\n                    else {\n                        setErr(\n                            errs.reduce(\n                                (acc, err, idx) => acc + (idx > 0 ? ' and ' : '') + err,\n                                'Value must match patterns: '\n                            )\n                        )\n                    }\n                    return\n                }\n            }\n        }\n        setErr(null)\n        log.debug('CHANGING VALUES', [key, val])\n        if (key.toLowerCase() !== mKey.toLowerCase() || val.toLowerCase() !== mVal.toLowerCase()) {\n            changeHandler([key, val])\n        }\n    }\n\n    const debouncedValidate = _.debounce(validate, 500)\n\n    const handleKeyPress = (keyCode): void => {\n        if (keyCode === 13 && mKey && mKey.length > 0) {\n            log.debug('Enter pressed')\n            changeHandler([mKey, mVal], true)\n        }\n    }\n\n    return (\n        <div className={classes.root}>\n            <FormControl className={classes.advancedLeft}>\n                <Select\n                    value={option ? option.name : '__custom'}\n                    inputProps={{\n                        className: classes.advancedInput\n                    }}\n                    onChange={(\n                        event: React.ChangeEvent<{\n                            name?: string\n                            value: unknown\n                        }>\n                    ): void => changeHandler([String(event.target.value), ''], true)}\n                >\n                    <MenuItem key={`aoss-custom`} value=\"__custom\">\n                        <Typography className={classes.advancedLeftCustom} color=\"textSecondary\">\n                            <em>Custom</em>\n                        </Typography>\n                    </MenuItem>\n                    {options.map(({ name }, oid) => (\n                        <MenuItem key={`aoss-${oid}`} value={name}>\n                            <Typography className={classes.advancedLeftOption}>{name}</Typography>\n                        </MenuItem>\n                    ))}\n                </Select>\n            </FormControl>\n            {hasSetVals ? (\n                <FormControl className={classes.advancedRight}>\n                    <Select\n                        value={mVal}\n                        inputProps={{\n                            className: classes.advancedInput\n                        }}\n                        onChange={(\n                            event: React.ChangeEvent<{\n                                name?: string\n                                value: unknown\n                            }>\n                        ): void => changeHandler([mKey, String(event.target.value)], true)}\n                    >\n                        {option &&\n                            option.Allow &&\n                            option.Allow.map(({ id, name }, oid) => {\n                                return (\n                                    <MenuItem className={classes.advancedOp} key={`aooptss-${oid}`} value={id}>\n                                        <Typography className={classes.advancedOpName}>{name}</Typography>\n                                        {name !== id && (\n                                            <Typography variant=\"caption\" className={classes.advancedOpNamId}>\n                                                {id}\n                                            </Typography>\n                                        )}\n                                    </MenuItem>\n                                )\n                            })}\n                    </Select>\n                </FormControl>\n            ) : option ? (\n                <TextField\n                    error={!!err}\n                    label={err}\n                    disabled={!mKey || mKey.length === 0}\n                    placeholder=\"...\"\n                    defaultValue={mVal}\n                    className={classes.advancedText}\n                    inputProps={{\n                        className: classes.advancedInput\n                    }}\n                    onKeyDown={(e: React.KeyboardEvent<HTMLDivElement>): void => handleKeyPress(e.keyCode)}\n                    onChange={(e: React.ChangeEvent<HTMLInputElement>): void => debouncedValidate(mKey, e.target.value)}\n                />\n            ) : (\n                <React.Fragment>\n                    <TextField\n                        placeholder=\"Meta Name\"\n                        defaultValue=\"\"\n                        className={classes.advancedTextCustomName}\n                        inputProps={{\n                            className: classes.advancedInput\n                        }}\n                        onKeyDown={(e: React.KeyboardEvent<HTMLDivElement>): void => handleKeyPress(e.keyCode)}\n                        onChange={(e: React.ChangeEvent<HTMLInputElement>): void =>\n                            debouncedValidate(e.target.value, mVal)\n                        }\n                    />\n                    <TextField\n                        placeholder=\"Meta Value\"\n                        defaultValue=\"\"\n                        className={classes.advancedTextCustomValue}\n                        inputProps={{\n                            className: classes.advancedInput\n                        }}\n                        onKeyDown={(e: React.KeyboardEvent<HTMLDivElement>): void => handleKeyPress(e.keyCode)}\n                        onChange={(e: React.ChangeEvent<HTMLInputElement>): void =>\n                            debouncedValidate(mKey, e.target.value)\n                        }\n                    />\n                </React.Fragment>\n            )}\n        </div>\n    )\n}\n\nexport default SearchAdvancedRow\n","import React, { useState, useRef, useEffect } from 'react'\nimport TextField from '@material-ui/core/TextField'\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport Button from '@material-ui/core/Button'\nimport SearchIcon from '@material-ui/icons/Search'\nimport { makeStyles, Paper } from '@material-ui/core'\n// import log from 'loglevel'\nimport { appDefaults } from '../../config'\n\nimport SearchAdvancedRow from './SearchAdvancedRow'\nimport { ProjTotals, setSearchParamsType } from '../../types'\nimport { CollectionType, Program, SearchParams } from '@riverscapes/common'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        padding: theme.spacing(2),\n        margin: theme.spacing(2)\n    },\n    spacer: {\n        flexGrow: 1\n    },\n    actionBar: {\n        display: 'flex',\n        width: '100%',\n        '&>*': {\n            marginLeft: theme.spacing(1)\n        }\n    },\n    advanced: {},\n    iconButton: {},\n    textField: {},\n    projTypeLine: {\n        display: 'flex'\n    },\n    projType: {\n        marginRight: theme.spacing(1),\n        flexGrow: 1,\n        maxWidth: 300\n    },\n    resultsNum: {\n        flexShrink: 0\n    },\n    projTypeMenuItem: {\n        display: 'flex'\n    },\n    projTypeMenuItemSelected: {\n        display: 'flex'\n    },\n    projTypeMenuItemName: {\n        flexGrow: 1\n    },\n    projTypeMenuItemNum: {\n        color: theme.palette.text.secondary,\n        fontSize: '0.75rem'\n    }\n}))\n\ninterface Props {\n    program: Program\n    projTotals: ProjTotals\n    searchParams?: SearchParams\n    setSearchParams: setSearchParamsType\n}\n\n/**\n * This is the over-arching wrapper for the app. It combines all the\n * same place. Time will tell if that's a good strategy.\n */\nconst SearchForm: React.FC<Props> = ({ projTotals, program, searchParams, setSearchParams }: Props) => {\n    const classes = useStyles()\n    const [advancedVals, setAdvancedVals] = useState<string[][]>([])\n    const searchParamsRef = useRef<SearchParams | undefined>(searchParams)\n    const searchMetaInputRef = useRef<HTMLInputElement>()\n    const searchTagInputRef = useRef<HTMLInputElement>()\n    searchParamsRef.current = searchParams\n\n    function submitSearch(params: SearchParams | null, advancedParams?: string[][]): void {\n        const newParams: SearchParams = { ...(params || (searchParamsRef.current as SearchParams) || searchParams) }\n        const newAdvanced = [...(advancedParams || advancedVals)]\n\n        if (newParams.projType === '__all') delete newParams.projType\n\n        const advFinal =\n            newAdvanced &&\n            newAdvanced.length > 0 &&\n            newAdvanced.filter(([k, v]) => k && v && k.length > 0 && v.length > 0)\n\n        const submitParams: SearchParams = { ...newParams, nextToken: 0 }\n        if (advFinal && advFinal.length > 0) submitParams.metaArr = JSON.stringify(advFinal)\n\n        if (advancedParams) setAdvancedVals(advancedParams)\n        setSearchParams(submitParams)\n    }\n\n    const reconstituteTags = (tagSearchStr?: string): string => {\n        if (!tagSearchStr) return ''\n        try {\n            return JSON.parse(tagSearchStr).join(', ')\n        } catch {\n            return ''\n        }\n    }\n\n    useEffect(() => {\n        if (searchMetaInputRef.current) searchMetaInputRef.current.value = (searchParams as SearchParams).metaStr || ''\n        if (searchTagInputRef.current) {\n            if (searchParams && searchParams.noTags === true) searchTagInputRef.current.value = 'NO_TAGS'\n            else {\n                searchTagInputRef.current.value = reconstituteTags((searchParams as SearchParams).tags) || ''\n            }\n        }\n    }, [searchParams])\n\n    const toggleAdvanced = (): void => {\n        if (!searchParamsRef.current) return\n        if (advancedVals.length > 0) {\n            submitSearch(searchParamsRef.current, [])\n        } else {\n            submitSearch(searchParamsRef.current, [['', '']])\n        }\n    }\n\n    const projectArr =\n        program && program.products ? Object.values(program.products).map(({ name, id }) => ({ name, id })) : []\n\n    const allAdvancedOptions: CollectionType[] = program ? program.collections : []\n\n    allAdvancedOptions.sort((a, b) => {\n        if (a.name.toLowerCase() < b.name.toLowerCase()) return -1\n        if (a.name.toLowerCase() > b.name.toLowerCase()) return 1\n        return 0\n    })\n    projectArr.sort((a, b) => {\n        if (a.name.toLowerCase() < b.name.toLowerCase()) return -1\n        if (a.name.toLowerCase() > b.name.toLowerCase()) return 1\n        return 0\n    })\n\n    const sanitizeTags = (tagStr: string): string | undefined => {\n        const tagArr = tagStr\n            .split(',')\n            .map((ts) => ts.trim())\n            .filter((ts) => ts && ts.length > 0)\n        if (tagArr.length === 0) return undefined\n        else return JSON.stringify(tagArr)\n    }\n\n    const handleKeyPress = (e): void => {\n        if (e.keyCode === 13) {\n            submitSearch(searchParamsRef.current as SearchParams)\n        }\n    }\n    return (\n        <Paper className={classes.root}>\n            {program && program.products && (\n                <div className={classes.projTypeLine}>\n                    <FormControl fullWidth className={classes.projType}>\n                        <InputLabel htmlFor=\"projectType\">Project Type</InputLabel>\n                        <Select\n                            id=\"projectType\"\n                            inputProps={{\n                                className: classes.projTypeMenuItemSelected\n                            }}\n                            value={searchParamsRef.current?.projType || '__all'}\n                            onChange={(event: React.ChangeEvent<{ name?: string; value: unknown }>): void => {\n                                const projType =\n                                    event.target.value !== '_all' ? (event.target.value as string) : undefined\n                                submitSearch({ ...(searchParamsRef.current as SearchParams), projType })\n                            }}\n                        >\n                            <MenuItem className={classes.projTypeMenuItem} value=\"__all\">\n                                <div className={classes.projTypeMenuItemName}>All Project Types</div>\n                                <div className={classes.projTypeMenuItemNum}>\n                                    {projTotals.__all > -1 ? `${projTotals.__all}` : '...'}\n                                </div>\n                            </MenuItem>\n                            {projectArr.map(({ name: prodName, id: prodId }, idx) => (\n                                <MenuItem className={classes.projTypeMenuItem} key={`prod-${idx}`} value={prodId}>\n                                    <div className={classes.projTypeMenuItemName}>{prodName}</div>\n                                    <div className={classes.projTypeMenuItemNum}>\n                                        {projTotals[prodId] > -1 ? `${projTotals[prodId]}` : '...'}\n                                    </div>\n                                </MenuItem>\n                            ))}\n                        </Select>\n                    </FormControl>\n                    <div className={classes.spacer} />\n                    <FormControl fullWidth className={classes.projType}>\n                        <TextField\n                            id=\"tagSearch\"\n                            label=\"Tag Search\"\n                            autoFocus\n                            placeholder=\"Term1, term2, ... or NO_TAGS\"\n                            inputRef={searchTagInputRef}\n                            // className={classes.textField}\n                            defaultValue={reconstituteTags(searchParamsRef.current?.tags)}\n                            // value={}\n                            onKeyDown={handleKeyPress}\n                            onChange={(event): void => {\n                                if (event.target.value && event.target.value.trim() === 'NO_TAGS') {\n                                    searchParamsRef.current = {\n                                        ...(searchParamsRef.current as SearchParams),\n                                        noTags: true,\n                                        tags: undefined\n                                    }\n                                } else {\n                                    searchParamsRef.current = {\n                                        ...(searchParamsRef.current as SearchParams),\n                                        noTags: undefined,\n                                        tags: sanitizeTags(event.target.value)\n                                    }\n                                }\n                            }}\n                        />\n                    </FormControl>\n\n                    <FormControl className={classes.resultsNum}>\n                        <InputLabel htmlFor=\"resultsNum\">Results</InputLabel>\n                        <Select\n                            id=\"resultsNum\"\n                            value={searchParamsRef.current?.limit}\n                            onChange={(event: React.ChangeEvent<{ name?: string; value: unknown }>): void => {\n                                submitSearch({\n                                    ...(searchParamsRef.current as SearchParams),\n                                    limit: event.target.value as number\n                                })\n                            }}\n                        >\n                            <MenuItem value={10}>10</MenuItem>\n                            <MenuItem value={20}>20</MenuItem>\n                            <MenuItem value={50}>50</MenuItem>\n                            <MenuItem value={100}>100</MenuItem>\n                        </Select>\n                    </FormControl>\n                </div>\n            )}\n            <TextField\n                id=\"outlined-helperText2\"\n                label=\"Metadata Search\"\n                fullWidth\n                autoFocus\n                placeholder=\"...\"\n                inputRef={searchMetaInputRef}\n                className={classes.textField}\n                margin=\"normal\"\n                variant=\"outlined\"\n                defaultValue={searchParamsRef.current?.metaStr || ''}\n                // value={}\n                onKeyDown={handleKeyPress}\n                onChange={(event): void => {\n                    searchParamsRef.current = {\n                        ...(searchParamsRef.current as SearchParams),\n                        metaStr: event.target.value as string\n                    }\n                }}\n            />\n            {advancedVals.length > 0 && (\n                <div className={classes.advanced}>\n                    {advancedVals.map((row, rid) => (\n                        <SearchAdvancedRow\n                            key={`advRow-${rid}`}\n                            row={row}\n                            options={allAdvancedOptions.filter((ao) => {\n                                return !advancedVals.find((row, idx) => idx !== rid && row[0] === ao.name)\n                            })}\n                            changeHandler={(newRow: [string, string], forceSubmit?: boolean): void => {\n                                const newAdvanced = [...advancedVals]\n                                newAdvanced[rid] = newRow\n                                setAdvancedVals(newAdvanced)\n                                if (forceSubmit) submitSearch(null, newAdvanced)\n                            }}\n                        />\n                    ))}\n                    <div>\n                        <Button onClick={(): void => submitSearch(null, [...advancedVals, ['', '']])}>+</Button>\n                        <Button onClick={(): void => submitSearch(null, advancedVals.slice(0, -1))}>-</Button>\n                    </div>\n                </div>\n            )}\n            <div className={classes.actionBar}>\n                <Button color=\"primary\" onClick={toggleAdvanced}>\n                    {advancedVals.length > 0 ? 'Hide' : 'Show'} Advanced\n                </Button>\n                <div className={classes.spacer} />\n                <Button\n                    className={classes.iconButton}\n                    color=\"primary\"\n                    variant=\"contained\"\n                    onClick={(): void => {\n                        submitSearch(searchParamsRef.current as SearchParams)\n                    }}\n                >\n                    <SearchIcon /> Search\n                </Button>\n                <Button\n                    className={classes.iconButton}\n                    color=\"secondary\"\n                    variant=\"contained\"\n                    onClick={(): void => {\n                        setAdvancedVals([])\n                        submitSearch(appDefaults.searchDefaultParams as SearchParams)\n                    }}\n                >\n                    Reset\n                </Button>\n            </div>\n        </Paper>\n    )\n}\n\nexport default SearchForm\n","import React, { useState, useEffect, useRef } from 'react'\nimport { search } from '@riverscapes/common'\nimport log from 'loglevel'\nimport { Program, SearchParams } from '@riverscapes/common'\nimport SearchForm from '../components/Search/SearchForm'\nimport { ProjTotals, setSearchParamsType } from '../types'\n\ninterface Props {\n    program?: Program\n    getCurrentToken: () => Promise<string>\n    url: string\n    searchParams: SearchParams\n    setSearchParams: (params: SearchParams) => void\n}\n\nconst SearchFormConnect: React.FC<Props> = ({\n    getCurrentToken,\n    url,\n    program,\n    searchParams,\n    setSearchParams\n}: Props) => {\n    const [projTotals, setProjTotals] = useState<ProjTotals>({})\n    const projTotalsRef = useRef<ProjTotals>()\n    projTotalsRef.current = projTotals\n\n    useEffect(() => {\n        if (program && url) {\n            getCurrentToken()\n                // The initial search is just to get at the total value\n                .then((jwt) => search(url, jwt, program.machineName, { limit: 0, nextToken: 0 }))\n                .then(\n                    ({ data }) =>\n                        data &&\n                        setProjTotals({\n                            ...projTotalsRef.current,\n                            __all: data.search ? data.search.total : 0\n                        })\n                )\n                .catch((err) => {\n                    log.error(err)\n                })\n            // HEre's where we get the product totals\n            program.products.reduce((promiseChain, prod) => {\n                const currTask = (): Promise<void> =>\n                    getCurrentToken()\n                        .then((jwt) =>\n                            search(url, jwt, program.machineName, { projType: prod.id, limit: 0, nextToken: 0 })\n                        )\n                        .then(({ data }) => {\n                            data &&\n                                setProjTotals({\n                                    ...projTotalsRef.current,\n                                    [prod.id]: data.search ? data.search.total : 0\n                                })\n                        })\n                        .catch((err) => {\n                            setProjTotals({ ...projTotalsRef.current, [prod.id]: 0 })\n                            log.error(err)\n                        })\n                return promiseChain.then(currTask)\n            }, Promise.resolve())\n        }\n    }, [program, url, getCurrentToken])\n\n    return (\n        <SearchForm\n            projTotals={projTotals}\n            program={program as Program}\n            searchParams={searchParams}\n            setSearchParams={setSearchParams as setSearchParamsType}\n        />\n    )\n}\nSearchFormConnect['whyDidYouRender'] = true\nexport default SearchFormConnect\n","import React, { useState, useCallback, useMemo, useEffect } from 'react'\nimport { History } from 'react-router-dom'\n\nimport log from 'loglevel'\n\nimport { Loading } from '@northarrowresearch/react-common'\nimport { UseHostedReturn } from '@northarrowresearch/react-auth'\nimport { Typography, CircularProgress } from '@material-ui/core'\n\nimport {\n    useDownloads,\n    NotAllowedModal,\n    ProjectModal,\n    config,\n    useProgram,\n    useProject,\n    googleAnalytics\n} from '@riverscapes/react-common'\nimport ResultsPaneConnect from './SearchResults.connect'\nimport SearchFormConnect from './SearchForm.connect'\nimport { appDefaults } from '../config'\nimport { Program, WarehouseRoleEnum, SearchParams, Project } from '@riverscapes/common'\n\nconst url = config.endpoints.graphql as string\n/**\n * This is the over-arching wrapper for the app. It combines all the\n * same place. Time will tell if that's a good strategy.\n */\ninterface Props {\n    auth: UseHostedReturn\n    history: History\n    programs: Program[]\n}\n\nconst AppConnect: React.FC<Props> = ({ history, auth, programs }: Props) => {\n    // This is the project popup.\n    const [searchParams, _setSearchParams] = useState<SearchParams>(appDefaults.searchDefaultParams) // maybe context?\n    // give access to pendingZips asynchronously\n    const setSearchParams = useCallback(\n        (val: SearchParams): void => {\n            googleAnalytics.event('warehouse', 'search', JSON.stringify(val))\n            _setSearchParams(val)\n        },\n        [_setSearchParams]\n    )\n\n    const onProgramChange = useCallback((newProgram: Program) => {\n        googleAnalytics.event('warehouse', 'change_program', newProgram.machineName)\n        setSearchParams(appDefaults.searchDefaultParams)\n    }, [])\n\n    const program = useProgram(programs, onProgramChange)\n    const { project, loading: isProjLoading } = useProject(auth, program, true, false)\n    const { downloadFileFn, downloadZipFile, pendingZips } = useDownloads(auth, program as Program)\n    // const { query, setQuery } = useQueryParams()\n\n    useEffect(() => {\n        if (!program && !project) {\n            document.title = 'Riverscapes Warehouse'\n            googleAnalytics.currentPageView(`warehouse/Program_Chooser`)\n        } else if (program && !project) {\n            googleAnalytics.currentPageView(`warehouse/${program.name}`)\n            document.title = `${program.name} - Riverscapes Warehouse`\n        } else if (program && project) {\n            googleAnalytics.currentPageView(`warehouse/${project.program}/${project.projType}/${project.id}`)\n            document.title = `${project.name} - ${program.name} - Riverscapes Warehouse`\n        }\n    }, [program, project])\n\n    const navigate: (progName: string, projId?: string) => void = useCallback(\n        (progName: string, projId?: string): void => {\n            if (projId && projId.length > 10) history.push('/' + progName + '/' + projId)\n            else history.push('/' + progName)\n        },\n        [history]\n    )\n\n    const downloadFile = useCallback(\n        (proj: Project, fkey: string): void => {\n            googleAnalytics.event('warehouse', 'download_file', `${proj.program}/${proj.projType}/${proj.id}/${fkey}`)\n            downloadFileFn(proj, fkey)\n        },\n        [downloadFileFn]\n    )\n    const downloadZip = useCallback(\n        (proj: Project): Promise<void> => {\n            googleAnalytics.event('warehouse', 'download_zip', `${proj.program}/${proj.projType}/${proj.id}`)\n            return downloadZipFile(proj)\n        },\n        [downloadZipFile]\n    )\n    // Modal should be pure and unaffected by anything other than project state\n    const projectModal = useMemo(\n        () =>\n            project && (\n                <ProjectModal\n                    program={program as Program}\n                    project={project}\n                    showFileTree\n                    onClose={(): void => {\n                        if (program) navigate(program.machineName)\n                    }}\n                    webRaveUrl={appDefaults.webRaveURL}\n                    downloadFile={downloadFile}\n                    pendingZips={pendingZips}\n                    downloadZipFile={downloadZip}\n                />\n            ),\n        [project, downloadFile, downloadZip, navigate, pendingZips, program]\n    )\n\n    const hasViewAccess = program && Object.values(WarehouseRoleEnum).indexOf(program.role) > -1\n    log.debug('App.Connect', { hasViewAccess, program })\n    // The searchConenct should only be affected by search state\n    const searchConnect = useMemo(\n        () => (\n            <React.Fragment>\n                <SearchFormConnect\n                    {...{\n                        getCurrentToken: auth.getCurrentToken,\n                        url,\n                        program: program as Program,\n                        searchParams,\n                        setSearchParams\n                    }}\n                />\n                <ResultsPaneConnect\n                    {...{\n                        getCurrentToken: auth.getCurrentToken,\n                        url,\n                        navigate,\n                        program: program as Program,\n                        searchParams,\n                        setSearchParams,\n                        pendingZips,\n                        downloadZipFile: downloadZip\n                    }}\n                />\n            </React.Fragment>\n        ),\n        [searchParams, program, pendingZips, downloadZip, auth.getCurrentToken, navigate]\n    )\n\n    if (!hasViewAccess) return <NotAllowedModal program={program as Program} onClose={(): void => history.push('/')} />\n\n    return (\n        <React.Fragment>\n            {isProjLoading && (\n                <Loading\n                    logoSVG={<CircularProgress size=\"7rem\" thickness={7} />}\n                    status={\n                        <Typography variant=\"h5\" component=\"div\">\n                            Loading Project...\n                        </Typography>\n                    }\n                    containerProps={{\n                        maxWidth: 'xl',\n                        style: {\n                            position: 'absolute',\n                            zIndex: 1000,\n                            top: 0,\n                            left: 0,\n                            width: '100%',\n                            height: '100%',\n                            background: '#FFFFFF77'\n                        }\n                    }}\n                />\n            )}\n            {searchConnect}\n            {projectModal}\n        </React.Fragment>\n    )\n}\nexport default AppConnect\n","import React from 'react'\nimport IconButton from '@material-ui/core/IconButton'\n\nimport PersonAddIcon from '@material-ui/icons/PersonAdd'\nimport FaceIcon from '@material-ui/icons/Face'\nimport CancelIcon from '@material-ui/icons/Cancel'\n\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport ListItem from '@material-ui/core/ListItem'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport Avatar from '@material-ui/core/Avatar'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\nimport Switch from '@material-ui/core/Switch'\n\n// import { FieldDef } from '../types'\n// import MenuIcon from '@material-ui/icons/Menu'\nimport { WarehouseRoleEnum, UserType } from '@riverscapes/common'\nimport { makeStyles, Theme, StyleRules } from '@material-ui/core/styles'\n// import log from 'loglevel'\n\nexport interface UserRowType extends UserType {\n    loading?: boolean\n}\n\ninterface Props {\n    user: UserRowType\n    isSuperUser?: boolean\n    onChange: (userId: string, newRole: WarehouseRoleEnum | null) => void\n}\n\nconst useStyles = makeStyles(\n    (theme: Theme): StyleRules => ({\n        root: {},\n        allowSelect: {\n            userSelect: 'text',\n            cursor: 'auto'\n        },\n        google: {\n            ...theme.typography.caption,\n            borderRadius: theme.spacing(1.5),\n            padding: theme.spacing(0.5, 1),\n            background: theme.palette.primary.main,\n            color: theme.palette.primary.contrastText,\n            marginLeft: theme.spacing(2),\n            border: `1px solid ${theme.palette.primary.dark}`\n        },\n        removeIcon: {\n            marginLeft: theme.spacing(2)\n        }\n    })\n)\n\nconst AdminRow: React.FC<Props> = ({ user, onChange, isSuperUser }: Props) => {\n    const classes = useStyles()\n    const loading = user.loading\n\n    const onSwitchChange = (swRole: WarehouseRoleEnum, swVal: boolean): void => {\n        if (swRole === WarehouseRoleEnum.Admin) {\n            if (swVal) onChange(user.username, WarehouseRoleEnum.Admin)\n            else onChange(user.username, WarehouseRoleEnum.Participant)\n        } else if (swRole === WarehouseRoleEnum.Participant) {\n            if (swVal) onChange(user.username, WarehouseRoleEnum.Participant)\n            else onChange(user.username, WarehouseRoleEnum.Observer)\n        }\n    }\n    const superUser = user.role === WarehouseRoleEnum.SuperUser\n\n    return (\n        <ListItem disabled={loading || superUser} className={classes.root} divider>\n            <ListItemAvatar>\n                {user.picture && user.picture.length > 0 ? (\n                    <Avatar alt={user.name} src={user.picture} />\n                ) : (\n                    <Avatar alt={user.name}>\n                        <FaceIcon color=\"inherit\" />\n                    </Avatar>\n                )}\n            </ListItemAvatar>\n            <ListItemText\n                id=\"switch-list-label-wifi\"\n                primary={\n                    <span>\n                        <span className={classes.allowSelect}>{user.name}</span>\n                        {user.username.startsWith('google') && <span className={classes.google}>Google</span>}\n                    </span>\n                }\n                secondary={<span className={classes.allowSelect}>{user.email}</span>}\n            />\n            {user.role && (\n                <ListItemSecondaryAction>\n                    {isSuperUser && !superUser && (\n                        <FormControlLabel\n                            control={\n                                <Switch\n                                    edge=\"end\"\n                                    onChange={(e): void => onSwitchChange(WarehouseRoleEnum.Admin, e.target.checked)}\n                                    checked={\n                                        [WarehouseRoleEnum.Admin, WarehouseRoleEnum.SuperUser].indexOf(\n                                            user.role as WarehouseRoleEnum\n                                        ) > -1\n                                    }\n                                    disabled={\n                                        loading ||\n                                        [WarehouseRoleEnum.Observer].indexOf(user.role as WarehouseRoleEnum) > -1\n                                    }\n                                    inputProps={{ 'aria-labelledby': 'switch-list-label-wifi' }}\n                                />\n                            }\n                            labelPlacement=\"start\"\n                            label=\"Program Admin\"\n                        />\n                    )}\n                    {!superUser && (\n                        <FormControlLabel\n                            control={\n                                <Switch\n                                    edge=\"end\"\n                                    onChange={(e): void =>\n                                        onSwitchChange(WarehouseRoleEnum.Participant, e.target.checked)\n                                    }\n                                    checked={\n                                        [\n                                            WarehouseRoleEnum.Participant,\n                                            WarehouseRoleEnum.Admin,\n                                            WarehouseRoleEnum.SuperUser\n                                        ].indexOf(user.role as WarehouseRoleEnum) > -1\n                                    }\n                                    disabled={\n                                        loading ||\n                                        [WarehouseRoleEnum.Admin, WarehouseRoleEnum.SuperUser].indexOf(\n                                            user.role as WarehouseRoleEnum\n                                        ) > -1\n                                    }\n                                    inputProps={{ 'aria-labelledby': 'switch-list-label-wifi' }}\n                                />\n                            }\n                            labelPlacement=\"start\"\n                            label=\"Participant\"\n                        />\n                    )}\n\n                    {!superUser && (\n                        <Tooltip title={'Remove this user from the program'}>\n                            <>\n                                {/* Tooltip cannot have a disabled child */}\n                                <IconButton\n                                    edge=\"end\"\n                                    className={classes.removeIcon}\n                                    aria-label=\"delete\"\n                                    color=\"secondary\"\n                                    disabled={loading}\n                                    onClick={(): void => onChange(user.username, null)}\n                                >\n                                    <CancelIcon />\n                                </IconButton>\n                            </>\n                        </Tooltip>\n                    )}\n                </ListItemSecondaryAction>\n            )}\n            {!user.role && (\n                <ListItemSecondaryAction>\n                    <Tooltip title={'Add this user to the program'}>\n                        <>\n                            {/* Tooltip cannot have a disabled child */}\n                            <IconButton\n                                edge=\"end\"\n                                aria-label=\"delete\"\n                                color=\"secondary\"\n                                disabled={loading}\n                                onClick={(): void => onChange(user.username, WarehouseRoleEnum.Observer)}\n                            >\n                                <PersonAddIcon />\n                            </IconButton>\n                        </>\n                    </Tooltip>\n                </ListItemSecondaryAction>\n            )}\n        </ListItem>\n    )\n}\n\nexport default AdminRow\n","import React, { useState, useMemo } from 'react'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport { WarehouseRoleEnum, UserType } from '@riverscapes/common'\nimport AdminRow from './AdminRow'\nimport List from '@material-ui/core/List'\nimport FormControl from '@material-ui/core/FormControl'\nimport Paper from '@material-ui/core/Paper'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport Input from '@material-ui/core/Input'\nimport { makeStyles } from '@material-ui/core/styles'\nimport SearchOutlinedIcon from '@material-ui/icons/SearchOutlined'\nimport { Typography } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: 'flex',\n        overflow: 'hidden',\n        flexDirection: 'column',\n        margin: theme.spacing(2)\n    },\n    description: {\n        margin: theme.spacing(0, 2)\n    },\n    list: {\n        flexGrow: 1,\n        overflow: 'scroll',\n        margin: theme.spacing(1, 2)\n    },\n    formControl: {\n        margin: theme.spacing(1, 2)\n    }\n}))\n\ninterface Props {\n    users: UserType[]\n    isSuperUser?: boolean\n    title: string\n    description?: string\n    onChange: (userId: string, newRole: WarehouseRoleEnum | null) => void\n}\n\nconst AdminList: React.FC<Props> = ({ users, onChange, title, description, isSuperUser }: Props) => {\n    const classes = useStyles()\n    const [search, setSearch] = useState<string>()\n    const dispUsers = useMemo(() => {\n        if (search && search.length >= 3) {\n            const searchArr = (search as string).split(' ').filter((s) => s.length >= 3)\n            return users.filter((u) => {\n                // Make sure every work is represented in the name or email\n                return searchArr.every((word) => {\n                    return (\n                        u.name.toLocaleLowerCase().indexOf(word.toLocaleLowerCase()) > -1 ||\n                        u.email.toLocaleLowerCase().indexOf(word.toLocaleLowerCase()) > -1\n                    )\n                })\n            })\n        } else return users\n    }, [users, search])\n\n    return (\n        <Paper className={classes.root}>\n            <Toolbar>\n                <Typography variant=\"subtitle1\">{title}</Typography>\n            </Toolbar>\n            <Typography className={classes.description} variant=\"caption\">\n                {description || ' '}\n            </Typography>\n            <FormControl className={classes.formControl}>\n                <Input\n                    fullWidth\n                    onChange={(e): void => setSearch(e.target.value)}\n                    startAdornment={\n                        <InputAdornment position=\"start\">\n                            <SearchOutlinedIcon />\n                        </InputAdornment>\n                    }\n                />\n            </FormControl>\n            <List className={classes.list}>\n                {dispUsers.map((u, idx) => (\n                    <AdminRow key={`userRow-${idx}`} user={u} onChange={onChange} isSuperUser={isSuperUser} />\n                ))}\n            </List>\n        </Paper>\n    )\n}\nexport default AdminList\n","import React from 'react'\nimport { WarehouseRoleEnum, UserType, Program } from '@riverscapes/common'\nimport { Loading } from '@northarrowresearch/react-common'\nimport Paper from '@material-ui/core/Paper'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Typography } from '@material-ui/core'\nimport { warehouseIconUrl } from '../../config'\nimport AdminList from './AdminList'\n\nconst useStyles = makeStyles((theme) => ({\n    rootContainer: {\n        height: '100%',\n        width: '100%',\n        overflow: 'hidden',\n        position: 'relative'\n    },\n    root: {\n        height: '100%',\n        width: '100%',\n        display: 'flex',\n        overflow: 'hidden',\n        flexDirection: 'column'\n    },\n    paperContainer: {\n        display: 'flex',\n        width: '100%',\n        height: '100%',\n        overflow: 'hidden',\n        '&>:first-child': {\n            flex: '1 1 60%'\n        },\n        '&>:last-child': {\n            flex: '1 1 40%'\n        }\n    },\n    instructions: {\n        color: theme.palette.primary.contrastText,\n        background: theme.palette.primary.main,\n        margin: theme.spacing(2),\n        padding: theme.spacing(2)\n    },\n    list: {\n        flexGrow: 1,\n        overflow: 'scroll',\n        margin: theme.spacing(1, 2)\n    },\n    loading: {\n        // border: '10px solid red',\n        background: '#FFFFFFCC',\n        position: 'absolute',\n        zIndex: 1000\n    }\n}))\n\ninterface Props {\n    users: UserType[]\n    program: Program\n    isSuperUser?: boolean\n    loading?: boolean\n    onChange: (userId: string, newRole: WarehouseRoleEnum | null) => void\n}\n\nfunction sortUsers(ulist: UserType[]): void {\n    ulist.sort((a: UserType, b: UserType): number => {\n        return a.name.toLowerCase().localeCompare(b.name.toLowerCase())\n    })\n}\n\nconst AdminPanel: React.FC<Props> = ({ users, program, loading, isSuperUser, onChange }: Props) => {\n    const classes = useStyles()\n    const progUsers = users.filter((u) => u.role)\n    sortUsers(progUsers)\n    const nonUsers = users.filter((u) => !u.role)\n    sortUsers(nonUsers)\n\n    const isProgPublic = program && program.meta && program.meta.access && program.meta.access === 'PUBLIC'\n    const logoSVG = <img src={warehouseIconUrl} alt=\"logo\" />\n    return (\n        <div className={classes.rootContainer}>\n            {loading && (\n                <Loading\n                    logoSVG={logoSVG}\n                    title={'Riverscapes Warehouse'}\n                    message={`Loading Users: ${users.length}`}\n                    containerProps={{ maxWidth: 'xl', className: classes.loading }}\n                />\n            )}\n            <div className={classes.root}>\n                <Paper className={classes.instructions}>\n                    <Typography variant=\"h4\" color=\"inherit\">\n                        User admin: {program && program.name}\n                    </Typography>\n                    {isProgPublic ? (\n                        <Typography variant=\"body2\" color=\"inherit\">\n                            This program is <strong>public</strong>. All authenticated users in the Riverscapes user\n                            pool will be able to see and download projects.\n                            <strong>Participants</strong> can add or remove projects.\n                        </Typography>\n                    ) : (\n                        <Typography variant=\"body2\" color=\"inherit\">\n                            This program is <strong>private</strong> so you have to explicitly add users to view it.{' '}\n                            <strong>Participants</strong> can add or remove projects.\n                        </Typography>\n                    )}\n                </Paper>\n                <div className={classes.paperContainer}>\n                    <AdminList\n                        users={progUsers}\n                        onChange={onChange}\n                        isSuperUser={isSuperUser}\n                        title=\"Current program users:\"\n                        description=\"Everyone in this list is an Observer and can view and download all projects.\"\n                    />\n                    <AdminList\n                        users={nonUsers}\n                        onChange={onChange}\n                        isSuperUser={isSuperUser}\n                        title=\"Add users:\"\n                        description={\n                            isProgPublic\n                                ? 'Users in this list CAN see everything in the program because the program is PUBLIC'\n                                : 'Users in this list cannot see or donwload projects in this program'\n                        }\n                    />\n                </div>\n            </div>\n        </div>\n    )\n}\nexport default AdminPanel\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\nimport { Program, WarehouseRoleEnum, adminGetUsers, adminUpdateUserPermissions } from '@riverscapes/common'\nimport AdminPanel from './AdminPanel'\nimport { UserRowType } from './AdminRow'\nimport { History } from 'react-router-dom'\nimport { useProgram, config } from '@riverscapes/react-common'\nimport { UseHostedReturn } from '@northarrowresearch/react-auth'\nimport log from 'loglevel'\n\ninterface Props {\n    programs?: Program[]\n    history?: History\n    auth: UseHostedReturn\n}\ntype UserState = {\n    users: UserRowType[]\n    loading: boolean\n}\n\nconst AdminConnect: React.FC<Props> = ({ programs, auth, history }: Props) => {\n    const [userState, setUsersState] = useState<UserState>({\n        users: [],\n        loading: true\n    })\n    const userStateRef = useRef<UserState>()\n    const nextTokenRef = useRef<string>()\n    userStateRef.current = userState\n\n    const program = useProgram(programs)\n\n    // Safety check and redirect if not allowed\n    useEffect(() => {\n        if (\n            history &&\n            program &&\n            program.role !== WarehouseRoleEnum.SuperUser &&\n            program.role !== WarehouseRoleEnum.Admin\n        ) {\n            history.push(`/${program.machineName}`)\n        }\n    }, [program, history])\n\n    useEffect(() => {\n        if (!program || !auth) return\n        async function startFunc(): Promise<void> {\n            let first = true\n            while (first || nextTokenRef.current) {\n                first = false\n                nextTokenRef.current = await auth\n                    .getCurrentToken()\n                    .then((jwt) =>\n                        adminGetUsers(\n                            config.endpoints.graphql as string,\n                            jwt,\n                            program?.machineName as string,\n                            50,\n                            nextTokenRef.current\n                        )\n                    )\n                    .then((res) => {\n                        const newToken = res.data?.getUsers.nextToken\n                        // filter out the self. You're not allowed to change your own permissions\n                        const myToken = auth.user ? auth.user.accessToken.payload.username : 'NOBODY'\n                        const incomingUsers = (res.data?.getUsers.users || []).filter((u) => u.username !== myToken)\n\n                        setUsersState({\n                            users: [...(userStateRef.current?.users || []), ...incomingUsers],\n                            loading: Boolean(newToken)\n                        })\n                        return newToken\n                    })\n                    .catch((err) => {\n                        log.error(err)\n                        return undefined\n                    })\n            }\n        }\n        startFunc()\n    }, [program, auth])\n\n    const userChange = useCallback(\n        (userId: string, newRole: WarehouseRoleEnum | null): Promise<void> => {\n            // Store the user so we can return it if the query fails\n            const foundUser = (userStateRef.current as UserState).users.find((u) => u.username === userId)\n            if (!foundUser) throw new Error('Could not find user to change permissions of')\n            const backupUser = Object.assign({}, foundUser)\n\n            // Optimistically set the change we want to see with loading greyed out\n            setUsersState({\n                ...(userStateRef.current as UserState),\n                users: (userStateRef.current as UserState).users.map((u) => {\n                    if (u.username !== userId) return u\n                    else {\n                        return {\n                            ...u,\n                            role: newRole,\n                            loading: true\n                        }\n                    }\n                })\n            })\n            const reset = (): void => {\n                log.error('ADMIN:::Operation failed. Putting the record back')\n                setUsersState({\n                    ...(userStateRef.current as UserState),\n                    users: (userStateRef.current as UserState).users.map((u) => {\n                        if (u.username !== userId) return u\n                        else return backupUser\n                    })\n                })\n            }\n            const myTimeout = setTimeout(reset, 3000)\n            return auth\n                .getCurrentToken()\n                .then((jwt) =>\n                    adminUpdateUserPermissions(\n                        config.endpoints.graphql as string,\n                        jwt,\n                        userId,\n                        program?.machineName as string,\n                        newRole\n                    )\n                )\n                .then((data) => {\n                    clearTimeout(myTimeout)\n                    // Set the optimistic loading state first\n                    setUsersState({\n                        ...(userStateRef.current as UserState),\n                        users: (userStateRef.current as UserState).users.map((u) => {\n                            if (u.username !== userId) return u\n                            else\n                                return {\n                                    ...u,\n                                    ...data.data?.updateUser,\n                                    loading: false\n                                }\n                        })\n                    })\n                    log.debug('Admin UPDATE', data)\n                })\n                .catch((err) => {\n                    log.error('User update query failure', err)\n                    reset()\n                })\n        },\n        [auth, program]\n    )\n\n    return (\n        <AdminPanel\n            users={userState.users}\n            isSuperUser={Boolean(program && program.role === WarehouseRoleEnum.SuperUser)}\n            onChange={userChange}\n            loading={Boolean(userState.loading)}\n            program={program as Program}\n        />\n    )\n}\nexport default AdminConnect\n","import React, { useMemo } from 'react'\nimport { ThemeProvider } from '@material-ui/styles'\nimport { Program } from '@riverscapes/common'\nimport { Footer, Topbar, themes, config, useProgram } from '@riverscapes/react-common'\nimport { AppFrame } from '@northarrowresearch/react-common'\nimport { History, useHistory } from 'react-router-dom'\nimport { ContainerProps } from '@material-ui/core/Container'\nimport log from 'loglevel'\n\ninterface Props {\n    children: React.ReactChild | React.ReactChildren | React.ReactElement\n    programs?: Program[]\n    history?: History\n    noScroll?: boolean\n    containerProps?: Partial<ContainerProps>\n    signOut?: () => Promise<void>\n}\n\nconst AppWrapper: React.FC<Props> = ({ children, history, programs, signOut, containerProps, noScroll }: Props) => {\n    const program = useProgram(programs)\n    return (\n        <ThemeProvider theme={themes.home}>\n            <AppFrame\n                containerProps={{ maxWidth: !program ? 'sm' : 'md', ...containerProps }}\n                noScroll={noScroll}\n                topbar={\n                    <Topbar\n                        history={history}\n                        programs={programs as Program[]}\n                        title=\"Riverscapes Warehouse\"\n                        signOutHandler={signOut}\n                        provisional\n                        shareUrl={window.location.href}\n                        program={program as Program}\n                    />\n                }\n                footer={<Footer version={config.version as string} />}\n            >\n                <>{children}</>\n            </AppFrame>\n        </ThemeProvider>\n    )\n}\nexport default AppWrapper\n\nexport const CosmosAppWrapper: React.FC<Props> = ({ children, programs, containerProps, noScroll }: Props) => {\n    const signOut = (): Promise<void> => Promise.resolve(log.info('logging out'))\n    const history = useHistory()\n    const program = useMemo(() => {\n        try {\n            return programs ? programs[0] : null\n        } catch {\n            return null\n        }\n    }, [programs])\n    return (\n        <ThemeProvider theme={themes.home}>\n            <AppFrame\n                containerProps={{ maxWidth: !program ? 'sm' : 'md', ...containerProps }}\n                noScroll={noScroll}\n                topbar={\n                    <Topbar\n                        history={history}\n                        programs={programs as Program[]}\n                        title=\"Riverscapes Warehouse\"\n                        signOutHandler={signOut}\n                        program={program as Program}\n                    />\n                }\n                footer={<Footer version={config.version as string} />}\n            >\n                <>{children}</>\n            </AppFrame>\n        </ThemeProvider>\n    )\n}\n","import React, { useState, useEffect, useCallback } from 'react'\nimport { Route, Switch, History, useHistory } from 'react-router-dom'\n\nimport { useHosted, UseHostedReturn } from '@northarrowresearch/react-auth'\nimport { authCheck, Program, Project, getPrograms } from '@riverscapes/common'\nimport { ProgramChooser, LoginScreen, config, googleAnalytics, LocalForageCache } from '@riverscapes/react-common'\nimport { Loading } from '@northarrowresearch/react-common'\n\nimport { warehouseIconUrl } from '../config'\nimport AppConnect from './App.connect'\nimport AdminComponent from '../components/Admin'\nimport AppWrapper from '../components/AppWrapper'\nimport log from 'loglevel'\n\ngoogleAnalytics.init()\n\nconst LOCAL_CACHE = new LocalForageCache('AppAuth', 5 * 60) // 1 hour ttl since programs almost never change\nLOCAL_CACHE.prune() // prune once on load\n\nconst AppAuthConnect: React.FC = () => {\n    const [authInfo, setAuthInfo] = useState<Record<string, unknown>>()\n    const [programsState, setProgramsState] = useState<{ programs: Program[]; loading: boolean }>()\n    const [isAppPreLoading, setIsAppPreLoading] = useState(true)\n\n    const auth: UseHostedReturn = useHosted(authInfo as Record<string, unknown>, false, config.isDev)\n    const history = useHistory()\n\n    // Go get all the startup info we need to start logging in\n    // Initial fetch gets us all the program objects\n    useEffect(() => {\n        authCheck(config.endpoints.graphql as string, '')\n            .then((authResp) => {\n                log.debug('authResp', authResp)\n                const authVals = authResp.data?.auth\n                if (authVals && authVals.region) {\n                    setAuthInfo({\n                        region: authVals.region,\n                        userPoolId: authVals.userPool,\n                        userPoolWebClientId: authVals.clientId,\n                        mandatorySignIn: true,\n                        oauth: {\n                            domain: authVals.domain,\n                            scope: ['email', 'profile', 'openid'],\n                            redirectSignIn: config.redirectUrl.toString(),\n                            redirectSignOut: config.redirectUrl.toString(),\n                            responseType: 'code'\n                        }\n                    })\n                    setIsAppPreLoading(false)\n                }\n            })\n            .catch((err) => {\n                log.error('api.getPrograms error', err)\n            })\n    }, [])\n\n    // This lets us do a redirect after login using localstorage\n    useEffect(() => {\n        if (!history) return\n        const check = async () => {\n            const cacheKey = `RSUrl`\n            const storageUrl = await LOCAL_CACHE.get<string>(cacheKey)\n\n            const localUrl = history.location.pathname\n            log.debug(`[${cacheKey}] Cache:::REDIRECT checking ${storageUrl} === ${localUrl}`)\n\n            if (!auth.isAuthenticated && !auth.error && auth.isAuthComplete) {\n                log.debug(`[${cacheKey}] Cache:::REDIRECT:::SET ${localUrl}`)\n                LOCAL_CACHE.set(cacheKey, localUrl)\n            }\n            if (storageUrl && auth.isAuthenticated && auth.isAuthComplete && !auth.error) {\n                if (localUrl !== storageUrl) {\n                    log.debug(`[${cacheKey}] Cache:::REDIRECT Needed! ${localUrl} !== ${storageUrl}`)\n                    history.push(storageUrl)\n                }\n                // Delete once we're done to stop strange behaviour later\n                LOCAL_CACHE.del(cacheKey)\n            }\n        }\n        check()\n    }, [history, auth])\n\n    const navigate = useCallback((history: History, program: Program, project?: Project): void => {\n        if (project) history.push('/' + program.machineName + '/' + project.id)\n        else history.push('/' + program.machineName)\n    }, [])\n\n    // Initial fetch gets us all the program objects\n    useEffect(() => {\n        if (!auth.isAuthenticated || programsState?.programs) return\n\n        setProgramsState({ programs: [], loading: true })\n        auth.getCurrentToken()\n            .then((jwt) => getPrograms(config.endpoints.graphql as string, jwt))\n            .then((allPrograms) => {\n                log.debug('API GetPrograms', allPrograms)\n                if (allPrograms.data && allPrograms.data.programs) {\n                    setProgramsState({ programs: allPrograms.data.programs, loading: false })\n                }\n            })\n            .catch((err) => {\n                log.error('api.getPrograms error', err)\n                // setIsAppPreLoading(false)\n            })\n    }, [auth, programsState])\n\n    const logoSVG = <img src={warehouseIconUrl} alt=\"logo\" />\n\n    // render the login helper screen if that's called for\n    if (isAppPreLoading) {\n        return (\n            <AppWrapper>\n                <Loading\n                    logoSVG={logoSVG}\n                    title={'Riverscapes Warehouse'}\n                    message={'Loading authentication info'}\n                    version={config.version}\n                />\n            </AppWrapper>\n        )\n    } else {\n        if (!auth.isAuthenticated) {\n            if (!auth.isAuthComplete) {\n                return (\n                    <AppWrapper>\n                        <Loading\n                            logoSVG={logoSVG}\n                            title={'Riverscapes Warehouse'}\n                            message={'Authenticating'}\n                            version={config.version}\n                        />\n                    </AppWrapper>\n                )\n            }\n            return (\n                <AppWrapper noScroll>\n                    <LoginScreen signIn={auth.signIn} title={'Riverscapes Data Warehouse'} />\n                </AppWrapper>\n            )\n        } else if (!programsState || programsState?.loading) {\n            return (\n                <AppWrapper>\n                    <Loading\n                        logoSVG={logoSVG}\n                        title={'Riverscapes Warehouse'}\n                        message={'Loading Programs'}\n                        version={config.version}\n                    />\n                </AppWrapper>\n            )\n        } else {\n            const appWrapProps = { navigate, signOut: auth.signOut, programs: programsState?.programs as Program[] }\n            return (\n                <Switch>\n                    <Route\n                        path=\"/:programId/admin\"\n                        render={(props): React.ReactElement => (\n                            <AppWrapper {...props} {...appWrapProps} noScroll containerProps={{ maxWidth: 'lg' }}>\n                                <AdminComponent {...props} programs={programsState?.programs} auth={auth} />\n                            </AppWrapper>\n                        )}\n                    />\n                    <Route\n                        path=\"/:programId/:projectId?\"\n                        render={(props): React.ReactElement => (\n                            <AppWrapper {...props} {...appWrapProps}>\n                                <AppConnect {...props} auth={auth} programs={programsState?.programs} />\n                            </AppWrapper>\n                        )}\n                    />\n                    <Route\n                        path=\"/\"\n                        render={(props): React.ReactElement => (\n                            <AppWrapper {...props} {...appWrapProps} containerProps={{ maxWidth: 'sm' }}>\n                                <ProgramChooser {...props} navigate={navigate} programs={programsState?.programs} />\n                            </AppWrapper>\n                        )}\n                    />\n                    <Route\n                        path=\"*\"\n                        render={(props): React.ReactElement => (\n                            <AppWrapper {...props} {...appWrapProps}>\n                                404 Not found\n                            </AppWrapper>\n                        )}\n                    />\n                </Switch>\n            )\n        }\n    }\n}\nexport default AppAuthConnect\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport AppAuthConnect from './connectors/AppAuth.connect'\nimport { HashRouter } from 'react-router-dom'\nimport log from 'loglevel'\nimport { hashHistory } from '@riverscapes/react-common'\nimport { devSetup } from '@northarrowresearch/react-common'\n\n// import * as serviceWorker from './serviceWorker'\n// Here's our global overrides css\nimport './base.css'\n\n// This does its own process.env.NODE_ENV check\n// In production it only presents a minimal set of tools\ndevSetup()\n\n// This is the font we need\nrequire('typeface-roboto')\n\nReactDOM.render(\n    <HashRouter basename=\"/\" history={hashHistory}>\n        <AppAuthConnect />\n    </HashRouter>,\n    document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.register()\n\n// On android this will trick the back button into not closing the app\nwindow.addEventListener('load', () => {\n    window.history.pushState({}, '')\n})\n\n// In Chrome > 52 we need to explicitly request persistent storage to make sure our\n// stuff isn't cleaned up automatically.\nif (navigator.storage && navigator.storage.persist) {\n    navigator.storage.persist().then((granted) => {\n        if (granted) {\n            log.debug('Storage will not be cleared except by explicit user action')\n        } else {\n            log.warn('Storage may be cleared by the UA under storage pressure.')\n        }\n    })\n} else {\n    log.warn('navigator.storage API not implemented.')\n}\n"],"sourceRoot":""}